head	1.26;
access;
symbols;
locks; strict;
comment	@# @;


1.26
date	2003.03.23.20.20.53;	author tg;	state dead;
branches;
next	1.25;

1.25
date	2003.03.22.22.33.26;	author tg;	state Exp;
branches;
next	1.24;

1.24
date	2003.03.22.16.14.16;	author tg;	state Exp;
branches;
next	1.23;

1.23
date	2003.03.07.18.06.49;	author tg;	state Exp;
branches;
next	1.22;

1.22
date	2003.03.04.16.52.27;	author tg;	state Exp;
branches;
next	1.21;

1.21
date	2003.03.02.02.27.52;	author tg;	state Exp;
branches;
next	1.20;

1.20
date	2003.03.02.01.08.32;	author tg;	state Exp;
branches;
next	1.19;

1.19
date	2003.03.01.15.23.52;	author tg;	state Exp;
branches;
next	1.18;

1.18
date	2003.03.01.13.16.06;	author tg;	state Exp;
branches;
next	1.17;

1.17
date	2003.03.01.12.02.50;	author tg;	state Exp;
branches;
next	1.16;

1.16
date	2003.03.01.10.05.34;	author tg;	state Exp;
branches;
next	1.15;

1.15
date	2003.03.01.00.08.28;	author tg;	state Exp;
branches;
next	1.14;

1.14
date	2003.02.28.18.22.10;	author tg;	state Exp;
branches;
next	1.13;

1.13
date	2003.02.24.21.32.06;	author tg;	state Exp;
branches;
next	1.12;

1.12
date	2003.02.23.22.04.07;	author tg;	state Exp;
branches;
next	1.11;

1.11
date	2003.02.23.20.05.16;	author tg;	state Exp;
branches;
next	1.10;

1.10
date	2003.02.23.19.00.34;	author tg;	state Exp;
branches;
next	1.9;

1.9
date	2003.02.23.17.59.43;	author tg;	state Exp;
branches;
next	1.8;

1.8
date	2003.02.15.15.27.31;	author tg;	state Exp;
branches;
next	1.7;

1.7
date	2003.02.11.21.08.30;	author tg;	state Exp;
branches;
next	1.6;

1.6
date	2003.02.11.20.02.18;	author tg;	state Exp;
branches;
next	1.5;

1.5
date	2003.02.10.19.41.25;	author tg;	state Exp;
branches;
next	1.4;

1.4
date	2003.01.27.21.17.20;	author tg;	state Exp;
branches;
next	1.3;

1.3
date	2003.01.27.17.47.09;	author tg;	state Exp;
branches;
next	1.2;

1.2
date	2003.01.27.15.38.17;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2003.01.26.13.10.25;	author tg;	state Exp;
branches;
next	;


desc
@@


1.26
log
@sync everything over to MirBSD-new
@
text
@Index: src/bin/rcp/Makefile
===================================================================
RCS file: /cvs/src/bin/rcp/Makefile,v
retrieving revision 1.8
diff -u -r1.8 Makefile
--- src/bin/rcp/Makefile	9 May 2002 18:44:23 -0000	1.8
+++ src/bin/rcp/Makefile	22 Mar 2003 14:33:24 -0000
@@@@ -1,3 +1,4 @@@@
+#	$MirBSD: obsd.misc,v 1.25 2003/03/22 22:33:26 tg Exp $
 #	$OpenBSD: Makefile,v 1.8 2002/05/09 18:44:45 millert Exp $
 
 PROG=	rcp
@@@@ -8,7 +9,7 @@@@
 
 .include <bsd.own.mk>	# For KERBEROS
 
-.if (${KERBEROS:L} == "yes")
+.if (${KERBEROS4:L} == "yes")
 .PATH:	${.CURDIR}/../../usr.bin/rsh
 SRCS+=	krcmd.c kcmd.c
 CFLAGS+=-DKERBEROS
Index: src/bin/systrace/Makefile
===================================================================
RCS file: /cvs/src/bin/systrace/Makefile,v
retrieving revision 1.8
diff -u -r1.8 Makefile
--- src/bin/systrace/Makefile	16 Oct 2002 15:00:46 -0000	1.8
+++ src/bin/systrace/Makefile	7 Mar 2003 18:07:29 -0000
@@@@ -2,7 +2,7 @@@@
 
 PROG=	systrace
 BINDIR?=        /bin
-CFLAGS+=-I.
+CFLAGS+=-I. -I${.CURDIR}
 CFLAGS+=-Wall -Wstrict-prototypes -Wmissing-prototypes -Wpointer-arith \
 	-Wno-uninitialized -Werror
 CFLAGS+=-DYY_NO_UNPUT
@@@@ -16,4 +16,3 @@@@
 .include <bsd.prog.mk>
 
 .depend: parse.c lex.c
-
Index: src/distrib/crunch/Makefile.inc
===================================================================
RCS file: /cvs/src/distrib/crunch/Makefile.inc,v
retrieving revision 1.3
diff -u -r1.3 Makefile.inc
--- src/distrib/crunch/Makefile.inc	29 Jan 2001 01:18:59 -0000	1.3
+++ src/distrib/crunch/Makefile.inc	7 Mar 2003 18:07:29 -0000
@@@@ -1,5 +1,4 @@@@
 #	$OpenBSD: Makefile.inc,v 1.3 2001/01/29 01:19:21 deraadt Exp $
 
 # modify to taste
-DESTDIR=
 BINDIR?= /usr/bin
Index: src/distrib/crunch/crunchgen/Makefile
===================================================================
RCS file: /cvs/src/distrib/crunch/crunchgen/Makefile,v
retrieving revision 1.2
diff -u -r1.2 Makefile
--- src/distrib/crunch/crunchgen/Makefile	25 Sep 1996 06:40:32 -0000	1.2
+++ src/distrib/crunch/crunchgen/Makefile	22 Mar 2003 14:33:09 -0000
@@@@ -1,8 +1,9 @@@@
+#	$MirBSD: obsd.misc,v 1.25 2003/03/22 22:33:26 tg Exp $
 #	$OpenBSD: Makefile,v 1.2 1996/09/25 06:40:52 etheisen Exp $
 
 PROG=		crunchgen
 SRCS=		crunchgen.c crunched_skel.c
-CFLAGS+=	-g -Wall
+CFLAGS+=	-Wall
 CPPFLAGS+=	-DMF_NAMES='"Makefile.bsd-wrapper","Makefile"'
 CLEANFILES+=	crunched_skel.c
 
Index: src/distrib/crunch/crunchide/crunchide.c
===================================================================
RCS file: /cvs/src/distrib/crunch/crunchide/crunchide.c,v
retrieving revision 1.17
diff -u -r1.17 crunchide.c
--- src/distrib/crunch/crunchide/crunchide.c	27 Jan 2003 19:41:08 -0000	1.17
+++ src/distrib/crunch/crunchide/crunchide.c	4 Mar 2003 16:52:58 -0000
@@@@ -73,11 +73,9 @@@@
 #include <sys/stat.h>
 
 /*
- * The alpha and mips based ports define _NLIST_DO_AOUT although it doesn't
- * fully support a.out.
+ * if __ELF__ is defined, do not bother supporting AOUT.
  */
-#if defined(_NLIST_DO_AOUT) && !(defined(__alpha__) || defined(__mips__) || \
-    (defined(__sparc__) && defined(__ELF__)))
+#if defined(_NLIST_DO_AOUT) && !(defined(__ELF__))
 #define DO_AOUT
 #endif
 
@@@@ -218,7 +216,8 @@@@
 #define IS_GLOBAL_DEFINED(sp) \
 	(((sp)->n_type & N_EXT) && ((sp)->n_type & N_TYPE) != N_UNDF)
 
-#if defined(__sparc__) && !defined(__ELF__)
+#ifdef DO_AOUT
+#if defined(__sparc__)
 /* is the relocation entry dependent on a symbol? */
 #define IS_SYMBOL_RELOC(rp)   \
 	((rp)->r_extern || \
@@@@ -228,6 +227,7 @@@@
 /* is the relocation entry dependent on a symbol? */
 #define IS_SYMBOL_RELOC(rp)   \
 		  ((rp)->r_extern||(rp)->r_baserel||(rp)->r_jmptable)
+#endif
 #endif
 
 void            check_reloc(char *filename, struct relocation_info * relp);
Index: src/distrib/i386/common/Makefile.inc
===================================================================
RCS file: /cvs/src/distrib/i386/common/Makefile.inc,v
retrieving revision 1.8
diff -u -r1.8 Makefile.inc
--- src/distrib/i386/common/Makefile.inc	23 Sep 2002 18:30:41 -0000	1.8
+++ src/distrib/i386/common/Makefile.inc	7 Mar 2003 18:07:29 -0000
@@@@ -58,9 +58,9 @@@@
 	strip bsd.strip
 	gzip -c9 bsd.strip > bsd.gz
 
-bsd.rd:	${IMAGE} bsd rdsetroot
+bsd.rd:	${IMAGE} bsd elfrdsetroot
 	cp bsd bsd.rd
-	${.OBJDIR}/rdsetroot bsd.rd < ${IMAGE}
+	${.OBJDIR}/elfrdsetroot bsd.rd < ${IMAGE}
 
 
 bsd:
@@@@ -86,6 +86,9 @@@@
 	cp ${REALIMAGE} ${IMAGE}
 	rm ${REALIMAGE}
 
+elfrdsetroot:	${TOP}/../common/elfrdsetroot.c
+	${HOSTCC} -DDEBUG -o elfrdsetroot ${TOP}/../common/elfrdsetroot.c
+
 rdsetroot:	${TOP}/../common/rdsetroot.c
 	${HOSTCC} -DDEBUG -o rdsetroot ${TOP}/../common/rdsetroot.c
 
@@@@ -102,7 +105,7 @@@@
 	cp ${FS} ${DESTDIR}/snapshot/${FS}
 
 ${CBIN}.mk ${CBIN}.cache ${CBIN}.c: ${CRUNCHCONF}
-	crunchgen -D ${BSDSRCDIR} -L ${DESTDIR}/usr/lib \
+	crunchgen -E -D ${BSDSRCDIR} -L ${DESTDIR}/usr/lib \
 	-c ${CBIN}.c -e ${CBIN} -m ${CBIN}.mk ${CRUNCHCONF}
 
 ${CBIN}: ${CBIN}.mk ${CBIN}.cache ${CBIN}.c
@@@@ -120,7 +123,7 @@@@
 
 clean cleandir:
 	/bin/rm -f core ${IMAGE} ${CBIN} ${CBIN}.mk ${CBIN}*.cache \
-	    *.o *.lo *.c bsd bsd.rd bsd.gz bsd.strip floppy*.fs rdsetroot \
+	    *.o *.lo *.c bsd bsd.rd bsd.gz bsd.strip floppy*.fs elfrdsetroot \
 	    ${CRUNCHCONF}
 
 .include <bsd.obj.mk>
Index: src/distrib/special/pppd/Makefile
===================================================================
RCS file: /cvs/src/distrib/special/pppd/Makefile,v
retrieving revision 1.2
diff -u -r1.2 Makefile
--- src/distrib/special/pppd/Makefile	17 Jun 1999 20:42:08 -0000	1.2
+++ src/distrib/special/pppd/Makefile	7 Mar 2003 18:07:29 -0000
@@@@ -14,6 +14,6 @@@@
 
 LDADD=	-lutil
 DPADD=	${LIBUTIL}
-CFLAGS+= -I. -DHAVE_PATHS_H
+CFLAGS+= -I. -I${.CURDIR} -DHAVE_PATHS_H
 
 .include <bsd.prog.mk>
Index: src/distrib/special/rsh/Makefile
===================================================================
RCS file: /cvs/src/distrib/special/rsh/Makefile,v
retrieving revision 1.2
diff -u -r1.2 Makefile
--- src/distrib/special/rsh/Makefile	17 Jun 1999 20:42:09 -0000	1.2
+++ src/distrib/special/rsh/Makefile	7 Mar 2003 18:07:30 -0000
@@@@ -6,6 +6,7 @@@@
 COPTS+=-Os
 
 KERBEROS=no
+KERBEROS4=no
 
 .PATH:	${.CURDIR}/../../../usr.bin/rsh
 MAN=
Index: src/games/hack/Makefile
===================================================================
RCS file: /cvs/src/games/hack/Makefile,v
retrieving revision 1.13
diff -u -r1.13 Makefile
--- src/games/hack/Makefile	31 May 2002 03:46:13 -0000	1.13
+++ src/games/hack/Makefile	7 Mar 2003 18:07:30 -0000
@@@@ -1,7 +1,7 @@@@
 #	$OpenBSD: Makefile,v 1.13 2002/05/31 03:46:35 pjanzen Exp $
 
 PROG=	hack
-CFLAGS+=-I.
+CFLAGS+=-I. -I${.CURDIR}
 SRCS+=	hack.onames.h
 SRCS+=	alloc.c hack.Decl.c hack.apply.c hack.bones.c hack.c hack.cmd.c \
 	hack.do.c hack.do_name.c hack.do_wear.c hack.dog.c hack.eat.c \
Index: src/gnu/egcs/Makefile.bsd-wrapper
===================================================================
RCS file: /cvs/src/gnu/egcs/Makefile.bsd-wrapper,v
retrieving revision 1.5
diff -u -r1.5 Makefile.bsd-wrapper
--- src/gnu/egcs/Makefile.bsd-wrapper	11 Sep 2001 17:35:24 -0000	1.5
+++ src/gnu/egcs/Makefile.bsd-wrapper	7 Mar 2003 18:07:30 -0000
@@@@ -1,6 +1,12 @@@@
 #	$OpenBSD: Makefile.bsd-wrapper,v 1.5 2001/09/11 17:35:46 jason Exp $
 
-SUBDIR+= libiberty libio libstdc++ libf2c libobjc
+SUBDIR+= libiberty libio libstdc++
+
+.if make(obj)
+SUBDIR+= libf2c libobjc
+.endif
+
+CXXOPTS+= -Wno-deprecated
 
 # just so that the main directory will have a subdir, which simplifies
 # libf2c/libobjc build 
Index: src/gnu/egcs/gcc/Makefile.bsd-wrapper
===================================================================
RCS file: /cvs/src/gnu/egcs/gcc/Makefile.bsd-wrapper,v
retrieving revision 1.14
diff -u -r1.14 Makefile.bsd-wrapper
--- src/gnu/egcs/gcc/Makefile.bsd-wrapper	16 Feb 2003 18:28:18 -0000	1.14
+++ src/gnu/egcs/gcc/Makefile.bsd-wrapper	7 Mar 2003 18:07:30 -0000
@@@@ -1,23 +1,18 @@@@
+#	$MirBSD: obsd.misc,v 1.25 2003/03/22 22:33:26 tg Exp $
 #	$OpenBSD: Makefile.bsd-wrapper,v 1.14 2003/02/16 18:28:40 deraadt Exp $
 
 MAN=		cccp.1 gcc.1 gcc-local.1 protoize.1 gcov.1
-MLINKS+=	gcc.1 cc.1
+MLINKS+=	gcc.1 pgcc.1
 MLINKS+=	cccp.1 cpp.1
 MLINKS+=	protoize.1 unprotoize.1
 
-.if defined(BOOTSTRAP)
 LANGUAGES=--enable-languages=c
-.else
-LANGUAGES=--enable-languages='c,c++,objc,f77' 
-MAN+=		cp/g++.1 f/g77.1
-MLINKS+=	g++.1 c++.1
-MLINKS+=	g77.1 f77.1
-.endif
 
 VAXHOST_CFLAGS=	-DIN_GCC -DOPENBSD_NATIVE -DHAVE_CONFIG_H -O0
 
 GXX_INCDIR=	/usr/include/g++
-GNUCFLAGS=	CFLAGS="${CFLAGS} ${COPTS} -DOPENBSD_NATIVE"
+GNUCFLAGS=	XCFLAGS="${CFLAGS} ${COPTS} -DOPENBSD_NATIVE" \
+		TCFLAGS="-O2 -DOPENBSD_NATIVE" CC="${CC}" CPP="${CPP}"
 CLEANFILES=	.gdbinit */.gdbinit *.info* \
 		c-parse.c c-parse.h c-parse.y cexp.c cp/parse.c cp/parse.h \
 		f/*.info* objc-parse.c objc-parse.y target_path \
@@@@ -64,6 +59,7 @@@@
 
 config.status: Makefile.in configure c-parse.in
 	PATH="/bin:/usr/bin:/sbin:/usr/sbin" \
+	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS} ${COPTS}" \
 	INSTALL_PROGRAM="${INSTALL} ${INSTALL_COPY} ${INSTALL_STRIP}" \
 	/bin/sh ${.CURDIR}/configure --with-gnu-as --with-gnu-ld \
 		--prefix=/usr --mandir='$$(prefix)/share/man' \
@@@@ -101,29 +97,16 @@@@
 		build_infodir=. \
 		tooldir=/tmp assertdir=/tmp \
 		INSTALL_TARGET='install-common $$(INSTALL_HEADERS) \
-		     $$(INSTALL_LIBGCC) install-info \
+		     $$(INSTALL_LIBGCC) \
 		     intl.install lang.install-normal' \
 		NO_TARGET_GCC=true bindir=${DESTDIR}/usr/bin \
 		install
 	chown -R ${BINOWN}.${BINGRP} ${DESTDIR}/usr/lib/gcc-lib
 	chmod -R a+rX ${DESTDIR}/usr/lib/gcc-lib
-#	if [ -e ${DESTDIR}/usr/lib/libf2c.a ]; then \
-#		chown ${BINOWN}.${BINGRP} ${DESTDIR}/usr/lib/libf2c.a; \
-#		chmod 444 ${DESTDIR}/usr/lib/libf2c.a; \
-#	fi
-	if [ -e ${DESTDIR}/usr/include/f2c.h ]; then \
-		chown ${BINOWN}.${BINGRP} ${DESTDIR}/usr/include/f2c.h; \
-		chmod 444 ${DESTDIR}/usr/include/f2c.h; \
-	fi
 	${INSTALL} ${INSTALL_COPY} ${INSTALL_STRIP} -m 755 cpp \
 	   ${DESTDIR}/usr/libexec/cpp
 	${INSTALL} ${INSTALL_COPY} ${INSTALL_STRIP} -m 755 xgcc \
-	   ${DESTDIR}/usr/bin/gcc
-	ln -f ${DESTDIR}/usr/bin/gcc ${DESTDIR}/usr/bin/cc
-	[ -f ${DESTDIR}/usr/bin/g77 ] && \
-		ln -f ${DESTDIR}/usr/bin/g77 ${DESTDIR}/usr/bin/f77
-#	ln -fs `cat target-path`/cpp \
-#		${DESTDIR}/usr/libexec
+	   ${DESTDIR}/usr/bin/pgcc
 
 clean cleandir: 
 	-@@if [ -e Makefile ]; then ${MAKE} distclean; fi
Index: src/gnu/egcs/gcc/config.gcc
===================================================================
RCS file: /cvs/src/gnu/egcs/gcc/config.gcc,v
retrieving revision 1.7
diff -u -r1.7 config.gcc
--- src/gnu/egcs/gcc/config.gcc	10 Nov 2002 22:47:52 -0000	1.7
+++ src/gnu/egcs/gcc/config.gcc	7 Mar 2003 18:07:30 -0000
@@@@ -721,8 +721,10 @@@@
 	# needed to unconfuse gdb
 	tm_file="${tm_file} exec-stack.h"
 	tmake_file="t-libc-ok t-openbsd i386/t-openbsd"
-	# we need collect2 until our bug is fixed...
-	use_collect2=yes
+	tm_file="i386/i386.h i386/att.h svr4.h i386/openbsd.h i386/perform.h"
+	gas=yes
+	gnu_ld=yes
+	stabs=yes
 	;;
 i[34567]86-*-coff*)
 	tm_file=i386/i386-coff.h
Index: src/gnu/egcs/gcc/config/i386/openbsd.h
===================================================================
RCS file: /cvs/src/gnu/egcs/gcc/config/i386/openbsd.h,v
retrieving revision 1.2
diff -u -r1.2 openbsd.h
--- src/gnu/egcs/gcc/config/i386/openbsd.h	5 Sep 2001 08:22:14 -0000	1.2
+++ src/gnu/egcs/gcc/config/i386/openbsd.h	22 Mar 2003 14:58:56 -0000
@@@@ -1,3 +1,4 @@@@
+/*	$MirBSD: obsd.misc,v 1.25 2003/03/22 22:33:26 tg Exp $	*/
 /* Configuration for an OpenBSD i386 target.
    
    Copyright (C) 1999 Free Software Foundation, Inc.
@@@@ -19,25 +20,33 @@@@
 the Free Software Foundation, 59 Temple Place - Suite 330,
 Boston, MA 02111-1307, USA.  */
 
-/* This is tested by i386gas.h.  */
-#define YES_UNDERSCORES
-
-#include <i386/gstabs.h>
-
-/* Get perform_* macros to build libgcc.a.  */
-#include <i386/perform.h>
-
 /* Get generic OpenBSD definitions.  */
-#define OBSD_OLD_GAS
 #include <openbsd.h>
 
+/* This gets defined in tm.h->linux.h->svr4.h, and keeps us from using
+   libraries compiled with the native cc, so undef it. */
+#undef NO_DOLLAR_IN_LABEL
+
+/* Override the default comment-starter of "/".  */
+#undef ASM_COMMENT_START
+#define ASM_COMMENT_START "#"
+
+
 /* This goes away when the math-emulator is fixed */
 #undef TARGET_DEFAULT
 #define TARGET_DEFAULT \
   (MASK_80387 | MASK_IEEE_FP | MASK_FLOAT_RETURNS | MASK_NO_FANCY_MATH_387)
 
 /* Run-time target specifications */
-#define CPP_PREDEFINES "-D__unix__ -D__i386__ -D__OpenBSD__ -Asystem(unix) -Asystem(OpenBSD) -Acpu(i386) -Amachine(i386)"
+#define CPP_PREDEFINES "-D__unix__ -D__ELF__ -D__i386__ -D__OpenBSD__ -Asystem(unix) -Asystem(OpenBSD) -Acpu(i386) -Amachine(i386)"
+
+/* As an elf system, we need crtbegin/crtend stuff.  */
+#undef STARTFILE_SPEC
+#define STARTFILE_SPEC "\
+	%{!shared: %{pg:gcrt0%O%s} %{!pg:%{p:gcrt0%O%s} %{!p:crt0%O%s}} \
+	crtbegin%O%s} %{shared:crtbeginS%O%s}"
+#undef ENDFILE_SPEC
+#define ENDFILE_SPEC "%{!shared:crtend%O%s} %{shared:crtendS%O%s}"
 
 /* Layout of source language data types.  */
 
@@@@ -51,8 +60,11 @@@@
 #undef WCHAR_TYPE
 #define WCHAR_TYPE "int"
 
+#undef WCHAR_UNSIGNED
+#define WCHAR_UNSIGNED 0
+
 #undef WCHAR_TYPE_SIZE
-#define WCHAR_TYPE_SIZE 32
+#define WCHAR_TYPE_SIZE BITS_PER_WORD
 
 /* Assembler format: overall framework.  */
 
@@@@ -62,6 +74,10 @@@@
 #undef ASM_APP_OFF
 #define ASM_APP_OFF "#NO_APP\n"
 
+#undef SET_ASM_OP
+#define SET_ASM_OP	".set"
+
+
 /* The following macros were originally stolen from i386v4.h.
    These have to be defined to get PIC code correct.  */
 
@@@@ -72,7 +88,79 @@@@
    i386.md for an explanation of the expression this outputs.  */
 #undef ASM_OUTPUT_ADDR_DIFF_ELT
 #define ASM_OUTPUT_ADDR_DIFF_ELT(FILE, BODY, VALUE, REL) \
-  fprintf (FILE, "\t.long __GLOBAL_OFFSET_TABLE_+[.-%s%d]\n", LPREFIX, VALUE)
+  fprintf (FILE, "\t.long _GLOBAL_OFFSET_TABLE_+[.-%s%d]\n", LPREFIX, VALUE)
+
+/* Use stabs instead of DWARF debug format.  */
+#undef PREFERRED_DEBUGGING_TYPE
+#define PREFERRED_DEBUGGING_TYPE DBX_DEBUG
+
+/* Copy this from the svr4 specifications... */
+/* Define the register numbers to be used in Dwarf debugging information.
+   The SVR4 reference port C compiler uses the following register numbers
+   in its Dwarf output code:
+	0 for %eax (gnu regno = 0)
+	1 for %ecx (gnu regno = 2)
+	2 for %edx (gnu regno = 1)
+	3 for %ebx (gnu regno = 3)
+	4 for %esp (gnu regno = 7)
+	5 for %ebp (gnu regno = 6)
+	6 for %esi (gnu regno = 4)
+	7 for %edi (gnu regno = 5)
+   The following three DWARF register numbers are never generated by
+   the SVR4 C compiler or by the GNU compilers, but SDB on x86/svr4
+   believes these numbers have these meanings.
+	8  for %eip    (no gnu equivalent)
+	9  for %eflags (no gnu equivalent)
+	10 for %trapno (no gnu equivalent)
+   It is not at all clear how we should number the FP stack registers
+   for the x86 architecture.  If the version of SDB on x86/svr4 were
+   a bit less brain dead with respect to floating-point then we would
+   have a precedent to follow with respect to DWARF register numbers
+   for x86 FP registers, but the SDB on x86/svr4 is so completely
+   broken with respect to FP registers that it is hardly worth thinking
+   of it as something to strive for compatibility with.
+   The version of x86/svr4 SDB I have at the moment does (partially)
+   seem to believe that DWARF register number 11 is associated with
+   the x86 register %st(0), but that's about all.  Higher DWARF
+   register numbers don't seem to be associated with anything in
+   particular, and even for DWARF regno 11, SDB only seems to under-
+   stand that it should say that a variable lives in %st(0) (when
+   asked via an `=' command) if we said it was in DWARF regno 11,
+   but SDB still prints garbage when asked for the value of the
+   variable in question (via a `/' command).
+   (Also note that the labels SDB prints for various FP stack regs
+   when doing an `x' command are all wrong.)
+   Note that these problems generally don't affect the native SVR4
+   C compiler because it doesn't allow the use of -O with -g and
+   because when it is *not* optimizing, it allocates a memory
+   location for each floating-point variable, and the memory
+   location is what gets described in the DWARF AT_location
+   attribute for the variable in question.
+   Regardless of the severe mental illness of the x86/svr4 SDB, we
+   do something sensible here and we use the following DWARF
+   register numbers.  Note that these are all stack-top-relative
+   numbers.
+	11 for %st(0) (gnu regno = 8)
+	12 for %st(1) (gnu regno = 9)
+	13 for %st(2) (gnu regno = 10)
+	14 for %st(3) (gnu regno = 11)
+	15 for %st(4) (gnu regno = 12)
+	16 for %st(5) (gnu regno = 13)
+	17 for %st(6) (gnu regno = 14)
+	18 for %st(7) (gnu regno = 15)
+*/
+#undef DBX_REGISTER_NUMBER
+#define DBX_REGISTER_NUMBER(n) \
+((n) == 0 ? 0 \
+ : (n) == 1 ? 2 \
+ : (n) == 2 ? 1 \
+ : (n) == 3 ? 3 \
+ : (n) == 4 ? 6 \
+ : (n) == 5 ? 7 \
+ : (n) == 6 ? 5 \
+ : (n) == 7 ? 4 \
+ : ((n) >= FIRST_STACK_REG && (n) <= LAST_STACK_REG) ? (n)+3 \
+ : (-1))
 
 /* Assembler format: sections.  */
 
@@@@ -88,15 +176,12 @@@@
 
 /* Assembler format: alignment output.  */
 
-/* Kludgy test: when gas is upgraded, it will have p2align, and no problems
-   with nops.  */
-#ifndef HAVE_GAS_MAX_SKIP_P2ALIGN
-/* i386 OpenBSD still uses an older gas that doesn't insert nops by default
-   when the .align directive demands to insert extra space in the text
-   segment.  */
-#undef ASM_OUTPUT_ALIGN
-#define ASM_OUTPUT_ALIGN(FILE,LOG) \
-  if ((LOG)!=0) fprintf ((FILE), "\t.align %d,0x90\n", (LOG))
+#ifdef HAVE_GAS_MAX_SKIP_P2ALIGN
+#define ASM_OUTPUT_MAX_SKIP_ALIGN(FILE,LOG,MAX_SKIP) \
+  if ((LOG) != 0) {\
+    if ((MAX_SKIP) == 0) fprintf ((FILE), "\t.p2align %d\n", (LOG)); \
+    else fprintf ((FILE), "\t.p2align %d,,%d\n", (LOG), (MAX_SKIP)); \
+  }
 #endif
 
 /* Stack & calling: profiling.  */
@@@@ -116,21 +201,15 @@@@
 
 /* Assembler format: alignment output.  */
 
-/* A C statement to output to the stdio stream FILE an assembler
-   command to advance the location counter to a multiple of 1<<LOG
-   bytes if it is within MAX_SKIP bytes.
-
-   This will be used to align code labels according to Intel 
-   recommendations, in prevision of binutils upgrade.  */
-#ifdef HAVE_GAS_MAX_SKIP_P2ALIGN
-#define ASM_OUTPUT_MAX_SKIP_ALIGN(FILE,LOG,MAX_SKIP)			\
-  do {									\
-    if ((LOG) != 0) {							\
-      if ((MAX_SKIP) == 0) fprintf ((FILE), "\t.p2align %d\n", (LOG));	\
-      else fprintf ((FILE), "\t.p2align %d,,%d\n", (LOG), (MAX_SKIP));	\
-    }									\
-  } while (0)
-#endif
+/* Note that we pick up ASM_OUTPUT_MAX_SKIP_ALIGN from i386/gas.h */
 
 /* Note that we pick up ASM_OUTPUT_MI_THUNK from unix.h.  */
 
+#undef LINK_SPEC
+#define LINK_SPEC \
+  "%{!shared:%{!nostdlib:%{!r*:%{!e*:-e __start}}}} \
+   %{shared:-shared} %{R*} \
+   %{static:-Bstatic} \
+   %{!static:-Bdynamic} \
+   %{assert*} \
+   %{!dynamic-linker:-dynamic-linker /usr/libexec/ld.so}"
Index: src/gnu/egcs/libf2c/Makefile.bsd-wrapper
===================================================================
RCS file: /cvs/src/gnu/egcs/libf2c/Makefile.bsd-wrapper,v
retrieving revision 1.5
diff -u -r1.5 Makefile.bsd-wrapper
--- src/gnu/egcs/libf2c/Makefile.bsd-wrapper	30 May 2002 20:45:42 -0000	1.5
+++ src/gnu/egcs/libf2c/Makefile.bsd-wrapper	7 Mar 2003 18:07:30 -0000
@@@@ -141,6 +141,7 @@@@
 	PATH="/bin:/usr/bin:/sbin:/usr/sbin" \
 	r=$(EGCS_OBJDIR) \
 	INSTALL_PROGRAM="${INSTALL} ${INSTALL_COPY} ${INSTALL_STRIP}" \
+	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS} ${COPTS}" \
 	/bin/sh ${.CURDIR}/configure \
 		--prefix=/usr --with-local-prefix=/usr ${CF} \
 		&& touch config.status
Index: src/gnu/egcs/libiberty/Makefile.bsd-wrapper1
===================================================================
RCS file: /cvs/src/gnu/egcs/libiberty/Makefile.bsd-wrapper1,v
retrieving revision 1.1
diff -u -r1.1 Makefile.bsd-wrapper1
--- src/gnu/egcs/libiberty/Makefile.bsd-wrapper1	26 May 1999 15:46:38 -0000	1.1
+++ src/gnu/egcs/libiberty/Makefile.bsd-wrapper1	7 Mar 2003 18:07:30 -0000
@@@@ -7,11 +7,15 @@@@
 CPPFLAGS+=      -I$(.CURDIR) -I$(.CURDIR)/../include -I$(.OBJDIR)
 
 needed-list: config.status
-	${MAKE} ${GNUCFLAGS} CC=${CC} needed-list
+	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS} ${COPTS}" \
+	${MAKE} ${GNUCFLAGS} CC="${CC}" CPP="${CPP}" needed-list
 
 config.status: Makefile.in configure 
-	PATH="/bin:/usr/bin:/sbin:/usr/sbin" \
+	PATH="/bin:/usr/bin:/sbin:/usr/sbin:/usr/local/bin" \
 	INSTALL_PROGRAM="${INSTALL} ${INSTALL_COPY} ${INSTALL_STRIP}" \
+	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS} ${COPTS}" \
 	/bin/sh ${.CURDIR}/configure \
 		--prefix=/usr --with-local-prefix=/usr ${CF} \
 		&& touch config.status
+
+.include <bsd.own.mk>
Index: src/gnu/egcs/libio/editbuf.cc
===================================================================
RCS file: /cvs/src/gnu/egcs/libio/editbuf.cc,v
retrieving revision 1.1.1.1
diff -u -r1.1.1.1 editbuf.cc
--- src/gnu/egcs/libio/editbuf.cc	26 May 1999 13:38:13 -0000	1.1.1.1
+++ src/gnu/egcs/libio/editbuf.cc	22 Mar 2003 15:12:42 -0000
@@@@ -1,3 +1,4 @@@@
+/*	$MirBSD: obsd.misc,v 1.25 2003/03/22 22:33:26 tg Exp $	*/
 /* This is part of libio/iostream, providing -*- C++ -*- input/output.
 Copyright (C) 1993 Free Software Foundation
 
@@@@ -31,6 +31,7 @@@@
 #include "editbuf.h"
 #include <stddef.h>
 #include <stdlib.h>
+#include <string.h>
 
 /* NOTE: Some of the code here is taken from GNU emacs */
 /* Hence this file falls under the GNU License! */
Index: src/gnu/egcs/libio/editbuf.h
===================================================================
RCS file: /cvs/src/gnu/egcs/libio/editbuf.h,v
retrieving revision 1.1.1.1
diff -u -r1.1.1.1 editbuf.h
--- src/gnu/egcs/libio/editbuf.h	26 May 1999 13:38:13 -0000	1.1.1.1
+++ src/gnu/egcs/libio/editbuf.h	22 Mar 2003 14:58:50 -0000
@@@@ -1,3 +1,4 @@@@
+/*	$MirBSD: obsd.misc,v 1.25 2003/03/22 22:33:26 tg Exp $	*/
 /* This is part of libio/iostream, providing -*- C++ -*- input/output.
 Copyright (C) 1993 Free Software Foundation
 
@@@@ -76,7 +77,7 @@@@
 };
 
 struct edit_streambuf : public streambuf {
-    friend edit_buffer;
+    friend struct edit_buffer;
     edit_string *str;
     edit_streambuf* next; // Chain of edit_streambuf's for a edit_buffer.
     short _mode;
Index: src/gnu/egcs/libio/parsestream.cc
===================================================================
RCS file: /cvs/src/gnu/egcs/libio/parsestream.cc,v
retrieving revision 1.1.1.1
diff -u -r1.1.1.1 parsestream.cc
--- src/gnu/egcs/libio/parsestream.cc	26 May 1999 13:38:16 -0000	1.1.1.1
+++ src/gnu/egcs/libio/parsestream.cc	22 Mar 2003 15:12:39 -0000
@@@@ -1,3 +1,4 @@@@
+/*	$MirBSD: obsd.misc,v 1.25 2003/03/22 22:33:26 tg Exp $	*/
 /* This is part of libio/iostream, providing -*- C++ -*- input/output.
 Copyright (C) 1993 Free Software Foundation
 
@@@@ -30,6 +31,7 @@@@
 #include "libioP.h"
 #include "parsestream.h"
 #include <stdlib.h>
+#include <string.h>
 
 streambuf* parsebuf::setbuf(char*, int)
 {
Index: src/gnu/egcs/libio/pfstream.cc
===================================================================
RCS file: /cvs/src/gnu/egcs/libio/pfstream.cc,v
retrieving revision 1.1.1.1
diff -u -r1.1.1.1 pfstream.cc
--- src/gnu/egcs/libio/pfstream.cc	26 May 1999 13:38:16 -0000	1.1.1.1
+++ src/gnu/egcs/libio/pfstream.cc	22 Mar 2003 14:58:47 -0000
@@@@ -1,3 +1,4 @@@@
+/*	$MirBSD: obsd.misc,v 1.25 2003/03/22 22:33:26 tg Exp $	*/
 /* This is part of libio/iostream, providing -*- C++ -*- input/output.
 Copyright (C) 1993 Free Software Foundation
 
@@@@ -30,6 +31,7 @@@@
 #include "libioP.h"
 #include <pfstream.h>
 #include <procbuf.h>
+#include <string.h>
 
 ipfstream::ipfstream(const char *name, int mode, int prot)
 {
Index: src/gnu/egcs/libstdc++/Makefile.bsd-wrapper
===================================================================
RCS file: /cvs/src/gnu/egcs/libstdc++/Makefile.bsd-wrapper,v
retrieving revision 1.12
diff -u -r1.12 Makefile.bsd-wrapper
--- src/gnu/egcs/libstdc++/Makefile.bsd-wrapper	9 Feb 2003 19:31:28 -0000	1.12
+++ src/gnu/egcs/libstdc++/Makefile.bsd-wrapper	7 Mar 2003 18:07:31 -0000
@@@@ -27,7 +27,7 @@@@
 		fi
 
 LIB=		stdc++
-CXXFLAGS+=	-fno-implicit-templates
+CXXFLAGS+=	-fno-implicit-templates -nostdinc++ -I/usr/include/g++
 CPPFLAGS+=	-I$(.CURDIR) -I$(.CURDIR)/stl -I$(.CURDIR)/../libio -I$(IO_OBJDIR)
 DPADD+=		${LIBM}
 LDADD+=		-lm
Index: src/gnu/usr.bin/binutils/Makefile.bsd-wrapper
===================================================================
RCS file: /cvs/src/gnu/usr.bin/binutils/Makefile.bsd-wrapper,v
retrieving revision 1.50
diff -u -r1.50 Makefile.bsd-wrapper
--- src/gnu/usr.bin/binutils/Makefile.bsd-wrapper	16 Feb 2003 15:08:41 -0000	1.50
+++ src/gnu/usr.bin/binutils/Makefile.bsd-wrapper	7 Mar 2003 18:07:31 -0000
@@@@ -1,6 +1,6 @@@@
 #	$OpenBSD: Makefile.bsd-wrapper,v 1.50 2003/02/16 15:09:03 espie Exp $
 
-NEW_BINUTILS=alpha mips powerpc hppa sparc64 sparc
+NEW_BINUTILS=alpha mips powerpc hppa sparc64 sparc i386
 
 SUBDIRS=	opcodes bfd
 ALL_X11_MODULES=
@@@@ -16,7 +16,7 @@@@
 
 MAN=		binutils/objdump.1 c++filt.1
 
-.if (${MACHINE_ARCH} != "unknown")
+.if (${MACHINE_ARCH} != "hppa")
 SUBDIRS+=	gdb mmalloc
 MAN+=		gdb/gdb.1
 ALL_X11_MODULES+=all-gdb
@@@@ -38,7 +38,7 @@@@
 INSTALL_MODULES=${SUBDIRS:S/^/install-/g}
 	
 all:	config.status
-	SUBDIRS='${SUBDIRS}' ${MAKE} CC="${CC}" \
+	SUBDIRS='${SUBDIRS}' ${MAKE} CC="${CC}" CPP="${CPP}" \
 	    CFLAGS="${CFLAGS} ${COPTS}" LDFLAGS=${LDSTATIC} \
 	    scriptdir=${PREFIX}/libdata \
 	    tooldir=${PREFIX} \
@@@@ -47,7 +47,7 @@@@
 	    ALL_X11_MODULES="${ALL_X11_MODULES}" all info
 	cd ${.OBJDIR}/binutils && \
 	    ${MAKE} CC="${CC}" CFLAGS="${CFLAGS} ${COPTS}" \
-	    LDFLAGS=${LDSTATIC} objdump
+	    CPP="${CPP}" LDFLAGS=${LDSTATIC} objdump
 
 .include <bsd.own.mk>
 
@@@@ -59,6 +59,7 @@@@
 
 do-config: .USE
 	PATH="/bin:/usr/bin:/sbin:/usr/sbin" \
+	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS} ${COPTS}" \
 	sh ${.CURDIR}/configure --prefix=${PREFIX} \
 	    --infodir='$${prefix}/share/info' \
 	    --disable-nls --disable-gdbtk --disable-commonbfdlib ${CF}
Index: src/gnu/usr.bin/binutils/bfd/config.bfd
===================================================================
RCS file: /cvs/src/gnu/usr.bin/binutils/bfd/config.bfd,v
retrieving revision 1.27
diff -u -r1.27 config.bfd
--- src/gnu/usr.bin/binutils/bfd/config.bfd	11 Aug 2002 22:51:26 -0000	1.27
+++ src/gnu/usr.bin/binutils/bfd/config.bfd	7 Mar 2003 18:07:31 -0000
@@@@ -347,11 +347,11 @@@@
     targ_defvec=bfd_elf32_i386_vec
     targ_selvecs=i386coff_vec
     ;;
-  i[3456]86-*-netbsdelf*) 
+  i[3456]86-*-netbsdelf* | i386-*-openbsd*)
     targ_defvec=bfd_elf32_i386_vec
     targ_selvecs=i386netbsd_vec
     ;;
-  i[3456]86-*-netbsdaout* | i[3456]86-*-netbsd* | i[3456]86-*-openbsd*)
+  i[3456]86-*-netbsdaout* | i[3456]86-*-netbsd*)
     targ_defvec=i386netbsd_vec
     targ_selvecs="bfd_elf32_i386_vec i386bsd_vec"
     targ_underscore=yes
Index: src/gnu/usr.bin/binutils/gas/config/tc-i386.c
===================================================================
RCS file: /cvs/src/gnu/usr.bin/binutils/gas/config/tc-i386.c,v
retrieving revision 1.6
diff -u -r1.6 tc-i386.c
--- src/gnu/usr.bin/binutils/gas/config/tc-i386.c	13 May 2002 17:07:14 -0000	1.6
+++ src/gnu/usr.bin/binutils/gas/config/tc-i386.c	22 Mar 2003 14:58:40 -0000
@@@@ -1,3 +1,4 @@@@
+/*	$MirBSD: obsd.misc,v 1.25 2003/03/22 22:33:26 tg Exp $	*/
 /* i386.c -- Assemble code for the Intel 80386
    Copyright 1989, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
    2000, 2001
@@@@ -157,7 +157,7 @@@@
 
 /* This array holds the chars that always start a comment.  If the
    pre-processor is disabled, these aren't very useful.  */
-#if defined (TE_I386AIX) || ((defined (OBJ_ELF) || defined (OBJ_MAYBE_ELF)) && ! defined (TE_LINUX) && !defined(TE_FreeBSD))
+#if defined (TE_I386AIX) || ((defined (OBJ_ELF) || defined (OBJ_MAYBE_ELF)) && ! defined (TE_LINUX) && !defined(TE_FreeBSD) && !defined(__OpenBSD__))
 /* Putting '/' here makes it impossible to use the divide operator.
    However, we need it for compatibility with SVR4 systems.  */
 const char comment_chars[] = "#/";
@@@@ -175,7 +175,7 @@@@
    #NO_APP at the beginning of its output.
    Also note that comments started like this one will always work if
    '/' isn't otherwise defined.  */
-#if defined (TE_I386AIX) || ((defined (OBJ_ELF) || defined (OBJ_MAYBE_ELF)) && ! defined (TE_LINUX) && !defined(TE_FreeBSD))
+#if defined (TE_I386AIX) || ((defined (OBJ_ELF) || defined (OBJ_MAYBE_ELF)) && ! defined (TE_LINUX) && !defined(TE_FreeBSD) && !defined(__OpenBSD__))
 const char line_comment_chars[] = "";
 #else
 const char line_comment_chars[] = "/";
Index: src/gnu/usr.bin/binutils/gas/configure
===================================================================
RCS file: /cvs/src/gnu/usr.bin/binutils/gas/configure,v
retrieving revision 1.26
diff -u -r1.26 configure
--- src/gnu/usr.bin/binutils/gas/configure	11 Aug 2002 22:51:26 -0000	1.26
+++ src/gnu/usr.bin/binutils/gas/configure	7 Mar 2003 18:07:31 -0000
@@@@ -2348,7 +2348,7 @@@@
       i386-*-bsd*)          fmt=aout em=386bsd ;;
       i386-*-netbsd0.8)     fmt=aout em=386bsd ;;
       i386-*-netbsd*)       fmt=aout em=nbsd bfd_gas=yes;;
-      i386-*-openbsd*)      fmt=aout em=nbsd bfd_gas=yes;;
+      i386-*-openbsd*)      fmt=elf em=nbsd;;
       i386-*-linux*aout* | i386-*-linux*oldld)   fmt=aout em=linux ;;
       i386-*-linux*coff*)   fmt=coff em=linux ;;
       i386-*-linux-gnu*)    fmt=elf em=linux bfd_gas=yes ;;
Index: src/gnu/usr.bin/binutils/gas/configure.in
===================================================================
RCS file: /cvs/src/gnu/usr.bin/binutils/gas/configure.in,v
retrieving revision 1.20
diff -u -r1.20 configure.in
--- src/gnu/usr.bin/binutils/gas/configure.in	11 Aug 2002 22:51:26 -0000	1.20
+++ src/gnu/usr.bin/binutils/gas/configure.in	7 Mar 2003 18:07:31 -0000
@@@@ -243,7 +243,7 @@@@
       i386-*-bsd*)          fmt=aout em=386bsd ;;
       i386-*-netbsd0.8)     fmt=aout em=386bsd ;;
       i386-*-netbsd*)       fmt=aout em=nbsd bfd_gas=yes;;
-      i386-*-openbsd*)      fmt=aout em=nbsd bfd_gas=yes;;
+      i386-*-openbsd*)      fmt=elf em=nbsd;;
       i386-*-linux*aout* | i386-*-linux*oldld)   fmt=aout em=linux ;;
       i386-*-linux*coff*)   fmt=coff em=linux ;;
       i386-*-linux-gnu*)    fmt=elf em=linux bfd_gas=yes ;;
Index: src/gnu/usr.bin/binutils/gdb/config/i386/nm-obsd.h
===================================================================
RCS file: /cvs/src/gnu/usr.bin/binutils/gdb/config/i386/nm-obsd.h,v
retrieving revision 1.2
diff -u -r1.2 nm-obsd.h
--- src/gnu/usr.bin/binutils/gdb/config/i386/nm-obsd.h	29 Mar 1998 22:17:13 -0000	1.2
+++ src/gnu/usr.bin/binutils/gdb/config/i386/nm-obsd.h	22 Mar 2003 15:12:29 -0000
@@@@ -1,3 +1,4 @@@@
+/*	$MirBSD: obsd.misc,v 1.25 2003/03/22 22:33:26 tg Exp $	*/
 /* Native-dependent definitions for Intel 386 running OpenBSD, for GDB.
    Copyright 1986, 1987, 1989, 1992, 1994 Free Software Foundation, Inc.
 
@@@@ -17,8 +18,69 @@@@
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.  */
 
+#define SVR4_SHARED_LIBS
+
 /* Get generic OpenBSD native definitions. */
+
 #include "nm-obsd.h"
 
 #define FLOAT_INFO extern i386_float_info (); \
 						  i386_float_info ()
+
+
+#include "solib.h"	/* Support for shared libraries. */
+
+/* The Net- and OpenBSD link.h structure definitions have different names
+   than the SunOS version, but the structures are very similar,
+   so we can use solib.c by defining the SunOS names.  */
+#define link_object	sod
+#define lo_name		sod_name
+#define lo_library	sod_library
+#define lo_unused	sod_reserved
+#define lo_major	sod_major
+#define lo_minor	sod_minor
+#define lo_next		sod_next
+
+#define l_addr		som_addr
+#define l_name		som_path
+#define l_next		som_next
+#define lm_lop		som_sod
+#define lm_lob		som_sodbase
+#define l_prev		som_sodbase
+#define lm_rwt		som_write
+#define lm_ld		som_dynamic
+#define lm_lpd		som_spd
+
+#define link_dynamic_2	section_dispatch_table
+#define ld_loaded	sdt_loaded
+#define ld_need		sdt_sods
+#define ld_rules	sdt_rules
+#define ld_got		sdt_got
+#define ld_plt		sdt_plt
+#define ld_rel		sdt_rel
+#define ld_hash		sdt_hash
+#define ld_stab		sdt_nzlist
+#define ld_stab_hash	sdt_filler2
+#define ld_buckets	sdt_buckets
+#define ld_symbols	sdt_strings
+#define ld_symb_size	sdt_str_sz
+#define ld_text		sdt_text_sz
+#define ld_plt_sz	sdt_plt_sz
+
+#define rtc_symb	rt_symbol
+#define rtc_sp		rt_sp
+#define rtc_next	rt_next
+
+#define r_debug		so_debug
+#define ldd_version	dd_version
+#define ldd_in_debugger	dd_in_debugger
+#define ldd_sym_loaded	dd_sym_loaded
+#define ldd_bp_addr	dd_bpt_addr
+#define ldd_bp_inst	dd_bpt_shadow
+#define ldd_cp		dd_cc
+
+#define link_dynamic	_dynamic
+#define ld_version	d_version
+#define ldd		d_debug
+#define ld_un		d_un
+#define ld_2		d_sdt
Index: src/gnu/usr.bin/binutils/ld/configure.tgt
===================================================================
RCS file: /cvs/src/gnu/usr.bin/binutils/ld/configure.tgt,v
retrieving revision 1.26
diff -u -r1.26 configure.tgt
--- src/gnu/usr.bin/binutils/ld/configure.tgt	11 Aug 2002 22:51:26 -0000	1.26
+++ src/gnu/usr.bin/binutils/ld/configure.tgt	7 Mar 2003 18:07:31 -0000
@@@@ -147,7 +147,7 @@@@
 i[3456]86-*-unixware)	targ_emul=elf_i386 ;;
 i[3456]86-*-solaris*)	targ_emul=elf_i386 ;;
 i[3456]86-*-netbsd*)	targ_emul=i386nbsd ;;
-i[3456]86-*-openbsd*)	targ_emul=i386nbsd ;;
+i[3456]86-*-openbsd*)	targ_emul=elf_i386 ;;
 i[3456]86-*-netware)	targ_emul=i386nw ;;
 i[3456]86-*-elf*)	targ_emul=elf_i386 ;;
 i[3456]86-*-freebsdaout* | i[3456]86-*-freebsd[12].* | i[3456]86-*-freebsd[12])
Index: src/gnu/usr.bin/cvs/Makefile.bsd-wrapper
===================================================================
RCS file: /cvs/src/gnu/usr.bin/cvs/Makefile.bsd-wrapper,v
retrieving revision 1.42
diff -u -r1.42 Makefile.bsd-wrapper
--- src/gnu/usr.bin/cvs/Makefile.bsd-wrapper	16 Feb 2003 18:28:19 -0000	1.42
+++ src/gnu/usr.bin/cvs/Makefile.bsd-wrapper	7 Mar 2003 18:07:32 -0000
@@@@ -12,7 +12,7 @@@@
 		doc/cvs.info-8 doc/cvs.info-9 doc/cvsclient.info \
 		doc/cvsclient.info-1 doc/cvsclient.info-2 doc/cvsclient.info-3
 
-.if (${KERBEROS:L} == "yes")
+.if (${KERBEROS4:L} == "yes")
 KRB=--with-krb4=/usr --enable-encryption
 .else
 KRB=--without-krb4
@@@@ -38,6 +38,7 @@@@
 config: .FORCE
 	-rm -f config.cache
 	PATH="/bin:/usr/bin:/sbin:/usr/sbin" \
+	${GNUCFLAGS} \
 	INSTALL_PROGRAM="${INSTALL} ${INSTALL_COPY} ${INSTALL_STRIP}" \
 		ACLOCAL=true AUTOCONF=true AUTOMAKE=true AUTOHEADER=true \
 		sh ${.CURDIR}/configure --prefix=/usr --mandir=/usr/share/man \
@@@@ -45,6 +46,7 @@@@
 
 config.status:
 	PATH="/bin:/usr/bin:/sbin:/usr/sbin" \
+	${GNUCFLAGS} \
 	INSTALL_PROGRAM="${INSTALL} ${INSTALL_COPY} ${INSTALL_STRIP}" \
 		ACLOCAL=true AUTOCONF=true AUTOMAKE=true AUTOHEADER=true \
 		sh ${.CURDIR}/configure --prefix=/usr --mandir=/usr/share/man \
Index: src/gnu/usr.bin/gzip/Makefile
===================================================================
RCS file: /cvs/src/gnu/usr.bin/gzip/Makefile,v
retrieving revision 1.13
diff -u -r1.13 Makefile
--- src/gnu/usr.bin/gzip/Makefile	9 Dec 2002 23:46:16 -0000	1.13
+++ src/gnu/usr.bin/gzip/Makefile	7 Mar 2003 18:07:32 -0000
@@@@ -13,6 +13,9 @@@@
 .else
 CFLAGS+=-DDYN_ALLOC
 .endif
+.if (${MACHINE_ARCH} == "i386")
+UNDERLINE=-DNO_UNDERLINE
+.endif
 
 CLEANFILES+=	gzip.info
 
@@@@ -48,7 +51,7 @@@@
 
 .if (${MACHINE_ARCH} == "m68k" || ${MACHINE_ARCH} == "i386")
 match.o: ${.CURDIR}/match.S
-	$(CPP) -D__OpenBSD__ -D${MACHINE_ARCH} ${.CURDIR}/match.S >_match.s
+	$(CPP) -D__OpenBSD__ ${UNDERLINE} -D${MACHINE_ARCH} ${.CURDIR}/match.S >_match.s
 	$(CC) -c _match.s
 	mv _match.o match.o
 	rm -f _match.s
Index: src/gnu/usr.bin/perl/hints/openbsd.sh
===================================================================
RCS file: /cvs/src/gnu/usr.bin/perl/hints/openbsd.sh,v
retrieving revision 1.29
diff -u -r1.29 openbsd.sh
--- src/gnu/usr.bin/perl/hints/openbsd.sh	17 Mar 2003 17:43:44 -0000	1.29
+++ src/gnu/usr.bin/perl/hints/openbsd.sh	20 Mar 2003 18:30:57 -0000
@@@@ -8,6 +8,8 @@@@
 #	./Configure -des -Dopenbsd_distribution=defined
 #
 
+[ -z "$cc" ] && cc=$CC
+
 # OpenBSD has a better malloc than perl...
 test "$usemymalloc" || usemymalloc='n'
 
Index: src/gnu/usr.bin/texinfo/Makefile.bsd-wrapper
===================================================================
RCS file: /cvs/src/gnu/usr.bin/texinfo/Makefile.bsd-wrapper,v
retrieving revision 1.37
diff -u -r1.37 Makefile.bsd-wrapper
--- src/gnu/usr.bin/texinfo/Makefile.bsd-wrapper	16 Feb 2003 18:28:19 -0000	1.37
+++ src/gnu/usr.bin/texinfo/Makefile.bsd-wrapper	7 Mar 2003 18:07:32 -0000
@@@@ -30,13 +30,13 @@@@
 	-rm -f config.cache
 .endif
 	PATH="/bin:/usr/bin:/sbin:/usr/sbin" \
-	CFLAGS="${CFLAGS} ${COPTS}" \
+	CC="${CC}" CFLAGS="${CFLAGS} ${COPTS}" \
 	INSTALL_PROGRAM="${INSTALL} ${INSTALL_COPY} ${INSTALL_STRIP}" \
 		/bin/sh ${.CURDIR}/configure --infodir=/usr/share/info --prefix=/usr --disable-nls ${CF}
 
 config.status:
 	PATH="/bin:/usr/bin:/sbin:/usr/sbin" \
-	CFLAGS="${CFLAGS} ${COPTS}" \
+	CC="${CC}" CFLAGS="${CFLAGS} ${COPTS}" \
 	INSTALL_PROGRAM="${INSTALL} ${INSTALL_COPY} ${INSTALL_STRIP}" \
 		/bin/sh ${.CURDIR}/configure --infodir=/usr/share/info --prefix=/usr --disable-nls ${CF}
 
Index: src/gnu/usr.sbin/mkhybrid/src/Makefile
===================================================================
RCS file: /cvs/src/gnu/usr.sbin/mkhybrid/src/Makefile,v
retrieving revision 1.2
diff -u -r1.2 Makefile
--- src/gnu/usr.sbin/mkhybrid/src/Makefile	13 Dec 2002 03:12:04 -0000	1.2
+++ src/gnu/usr.sbin/mkhybrid/src/Makefile	7 Mar 2003 18:07:34 -0000
@@@@ -42,7 +42,7 @@@@
 
 #### End of system configuration section. ####
 
-CFLAGS=$(COPTS) $(DEFINES) -I. -Iinclude -I$(libhfsdir) -DVANILLA_AUTOCONF
+CFLAGS=$(COPTS) $(DEFINES) -I. -I${.CURDIR} -Iinclude -I$(libhfsdir) -DVANILLA_AUTOCONF
 LDFLAGS= -L$(libhfsdir) -L$(libfiledir)
 OBJS=mkisofs.o tree.o write.o hash.o rock.o multi.o \
 		joliet.o match.o name.o fnmatch.o eltorito.o \
Index: src/gnu/usr.sbin/mkhybrid/src/diag/Makefile
===================================================================
RCS file: /cvs/src/gnu/usr.sbin/mkhybrid/src/diag/Makefile,v
retrieving revision 1.1
diff -u -r1.1 Makefile
--- src/gnu/usr.sbin/mkhybrid/src/diag/Makefile	10 Oct 2000 20:40:04 -0000	1.1
+++ src/gnu/usr.sbin/mkhybrid/src/diag/Makefile	7 Mar 2003 18:07:35 -0000
@@@@ -28,8 +28,7 @@@@
 
 #### End of system configuration section. ####
 
-CFLAGS=-g -O2 -I.
-LDFLAGS=
+CFLAGS+= -I. -I${.CURDIR}
 
 all: dump isodump isovfy isoinfo
 
Index: src/kerberosIV/Makefile
===================================================================
RCS file: /cvs/src/kerberosIV/Makefile,v
retrieving revision 1.33
diff -u -r1.33 Makefile
--- src/kerberosIV/Makefile	3 Jul 2001 18:32:41 -0000	1.33
+++ src/kerberosIV/Makefile	7 Mar 2003 18:07:35 -0000
@@@@ -1,6 +1,12 @@@@
 # $OpenBSD: Makefile,v 1.33 2001/07/03 18:33:03 matthieu Exp $
 
-SUBDIR	= lib usr.bin usr.sbin libexec doc
+SUBDIR	= lib
+
+.include <bsd.own.mk>
+
+.if (${KERBEROS4:L} == "yes")
+SUBDIR += doc libexec usr.bin usr.sbin
+.endif
 
 build:
 	${SUDO} ${MAKE} includes
Index: src/kerberosIV/Makefile.inc
===================================================================
RCS file: /cvs/src/kerberosIV/Makefile.inc,v
retrieving revision 1.16
diff -u -r1.16 Makefile.inc
--- src/kerberosIV/Makefile.inc	11 Jun 2002 15:23:06 -0000	1.16
+++ src/kerberosIV/Makefile.inc	7 Mar 2003 18:07:35 -0000
@@@@ -14,6 +14,8 @@@@
 
 CFLAGS+=-Wall
 
+NOPIC=	yes
+
 LIBROKEN= -L${KRBDEPTH}/../kerberosV/lib/roken -lroken
 LIBSL	= -L${KRBDEPTH}/lib/sl -lsl
 
Index: src/kerberosIV/lib/kadm/Makefile
===================================================================
RCS file: /cvs/src/kerberosIV/lib/kadm/Makefile,v
retrieving revision 1.2
diff -u -r1.2 Makefile
--- src/kerberosIV/lib/kadm/Makefile	9 Jan 2001 02:40:55 -0000	1.2
+++ src/kerberosIV/lib/kadm/Makefile	7 Mar 2003 18:07:35 -0000
@@@@ -9,7 +9,7 @@@@
 
 .PATH:	${KRBSRC}/lib/kadm
 
-CFLAGS	+= -I.
+CFLAGS	+= -I. -I${.CURDIR}
 
 SRCS=	kadm_cli_wrap.c \
 	kadm_err.c \
Index: src/kerberosIV/lib/roken/Makefile
===================================================================
RCS file: /cvs/src/kerberosIV/lib/roken/Makefile,v
retrieving revision 1.7
diff -u -r1.7 Makefile
--- src/kerberosIV/lib/roken/Makefile	8 Jun 2002 21:49:27 -0000	1.7
+++ src/kerberosIV/lib/roken/Makefile	7 Mar 2003 18:07:35 -0000
@@@@ -10,7 +10,7 @@@@
 
 .PATH:	${KRBSRC}/lib/roken
 
-CFLAGS	+= -I.
+CFLAGS	+= -I. -I${.CURDIR}
 
 SRCS=	base64.c		\
 	concat.c		\
Index: src/kerberosIV/src/appl/ftp/ftp/Makefile
===================================================================
RCS file: /cvs/src/kerberosIV/src/appl/ftp/ftp/Makefile,v
retrieving revision 1.1.1.1
diff -u -r1.1.1.1 Makefile
--- src/kerberosIV/src/appl/ftp/ftp/Makefile	14 May 2001 13:28:55 -0000	1.1.1.1
+++ src/kerberosIV/src/appl/ftp/ftp/Makefile	7 Mar 2003 18:07:35 -0000
@@@@ -13,9 +13,9 @@@@
 CC 	= gcc
 RANLIB 	= ranlib
 DEFS 	= -DHAVE_CONFIG_H
-CFLAGS 	=  -g -O2 $(WFLAGS)
+CFLAGS 	= -O2 $(WFLAGS)
 WFLAGS	= 
-CPPFLAGS=  -I. -I$(srcdir) -I$(top_builddir) -I$(top_srcdir) -I$(top_builddir)/include -I$(top_srcdir)/include -I$(srcdir)/../common  
+CPPFLAGS=  -I. -I${.CURDIR} -I$(srcdir) -I$(top_builddir) -I$(top_srcdir) -I$(top_builddir)/include -I$(top_srcdir)/include -I$(srcdir)/../common
 LD_FLAGS = 
 LIB_tgetent = -ltermcap
 LIBS	 = -lutil   -lreadline $(LIB_tgetent)
Index: src/kerberosIV/src/appl/ftp/ftpd/Makefile
===================================================================
RCS file: /cvs/src/kerberosIV/src/appl/ftp/ftpd/Makefile,v
retrieving revision 1.1.1.1
diff -u -r1.1.1.1 Makefile
--- src/kerberosIV/src/appl/ftp/ftpd/Makefile	14 May 2001 13:29:02 -0000	1.1.1.1
+++ src/kerberosIV/src/appl/ftp/ftpd/Makefile	7 Mar 2003 18:07:35 -0000
@@@@ -67,7 +67,7 @@@@
 	$(LN_S) $(srcdir)/../ftp/gssapi.c .
 
 .c.o:
-	$(CC) -c -DFTP_SERVER -I. -I$(srcdir) -I$(srcdir)/../common -I$(INCTOP) $(DEFS) $(CFLAGS) $(CPPFLAGS) $<
+	$(CC) -c -DFTP_SERVER -I. -I${.CURDIR} -I$(srcdir) -I$(srcdir)/../common -I$(INCTOP) $(DEFS) $(CFLAGS) $(CPPFLAGS) $<
 
 install: all
 	$(MKINSTALLDIRS) $(DESTDIR)$(libexecdir)
Index: src/kerberosIV/src/include/Makefile
===================================================================
RCS file: /cvs/src/kerberosIV/src/include/Makefile,v
retrieving revision 1.1.1.1
diff -u -r1.1.1.1 Makefile
--- src/kerberosIV/src/include/Makefile	14 May 2001 13:29:16 -0000	1.1.1.1
+++ src/kerberosIV/src/include/Makefile	7 Mar 2003 18:07:35 -0000
@@@@ -26,7 +26,7 @@@@
 
 
 .c.o:
-	$(CC) -c $(DEFS) -I. -I$(srcdir) $(CFLAGS) $(CPPFLAGS) $(PICFLAGS) $<
+	$(CC) -c $(DEFS) -I. -I${.CURDIR} -I$(srcdir) $(CFLAGS) $(CPPFLAGS) $(PICFLAGS) $<
 
 HEADERS = \
 	acl.h com_err.h com_right.h des.h kadm.h kafs.h kdc.h \
Index: src/lib/csu/common_elf/crtbegin.c
===================================================================
RCS file: /cvs/src/lib/csu/common_elf/crtbegin.c,v
retrieving revision 1.6
diff -u -r1.6 crtbegin.c
--- src/lib/csu/common_elf/crtbegin.c	16 Feb 2002 21:26:58 -0000	1.6
+++ src/lib/csu/common_elf/crtbegin.c	22 Mar 2003 15:11:52 -0000
@@@@ -1,3 +1,4 @@@@
+/*	$MirBSD: obsd.misc,v 1.25 2003/03/22 22:33:26 tg Exp $	*/
 /*	$OpenBSD: crtbegin.c,v 1.6 2002/02/16 21:27:20 millert Exp $	*/
 /*	$NetBSD: crtbegin.c,v 1.1 1996/09/12 16:59:03 cgd Exp $	*/
 
@@@@ -83,6 +84,7 @@@@
 __init()
 {
 	static int initialized = 0;
+	void (*ctors_p)(void);
 
 	/*
 	 * Call global constructors.
@@@@ -90,10 +92,11 @@@@
 	 */
 	if (!initialized) {
 		initialized = 1;
-		__ctors();
-	}
+		ctors_p = &__ctors;
+		(*ctors_p)();
 
-	atexit(__fini);
+		atexit(__fini);
+	}
 }
 
 void
@@@@ -102,6 +105,8 @@@@
 	/*
 	 * Call global destructors.
 	 */
-	__dtors();
+	void (*dtors_p)(void);
+	dtors_p = &__dtors;
+	(*dtors_p)();
 }
 
Index: src/lib/csu/common_elf/crtbeginS.c
===================================================================
RCS file: /cvs/src/lib/csu/common_elf/crtbeginS.c,v
retrieving revision 1.2
diff -u -r1.2 crtbeginS.c
--- src/lib/csu/common_elf/crtbeginS.c	16 Feb 2002 21:26:58 -0000	1.2
+++ src/lib/csu/common_elf/crtbeginS.c	22 Mar 2003 14:57:35 -0000
@@@@ -1,3 +1,4 @@@@
+/*	$MirBSD: obsd.misc,v 1.25 2003/03/22 22:33:26 tg Exp $	*/
 /*	$OpenBSD: crtbeginS.c,v 1.2 2002/02/16 21:27:20 millert Exp $	*/
 /*	$NetBSD: crtbegin.c,v 1.1 1996/09/12 16:59:03 cgd Exp $	*/
 
@@@@ -81,6 +82,7 @@@@
 _init()
 {
 	static int initialized = 0;
+	void (*ctors_p)(void);
 
 	/*
 	 * Call global constructors.
@@@@ -88,7 +90,8 @@@@
 	 */
 	if (!initialized) {
 		initialized = 1;
-		__ctors();
+		ctors_p = &__ctors;
+		(*ctors_p)();
 	}
 }
 
@@@@ -96,8 +99,9 @@@@
 _fini()
 {
 	/*
-	 * since the _init() function sets up the destructors to be called
-	 * by atexit, do not call the destructors here.
+	 * Call global destructors.
 	 */
-	__dtors();
+	void (*dtors_p)(void);
+	dtors_p = &__dtors;
+	(*dtors_p)();
 }
Index: src/lib/csu/i386/crt0.c
===================================================================
RCS file: /cvs/src/lib/csu/i386/crt0.c,v
retrieving revision 1.9
diff -u -r1.9 crt0.c
--- src/lib/csu/i386/crt0.c	28 Feb 2003 18:05:29 -0000	1.9
+++ src/lib/csu/i386/crt0.c	22 Mar 2003 14:57:32 -0000
@@@@ -1,8 +1,9 @@@@
+/*	$MirBSD: obsd.misc,v 1.25 2003/03/22 22:33:26 tg Exp $	*/
 /*	$OpenBSD: crt0.c,v 1.9 2003/02/28 18:05:51 deraadt Exp $	*/
 /*	$NetBSD: crt0.c,v 1.20 1995/06/03 13:16:08 pk Exp $	*/
 
 /*
- * Copyright (c) 1993 Paul Kranenburg
+ * Copyright (c) 1995 Christopher G. Demetriou
  * All rights reserved.
  *
  * Redistribution and use in source and binary forms, with or without
@@@@ -15,7 +15,8 @@@@
  *    documentation and/or other materials provided with the distribution.
  * 3. All advertising materials mentioning features or use of this software
  *    must display the following acknowledgement:
- *      This product includes software developed by Paul Kranenburg.
+ *      This product includes software developed by Christopher G. Demetriou
+ *	for the NetBSD Project.
  * 4. The name of the author may not be used to endorse or promote products
  *    derived from this software without specific prior written permission
  *
@@@@ -29,98 +30,101 @@@@
  * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
  * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
- *
  */
 
-
 #if defined(LIBC_SCCS) && !defined(lint)
 static char rcsid[] = "$OpenBSD: crt0.c,v 1.9 2003/02/28 18:05:51 deraadt Exp $";
 #endif /* LIBC_SCCS and not lint */
 
-#include <sys/param.h>
 #include <stdlib.h>
 
-#include "common.h"
+static char	*_strrchr(char *, char);
+
+char	**environ;
+char	*__progname = "";
 
-extern void	start(void) asm("start");
+#ifdef MCRT0
+extern void	monstartup(u_long, u_long);
+extern void	_mcleanup(void);
+extern unsigned char _etext, _eprol;
+#endif /* MCRT0 */
+
+
+__asm("
+	.text
+	.align  4
+	.globl  __start
+	.globl  _start
+_start:
+__start:
+	pushl	%ebx			#ps_strings
+	pushl   %ecx                    # obj
+	pushl   %edx                    # cleanup
+	movl    12(%esp),%eax
+	leal    20(%esp,%eax,4),%ecx
+	leal    16(%esp),%edx
+	pushl   %ecx
+	pushl   %edx
+	pushl   %eax
+	call    ___start
+");
 
 void
-start()
+___start(argc, argv, envp, cleanup, obj, ps_strings)
+	int argc;
+	char **argv;
+	char ** envp;
+	void (*cleanup)(void);			/* from shared loader */
+	const void *obj;			/* from shared loader */
+	struct ps_strings *ps_strings;
 {
-	struct kframe {
-		int	kargc;
-		char	*kargv[1];	/* size depends on kargc */
-		char	kargstr[1];	/* size varies */
-		char	kenvstr[1];	/* size varies */
-	};
-	/*
-	 *	ALL REGISTER VARIABLES!!!
-	 */
+	char *namep;
 	register struct kframe *kfp;
-	register char **argv, *ap;
 	char *s;
 
-#ifdef lint
-	kfp = 0;
-	initcode = initcode = 0;
-#else /* not lint */
-	/* just above the saved frame pointer */
-	asm ("lea 4(%%ebp), %0" : "=r" (kfp) );
-#endif /* not lint */
-	argv = &kfp->kargv[0];
-	environ = argv + kfp->kargc + 1;
-
-	if ((ap = argv[0])) {	
-		if ((__progname = _strrchr(ap, '/')) == NULL)
-			__progname = ap;
+        environ = envp;
+
+	if ((namep = argv[0]) != NULL) {	/* NULL ptr if argc = 0 */
+		if ((__progname = _strrchr(namep, '/')) == NULL)
+			__progname = namep;
 		else
 			++__progname;
+#if 0
 		for (s = __progname_storage; *__progname &&
 		    s < &__progname_storage[sizeof __progname_storage - 1]; )
 			*s++ = *__progname++;
 		*s = '\0';
 		__progname = __progname_storage;
-	}
-
-#ifdef DYNAMIC
-	/* ld(1) convention: if DYNAMIC = 0 then statically linked */
-#ifdef stupid_gcc
-	if (&_DYNAMIC)
-#else
-	if ( ({volatile caddr_t x = (caddr_t)&_DYNAMIC; x; }) )
 #endif
-		__load_rtld(&_DYNAMIC);
-#endif /* DYNAMIC */
-
-asm("eprol:");
+	}
 
 #ifdef MCRT0
 	atexit(_mcleanup);
-	monstartup((u_long)&eprol, (u_long)&etext);
-#endif /* MCRT0 */
+	monstartup((u_long)&_eprol, (u_long)&_etext);
+#endif
 
-asm ("__callmain:");		/* Defined for the benefit of debuggers */
-	exit(main(kfp->kargc, argv, environ));
+	__init();
+
+	exit(main(argc, argv, environ));
 }
 
-#ifdef DYNAMIC
-	asm("	___syscall:");
-	asm("		popl %ecx");
-	asm("		popl %eax");
-	asm("		pushl %ecx");
-	asm("		int $0x80");
-	asm("		pushl %ecx");
-	asm("		jc 1f");
-	asm("		ret");
-	asm("	1:");
-	asm("		movl $-1,%eax");
-	asm("		ret");
 
-#endif /* DYNAMIC */
+static char *
+_strrchr(p, ch)
+register char *p, ch;
+{
+	register char *save;
 
-#include "common.c"
+	for (save = NULL;; ++p) {
+		if (*p == ch)
+			save = (char *)p;
+		if (!*p)
+			return(save);
+	}
+/* NOTREACHED */
+}
 
 #ifdef MCRT0
-asm ("	.text");
+asm ("  .text");
 asm ("_eprol:");
 #endif
Index: src/lib/libc/arch/i386/SYS.h
===================================================================
RCS file: /cvs/src/lib/libc/arch/i386/SYS.h,v
retrieving revision 1.13
diff -u -r1.13 SYS.h
--- src/lib/libc/arch/i386/SYS.h	6 Oct 2002 23:23:51 -0000	1.13
+++ src/lib/libc/arch/i386/SYS.h	22 Mar 2003 14:57:29 -0000
@@@@ -1,3 +1,4 @@@@
+/*	$MirBSD: obsd.misc,v 1.25 2003/03/22 22:33:26 tg Exp $	*/
 /*-
  * Copyright (c) 1990 The Regents of the University of California.
  * All rights reserved.
@@@@ -13,10 +14,6 @@@@
  * 2. Redistributions in binary form must reproduce the above copyright
  *    notice, this list of conditions and the following disclaimer in the
  *    documentation and/or other materials provided with the distribution.
- * 3. All advertising materials mentioning features or use of this software
- *    must display the following acknowledgement:
- *	This product includes software developed by the University of
- *	California, Berkeley and its contributors.
  * 4. Neither the name of the University nor the names of its contributors
  *    may be used to endorse or promote products derived from this software
  *    without specific prior written permission.
@@@@ -71,6 +68,15 @@@@
 			int $0x80
 #endif /* ! __STDC__ */
 
+#ifdef __ELF__
+#define CERROR          _C_LABEL(__cerror)
+#define CURBRK          _C_LABEL(__curbrk)
+#else
+#define CERROR          _ASM_LABEL(__cerror)
+#define CURBRK          _ASM_LABEL(__curbrk)
+#endif
+
+
 /* perform a syscall */
 #define	_SYSCALL_NOERROR(x,y)				\
 		SYSENTRY(x);				\
@@@@ -80,13 +86,25 @@@@
 		_SYSCALL_NOERROR(x,x)
 
 /* perform a syscall, set errno */
+#ifdef PIC
+#define	_SYSCALL(x,y)					\
+			.text;				\
+			.align 2;			\
+		2:	PIC_PROLOGUE;			\
+			movl PIC_GOT(CERROR), %ecx;	\
+			PIC_EPILOGUE;			\
+			jmp *%ecx;			\
+		_SYSCALL_NOERROR(x,y)			\
+			jc 2b
+#else
 #define	_SYSCALL(x,y)					\
 			.text;				\
 			.align 2;			\
 		2:					\
-			jmp PIC_PLT(__cerror);		\
+			jmp PIC_PLT(CERROR);		\
 		_SYSCALL_NOERROR(x,y)			\
 			jc 2b
+#endif
 
 #define	SYSCALL(x)					\
 		_SYSCALL(x,x)
@@@@ -105,4 +123,4 @@@@
 #define	RSYSCALL(x)					\
 			PSEUDO(x,x);
 
-	.globl	__cerror
+	.globl	CERROR
Index: src/lib/libc/arch/i386/gen/alloca.S
===================================================================
RCS file: /cvs/src/lib/libc/arch/i386/gen/alloca.S,v
retrieving revision 1.3
diff -u -r1.3 alloca.S
--- src/lib/libc/arch/i386/gen/alloca.S	19 Aug 1996 08:11:55 -0000	1.3
+++ src/lib/libc/arch/i386/gen/alloca.S	22 Mar 2003 15:11:48 -0000
@@@@ -1,3 +1,4 @@@@
+/*	$MirBSD: obsd.misc,v 1.25 2003/03/22 22:33:26 tg Exp $	*/
 /*-
  * Copyright (c) 1990 The Regents of the University of California.
  * All rights reserved.
@@@@ -13,10 +14,6 @@@@
  * 2. Redistributions in binary form must reproduce the above copyright
  *    notice, this list of conditions and the following disclaimer in the
  *    documentation and/or other materials provided with the distribution.
- * 3. All advertising materials mentioning features or use of this software
- *    must display the following acknowledgement:
- *	This product includes software developed by the University of
- *	California, Berkeley and its contributors.
  * 4. Neither the name of the University nor the names of its contributors
  *    may be used to endorse or promote products derived from this software
  *    without specific prior written permission.
@@@@ -55,4 +52,4 @@@@
 	pushl	4(%ecx)
 	pushl	0(%ecx)
 	pushl	%eax		/* dummy to pop at callsite */
-	jmp	%edx		/* "return" */
+	jmp	*%edx		/* "return" */
Index: src/lib/libc/arch/i386/gen/setjmp.S
===================================================================
RCS file: /cvs/src/lib/libc/arch/i386/gen/setjmp.S,v
retrieving revision 1.4
diff -u -r1.4 setjmp.S
--- src/lib/libc/arch/i386/gen/setjmp.S	1 Nov 2001 07:01:51 -0000	1.4
+++ src/lib/libc/arch/i386/gen/setjmp.S	22 Mar 2003 14:57:24 -0000
@@@@ -1,3 +1,4 @@@@
+/*	$MirBSD: obsd.misc,v 1.25 2003/03/22 22:33:26 tg Exp $	*/
 /*-
  * Copyright (c) 1990 The Regents of the University of California.
  * All rights reserved.
@@@@ -13,10 +14,6 @@@@
  * 2. Redistributions in binary form must reproduce the above copyright
  *    notice, this list of conditions and the following disclaimer in the
  *    documentation and/or other materials provided with the distribution.
- * 3. All advertising materials mentioning features or use of this software
- *    must display the following acknowledgement:
- *	This product includes software developed by the University of
- *	California, Berkeley and its contributors.
  * 4. Neither the name of the University nor the names of its contributors
  *    may be used to endorse or promote products derived from this software
  *    without specific prior written permission.
@@@@ -52,6 +49,7 @@@@
  */
 
 ENTRY(setjmp)
+	PIC_PROLOGUE
 	pushl	$0
 #ifdef PIC
 	call	PIC_PLT(_C_LABEL(sigblock))
@@@@ -59,6 +57,8 @@@@
 	call	_C_LABEL(sigblock)
 #endif
 	addl	$4,%esp
+	PIC_EPILOGUE 
+
 	movl	4(%esp),%ecx
 	movl	0(%esp),%edx
 	movl	%edx, 0(%ecx)
@@@@ -73,6 +73,7 @@@@
 
 ENTRY(longjmp)
 	movl	4(%esp),%edx
+	PIC_PROLOGUE
 	pushl	24(%edx)
 #ifdef PIC
 	call	PIC_PLT(_C_LABEL(sigsetmask))
@@@@ -80,6 +81,8 @@@@
 	call	_C_LABEL(sigsetmask)
 #endif
 	addl	$4,%esp
+	PIC_EPILOGUE 
+
 	movl	4(%esp),%edx
 	movl	8(%esp),%eax
 	movl	0(%edx),%ecx
Index: src/lib/libc/arch/i386/gen/sigsetjmp.S
===================================================================
RCS file: /cvs/src/lib/libc/arch/i386/gen/sigsetjmp.S,v
retrieving revision 1.4
diff -u -r1.4 sigsetjmp.S
--- src/lib/libc/arch/i386/gen/sigsetjmp.S	1 Nov 2001 07:01:51 -0000	1.4
+++ src/lib/libc/arch/i386/gen/sigsetjmp.S	22 Mar 2003 15:11:42 -0000
@@@@ -1,3 +1,4 @@@@
+/*	$MirBSD: obsd.misc,v 1.25 2003/03/22 22:33:26 tg Exp $	*/
 /*-
  * Copyright (c) 1990 The Regents of the University of California.
  * All rights reserved.
@@@@ -13,10 +14,6 @@@@
  * 2. Redistributions in binary form must reproduce the above copyright
  *    notice, this list of conditions and the following disclaimer in the
  *    documentation and/or other materials provided with the distribution.
- * 3. All advertising materials mentioning features or use of this software
- *    must display the following acknowledgement:
- *	This product includes software developed by the University of
- *	California, Berkeley and its contributors.
  * 4. Neither the name of the University nor the names of its contributors
  *    may be used to endorse or promote products derived from this software
  *    without specific prior written permission.
@@@@ -47,6 +44,8 @@@@
 	movl	%eax,28(%ecx)
 	testl	%eax,%eax
 	jz	1f
+
+	PIC_PROLOGUE
 	pushl	$0
 #ifdef PIC
 	call	PIC_PLT(_C_LABEL(sigblock))
@@@@ -54,6 +53,8 @@@@
 	call	_C_LABEL(sigblock)
 #endif
 	addl	$4,%esp
+	PIC_EPILOGUE
+
 	movl	4(%esp),%ecx
 	movl	%eax,24(%ecx)
 1:	movl	0(%esp),%edx
@@@@ -70,6 +71,8 @@@@
 	movl	4(%esp),%edx
 	cmpl	$0,28(%edx)
 	jz	1f
+
+	PIC_PROLOGUE
 	pushl	24(%edx)
 #ifdef PIC
 	call	PIC_PLT(_C_LABEL(sigsetmask))
@@@@ -77,6 +80,8 @@@@
 	call	_C_LABEL(sigsetmask)
 #endif
 	addl	$4,%esp
+	PIC_EPILOGUE
+
 1:	movl	4(%esp),%edx
 	movl	8(%esp),%eax
 	movl	0(%edx),%ecx
Index: src/lib/libc/arch/i386/net/Makefile.inc
===================================================================
RCS file: /cvs/src/lib/libc/arch/i386/net/Makefile.inc,v
retrieving revision 1.3
diff -u -r1.3 Makefile.inc
--- src/lib/libc/arch/i386/net/Makefile.inc	19 Aug 1996 08:12:17 -0000	1.3
+++ src/lib/libc/arch/i386/net/Makefile.inc	7 Mar 2003 18:07:36 -0000
@@@@ -1,4 +1,4 @@@@
 #	$OpenBSD: Makefile.inc,v 1.3 1996/08/19 08:12:37 tholo Exp $
 
-SRCS+=  htonl.S htons.S ntohl.S ntohs.S
+SRCS+=  htonl.S htons.S
 LSRCS+=	htonl.c htons.c ntohl.c ntohs.c
Index: src/lib/libc/arch/i386/net/htonl.S
===================================================================
RCS file: /cvs/src/lib/libc/arch/i386/net/htonl.S,v
retrieving revision 1.2
diff -u -r1.2 htonl.S
--- src/lib/libc/arch/i386/net/htonl.S	19 Aug 1996 08:12:18 -0000	1.2
+++ src/lib/libc/arch/i386/net/htonl.S	22 Mar 2003 15:11:37 -0000
@@@@ -1,50 +1,26 @@@@
-/*-
- * Copyright (c) 1990 The Regents of the University of California.
- * All rights reserved.
+/* Copyright (c) 1982-2003 by Thorsten "mirabile" Glaser <x86@@ePost.de>
  *
- * This code is derived from software contributed to Berkeley by
- * William Jolitz.
+ * Anyone who obtained a copy of this work is hereby permitted to freely use,
+ * distribute, modify, merge, sublicence, give away or sell it as long as the
+ * authors are given due credit and the following notice is retained:
  *
- * Redistribution and use in source and binary forms, with or without
- * modification, are permitted provided that the following conditions
- * are met:
- * 1. Redistributions of source code must retain the above copyright
- *    notice, this list of conditions and the following disclaimer.
- * 2. Redistributions in binary form must reproduce the above copyright
- *    notice, this list of conditions and the following disclaimer in the
- *    documentation and/or other materials provided with the distribution.
- * 3. All advertising materials mentioning features or use of this software
- *    must display the following acknowledgement:
- *	This product includes software developed by the University of
- *	California, Berkeley and its contributors.
- * 4. Neither the name of the University nor the names of its contributors
- *    may be used to endorse or promote products derived from this software
- *    without specific prior written permission.
- *
- * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
- * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
- * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
- * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
- * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
- * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
- * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
- * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
- * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
- * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
- * SUCH DAMAGE.
+ * This work is provided "as is", with no explicit or implicit warranty what-
+ * soever. Use it only at your own risk. In no event may an author or contri-
+ * butor be held liable for any damage, directly or indirectly, that origina-
+ * ted through or is caused by creation or modification of this work.
  */
 
 #include <machine/asm.h>
 
-#if defined(LIBC_SCCS)
 	.text
-	.asciz "$OpenBSD: htonl.S,v 1.2 1996/08/19 08:12:38 tholo Exp $"
+#if defined(LIBC_SCCS)
+	.asciz "$OpenBSD: htonl.S$ $MirBSD: obsd.misc,v 1.25 2003/03/22 22:33:26 tg Exp $"
 #endif
 
-/* netorder = htonl(hostorder) */
+ENTRY(ntohl)
 ENTRY(htonl)
 	movl	4(%esp),%eax
-	rorw	$8,%ax
+	xchgb	%ah,%al
 	roll	$16,%eax
-	rorw	$8,%ax
+	xchgb	%ah,%al
 	ret
Index: src/lib/libc/arch/i386/net/htons.S
===================================================================
RCS file: /cvs/src/lib/libc/arch/i386/net/htons.S,v
retrieving revision 1.2
diff -u -r1.2 htons.S
--- src/lib/libc/arch/i386/net/htons.S	19 Aug 1996 08:12:20 -0000	1.2
+++ src/lib/libc/arch/i386/net/htons.S	22 Mar 2003 14:57:16 -0000
@@@@ -1,48 +1,24 @@@@
-/*-
- * Copyright (c) 1990 The Regents of the University of California.
- * All rights reserved.
+/* Copyright (c) 1982-2003 by Thorsten "mirabile" Glaser <x86@@ePost.de>
  *
- * This code is derived from software contributed to Berkeley by
- * William Jolitz.
+ * Anyone who obtained a copy of this work is hereby permitted to freely use,
+ * distribute, modify, merge, sublicence, give away or sell it as long as the
+ * authors are given due credit and the following notice is retained:
  *
- * Redistribution and use in source and binary forms, with or without
- * modification, are permitted provided that the following conditions
- * are met:
- * 1. Redistributions of source code must retain the above copyright
- *    notice, this list of conditions and the following disclaimer.
- * 2. Redistributions in binary form must reproduce the above copyright
- *    notice, this list of conditions and the following disclaimer in the
- *    documentation and/or other materials provided with the distribution.
- * 3. All advertising materials mentioning features or use of this software
- *    must display the following acknowledgement:
- *	This product includes software developed by the University of
- *	California, Berkeley and its contributors.
- * 4. Neither the name of the University nor the names of its contributors
- *    may be used to endorse or promote products derived from this software
- *    without specific prior written permission.
- *
- * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
- * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
- * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
- * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
- * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
- * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
- * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
- * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
- * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
- * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
- * SUCH DAMAGE.
+ * This work is provided "as is", with no explicit or implicit warranty what-
+ * soever. Use it only at your own risk. In no event may an author or contri-
+ * butor be held liable for any damage, directly or indirectly, that origina-
+ * ted through or is caused by creation or modification of this work.
  */
 
 #include <machine/asm.h>
 
-#if defined(LIBC_SCCS)
 	.text
-	.asciz "$OpenBSD: htons.S,v 1.2 1996/08/19 08:12:40 tholo Exp $"
+#if defined(LIBC_SCCS)
+	.asciz "$OpenBSD: htons.S$ $MirBSD: obsd.misc,v 1.25 2003/03/22 22:33:26 tg Exp $"
 #endif
 
-/* netorder = htons(hostorder) */
+ENTRY(ntohs)
 ENTRY(htons)
 	movzwl	4(%esp),%eax
-	rorw	$8,%ax
+	xchgb	%ah,%al
 	ret
Index: src/lib/libc/arch/i386/sys/Ovfork.S
===================================================================
RCS file: /cvs/src/lib/libc/arch/i386/sys/Ovfork.S,v
retrieving revision 1.3
diff -u -r1.3 Ovfork.S
--- src/lib/libc/arch/i386/sys/Ovfork.S	20 Nov 1998 11:18:08 -0000	1.3
+++ src/lib/libc/arch/i386/sys/Ovfork.S	22 Mar 2003 15:11:31 -0000
@@@@ -1,3 +1,4 @@@@
+/*	$MirBSD: obsd.misc,v 1.25 2003/03/22 22:33:26 tg Exp $	*/
 /*-
  * Copyright (c) 1990 The Regents of the University of California.
  * All rights reserved.
@@@@ -13,10 +14,6 @@@@
  * 2. Redistributions in binary form must reproduce the above copyright
  *    notice, this list of conditions and the following disclaimer in the
  *    documentation and/or other materials provided with the distribution.
- * 3. All advertising materials mentioning features or use of this software
- *    must display the following acknowledgement:
- *	This product includes software developed by the University of
- *	California, Berkeley and its contributors.
  * 4. Neither the name of the University nor the names of its contributors
  *    may be used to endorse or promote products derived from this software
  *    without specific prior written permission.
@@@@ -55,15 +52,15 @@@@
 	jc	err
 	decl	%edx
 	andl	%edx,%eax
-	jmp	%ecx
+	jmp	*%ecx
 err:
 #ifdef PIC
 	PIC_PROLOGUE
-	movl	PIC_GOT(_errno),%edx
+	movl	PIC_GOT(_C_LABEL(errno)),%edx
 	PIC_EPILOGUE
 	movl	%eax,(%edx)
 #else
-	movl	%eax,_errno
+	movl	%eax,_C_LABEL(errno)
 #endif
 	movl	$-1,%eax
-	jmp	%ecx
+	jmp	*%ecx
Index: src/lib/libc/arch/i386/sys/brk.S
===================================================================
RCS file: /cvs/src/lib/libc/arch/i386/sys/brk.S,v
retrieving revision 1.5
diff -u -r1.5 brk.S
--- src/lib/libc/arch/i386/sys/brk.S	6 Oct 2002 23:31:19 -0000	1.5
+++ src/lib/libc/arch/i386/sys/brk.S	22 Mar 2003 14:57:00 -0000
@@@@ -1,3 +1,4 @@@@
+/*	$MirBSD: obsd.misc,v 1.25 2003/03/22 22:33:26 tg Exp $	*/
 /*-
  * Copyright (c) 1990 The Regents of the University of California.
  * All rights reserved.
@@@@ -13,10 +14,6 @@@@
  * 2. Redistributions in binary form must reproduce the above copyright
  *    notice, this list of conditions and the following disclaimer in the
  *    documentation and/or other materials provided with the distribution.
- * 3. All advertising materials mentioning features or use of this software
- *    must display the following acknowledgement:
- *	This product includes software developed by the University of
- *	California, Berkeley and its contributors.
  * 4. Neither the name of the University nor the names of its contributors
  *    may be used to endorse or promote products derived from this software
  *    without specific prior written permission.
@@@@ -70,7 +67,10 @@@@
 	movl	%ecx,(%edx)
 	ret
 err:
-	jmp	PIC_PLT(__cerror)
+	PIC_PROLOGUE
+	movl	PIC_GOT(CERROR),%ecx	# set up GOT addressing
+	PIC_EPILOGUE
+	jmp	*%ecx
 
 #else
 
@@@@ -87,5 +87,5 @@@@
 	movl	%ecx,__curbrk
 	ret
 err:
-	jmp	__cerror
+	jmp	CERROR
 #endif
Index: src/lib/libc/arch/i386/sys/cerror.S
===================================================================
RCS file: /cvs/src/lib/libc/arch/i386/sys/cerror.S,v
retrieving revision 1.3
diff -u -r1.3 cerror.S
--- src/lib/libc/arch/i386/sys/cerror.S	6 Oct 2002 23:23:51 -0000	1.3
+++ src/lib/libc/arch/i386/sys/cerror.S	22 Mar 2003 15:11:26 -0000
@@@@ -1,3 +1,4 @@@@
+/*	$MirBSD: obsd.misc,v 1.25 2003/03/22 22:33:26 tg Exp $	*/
 /*-
  * Copyright (c) 1990 The Regents of the University of California.
  * All rights reserved.
@@@@ -13,10 +14,6 @@@@
  * 2. Redistributions in binary form must reproduce the above copyright
  *    notice, this list of conditions and the following disclaimer in the
  *    documentation and/or other materials provided with the distribution.
- * 3. All advertising materials mentioning features or use of this software
- *    must display the following acknowledgement:
- *	This product includes software developed by the University of
- *	California, Berkeley and its contributors.
  * 4. Neither the name of the University nor the names of its contributors
  *    may be used to endorse or promote products derived from this software
  *    without specific prior written permission.
@@@@ -41,15 +38,15 @@@@
 	.asciz "$OpenBSD: cerror.S,v 1.3 2002/10/06 23:24:13 art Exp $"
 #endif /* SYSLIB_SCCS */
 
-	.globl	_errno
-__cerror:
+	.globl	_C_LABEL(errno)
+CERROR:
 #ifdef PIC
 	PIC_PROLOGUE
-	movl	PIC_GOT(_errno),%ecx
+	movl	PIC_GOT(_C_LABEL(errno)),%ecx
 	PIC_EPILOGUE
 	movl	%eax,(%ecx)
 #else
-	movl	%eax,_errno
+	movl	%eax,_C_LABEL(errno)
 #endif
 	movl	$-1,%eax
 	movl	$-1,%edx
Index: src/lib/libc/arch/i386/sys/exect.S
===================================================================
RCS file: /cvs/src/lib/libc/arch/i386/sys/exect.S,v
retrieving revision 1.3
diff -u -r1.3 exect.S
--- src/lib/libc/arch/i386/sys/exect.S	6 Oct 2002 23:23:51 -0000	1.3
+++ src/lib/libc/arch/i386/sys/exect.S	22 Mar 2003 14:56:56 -0000
@@@@ -1,3 +1,4 @@@@
+/*	$MirBSD: obsd.misc,v 1.25 2003/03/22 22:33:26 tg Exp $	*/
 /*-
  * Copyright (c) 1990 The Regents of the University of California.
  * All rights reserved.
@@@@ -13,10 +14,6 @@@@
  * 2. Redistributions in binary form must reproduce the above copyright
  *    notice, this list of conditions and the following disclaimer in the
  *    documentation and/or other materials provided with the distribution.
- * 3. All advertising materials mentioning features or use of this software
- *    must display the following acknowledgement:
- *	This product includes software developed by the University of
- *	California, Berkeley and its contributors.
  * 4. Neither the name of the University nor the names of its contributors
  *    may be used to endorse or promote products derived from this software
  *    without specific prior written permission.
@@@@ -51,7 +48,11 @@@@
 	popf
 	int	$0x80
 #ifdef PIC
-	jmp	PIC_PLT(__cerror)		/* exect(file, argv, env); */
+	PIC_PROLOGUE             
+	movl	PIC_GOT(CERROR), %ecx
+	PIC_EPILOGUE
+	jmp	*%ecx
+
 #else
-	jmp	__cerror
+	jmp	CERROR
 #endif
Index: src/lib/libc/arch/i386/sys/sbrk.S
===================================================================
RCS file: /cvs/src/lib/libc/arch/i386/sys/sbrk.S,v
retrieving revision 1.5
diff -u -r1.5 sbrk.S
--- src/lib/libc/arch/i386/sys/sbrk.S	6 Oct 2002 23:31:19 -0000	1.5
+++ src/lib/libc/arch/i386/sys/sbrk.S	22 Mar 2003 15:11:21 -0000
@@@@ -1,3 +1,4 @@@@
+/*	$MirBSD: obsd.misc,v 1.25 2003/03/22 22:33:26 tg Exp $	*/
 /*-
  * Copyright (c) 1990 The Regents of the University of California.
  * All rights reserved.
@@@@ -13,10 +14,6 @@@@
  * 2. Redistributions in binary form must reproduce the above copyright
  *    notice, this list of conditions and the following disclaimer in the
  *    documentation and/or other materials provided with the distribution.
- * 3. All advertising materials mentioning features or use of this software
- *    must display the following acknowledgement:
- *	This product includes software developed by the University of
- *	California, Berkeley and its contributors.
  * 4. Neither the name of the University nor the names of its contributors
  *    may be used to endorse or promote products derived from this software
  *    without specific prior written permission.
@@@@ -66,7 +63,10 @@@@
 	addl	%ecx,(%edx)
 	ret
 err:
-	jmp	PIC_PLT(__cerror)
+	PIC_PROLOGUE             
+	movl	PIC_GOT(CERROR), %ecx
+	PIC_EPILOGUE
+	jmp	*%ecx
 
 #else
 
@@@@ -80,5 +80,5 @@@@
 	addl	%ecx,__curbrk
 	ret
 err:
-	jmp	__cerror
+	jmp	CERROR
 #endif
Index: src/lib/libc/arch/i386/sys/sigprocmask.S
===================================================================
RCS file: /cvs/src/lib/libc/arch/i386/sys/sigprocmask.S,v
retrieving revision 1.5
diff -u -r1.5 sigprocmask.S
--- src/lib/libc/arch/i386/sys/sigprocmask.S	6 Oct 2002 23:23:51 -0000	1.5
+++ src/lib/libc/arch/i386/sys/sigprocmask.S	22 Mar 2003 14:56:47 -0000
@@@@ -1,3 +1,4 @@@@
+/*	$MirBSD: obsd.misc,v 1.25 2003/03/22 22:33:26 tg Exp $	*/
 /*-
  * Copyright (c) 1990 The Regents of the University of California.
  * All rights reserved.
@@@@ -13,10 +14,6 @@@@
  * 2. Redistributions in binary form must reproduce the above copyright
  *    notice, this list of conditions and the following disclaimer in the
  *    documentation and/or other materials provided with the distribution.
- * 3. All advertising materials mentioning features or use of this software
- *    must display the following acknowledgement:
- *	This product includes software developed by the University of
- *	California, Berkeley and its contributors.
  * 4. Neither the name of the University nor the names of its contributors
  *    may be used to endorse or promote products derived from this software
  *    without specific prior written permission.
@@@@ -62,7 +59,11 @@@@
 	ret
 err:
 #ifdef PIC
-	jmp	PIC_PLT(__cerror)
+	PIC_PROLOGUE             
+	movl	PIC_GOT(CERROR), %ecx
+	PIC_EPILOGUE
+	jmp	*%ecx
+
 #else
-	jmp	__cerror
+	jmp	CERROR
 #endif
Index: src/lib/libc/arch/i386/sys/sigsuspend.S
===================================================================
RCS file: /cvs/src/lib/libc/arch/i386/sys/sigsuspend.S,v
retrieving revision 1.4
diff -u -r1.4 sigsuspend.S
--- src/lib/libc/arch/i386/sys/sigsuspend.S	6 Oct 2002 23:23:51 -0000	1.4
+++ src/lib/libc/arch/i386/sys/sigsuspend.S	22 Mar 2003 15:11:18 -0000
@@@@ -1,3 +1,4 @@@@
+/*	$MirBSD: obsd.misc,v 1.25 2003/03/22 22:33:26 tg Exp $	*/
 /*-
  * Copyright (c) 1990 The Regents of the University of California.
  * All rights reserved.
@@@@ -13,10 +14,6 @@@@
  * 2. Redistributions in binary form must reproduce the above copyright
  *    notice, this list of conditions and the following disclaimer in the
  *    documentation and/or other materials provided with the distribution.
- * 3. All advertising materials mentioning features or use of this software
- *    must display the following acknowledgement:
- *	This product includes software developed by the University of
- *	California, Berkeley and its contributors.
  * 4. Neither the name of the University nor the names of its contributors
  *    may be used to endorse or promote products derived from this software
  *    without specific prior written permission.
@@@@ -52,7 +49,10 @@@@
 	ret
 err:
 #ifdef PIC
-	jmp	PIC_PLT(__cerror)
+	PIC_PROLOGUE             
+	movl	PIC_GOT(CERROR), %ecx
+	PIC_EPILOGUE
+	jmp	*%ecx
 #else
-	jmp	__cerror
+	jmp	CERROR
 #endif
Index: src/lib/libc/arch/i386/sys/syscall.S
===================================================================
RCS file: /cvs/src/lib/libc/arch/i386/sys/syscall.S,v
retrieving revision 1.4
diff -u -r1.4 syscall.S
--- src/lib/libc/arch/i386/sys/syscall.S	6 Oct 2002 23:23:51 -0000	1.4
+++ src/lib/libc/arch/i386/sys/syscall.S	22 Mar 2003 14:56:42 -0000
@@@@ -1,3 +1,4 @@@@
+/*	$MirBSD: obsd.misc,v 1.25 2003/03/22 22:33:26 tg Exp $	*/
 /*-
  * Copyright (c) 1990 The Regents of the University of California.
  * All rights reserved.
@@@@ -13,10 +14,6 @@@@
  * 2. Redistributions in binary form must reproduce the above copyright
  *    notice, this list of conditions and the following disclaimer in the
  *    documentation and/or other materials provided with the distribution.
- * 3. All advertising materials mentioning features or use of this software
- *    must display the following acknowledgement:
- *	This product includes software developed by the University of
- *	California, Berkeley and its contributors.
  * 4. Neither the name of the University nor the names of its contributors
  *    may be used to endorse or promote products derived from this software
  *    without specific prior written permission.
@@@@ -51,7 +48,10 @@@@
 	ret
 err:
 #ifdef PIC
-	jmp	PIC_PLT(__cerror)
+	PIC_PROLOGUE             
+	movl	PIC_GOT(CERROR), %ecx
+	PIC_EPILOGUE
+	jmp	*%ecx
 #else
-	jmp	__cerror
+	jmp	CERROR
 #endif
Index: src/lib/libcurses++/Makefile
===================================================================
RCS file: /cvs/src/lib/libcurses++/Makefile,v
retrieving revision 1.5
diff -u -r1.5 Makefile
--- src/lib/libcurses++/Makefile	15 Aug 1999 11:35:35 -0000	1.5
+++ src/lib/libcurses++/Makefile	7 Mar 2003 18:07:36 -0000
@@@@ -10,6 +10,7 @@@@
 CLEANFILES+=demo
 
 CFLAGS+= -I${.CURDIR} -I${.CURDIR}/../libcurses ${CURSESTRACE}
+CFLAGS+= -I/usr/include/g++ -Wno-deprecated
 
 includes:
 	@@test -d ${DESTDIR}/usr/include/g++ || \
Index: src/libexec/ftpd/Makefile
===================================================================
RCS file: /cvs/src/libexec/ftpd/Makefile,v
retrieving revision 1.21
diff -u -r1.21 Makefile
--- src/libexec/ftpd/Makefile	25 Jan 2002 06:33:01 -0000	1.21
+++ src/libexec/ftpd/Makefile	7 Mar 2003 18:07:36 -0000
@@@@ -15,7 +15,7 @@@@
 LSDIR	= ${.CURDIR}/../../bin/ls
 .PATH:	${LSDIR}
 SRCS	+= ls.c cmp.c print.c util.c
-CFLAGS	+= -I${LSDIR}
+CFLAGS	+= -I${.CURDIR} -I${LSDIR}
 
 # not really used
 CPPFLAGS+=-DINET6
Index: src/libexec/login_chpass/Makefile
===================================================================
RCS file: /cvs/src/libexec/login_chpass/Makefile,v
retrieving revision 1.2
diff -u -r1.2 Makefile
--- src/libexec/login_chpass/Makefile	11 May 2002 00:19:58 -0000	1.2
+++ src/libexec/login_chpass/Makefile	7 Mar 2003 18:07:36 -0000
@@@@ -10,7 +10,7 @@@@
 .include <bsd.own.mk>	# For KERBEROS and YP
 
 CFLAGS+=-Wall
-.if (${KERBEROS:L} == "yes")
+.if (${KERBEROS4:L} == "yes")
 CFLAGS+=-DKERBEROS
 SRCS+=	new_pwd.c
 DPADD+= ${LIBKADM} ${LIBKRB} ${LIBDES} ${LIBCOM_ERR}
Index: src/libexec/rshd/Makefile
===================================================================
RCS file: /cvs/src/libexec/rshd/Makefile,v
retrieving revision 1.7
diff -u -r1.7 Makefile
--- src/libexec/rshd/Makefile	6 May 2002 22:23:31 -0000	1.7
+++ src/libexec/rshd/Makefile	7 Mar 2003 18:07:36 -0000
@@@@ -7,7 +7,7 @@@@
 
 .include <bsd.own.mk>
 
-.if (${KERBEROS:L} == "yes")
+.if (${KERBEROS4:L} == "yes")
 SRCS+=	des_rw.c
 .PATH:	${.CURDIR}/../../usr.bin/rsh
 CFLAGS+=-DKERBEROS
Index: src/sbin/disklabel/Makefile
===================================================================
RCS file: /cvs/src/sbin/disklabel/Makefile,v
retrieving revision 1.29
diff -u -r1.29 Makefile
--- src/sbin/disklabel/Makefile	8 Aug 2002 00:35:28 -0000	1.29
+++ src/sbin/disklabel/Makefile	7 Mar 2003 18:07:39 -0000
@@@@ -20,7 +20,7 @@@@
 manual.c:	disklabel.cat8
 	(echo 'char manpage[] = "\\'; \
 	sed -e 's/[\\"]/\\&/g' -e 's/$$/\\n\\/' disklabel.cat8; \
-	echo '";' ) > manual.c
+	echo '";' ) | col -b > manual.c
 .endif
 
 .if (${MACHINE} == "amiga")
Index: src/sbin/fdisk/Makefile
===================================================================
RCS file: /cvs/src/sbin/fdisk/Makefile,v
retrieving revision 1.20
diff -u -r1.20 Makefile
--- src/sbin/fdisk/Makefile	26 Jun 2002 18:34:04 -0000	1.20
+++ src/sbin/fdisk/Makefile	7 Mar 2003 18:07:39 -0000
@@@@ -48,7 +48,7 @@@@
 manual.c:	fdisk.cat8
 	(echo 'char manpage[] = "\\'; \
 	sed -e 's/[\\"]/\\&/g' -e 's/$$/\\n\\/' fdisk.cat8; \
-	echo '";' ) > manual.c
+	echo '";' ) | col -b > manual.c
 .endif
 
 .else
Index: src/sbin/fsck/fsutil.c
===================================================================
RCS file: /cvs/src/sbin/fsck/fsutil.c,v
retrieving revision 1.8
diff -u -r1.8 fsutil.c
--- src/sbin/fsck/fsutil.c	6 Sep 2002 21:15:54 -0000	1.8
+++ src/sbin/fsck/fsutil.c	22 Mar 2003 14:55:42 -0000
@@@@ -1,3 +1,4 @@@@
+/*	$MirBSD: obsd.misc,v 1.25 2003/03/22 22:33:26 tg Exp $	*/
 /*	$OpenBSD: fsutil.c,v 1.8 2002/09/06 21:16:16 deraadt Exp $	*/
 /*	$NetBSD: fsutil.c,v 1.2 1996/10/03 20:06:31 christos Exp $	*/
 
@@@@ -38,6 +39,7 @@@@
 #endif /* not lint */
 
 #include <sys/param.h>
+#include <sys/stat.h>
 #include <stdio.h>
 #include <string.h>
 #include <stdlib.h>
Index: src/sbin/pfctl/Makefile
===================================================================
RCS file: /cvs/src/sbin/pfctl/Makefile,v
retrieving revision 1.12
diff -u -r1.12 Makefile
--- src/sbin/pfctl/Makefile	9 Jan 2003 17:32:57 -0000	1.12
+++ src/sbin/pfctl/Makefile	7 Mar 2003 18:07:39 -0000
@@@@ -4,7 +4,7 @@@@
 SRCS=	pfctl.c parse.y pfctl_parser.c pf_print_state.c pfctl_altq.c
 SRCS+=	pfctl_radix.c pfctl_table.c pfctl_qstats.c
 CFLAGS+= -Wall -Wmissing-prototypes -Wno-uninitialized
-CFLAGS+= -Wstrict-prototypes
+CFLAGS+= -Wstrict-prototypes -I${.CURDIR}
 YFLAGS=
 MAN=	pfctl.8
 
Index: src/sbin/wsconsctl/Makefile
===================================================================
RCS file: /cvs/src/sbin/wsconsctl/Makefile,v
retrieving revision 1.11
diff -u -r1.11 Makefile
--- src/sbin/wsconsctl/Makefile	12 Aug 2002 10:46:44 -0000	1.11
+++ src/sbin/wsconsctl/Makefile	7 Mar 2003 18:07:40 -0000
@@@@ -7,7 +7,7 @@@@
 SRCS=	display.c keyboard.c keysym.c map_parse.y map_scan.l \
 	mouse.c util.c wsconsctl.c
 
-CPPFLAGS+=	-I.
+CPPFLAGS+=	-I. -I${.CURDIR}
 CLEANFILES+=	keysym.h y.tab.h
 
 beforedepend: keysym.h
Index: src/share/lkm/vfs/module/Makefile
===================================================================
RCS file: /cvs/src/share/lkm/vfs/module/Makefile,v
retrieving revision 1.7
diff -u -r1.7 Makefile
--- src/share/lkm/vfs/module/Makefile	27 Jun 2001 06:16:25 -0000	1.7
+++ src/share/lkm/vfs/module/Makefile	7 Mar 2003 18:07:40 -0000
@@@@ -45,7 +45,7 @@@@
 MODOBJ=combined.o
 
 KMOD=kernfsmod
-CFLAGS+= -D_KERNEL -I/sys -I.
+CFLAGS+= -D_KERNEL -I/sys -I. -I${.CURDIR}
 
 all:	$(MODOBJ)
 
Index: src/share/man/man4/options.4
===================================================================
RCS file: /cvs/src/share/man/man4/options.4,v
retrieving revision 1.118
diff -u -r1.118 options.4
--- src/share/man/man4/options.4	18 Mar 2003 12:53:35 -0000	1.118
+++ src/share/man/man4/options.4	22 Mar 2003 12:42:53 -0000
@@@@ -1,3 +1,4 @@@@
+.\"	$MirBSD: obsd.misc,v 1.25 2003/03/22 22:33:26 tg Exp $
 .\"	$OpenBSD: options.4,v 1.118 2003/03/18 12:53:57 david Exp $
 .\"	$NetBSD: options.4,v 1.21 1997/06/25 03:13:00 thorpej Exp $
 .\"
@@@@ -660,6 +661,11 @@@@
 See
 .Xr vga 4
 for details.
+.It Cd option INCLUDE_CONFIG_FILE
+Includes the configuration file given to
+.Xr config 8
+in the kernel image. It can be recovered later by executing
+.Em strings -n4 /bsd | sed -n 's/^=CF=//p'
 .El
 .Ss Networking Options
 .Bl -ohang
Index: src/share/mk/bsd.README
===================================================================
RCS file: /cvs/src/share/mk/bsd.README,v
retrieving revision 1.32
diff -u -r1.32 bsd.README
--- src/share/mk/bsd.README	25 Jun 2002 15:32:56 -0000	1.32
+++ src/share/mk/bsd.README	7 Mar 2003 18:07:41 -0000
@@@@ -222,7 +222,8 @@@@
 SKEY		Compile in support for S/key authentication. [yes, set
 		unconditionally]
 
-KERBEROS	Compile in support for Kerberos 4 authentication.
+KERBEROS	Compile in required support for Kerberos 4 authentication.
+KERBEROS4	Compile in optional support for Kerberos 4 authentication.
 
 KERBEROS5	Compile in support for Kerberos 5 authentication.
 
Index: src/share/mk/bsd.dep.mk
===================================================================
RCS file: /cvs/src/share/mk/bsd.dep.mk,v
retrieving revision 1.4
diff -u -r1.4 bsd.dep.mk
--- src/share/mk/bsd.dep.mk	9 Jun 1998 19:29:24 -0000	1.4
+++ src/share/mk/bsd.dep.mk	7 Mar 2003 18:07:41 -0000
@@@@ -10,17 +10,17 @@@@
 	@@files="${.ALLSRC:M*.s} ${.ALLSRC:M*.S}"; \
 	if [ "$$files" != " " ]; then \
 	  echo mkdep -a ${MKDEP} ${CFLAGS:M-[ID]*} ${CPPFLAGS} ${AINC} $$files;\
-	  mkdep -a ${MKDEP} ${CFLAGS:M-[ID]*} ${CPPFLAGS} ${AINC} $$files; \
+	  CC="${CC}" mkdep -a ${MKDEP} ${CFLAGS:M-[ID]*} ${CPPFLAGS} ${AINC} $$files; \
 	fi
 	@@files="${.ALLSRC:M*.c}"; \
 	if [ "$$files" != "" ]; then \
 	  echo mkdep -a ${MKDEP} ${CFLAGS:M-[ID]*} ${CPPFLAGS} $$files; \
-	  mkdep -a ${MKDEP} ${CFLAGS:M-[ID]*} ${CPPFLAGS} $$files; \
+	  CC="${CC}" mkdep -a ${MKDEP} ${CFLAGS:M-[ID]*} ${CPPFLAGS} $$files; \
 	fi
 	@@files="${.ALLSRC:M*.cc} ${.ALLSRC:M*.C} ${.ALLSRC:M*.cxx}"; \
 	if [ "$$files" != "  " ]; then \
 	  echo mkdep -a ${MKDEP} ${CXXFLAGS:M-[ID]*} ${CPPFLAGS} $$files; \
-	  mkdep -a ${MKDEP} ${CXXFLAGS:M-[ID]*} ${CPPFLAGS} $$files; \
+	  CC="${CC}" mkdep -a ${MKDEP} ${CXXFLAGS:M-[ID]*} ${CPPFLAGS} $$files; \
 	fi
 .else
 .depend:
Index: src/share/mk/bsd.own.mk
===================================================================
RCS file: /cvs/src/share/mk/bsd.own.mk,v
retrieving revision 1.63
diff -u -r1.63 bsd.own.mk
--- src/share/mk/bsd.own.mk	7 Dec 2002 22:30:38 -0000	1.63
+++ src/share/mk/bsd.own.mk	7 Mar 2003 18:07:41 -0000
@@@@ -14,6 +14,8 @@@@
 SKEY?=		yes
 # Set `KERBEROS' to `yes' to build with support for Kerberos authentication.
 KERBEROS?=	yes
+# Enable 'KERBEROS' support for where it is not really needed.
+KERBEROS4?=	$(KERBEROS)
 # Set `KERBEROS5' to `yes' to build with support for Kerberos5 authentication.
 KERBEROS5?=	yes
 # Set `YP' to `yes' to build with support for NIS/YP.
@@@@ -32,7 +34,7 @@@@
 # Set toolchain to be able to know differences.
 .if (${MACHINE_ARCH} == "alpha" || ${MACHINE_ARCH} == "powerpc" || \
      ${MACHINE_ARCH} == "hppa" || ${MACHINE_ARCH} == "sparc64" || \
-     ${MACHINE_ARCH} == "sparc")
+     ${MACHINE_ARCH} == "sparc" || ${MACHINE_ARCH} == "i386")
 ELF_TOOLCHAIN?=	yes
 .else
 ELF_TOOLCHAIN?=	no
Index: src/share/mk/bsd.prog.mk
===================================================================
RCS file: /cvs/src/share/mk/bsd.prog.mk,v
retrieving revision 1.34
diff -u -r1.34 bsd.prog.mk
--- src/share/mk/bsd.prog.mk	10 Nov 2002 23:03:33 -0000	1.34
+++ src/share/mk/bsd.prog.mk	7 Mar 2003 18:07:41 -0000
@@@@ -134,7 +134,7 @@@@
 
 .if !target(clean)
 clean: _SUBDIRUSE
-	rm -f a.out [Ee]rrs mklog core *.core \
+	rm -f a.out [Ee]rrs mklog core *.core *.cat? .depend \
 	    ${PROG} ${OBJS} ${LOBJS} ${CLEANFILES}
 .endif
 
Index: src/usr.bin/cpp/cpp.sh
===================================================================
RCS file: /cvs/src/usr.bin/cpp/cpp.sh,v
retrieving revision 1.5
diff -u -r1.5 cpp.sh
--- src/usr.bin/cpp/cpp.sh	17 Jun 1999 23:26:55 -0000	1.5
+++ src/usr.bin/cpp/cpp.sh	7 Mar 2003 18:07:42 -0000
@@@@ -1,4 +1,5 @@@@
 #!/bin/sh
+#	$MirBSD: obsd.misc,v 1.25 2003/03/22 22:33:26 tg Exp $
 #	$OpenBSD: cpp.sh,v 1.5 1999/06/17 23:27:17 espie Exp $
 
 #
@@@@ -17,10 +18,6 @@@@
 # 2. Redistributions in binary form must reproduce the above copyright
 #    notice, this list of conditions and the following disclaimer in the
 #    documentation and/or other materials provided with the distribution.
-# 3. All advertising materials mentioning features or use of this software
-#    must display the following acknowledgement:
-#	This product includes software developed by the University of
-#	California, Berkeley and its contributors.
 # 4. Neither the name of the University nor the names of its contributors
 #    may be used to endorse or promote products derived from this software
 #    without specific prior written permission.
@@@@ -51,6 +48,7 @@@@
 FOUNDFILES=no
 
 CPP=/usr/libexec/cpp
+[ -x /usr/local/bin/cpp ] && CPP=/usr/local/bin/cpp
 if [ ! -x $CPP ]; then
 	CPP=`cc -print-search-dirs | sed -ne '/^install: /s/install: \(.*\)/\1cpp/p'`;
 	if [ ! -x $CPP ]; then
Index: src/usr.bin/hexdump/parse.c
===================================================================
RCS file: /cvs/src/usr.bin/hexdump/parse.c,v
retrieving revision 1.10
diff -u -r1.10 parse.c
--- src/usr.bin/hexdump/parse.c	14 Mar 2002 06:51:20 -0000	1.10
+++ src/usr.bin/hexdump/parse.c	22 Mar 2003 14:46:03 -0000
@@@@ -1,3 +1,4 @@@@
+/*	$MirBSD: obsd.misc,v 1.25 2003/03/22 22:33:26 tg Exp $	*/
 /*	$OpenBSD: parse.c,v 1.10 2002/03/14 06:51:42 mpech Exp $	*/
 /*	$NetBSD: parse.c,v 1.12 2001/12/07 13:37:39 bjh21 Exp $	*/
 
@@@@ -13,10 +14,6 @@@@
  * 2. Redistributions in binary form must reproduce the above copyright
  *    notice, this list of conditions and the following disclaimer in the
  *    documentation and/or other materials provided with the distribution.
- * 3. All advertising materials mentioning features or use of this software
- *    must display the following acknowledgement:
- *	This product includes software developed by the University of
- *	California, Berkeley and its contributors.
  * 4. Neither the name of the University nor the names of its contributors
  *    may be used to endorse or promote products derived from this software
  *    without specific prior written permission.
@@@@ -350,7 +347,7 @@@@
 					pr->flags = F_ADDRESS;
 					++p2;
 					switch(p1[2]) {
-					case 'd': case 'o': case'x':
+					case 'd': case 'o': case 'x': case 'X':
 						cs[0] = 'q';
 						cs[1] = p1[2];
 						cs[2] = '\0';
Index: src/usr.bin/keynote/Makefile
===================================================================
RCS file: /cvs/src/usr.bin/keynote/Makefile,v
retrieving revision 1.10
diff -u -r1.10 Makefile
--- src/usr.bin/keynote/Makefile	11 May 2002 00:19:58 -0000	1.10
+++ src/usr.bin/keynote/Makefile	7 Mar 2003 18:07:42 -0000
@@@@ -3,7 +3,7 @@@@
 PROG=	keynote
 SRCS=	keynote-sign.c keynote-keygen.c keynote-sigver.c keynote-verify.c \
 	keynote-main.c z.tab.c lex.kv.c
-CFLAGS+= -Wall -DCRYPTO -DHAVE_CONFIG_H -I. -I${.CURDIR}
+CFLAGS+= -Wall -DCRYPTO -DHAVE_CONFIG_H -I. -I${.CURDIR} -I${.CURDIR}/../../lib/libkeynote
 LEXFLAGS2= -Pkv -s -i
 YACCFLAGS2= -d -p kv -b z
 DPADD=	${LIBKEYNOTE} ${LIBM} ${LIBCRYPTO}
Index: src/usr.bin/less/Makefile.bsd-wrapper
===================================================================
RCS file: /cvs/src/usr.bin/less/Makefile.bsd-wrapper,v
retrieving revision 1.18
diff -u -r1.18 Makefile.bsd-wrapper
--- src/usr.bin/less/Makefile.bsd-wrapper	3 Feb 1999 23:36:23 -0000	1.18
+++ src/usr.bin/less/Makefile.bsd-wrapper	7 Mar 2003 18:07:42 -0000
@@@@ -57,12 +57,12 @@@@
 .endif
 	PATH="/bin:/usr/bin:/sbin:/usr/sbin" \
 	INSTALL_PROGRAM="${INSTALL} ${INSTALL_COPY} ${INSTALL_STRIP}" \
-		/bin/sh ${.CURDIR}/configure --prefix=/usr ${CF}
+		${WCC} ${WCFLAGS} /bin/sh ${.CURDIR}/configure --prefix=/usr ${CF}
 
 config.status:
 	PATH="/bin:/usr/bin:/sbin:/usr/sbin" \
 	INSTALL_PROGRAM="${INSTALL} ${INSTALL_COPY} ${INSTALL_STRIP}" \
-		/bin/sh ${.CURDIR}/configure --prefix=/usr ${CF}
+		${WCC} ${WCFLAGS} /bin/sh ${.CURDIR}/configure --prefix=/usr ${CF}
 
 gnu_build:
 	${MAKE} ${WCC} ${WCFLAGS} ${WLDFLAGS} LIBS=${LIBS} datadir=${DATADIR} \
@@@@ -121,3 +121,4 @@@@
 .if !defined(NOMAN)
 .include <bsd.man.mk>
 .endif
+.include <bsd.own.mk>
Index: src/usr.bin/yacc/skeleton.c
===================================================================
RCS file: /cvs/src/usr.bin/yacc/skeleton.c,v
retrieving revision 1.19
diff -u -r1.19 skeleton.c
--- src/usr.bin/yacc/skeleton.c	3 Dec 2002 21:33:59 -0000	1.19
+++ src/usr.bin/yacc/skeleton.c	7 Mar 2003 18:07:42 -0000
@@@@ -1,3 +1,4 @@@@
+/*	$MirBSD: obsd.misc,v 1.25 2003/03/22 22:33:26 tg Exp $	*/
 /*	$OpenBSD: skeleton.c,v 1.19 2002/12/03 21:34:21 mickey Exp $	*/
 /*	$NetBSD: skeleton.c,v 1.10 1996/03/25 00:36:18 mrg Exp $	*/
 
@@@@ -16,10 +17,6 @@@@
  * 2. Redistributions in binary form must reproduce the above copyright
  *    notice, this list of conditions and the following disclaimer in the
  *    documentation and/or other materials provided with the distribution.
- * 3. All advertising materials mentioning features or use of this software
- *    must display the following acknowledgement:
- *	This product includes software developed by the University of
- *	California, Berkeley and its contributors.
  * 4. Neither the name of the University nor the names of its contributors
  *    may be used to endorse or promote products derived from this software
  *    without specific prior written permission.
@@@@ -64,10 +61,10 @@@@
     "#ifndef lint",
     "/*static char yysccsid[] = \"from: @@(#)yaccpar	1.9 (Berkeley) 02/21/93\";*/",
     "static char yyrcsid[]",
-    "#if __GNUC__ == 2",
+    "#if __GNUC__ >= 2",
     "  __attribute__ ((unused))",
-    "#endif /* __GNUC__ == 2 */",
-    "  = \"$OpenBSD: skeleton.c,v 1.19 2002/12/03 21:34:21 mickey Exp $\";",
+    "#endif /* __GNUC__ >= 2 */",
+    "  = \"$OpenBSD: skeleton.c,v 1.19 2002/12/03 21:34:21 mickey Exp $ $MirBSD: obsd.misc,v 1.25 2003/03/22 22:33:26 tg Exp $\";",
     "#endif",
     "#include <stdlib.h>",
     "#define YYBYACC 1",
Index: src/usr.sbin/Makefile
===================================================================
RCS file: /cvs/src/usr.sbin/Makefile,v
retrieving revision 1.95
diff -u -r1.95 Makefile
--- src/usr.sbin/Makefile	5 Mar 2003 22:15:16 -0000	1.95
+++ src/usr.sbin/Makefile	7 Mar 2003 18:07:42 -0000
@@@@ -5,7 +5,7 @@@@
 .include <bsd.own.mk>
 
 SUBDIR=	ac accton adduser amd arp authpf \
-	bind bootpd bootpgw bootpef bootptest \
+	bootpd bootpgw bootpef bootptest \
 	chroot config cron dev_mkdb dhcp \
 	edquota httpd inetd iostat \
 	kgmon kvm_mkdb lpr \
Index: src/usr.sbin/authpf/authpf.c
===================================================================
RCS file: /cvs/src/usr.sbin/authpf/authpf.c,v
retrieving revision 1.53
diff -u -r1.53 authpf.c
--- src/usr.sbin/authpf/authpf.c	19 Feb 2003 00:03:00 -0000	1.53
+++ src/usr.sbin/authpf/authpf.c	22 Mar 2003 14:41:46 -0000
@@@@ -1,3 +1,4 @@@@
+/*	$MirBSD: obsd.misc,v 1.25 2003/03/22 22:33:26 tg Exp $	*/
 /*	$OpenBSD: authpf.c,v 1.53 2003/02/19 00:03:22 deraadt Exp $	*/
 
 /*
@@@@ -426,7 +426,7 @@@@
 				buf[len - 1] = '\0';
 			else {
 				if ((lbuf = (char *)malloc(len + 1)) == NULL)
-					err(1, NULL);
+					err(1, "malloc");
 				memcpy(lbuf, buf, len);
 				lbuf[len] = '\0';
 				buf = lbuf;
Index: src/usr.sbin/config/main.c
===================================================================
RCS file: /cvs/src/usr.sbin/config/main.c,v
retrieving revision 1.29
diff -u -r1.29 main.c
--- src/usr.sbin/config/main.c	6 Sep 2002 19:01:44 -0000	1.29
+++ src/usr.sbin/config/main.c	7 Mar 2003 18:07:43 -0000
@@@@ -1,3 +1,4 @@@@
+/*	$MirBSD: obsd.misc,v 1.25 2003/03/22 22:33:26 tg Exp $	*/
 /*	$OpenBSD: main.c,v 1.29 2002/09/06 19:02:06 deraadt Exp $	*/
 /*	$NetBSD: main.c,v 1.22 1997/02/02 21:12:33 thorpej Exp $	*/
 
@@@@ -22,10 +23,6 @@@@
  * 2. Redistributions in binary form must reproduce the above copyright
  *    notice, this list of conditions and the following disclaimer in the
  *    documentation and/or other materials provided with the distribution.
- * 3. All advertising materials mentioning features or use of this software
- *    must display the following acknowledgement:
- *	This product includes software developed by the University of
- *	California, Berkeley and its contributors.
  * 4. Neither the name of the University nor the names of its contributors
  *    may be used to endorse or promote products derived from this software
  *    without specific prior written permission.
@@@@ -79,9 +76,11 @@@@
 static int crosscheck(void);
 static int badstar(void);
 static int mksymlinks(void);
+static int mkcfgfile(void);
 static int hasparent(struct devi *);
 static int cfcrosscheck(struct config *, const char *, struct nvlist *);
 static void optiondelta(void);
+FILE *getfp(void);
 
 int	madedir = 0;
 
@@@@ -270,8 +269,8 @@@@
 	 * Ready to go.  Build all the various files.
 	 */
 	if (mksymlinks() || mkmakefile() || mkheaders() || mkswap() ||
-	    mkioconf())
-		stop();
+	    mkioconf() || mkcfgfile())
+		stop();      
 	(void)printf("Don't forget to run \"make depend\"\n");
 	optiondelta();
 	exit(0);
@@@@ -312,6 +311,53 @@@@
 	free(p);
 
 	return (ret);
+}
+
+/*
+ * Create config_file.h that defines a macro with the content of conffile,
+ * useful to recover a lost kernel configuration.
+ * Each line is prefixed with =CF=
+ * Note : the current position of the configuration stream is modified.
+ */
+static int
+mkcfgfile(void)
+{
+	FILE *cfgh;
+	FILE *cfgfp;
+	int newline;
+	int c;
+
+	if ((cfgh = fopen("config_file.h", "w")) == NULL ||
+	    (cfgfp = getfp()) == NULL)
+		return (-1);
+	rewind(cfgfp);
+	fprintf(cfgh, "volatile const char *kern_config = \"\\\n"
+		      "START CONFIG FILE\\n\\\n");
+	newline = 1;
+	while ((c = getc(cfgfp)) != EOF) {
+		if (newline) {
+			fprintf(cfgh, "=CF=");
+			newline = 0;
+		}
+		switch (c) {
+		    case '\\':
+		    case '"':
+			fputc('\\', cfgh);
+			break;
+		    case '\n':
+			fprintf(cfgh, "\\n\\\n");
+			newline = 1;
+			continue;
+		}
+		fputc(c, cfgh);
+	}
+	if (!newline) {
+		fprintf(cfgh, "\\n\\\n");
+	}
+	fprintf(cfgh, "END CONFIG FILE\\n\";\n");
+	fclose(cfgh);
+
+	return (0);
 }
 
 static __dead void
Index: src/usr.sbin/config/scan.l
===================================================================
RCS file: /cvs/src/usr.sbin/config/scan.l,v
retrieving revision 1.15
diff -u -r1.15 scan.l
--- src/usr.sbin/config/scan.l	16 Feb 2002 21:27:39 -0000	1.15
+++ src/usr.sbin/config/scan.l	22 Mar 2003 14:41:36 -0000
@@@@ -1,4 +1,5 @@@@
 %{
+/*	$MirBSD: obsd.misc,v 1.25 2003/03/22 22:33:26 tg Exp $	*/
 /*	$OpenBSD: scan.l,v 1.15 2002/02/16 21:28:01 millert Exp $	*/
 /*	$NetBSD: scan.l,v 1.13 1997/02/02 21:12:37 thorpej Exp $	*/
 
@@@@ -23,10 +24,6 @@@@
  * 2. Redistributions in binary form must reproduce the above copyright
  *    notice, this list of conditions and the following disclaimer in the
  *    documentation and/or other materials provided with the distribution.
- * 3. All advertising materials mentioning features or use of this software
- *    must display the following acknowledgement:
- *	This product includes software developed by the University of
- *	California, Berkeley and its contributors.
  * 4. Neither the name of the University nor the names of its contributors
  *    may be used to endorse or promote products derived from this software
  *    without specific prior written permission.
@@@@ -192,6 +189,15 @@@@
 	yyfile = conffile = fname;
 	yyline = 1;
 	return (0);
+}
+
+/*
+ * Return the input stream
+ */
+FILE *
+getfp(void)
+{
+	return yyin;
 }
 
 /*
Index: src/usr.sbin/mrouted/Makefile
===================================================================
RCS file: /cvs/src/usr.sbin/mrouted/Makefile,v
retrieving revision 1.4
diff -u -r1.4 Makefile
--- src/usr.sbin/mrouted/Makefile	1 Aug 2002 03:45:31 -0000	1.4
+++ src/usr.sbin/mrouted/Makefile	7 Mar 2003 18:07:43 -0000
@@@@ -9,5 +9,6 @@@@
 DPADD+=	${LIBUTIL}
 
 CLEANFILES+= cfparse.c y.tab.h
+CFLAGS+= -I${.CURDIR}
 
 .include <bsd.prog.mk>

@


1.25
log
@- sync with repo
- rm fixed stuff
- tmp""ly add file list (for reference)
@
text
@d9 1
a9 1
+#	$MirBSD: obsd.misc,v 1.24 2003/03/22 16:14:16 tg Exp $
d64 1
a64 1
+#	$MirBSD: obsd.misc,v 1.24 2003/03/22 16:14:16 tg Exp $
d235 1
a235 1
+#	$MirBSD: obsd.misc,v 1.24 2003/03/22 16:14:16 tg Exp $
d330 1
a330 1
+/*	$MirBSD: obsd.misc,v 1.24 2003/03/22 16:14:16 tg Exp $	*/
d584 1
a584 1
+/*	$MirBSD: obsd.misc,v 1.24 2003/03/22 16:14:16 tg Exp $	*/
d604 1
a604 1
+/*	$MirBSD: obsd.misc,v 1.24 2003/03/22 16:14:16 tg Exp $	*/
d625 1
a625 1
+/*	$MirBSD: obsd.misc,v 1.24 2003/03/22 16:14:16 tg Exp $	*/
d645 1
a645 1
+/*	$MirBSD: obsd.misc,v 1.24 2003/03/22 16:14:16 tg Exp $	*/
d752 1
a752 1
+/*	$MirBSD: obsd.misc,v 1.24 2003/03/22 16:14:16 tg Exp $	*/
d814 1
a814 1
+/*	$MirBSD: obsd.misc,v 1.24 2003/03/22 16:14:16 tg Exp $	*/
d1162 1
a1162 1
+/*	$MirBSD: obsd.misc,v 1.24 2003/03/22 16:14:16 tg Exp $	*/
d1207 1
a1207 1
+/*	$MirBSD: obsd.misc,v 1.24 2003/03/22 16:14:16 tg Exp $	*/
d1250 1
a1250 1
+/*	$MirBSD: obsd.misc,v 1.24 2003/03/22 16:14:16 tg Exp $	*/
d1440 1
a1440 1
+/*	$MirBSD: obsd.misc,v 1.24 2003/03/22 16:14:16 tg Exp $	*/
d1512 1
a1512 1
+/*	$MirBSD: obsd.misc,v 1.24 2003/03/22 16:14:16 tg Exp $	*/
d1541 1
a1541 1
+/*	$MirBSD: obsd.misc,v 1.24 2003/03/22 16:14:16 tg Exp $	*/
d1598 1
a1598 1
+/*	$MirBSD: obsd.misc,v 1.24 2003/03/22 16:14:16 tg Exp $	*/
d1720 1
a1720 1
+	.asciz "$OpenBSD: htonl.S$ $MirBSD: obsd.misc,v 1.24 2003/03/22 16:14:16 tg Exp $"
d1791 1
a1791 1
+	.asciz "$OpenBSD: htons.S$ $MirBSD: obsd.misc,v 1.24 2003/03/22 16:14:16 tg Exp $"
d1809 1
a1809 1
+/*	$MirBSD: obsd.misc,v 1.24 2003/03/22 16:14:16 tg Exp $	*/
d1852 1
a1852 1
+/*	$MirBSD: obsd.misc,v 1.24 2003/03/22 16:14:16 tg Exp $	*/
d1894 1
a1894 1
+/*	$MirBSD: obsd.misc,v 1.24 2003/03/22 16:14:16 tg Exp $	*/
d1937 1
a1937 1
+/*	$MirBSD: obsd.misc,v 1.24 2003/03/22 16:14:16 tg Exp $	*/
d1974 1
a1974 1
+/*	$MirBSD: obsd.misc,v 1.24 2003/03/22 16:14:16 tg Exp $	*/
d2016 1
a2016 1
+/*	$MirBSD: obsd.misc,v 1.24 2003/03/22 16:14:16 tg Exp $	*/
d2053 1
a2053 1
+/*	$MirBSD: obsd.misc,v 1.24 2003/03/22 16:14:16 tg Exp $	*/
d2089 1
a2089 1
+/*	$MirBSD: obsd.misc,v 1.24 2003/03/22 16:14:16 tg Exp $	*/
d2220 1
a2220 1
+/*	$MirBSD: obsd.misc,v 1.24 2003/03/22 16:14:16 tg Exp $	*/
d2288 1
a2288 1
+.\"	$MirBSD: obsd.misc,v 1.24 2003/03/22 16:14:16 tg Exp $
d2399 1
a2399 1
+#	$MirBSD: obsd.misc,v 1.24 2003/03/22 16:14:16 tg Exp $
d2430 1
a2430 1
+/*	$MirBSD: obsd.misc,v 1.24 2003/03/22 16:14:16 tg Exp $	*/
d2505 1
a2505 1
+/*	$MirBSD: obsd.misc,v 1.24 2003/03/22 16:14:16 tg Exp $	*/
d2530 1
a2530 1
+    "  = \"$OpenBSD: skeleton.c,v 1.19 2002/12/03 21:34:21 mickey Exp $ $MirBSD: obsd.misc,v 1.24 2003/03/22 16:14:16 tg Exp $\";",
d2558 1
a2558 1
+/*	$MirBSD: obsd.misc,v 1.24 2003/03/22 16:14:16 tg Exp $	*/
d2579 1
a2579 1
+/*	$MirBSD: obsd.misc,v 1.24 2003/03/22 16:14:16 tg Exp $	*/
d2680 1
a2680 1
+/*	$MirBSD: obsd.misc,v 1.24 2003/03/22 16:14:16 tg Exp $	*/
@


1.24
log
@intermediate, broken, does not even apply
cvs and jupp in combination can produce weird results
jupp should be audited, or rewritten even
@
text
@a0 23
>> http://templeofhate.com/tglaser/MirBSD/index.php
>> MirBSD is a modified version of OpenBSD (http://www.OpenBSD.org/)

Copyright (c) 1982-2003 by Thorsten "mirabile" Glaser <x86@@ePost.de>
Copyright  1968-2003  The authors of And contributors to UNIX, the
    "C" Language, BSD/Berkeley Unix; 386BSD, NetBSD 1.1 and OpenBSD.

Anyone who obtained a copy of this work is hereby permitted to freely use,
distribute, modify, merge, sublicence, give away or sell it as long as the
authors are given due credit and the following notice is retained:

This work is provided "as is", with no explicit or implicit warranty what-
soever. Use it only at your own risk. In no event may an author or contri-
butor be held liable for any damage, directly or indirectly, that origina-
ted through or is caused by creation or modification of this work.


This diff, ID $MirBSD: regen-obsdp.sh,v 1.15 2003/03/09 21:54:38 tg Exp $
(/usr/ports/mystuff/misc-metafiles to obsd.misc) is made
against CTM on Sat Mar 22 15:19:13 UTC 2003.

### GENERATOR: @@(#)_MirBSD: regen-obsdp.sh,v 1.15 2003/03/09 21:54:38 tg Exp $
### CTM OpenBSD-cvs 3132
d9 1
a9 1
+#	$MirBSD$
d64 1
a64 1
+#	$MirBSD$
d235 1
a235 1
+#	$MirBSD: obsd.misc,v 1.23 2003/03/07 18:06:49 tg Exp $
d330 1
a330 1
+/*	$MirBSD$	*/
d584 1
a584 1
+/*	$MirBSD$	*/
d604 1
a604 1
+/*	$MirBSD$	*/
d625 1
a625 1
+/*	$MirBSD$	*/
d645 1
a645 1
+/*	$MirBSD$	*/
d752 1
a752 1
+/*	$MirBSD$	*/
d814 1
a814 1
+/*	$MirBSD$	*/
d1162 1
a1162 1
+/*	$MirBSD$	*/
d1207 1
a1207 1
+/*	$MirBSD$	*/
d1250 1
a1250 1
+/*	$MirBSD$	*/
d1440 1
a1440 1
+/*	$MirBSD$	*/
d1512 1
a1512 1
+/*	$MirBSD$	*/
d1541 1
a1541 1
+/*	$MirBSD$	*/
d1598 1
a1598 1
+/*	$MirBSD$	*/
d1720 1
a1720 1
+	.asciz "$OpenBSD: htonl.S$ $MirBSD: obsd.misc,v 1.23 2003/03/07 18:06:49 tg Exp $"
d1791 1
a1791 1
+	.asciz "$OpenBSD: htons.S$ $MirBSD: obsd.misc,v 1.23 2003/03/07 18:06:49 tg Exp $"
d1809 1
a1809 1
+/*	$MirBSD$	*/
d1852 1
a1852 1
+/*	$MirBSD$	*/
d1894 1
a1894 1
+/*	$MirBSD$	*/
d1937 1
a1937 1
+/*	$MirBSD$	*/
d1974 1
a1974 1
+/*	$MirBSD$	*/
d2016 1
a2016 1
+/*	$MirBSD$	*/
d2053 1
a2053 1
+/*	$MirBSD$	*/
d2089 1
a2089 1
+/*	$MirBSD$	*/
d2220 1
a2220 1
+/*	$MirBSD$	*/
d2288 1
a2288 1
+.\"	$MirBSD: obsd.misc,v 1.23 2003/03/07 18:06:49 tg Exp $
d2399 1
a2399 1
+#	$MirBSD: obsd.misc,v 1.23 2003/03/07 18:06:49 tg Exp $
d2430 1
a2430 1
+/*	$MirBSD$	*/
d2505 1
a2505 1
+/*	$MirBSD: obsd.misc,v 1.23 2003/03/07 18:06:49 tg Exp $	*/
d2530 1
a2530 1
+    "  = \"$OpenBSD: skeleton.c,v 1.19 2002/12/03 21:34:21 mickey Exp $ $MirBSD: obsd.misc,v 1.23 2003/03/07 18:06:49 tg Exp $\";",
d2558 1
a2558 1
+/*	$MirBSD$	*/
d2579 1
a2579 1
+/*	$MirBSD: obsd.misc,v 1.23 2003/03/07 18:06:49 tg Exp $	*/
d2680 1
a2680 1
+/*	$MirBSD$	*/
a2725 98
Index: ports/mystuff/misc-metafiles (meta file)
===================================================================
ports/mystuff/misc-metafiles	.
ports/mystuff/misc-patchfiles	.
ports/mystuff/misc-addedfiles	.
ports/mystuff/misc-notes	.
Index: ports/mystuff/misc-patchfiles (meta file)
===================================================================
src/bin/rcp/Makefile				kerberos4
src/bin/systrace/Makefile			$.curdir
src/distrib/crunch/Makefile.inc			honour DESTDIR
src/distrib/crunch/crunchgen/Makefile		cflags
src/distrib/crunch/crunchide/crunchide.c	ELF
src/distrib/i386/common/Makefile.inc		ELF
src/distrib/special/pppd/Makefile		$.curdir
src/distrib/special/rsh/Makefile		kerberos4
src/games/hack/Makefile				$.curdir
src/gnu/egcs/Makefile.bsd-wrapper		-libobjc
src/gnu/egcs/gcc/Makefile.bsd-wrapper		-Objective C, -Fortran, -C++
src/gnu/egcs/gcc/config.gcc			ELF
src/gnu/egcs/gcc/config/i386/openbsd.h		ELF
src/gnu/egcs/libf2c/Makefile.bsd-wrapper	cc -> $CC
src/gnu/egcs/libiberty/Makefile.bsd-wrapper1	cc -> $CC
src/gnu/egcs/libio/editbuf.cc			string.h missing
src/gnu/egcs/libio/editbuf.h			C99?
src/gnu/egcs/libio/parsestream.cc		string.h missing
src/gnu/egcs/libio/pfstream.cc			string.h missing
src/gnu/egcs/libstdc++/Makefile.bsd-wrapper	estdc++ includes are different
src/gnu/usr.bin/binutils/Makefile.bsd-wrapper	ELF;cc -> $CC
src/gnu/usr.bin/binutils/bfd/config.bfd		ELF
src/gnu/usr.bin/binutils/gas/config/tc-i386.c	ELF
src/gnu/usr.bin/binutils/gas/configure		ELF
src/gnu/usr.bin/binutils/gas/configure.in	ELF
src/gnu/usr.bin/binutils/gdb/config/alpha/nm-obsd.h	ELF
src/gnu/usr.bin/binutils/gdb/config/alpha/obsd.mt	ELF
src/gnu/usr.bin/binutils/gdb/config/i386/nm-obsd.h	ELF
src/gnu/usr.bin/binutils/ld/configure.tgt	ELF
src/gnu/usr.bin/cvs/Makefile.bsd-wrapper	LDFLAGS
src/gnu/usr.bin/gzip/Makefile			ELF
src/gnu/usr.bin/perl/hints/openbsd.sh		honour $CC
src/gnu/usr.bin/texinfo/Makefile.bsd-wrapper	CC
src/gnu/usr.sbin/mkhybrid/src/Makefile		$.curdir
src/gnu/usr.sbin/mkhybrid/src/diag/Makefile	$.curdir
src/kerberosIV/Makefile				SKIPDIRS integrated
src/kerberosIV/Makefile.inc			NOPIC for Kerberos libs
src/kerberosIV/lib/kadm/Makefile		$.curdir
src/kerberosIV/lib/roken/Makefile		$.curdir
src/kerberosIV/src/appl/ftp/ftp/Makefile	$.curdir
src/kerberosIV/src/appl/ftp/ftpd/Makefile	$.curdir
src/kerberosIV/src/include/Makefile		$.curdir
src/lib/csu/common_elf/crtbegin.c		ELF
src/lib/csu/common_elf/crtbeginS.c		ELF
src/lib/csu/i386/crt0.c				ELF
src/lib/libc/arch/i386/SYS.h			ELF
src/lib/libc/arch/i386/gen/alloca.S		ELF
src/lib/libc/arch/i386/gen/setjmp.S		ELF
src/lib/libc/arch/i386/gen/sigsetjmp.S		ELF
src/lib/libc/arch/i386/net/Makefile.inc		smaller (me!)
src/lib/libc/arch/i386/net/htonl.S		smaller (me!)
src/lib/libc/arch/i386/net/htons.S		smaller (me!)
src/lib/libc/arch/i386/sys/Ovfork.S		ELF
src/lib/libc/arch/i386/sys/brk.S		ELF
src/lib/libc/arch/i386/sys/cerror.S		ELF
src/lib/libc/arch/i386/sys/exect.S		ELF
src/lib/libc/arch/i386/sys/sbrk.S		ELF
src/lib/libc/arch/i386/sys/sigprocmask.S	ELF
src/lib/libc/arch/i386/sys/sigsuspend.S		ELF
src/lib/libc/arch/i386/sys/syscall.S		ELF
src/lib/libcurses++/Makefile			cflags -> g++-3.2
src/libexec/ftpd/Makefile			$.curdir
src/libexec/login_chpass/Makefile		kerberos4
src/libexec/rshd/Makefile			kerberos4
src/sbin/disklabel/Makefile			man|col-b
src/sbin/fdisk/Makefile				man|col-b
src/sbin/fsck/fsutil.c				KNF
src/sbin/pfctl/Makefile				$.curdir
src/sbin/wsconsctl/Makefile			$.curdir
src/share/lkm/vfs/module/Makefile		$.curdir
src/share/man/man4/options.4			INCLUDE_CONFIG_FILE
src/share/mk/bsd.README				no-kerberos4
src/share/mk/bsd.dep.mk				fix for $CC
src/share/mk/bsd.own.mk				no-kerberos4; ELF
src/share/mk/bsd.prog.mk			improve make clean
src/usr.bin/cpp/cpp.sh				fix for $CC
src/usr.bin/hexdump/parse.c			_aX should be legal, too
src/usr.bin/keynote/Makefile			$.curdir (and srcdir=.PATH)
src/usr.bin/less/Makefile.bsd-wrapper		$CC *sigh*
src/usr.bin/yacc/skeleton.c			gcc ifdef
src/usr.sbin/Makefile				-named -bind
src/usr.sbin/authpf/authpf.c			compile
src/usr.sbin/config/main.c			INCLUDE_CONFIG_FILE + my fixes
src/usr.sbin/config/scan.l			INCLUDE_CONFIG_FILE
src/usr.sbin/mrouted/Makefile			$.curdir
Index: ports/mystuff/misc-addedfiles (meta file)
===================================================================
Index: ports/mystuff/misc-notes (meta file)
===================================================================
misc. diffs
@


1.23
log
@intermediate; should work tho

sync ports
pull in new egcs-propolice 3.2.2-2 by etoh
www/lynx fallback to active ftp is pasv doesnt work & vice-versa
tinyirc update
stuff compiles with -Wall -Werror -pedantic
@
text
@d5 2
a6 5
Copyright  1968-2003 NOP by the authors of and contributors to AT&T
    UNIX; the "C" Language, xBSD/Berkeley Unix; 386BSD, NetBSD 1.1,
    OpenBSD and MirBSD. The licence conditions of specific files be-
    fore patching also applies to the patched unless the file is re-
    placed in its entirety.
d8 3
a10 3
I hereby permit everyone who obtained a copy of this work to distri-
bute, sell, give away, modify, sublicense, merge and use it, freely.
I retain the right to be known as an author of the work.
d12 4
a15 5
The work is provided "as is", with no explicit or implicit warranty.
Use at your own risk. Neither author nor any contributor may be held
liable for any damage, directly or indirectly, which originated thru
creation or modification of this work. Because computing devices are
error-prone, flawless behaviour cannot be expected.
d18 1
a18 1
This diff, ID $MirBSD: regen-obsdp.sh,v 1.14 2003/03/01 22:12:48 tg Exp $
d20 1
a20 1
against CTM on Fri Mar  7 18:02:16 UTC 2003.
d22 2
a23 2
### GENERATOR: @@(#)_MirBSD: regen-obsdp.sh,v 1.14 2003/03/01 22:12:48 tg Exp $
### CTM OpenBSD-cvs 3094
d30 7
a36 2
+++ src/bin/rcp/Makefile	4 Mar 2003 16:52:58 -0000
@@@@ -8,7 +8,7 @@@@
d51 1
a51 1
+++ src/bin/systrace/Makefile	4 Mar 2003 16:52:58 -0000
d72 1
a72 1
+++ src/distrib/crunch/Makefile.inc	4 Mar 2003 16:52:58 -0000
d85 4
a88 2
+++ src/distrib/crunch/crunchgen/Makefile	4 Mar 2003 16:52:58 -0000
@@@@ -2,7 +2,7 @@@@
d142 1
a142 1
+++ src/distrib/i386/common/Makefile.inc	4 Mar 2003 16:52:58 -0000
d189 1
a189 1
+++ src/distrib/special/pppd/Makefile	4 Mar 2003 16:52:59 -0000
d204 1
a204 1
+++ src/distrib/special/rsh/Makefile	4 Mar 2003 16:52:59 -0000
d219 1
a219 1
+++ src/games/hack/Makefile	4 Mar 2003 16:52:59 -0000
d235 1
a235 1
+++ src/gnu/egcs/Makefile.bsd-wrapper	4 Mar 2003 16:52:59 -0000
d256 1
a256 1
+++ src/gnu/egcs/gcc/Makefile.bsd-wrapper	4 Mar 2003 16:52:59 -0000
d258 1
a258 1
+#	$MirBSD: obsd.misc,v 1.22 2003/03/04 16:52:27 tg Exp $
d331 1
a331 1
+++ src/gnu/egcs/gcc/config.gcc	4 Mar 2003 16:52:59 -0000
d351 7
a357 2
+++ src/gnu/egcs/gcc/config/i386/openbsd.h	4 Mar 2003 16:52:59 -0000
@@@@ -19,25 +19,33 @@@@
d401 1
a401 1
@@@@ -51,8 +59,11 @@@@
d414 1
a414 1
@@@@ -62,6 +73,10 @@@@
d425 1
a425 1
@@@@ -72,7 +87,79 @@@@
d506 1
a506 1
@@@@ -88,15 +175,12 @@@@
d528 1
a528 1
@@@@ -116,21 +200,15 @@@@
d565 1
a565 1
+++ src/gnu/egcs/libf2c/Makefile.bsd-wrapper	4 Mar 2003 16:52:59 -0000
d580 1
a580 1
+++ src/gnu/egcs/libiberty/Makefile.bsd-wrapper1	4 Mar 2003 16:52:59 -0000
d605 6
a610 1
+++ src/gnu/egcs/libio/editbuf.cc	4 Mar 2003 16:52:59 -0000
d625 7
a631 2
+++ src/gnu/egcs/libio/editbuf.h	4 Mar 2003 16:52:59 -0000
@@@@ -76,7 +76,7 @@@@
d646 7
a652 2
+++ src/gnu/egcs/libio/parsestream.cc	4 Mar 2003 16:52:59 -0000
@@@@ -30,6 +30,7 @@@@
d666 7
a672 2
+++ src/gnu/egcs/libio/pfstream.cc	4 Mar 2003 16:52:59 -0000
@@@@ -30,6 +30,7 @@@@
d686 1
a686 1
+++ src/gnu/egcs/libstdc++/Makefile.bsd-wrapper	4 Mar 2003 16:52:59 -0000
d702 1
a702 1
+++ src/gnu/usr.bin/binutils/Makefile.bsd-wrapper	4 Mar 2003 16:52:59 -0000
d752 1
a752 1
+++ src/gnu/usr.bin/binutils/bfd/config.bfd	4 Mar 2003 16:52:59 -0000
d773 6
a778 1
+++ src/gnu/usr.bin/binutils/gas/config/tc-i386.c	4 Mar 2003 16:52:59 -0000
d803 1
a803 1
+++ src/gnu/usr.bin/binutils/gas/configure	4 Mar 2003 16:52:59 -0000
d819 1
a819 1
+++ src/gnu/usr.bin/binutils/gas/configure.in	4 Mar 2003 16:52:59 -0000
a828 91
Index: src/gnu/usr.bin/binutils/gdb/config/alpha/nm-obsd.h
===================================================================
RCS file: /cvs/src/gnu/usr.bin/binutils/gdb/config/alpha/nm-obsd.h,v
retrieving revision 1.3
diff -u -r1.3 nm-obsd.h
--- src/gnu/usr.bin/binutils/gdb/config/alpha/nm-obsd.h	21 May 2002 16:31:50 -0000	1.3
+++ src/gnu/usr.bin/binutils/gdb/config/alpha/nm-obsd.h	4 Mar 2003 16:53:00 -0000
@@@@ -27,7 +27,9 @@@@
 extern int
 get_longjmp_target PARAMS ((CORE_ADDR *));
 
-/* #include "nm-obsd.h" */
+#define SVR4_SHARED_LIBS
+
+#include "nm-obsd.h"
 #include <machine/alpha_cpu.h>
 
 #define ATTACH_DETACH
@@@@ -46,3 +48,60 @@@@
 
 /* This enables functions needed by kcore-nbsd.c */
 #define FETCH_KCORE_REGISTERS
+
+#include "solib.h"	/* Support for shared libraries. */
+
+/* The Net- and OpenBSD link.h structure definitions have different names
+   than the SunOS version, but the structures are very similar,
+   so we can use solib.c by defining the SunOS names.  */
+#define link_object	sod
+#define lo_name		sod_name
+#define lo_library	sod_library
+#define lo_unused	sod_reserved
+#define lo_major	sod_major
+#define lo_minor	sod_minor
+#define lo_next		sod_next
+
+#define l_addr		som_addr
+#define l_name		som_path
+#define l_next		som_next
+#define lm_lop		som_sod
+#define lm_lob		som_sodbase
+#define l_prev		som_sodbase
+#define lm_rwt		som_write
+#define lm_ld		som_dynamic
+#define lm_lpd		som_spd
+
+#define link_dynamic_2	section_dispatch_table
+#define ld_loaded	sdt_loaded
+#define ld_need		sdt_sods
+#define ld_rules	sdt_rules
+#define ld_got		sdt_got
+#define ld_plt		sdt_plt
+#define ld_rel		sdt_rel
+#define ld_hash		sdt_hash
+#define ld_stab		sdt_nzlist
+#define ld_stab_hash	sdt_filler2
+#define ld_buckets	sdt_buckets
+#define ld_symbols	sdt_strings
+#define ld_symb_size	sdt_str_sz
+#define ld_text		sdt_text_sz
+#define ld_plt_sz	sdt_plt_sz
+
+#define rtc_symb	rt_symbol
+#define rtc_sp		rt_sp
+#define rtc_next	rt_next
+
+#define r_debug		so_debug
+#define ldd_version	dd_version
+#define ldd_in_debugger	dd_in_debugger
+#define ldd_sym_loaded	dd_sym_loaded
+#define ldd_bp_addr	dd_bpt_addr
+#define ldd_bp_inst	dd_bpt_shadow
+#define ldd_cp		dd_cc
+
+#define link_dynamic	_dynamic
+#define ld_version	d_version
+#define ldd		d_debug
+#define ld_un		d_un
+#define ld_2		d_sdt
Index: src/gnu/usr.bin/binutils/gdb/config/alpha/obsd.mt
===================================================================
RCS file: /cvs/src/gnu/usr.bin/binutils/gdb/config/alpha/obsd.mt,v
retrieving revision 1.1
diff -u -r1.1 obsd.mt
--- src/gnu/usr.bin/binutils/gdb/config/alpha/obsd.mt	2 Feb 1997 00:40:12 -0000	1.1
+++ src/gnu/usr.bin/binutils/gdb/config/alpha/obsd.mt	4 Mar 2003 16:53:00 -0000
@@@@ -1,3 +1,3 @@@@
 # Target: Little-endian Alpha
-TDEPFILES= alpha-tdep.o
+TDEPFILES= alpha-tdep.o solib.o
 TM_FILE= tm-alphaobsd.h
d835 7
a841 2
+++ src/gnu/usr.bin/binutils/gdb/config/i386/nm-obsd.h	4 Mar 2003 16:53:00 -0000
@@@@ -17,8 +17,69 @@@@
d917 1
a917 1
+++ src/gnu/usr.bin/binutils/ld/configure.tgt	4 Mar 2003 16:53:00 -0000
d933 1
a933 1
+++ src/gnu/usr.bin/cvs/Makefile.bsd-wrapper	4 Mar 2003 16:53:00 -0000
d965 1
a965 1
+++ src/gnu/usr.bin/gzip/Makefile	4 Mar 2003 16:53:00 -0000
d988 4
a991 4
retrieving revision 1.28
diff -u -r1.28 openbsd.sh
--- src/gnu/usr.bin/perl/hints/openbsd.sh	20 Jan 2003 00:07:09 -0000	1.28
+++ src/gnu/usr.bin/perl/hints/openbsd.sh	4 Mar 2003 16:53:00 -0000
d1007 1
a1007 1
+++ src/gnu/usr.bin/texinfo/Makefile.bsd-wrapper	4 Mar 2003 16:53:00 -0000
d1030 1
a1030 1
+++ src/gnu/usr.sbin/mkhybrid/src/Makefile	4 Mar 2003 16:53:00 -0000
d1046 1
a1046 1
+++ src/gnu/usr.sbin/mkhybrid/src/diag/Makefile	4 Mar 2003 16:53:00 -0000
d1063 1
a1063 1
+++ src/kerberosIV/Makefile	4 Mar 2003 16:53:00 -0000
d1084 1
a1084 1
+++ src/kerberosIV/Makefile.inc	4 Mar 2003 16:53:00 -0000
d1100 1
a1100 1
+++ src/kerberosIV/lib/kadm/Makefile	4 Mar 2003 16:53:00 -0000
d1116 1
a1116 1
+++ src/kerberosIV/lib/roken/Makefile	4 Mar 2003 16:53:00 -0000
d1132 1
a1132 1
+++ src/kerberosIV/src/appl/ftp/ftp/Makefile	4 Mar 2003 16:53:00 -0000
d1151 1
a1151 1
+++ src/kerberosIV/src/appl/ftp/ftpd/Makefile	4 Mar 2003 16:53:00 -0000
d1167 1
a1167 1
+++ src/kerberosIV/src/include/Makefile	4 Mar 2003 16:53:00 -0000
d1183 7
a1189 2
+++ src/lib/csu/common_elf/crtbegin.c	4 Mar 2003 16:53:00 -0000
@@@@ -83,6 +83,7 @@@@
d1197 1
a1197 1
@@@@ -90,10 +91,11 @@@@
d1212 1
a1212 1
@@@@ -102,6 +104,8 @@@@
d1228 7
a1234 2
+++ src/lib/csu/common_elf/crtbeginS.c	4 Mar 2003 16:53:00 -0000
@@@@ -81,6 +81,7 @@@@
d1242 1
a1242 1
@@@@ -88,7 +89,8 @@@@
d1252 1
a1252 1
@@@@ -96,8 +98,9 @@@@
d1271 4
a1274 2
+++ src/lib/csu/i386/crt0.c	4 Mar 2003 16:53:00 -0000
@@@@ -2,7 +2,7 @@@@
d1461 18
a1478 2
+++ src/lib/libc/arch/i386/SYS.h	4 Mar 2003 16:53:00 -0000
@@@@ -71,6 +71,15 @@@@
d1494 1
a1494 1
@@@@ -80,13 +89,25 @@@@
d1521 1
a1521 1
@@@@ -105,4 +126,4 @@@@
d1533 18
a1550 2
+++ src/lib/libc/arch/i386/gen/alloca.S	4 Mar 2003 16:53:00 -0000
@@@@ -55,4 +55,4 @@@@
d1562 18
a1579 2
+++ src/lib/libc/arch/i386/gen/setjmp.S	4 Mar 2003 16:53:00 -0000
@@@@ -52,6 +52,7 @@@@
d1587 1
a1587 1
@@@@ -59,6 +60,8 @@@@
d1596 1
a1596 1
@@@@ -73,6 +76,7 @@@@
d1604 1
a1604 1
@@@@ -80,6 +84,8 @@@@
d1619 18
a1636 2
+++ src/lib/libc/arch/i386/gen/sigsetjmp.S	4 Mar 2003 16:53:00 -0000
@@@@ -47,6 +47,8 @@@@
d1645 1
a1645 1
@@@@ -54,6 +56,8 @@@@
d1654 1
a1654 1
@@@@ -70,6 +74,8 @@@@
d1663 1
a1663 1
@@@@ -77,6 +83,8 @@@@
d1678 1
a1678 1
+++ src/lib/libc/arch/i386/net/Makefile.inc	4 Mar 2003 16:53:00 -0000
d1691 3
a1693 3
+++ src/lib/libc/arch/i386/net/htonl.S	4 Mar 2003 16:53:00 -0000
@@@@ -1,50 +1,28 @@@@
 /*-
d1696 1
a1696 1
+ * Copyright (c) 1982-2003 by Thorsten "mirabile" Glaser <x86@@ePost.de>
d1700 3
a1702 3
+ * I hereby permit everyone who obtained a copy of this work to distri-
+ * bute, sell, give away, modify, sublicense, merge and use it, freely.
+ * I retain the right to be known as an author of the work.
d1731 4
a1734 5
+ * The work is provided "as is", with no explicit or implicit warranty.
+ * Use at your own risk. Neither author nor any contributor may be held
+ * liable for any damage, directly or indirectly, which originated thru
+ * creation or modification of this work. Because computing devices are
+ * error-prone, flawless behaviour cannot be expected.
d1743 1
a1743 1
+	.asciz "$OpenBSD: htonl.S$ $MirBSD: obsd.misc,v 1.22 2003/03/04 16:52:27 tg Exp $"
d1762 3
a1764 3
+++ src/lib/libc/arch/i386/net/htons.S	4 Mar 2003 16:53:00 -0000
@@@@ -1,48 +1,26 @@@@
 /*-
d1767 1
a1767 1
+ * Copyright (c) 1982-2003 by Thorsten "mirabile" Glaser <x86@@ePost.de>
d1771 3
a1773 3
+ * I hereby permit everyone who obtained a copy of this work to distri-
+ * bute, sell, give away, modify, sublicense, merge and use it, freely.
+ * I retain the right to be known as an author of the work.
d1802 4
a1805 5
+ * The work is provided "as is", with no explicit or implicit warranty.
+ * Use at your own risk. Neither author nor any contributor may be held
+ * liable for any damage, directly or indirectly, which originated thru
+ * creation or modification of this work. Because computing devices are
+ * error-prone, flawless behaviour cannot be expected.
d1814 1
a1814 1
+	.asciz "$OpenBSD: htons.S$ $MirBSD: obsd.misc,v 1.22 2003/03/04 16:52:27 tg Exp $"
d1830 18
a1847 2
+++ src/lib/libc/arch/i386/sys/Ovfork.S	4 Mar 2003 16:53:00 -0000
@@@@ -55,15 +55,15 @@@@
d1873 18
a1890 2
+++ src/lib/libc/arch/i386/sys/brk.S	4 Mar 2003 16:53:00 -0000
@@@@ -70,7 +70,10 @@@@
d1902 1
a1902 1
@@@@ -87,5 +90,5 @@@@
d1915 18
a1932 2
+++ src/lib/libc/arch/i386/sys/cerror.S	4 Mar 2003 16:53:00 -0000
@@@@ -41,15 +41,15 @@@@
d1958 18
a1975 2
+++ src/lib/libc/arch/i386/sys/exect.S	4 Mar 2003 16:53:00 -0000
@@@@ -51,7 +51,11 @@@@
d1995 18
a2012 2
+++ src/lib/libc/arch/i386/sys/sbrk.S	4 Mar 2003 16:53:00 -0000
@@@@ -66,7 +66,10 @@@@
d2024 1
a2024 1
@@@@ -80,5 +83,5 @@@@
d2037 18
a2054 2
+++ src/lib/libc/arch/i386/sys/sigprocmask.S	4 Mar 2003 16:53:00 -0000
@@@@ -62,7 +62,11 @@@@
d2074 18
a2091 2
+++ src/lib/libc/arch/i386/sys/sigsuspend.S	4 Mar 2003 16:53:00 -0000
@@@@ -52,7 +52,10 @@@@
d2110 18
a2127 2
+++ src/lib/libc/arch/i386/sys/syscall.S	4 Mar 2003 16:53:00 -0000
@@@@ -51,7 +51,10 @@@@
d2146 1
a2146 1
+++ src/lib/libcurses++/Makefile	4 Mar 2003 16:53:01 -0000
d2161 1
a2161 1
+++ src/libexec/ftpd/Makefile	4 Mar 2003 16:53:01 -0000
d2177 1
a2177 1
+++ src/libexec/login_chpass/Makefile	4 Mar 2003 16:53:01 -0000
d2193 1
a2193 1
+++ src/libexec/rshd/Makefile	4 Mar 2003 16:53:01 -0000
d2209 1
a2209 1
+++ src/sbin/disklabel/Makefile	4 Mar 2003 16:53:01 -0000
d2225 1
a2225 1
+++ src/sbin/fdisk/Makefile	4 Mar 2003 16:53:01 -0000
d2241 7
a2247 2
+++ src/sbin/fsck/fsutil.c	4 Mar 2003 16:53:01 -0000
@@@@ -38,6 +38,7 @@@@
d2261 1
a2261 1
+++ src/sbin/pfctl/Makefile	4 Mar 2003 16:53:04 -0000
a2270 16
Index: src/sbin/photurisd/Makefile
===================================================================
RCS file: /cvs/src/sbin/photurisd/Makefile,v
retrieving revision 1.4
diff -u -r1.4 Makefile
--- src/sbin/photurisd/Makefile	28 Jan 2001 22:44:43 -0000	1.4
+++ src/sbin/photurisd/Makefile	4 Mar 2003 16:53:04 -0000
@@@@ -19,7 +19,7 @@@@
 	modulus.c spi.c state.c validity.c attributes.c \
 	photurisd.c packet.c api.c kernel.c
 
-CFLAGS+= -I. -DIPSEC
+CFLAGS+= -I. -I${.CURDIR} -DIPSEC
 MAN= photurisd.8
 
 .include <bsd.prog.mk>
d2277 1
a2277 1
+++ src/sbin/wsconsctl/Makefile	4 Mar 2003 16:53:04 -0000
d2293 1
a2293 1
+++ src/share/lkm/vfs/module/Makefile	4 Mar 2003 16:53:04 -0000
d2306 4
a2309 4
retrieving revision 1.116
diff -u -r1.116 options.4
--- src/share/man/man4/options.4	17 Feb 2003 22:19:08 -0000	1.116
+++ src/share/man/man4/options.4	4 Mar 2003 16:53:04 -0000
d2311 2
a2312 2
+.\"	$MirBSD: obsd.misc,v 1.22 2003/03/04 16:52:27 tg Exp $
 .\"	$OpenBSD: options.4,v 1.116 2003/02/17 22:19:30 henning Exp $
d2333 1
a2333 1
+++ src/share/mk/bsd.README	4 Mar 2003 16:53:04 -0000
d2350 1
a2350 1
+++ src/share/mk/bsd.dep.mk	4 Mar 2003 16:53:04 -0000
d2378 1
a2378 1
+++ src/share/mk/bsd.own.mk	4 Mar 2003 16:53:04 -0000
d2403 1
a2403 1
+++ src/share/mk/bsd.prog.mk	4 Mar 2003 16:53:05 -0000
d2419 1
a2419 1
+++ src/usr.bin/cpp/cpp.sh	4 Mar 2003 16:53:05 -0000
d2422 1
a2422 1
+#	$MirBSD: obsd.misc,v 1.22 2003/03/04 16:52:27 tg Exp $
d2451 18
a2468 2
+++ src/usr.bin/hexdump/parse.c	4 Mar 2003 16:53:05 -0000
@@@@ -350,7 +350,7 @@@@
d2483 1
a2483 1
+++ src/usr.bin/keynote/Makefile	4 Mar 2003 16:53:05 -0000
d2499 1
a2499 1
+++ src/usr.bin/less/Makefile.bsd-wrapper	4 Mar 2003 16:53:05 -0000
d2526 1
a2526 1
+++ src/usr.bin/yacc/skeleton.c	4 Mar 2003 16:53:05 -0000
d2528 1
a2528 1
+/*	$MirBSD: obsd.misc,v 1.22 2003/03/04 16:52:27 tg Exp $	*/
d2553 1
a2553 1
+    "  = \"$OpenBSD: skeleton.c,v 1.19 2002/12/03 21:34:21 mickey Exp $ $MirBSD: obsd.misc,v 1.22 2003/03/04 16:52:27 tg Exp $\";",
d2563 1
a2563 1
+++ src/usr.sbin/Makefile	7 Mar 2003 16:38:31 -0000
d2579 6
a2584 1
+++ src/usr.sbin/authpf/authpf.c	4 Mar 2003 16:53:05 -0000
d2600 1
a2600 1
+++ src/usr.sbin/config/main.c	4 Mar 2003 16:53:05 -0000
d2602 1
a2602 1
+/*	$MirBSD: obsd.misc,v 1.22 2003/03/04 16:52:27 tg Exp $	*/
d2700 8
a2707 2
+++ src/usr.sbin/config/scan.l	4 Mar 2003 16:53:05 -0000
@@@@ -23,10 +23,6 @@@@
d2718 1
a2718 1
@@@@ -192,6 +188,15 @@@@
d2740 1
a2740 1
+++ src/usr.sbin/mrouted/Makefile	4 Mar 2003 16:53:05 -0000
a2824 1
src/sbin/photurisd/Makefile			$.curdir
@


1.22
log
@the usual sync/update post-release
pre-build
@
text
@d24 1
a24 1
against CTM on Tue Mar  4 16:48:52 UTC 2003.
d27 1
a27 1
### CTM OpenBSD-cvs 3085
d34 1
a34 1
+++ src/bin/rcp/Makefile	2 Mar 2003 02:28:26 -0000
d50 1
a50 1
+++ src/bin/systrace/Makefile	2 Mar 2003 02:28:26 -0000
d71 1
a71 1
+++ src/distrib/crunch/Makefile.inc	2 Mar 2003 02:28:26 -0000
d84 1
a84 1
+++ src/distrib/crunch/crunchgen/Makefile	2 Mar 2003 02:28:26 -0000
d100 1
a100 1
+++ src/distrib/crunch/crunchide/crunchide.c	2 Mar 2003 02:28:26 -0000
d139 1
a139 1
+++ src/distrib/i386/common/Makefile.inc	2 Mar 2003 02:28:26 -0000
d186 1
a186 1
+++ src/distrib/special/pppd/Makefile	2 Mar 2003 02:28:26 -0000
d201 1
a201 1
+++ src/distrib/special/rsh/Makefile	2 Mar 2003 02:28:26 -0000
d216 1
a216 1
+++ src/games/hack/Makefile	2 Mar 2003 02:28:26 -0000
d232 1
a232 1
+++ src/gnu/egcs/Makefile.bsd-wrapper	2 Mar 2003 02:28:26 -0000
d253 1
a253 1
+++ src/gnu/egcs/gcc/Makefile.bsd-wrapper	2 Mar 2003 02:28:26 -0000
d255 1
a255 1
+#	$MirBSD: obsd.misc,v 1.21 2003/03/02 02:27:52 tg Exp $
d328 1
a328 1
+++ src/gnu/egcs/gcc/config.gcc	2 Mar 2003 02:28:26 -0000
d348 1
a348 1
+++ src/gnu/egcs/gcc/config/i386/openbsd.h	2 Mar 2003 02:28:26 -0000
d557 1
a557 1
+++ src/gnu/egcs/libf2c/Makefile.bsd-wrapper	2 Mar 2003 02:28:26 -0000
d572 1
a572 1
+++ src/gnu/egcs/libiberty/Makefile.bsd-wrapper1	2 Mar 2003 02:28:26 -0000
d597 1
a597 1
+++ src/gnu/egcs/libio/editbuf.cc	2 Mar 2003 02:28:26 -0000
d612 1
a612 1
+++ src/gnu/egcs/libio/editbuf.h	2 Mar 2003 02:28:26 -0000
d628 1
a628 1
+++ src/gnu/egcs/libio/parsestream.cc	2 Mar 2003 02:28:26 -0000
d643 1
a643 1
+++ src/gnu/egcs/libio/pfstream.cc	2 Mar 2003 02:28:26 -0000
d658 1
a658 1
+++ src/gnu/egcs/libstdc++/Makefile.bsd-wrapper	2 Mar 2003 02:28:26 -0000
d674 1
a674 1
+++ src/gnu/usr.bin/binutils/Makefile.bsd-wrapper	2 Mar 2003 02:28:26 -0000
d724 1
a724 1
+++ src/gnu/usr.bin/binutils/bfd/config.bfd	2 Mar 2003 02:28:26 -0000
d745 1
a745 1
+++ src/gnu/usr.bin/binutils/gas/config/tc-i386.c	2 Mar 2003 02:28:26 -0000
d770 1
a770 1
+++ src/gnu/usr.bin/binutils/gas/configure	2 Mar 2003 02:28:26 -0000
d786 1
a786 1
+++ src/gnu/usr.bin/binutils/gas/configure.in	2 Mar 2003 02:28:26 -0000
d802 1
a802 1
+++ src/gnu/usr.bin/binutils/gdb/config/alpha/nm-obsd.h	2 Mar 2003 02:28:26 -0000
d881 1
a881 1
+++ src/gnu/usr.bin/binutils/gdb/config/alpha/obsd.mt	2 Mar 2003 02:28:26 -0000
d893 1
a893 1
+++ src/gnu/usr.bin/binutils/gdb/config/i386/nm-obsd.h	2 Mar 2003 02:28:26 -0000
d970 1
a970 1
+++ src/gnu/usr.bin/binutils/ld/configure.tgt	2 Mar 2003 02:28:26 -0000
d986 1
a986 1
+++ src/gnu/usr.bin/cvs/Makefile.bsd-wrapper	2 Mar 2003 02:28:26 -0000
d1018 1
a1018 1
+++ src/gnu/usr.bin/gzip/Makefile	2 Mar 2003 02:28:26 -0000
d1044 1
a1044 1
+++ src/gnu/usr.bin/perl/hints/openbsd.sh	2 Mar 2003 02:28:26 -0000
d1060 1
a1060 1
+++ src/gnu/usr.bin/texinfo/Makefile.bsd-wrapper	2 Mar 2003 02:28:26 -0000
d1083 1
a1083 1
+++ src/gnu/usr.sbin/mkhybrid/src/Makefile	2 Mar 2003 02:28:26 -0000
d1099 1
a1099 1
+++ src/gnu/usr.sbin/mkhybrid/src/diag/Makefile	2 Mar 2003 02:28:26 -0000
d1116 1
a1116 1
+++ src/kerberosIV/Makefile	2 Mar 2003 02:28:26 -0000
d1137 1
a1137 1
+++ src/kerberosIV/Makefile.inc	2 Mar 2003 02:28:26 -0000
d1153 1
a1153 1
+++ src/kerberosIV/lib/kadm/Makefile	2 Mar 2003 02:28:26 -0000
d1169 1
a1169 1
+++ src/kerberosIV/lib/roken/Makefile	2 Mar 2003 02:28:26 -0000
d1185 1
a1185 1
+++ src/kerberosIV/src/appl/ftp/ftp/Makefile	2 Mar 2003 02:28:26 -0000
d1204 1
a1204 1
+++ src/kerberosIV/src/appl/ftp/ftpd/Makefile	2 Mar 2003 02:28:26 -0000
d1220 1
a1220 1
+++ src/kerberosIV/src/include/Makefile	2 Mar 2003 02:28:26 -0000
d1236 1
a1236 1
+++ src/lib/csu/common_elf/crtbegin.c	2 Mar 2003 02:28:26 -0000
d1276 1
a1276 1
+++ src/lib/csu/common_elf/crtbeginS.c	2 Mar 2003 02:28:26 -0000
d1314 1
a1314 1
+++ src/lib/csu/i386/crt0.c	2 Mar 2003 02:28:26 -0000
d1502 1
a1502 1
+++ src/lib/libc/arch/i386/SYS.h	2 Mar 2003 02:28:26 -0000
d1558 1
a1558 1
+++ src/lib/libc/arch/i386/gen/alloca.S	2 Mar 2003 02:28:26 -0000
d1571 1
a1571 1
+++ src/lib/libc/arch/i386/gen/setjmp.S	2 Mar 2003 02:28:26 -0000
d1612 1
a1612 1
+++ src/lib/libc/arch/i386/gen/sigsetjmp.S	2 Mar 2003 02:28:26 -0000
d1655 1
a1655 1
+++ src/lib/libc/arch/i386/net/Makefile.inc	2 Mar 2003 02:28:26 -0000
d1668 1
a1668 1
+++ src/lib/libc/arch/i386/net/htonl.S	2 Mar 2003 02:28:26 -0000
d1721 1
a1721 1
+	.asciz "$OpenBSD: htonl.S$ $MirBSD: obsd.misc,v 1.21 2003/03/02 02:27:52 tg Exp $"
d1740 1
a1740 1
+++ src/lib/libc/arch/i386/net/htons.S	2 Mar 2003 02:28:26 -0000
d1793 1
a1793 1
+	.asciz "$OpenBSD: htons.S$ $MirBSD: obsd.misc,v 1.21 2003/03/02 02:27:52 tg Exp $"
d1809 1
a1809 1
+++ src/lib/libc/arch/i386/sys/Ovfork.S	2 Mar 2003 02:28:26 -0000
d1836 1
a1836 1
+++ src/lib/libc/arch/i386/sys/brk.S	2 Mar 2003 02:28:26 -0000
d1862 1
a1862 1
+++ src/lib/libc/arch/i386/sys/cerror.S	2 Mar 2003 02:28:26 -0000
d1889 1
a1889 1
+++ src/lib/libc/arch/i386/sys/exect.S	2 Mar 2003 02:28:26 -0000
d1910 1
a1910 1
+++ src/lib/libc/arch/i386/sys/sbrk.S	2 Mar 2003 02:28:27 -0000
d1936 1
a1936 1
+++ src/lib/libc/arch/i386/sys/sigprocmask.S	2 Mar 2003 02:28:27 -0000
d1957 1
a1957 1
+++ src/lib/libc/arch/i386/sys/sigsuspend.S	2 Mar 2003 02:28:27 -0000
d1977 1
a1977 1
+++ src/lib/libc/arch/i386/sys/syscall.S	2 Mar 2003 02:28:27 -0000
d1997 1
a1997 1
+++ src/lib/libcurses++/Makefile	2 Mar 2003 02:28:27 -0000
d2012 1
a2012 1
+++ src/libexec/ftpd/Makefile	2 Mar 2003 02:28:27 -0000
d2028 1
a2028 1
+++ src/libexec/login_chpass/Makefile	2 Mar 2003 02:28:27 -0000
d2044 1
a2044 1
+++ src/libexec/rshd/Makefile	2 Mar 2003 02:28:27 -0000
d2060 1
a2060 1
+++ src/sbin/disklabel/Makefile	2 Mar 2003 02:28:27 -0000
d2076 1
a2076 1
+++ src/sbin/fdisk/Makefile	2 Mar 2003 02:28:27 -0000
d2092 1
a2092 1
+++ src/sbin/fsck/fsutil.c	2 Mar 2003 02:28:27 -0000
d2107 1
a2107 1
+++ src/sbin/pfctl/Makefile	2 Mar 2003 02:28:27 -0000
d2123 1
a2123 1
+++ src/sbin/photurisd/Makefile	2 Mar 2003 02:28:27 -0000
d2139 1
a2139 1
+++ src/sbin/wsconsctl/Makefile	2 Mar 2003 02:28:27 -0000
d2155 1
a2155 1
+++ src/share/lkm/vfs/module/Makefile	2 Mar 2003 02:28:27 -0000
d2171 1
a2171 1
+++ src/share/man/man4/options.4	2 Mar 2003 02:28:27 -0000
d2173 1
a2173 1
+.\"	$MirBSD: obsd.misc,v 1.21 2003/03/02 02:27:52 tg Exp $
d2195 1
a2195 1
+++ src/share/mk/bsd.README	2 Mar 2003 02:28:27 -0000
d2212 1
a2212 1
+++ src/share/mk/bsd.dep.mk	2 Mar 2003 02:28:27 -0000
d2240 1
a2240 1
+++ src/share/mk/bsd.own.mk	2 Mar 2003 02:28:27 -0000
d2265 1
a2265 1
+++ src/share/mk/bsd.prog.mk	2 Mar 2003 02:28:27 -0000
d2281 1
a2281 1
+++ src/usr.bin/cpp/cpp.sh	2 Mar 2003 02:28:27 -0000
d2284 1
a2284 1
+#	$MirBSD: obsd.misc,v 1.21 2003/03/02 02:27:52 tg Exp $
d2313 1
a2313 1
+++ src/usr.bin/hexdump/parse.c	2 Mar 2003 02:28:27 -0000
d2329 1
a2329 1
+++ src/usr.bin/keynote/Makefile	2 Mar 2003 02:28:27 -0000
d2345 1
a2345 1
+++ src/usr.bin/less/Makefile.bsd-wrapper	2 Mar 2003 02:28:27 -0000
d2372 1
a2372 1
+++ src/usr.bin/yacc/skeleton.c	2 Mar 2003 02:28:27 -0000
d2374 1
a2374 1
+/*	$MirBSD: obsd.misc,v 1.21 2003/03/02 02:27:52 tg Exp $	*/
d2399 1
a2399 1
+    "  = \"$OpenBSD: skeleton.c,v 1.19 2002/12/03 21:34:21 mickey Exp $ $MirBSD: obsd.misc,v 1.21 2003/03/02 02:27:52 tg Exp $\";",
d2406 4
a2409 4
retrieving revision 1.94
diff -u -r1.94 Makefile
--- src/usr.sbin/Makefile	1 Mar 2003 00:40:56 -0000	1.94
+++ src/usr.sbin/Makefile	2 Mar 2003 02:28:27 -0000
a2418 9
@@@@ -17,8 +17,6 @@@@
 	sa sesd sliplogin slstats spppcontrol spray \
 	syslogd tcpdump timed tokenadm tokeninit traceroute trpt \
 	usbdevs user vipw vnconfig wsmoused zdump zic
-
-
 
 # IPv6
 SUBDIR+=faithd ndp rip6query route6d rtadvd rtsold traceroute6
d2425 1
a2425 1
+++ src/usr.sbin/authpf/authpf.c	2 Mar 2003 02:28:27 -0000
d2441 1
a2441 1
+++ src/usr.sbin/config/main.c	2 Mar 2003 02:28:27 -0000
d2443 1
a2443 1
+/*	$MirBSD: obsd.misc,v 1.21 2003/03/02 02:27:52 tg Exp $	*/
d2541 1
a2541 1
+++ src/usr.sbin/config/scan.l	2 Mar 2003 02:28:27 -0000
d2575 1
a2575 1
+++ src/usr.sbin/mrouted/Makefile	2 Mar 2003 02:28:27 -0000
@


1.21
log
@mrouted needs $.curdir as well
*sigh*

RC3
@
text
@d24 1
a24 1
against anoncvs@@anoncvs.comstyle.com:/cvs on Sat Mar  1 20:45:58 UTC 2003.
d27 1
d33 2
a34 2
--- src/bin/rcp/Makefile	2002/05/09 18:44:45	1.8
+++ src/bin/rcp/Makefile	2003/03/02 02:26:21
d49 2
a50 2
--- src/bin/systrace/Makefile	2002/10/16 15:01:08	1.8
+++ src/bin/systrace/Makefile	2003/03/02 02:26:21
d70 2
a71 2
--- src/distrib/crunch/Makefile.inc	2001/01/29 01:19:21	1.3
+++ src/distrib/crunch/Makefile.inc	2003/03/02 02:26:21
d83 2
a84 2
--- src/distrib/crunch/crunchgen/Makefile	1996/09/25 06:40:52	1.2
+++ src/distrib/crunch/crunchgen/Makefile	2003/03/02 02:26:21
d99 2
a100 2
--- src/distrib/crunch/crunchide/crunchide.c	2003/01/27 19:41:30	1.17
+++ src/distrib/crunch/crunchide/crunchide.c	2003/03/02 02:26:21
d138 2
a139 2
--- src/distrib/i386/common/Makefile.inc	2002/09/23 18:31:03	1.8
+++ src/distrib/i386/common/Makefile.inc	2003/03/02 02:26:21
d185 2
a186 2
--- src/distrib/special/pppd/Makefile	1999/06/17 20:42:30	1.2
+++ src/distrib/special/pppd/Makefile	2003/03/02 02:26:21
d200 2
a201 2
--- src/distrib/special/rsh/Makefile	1999/06/17 20:42:31	1.2
+++ src/distrib/special/rsh/Makefile	2003/03/02 02:26:21
d215 2
a216 2
--- src/games/hack/Makefile	2002/05/31 03:46:35	1.13
+++ src/games/hack/Makefile	2003/03/02 02:26:21
d231 2
a232 2
--- src/gnu/egcs/Makefile.bsd-wrapper	2001/09/11 17:35:46	1.5
+++ src/gnu/egcs/Makefile.bsd-wrapper	2003/03/02 02:26:21
d252 2
a253 2
--- src/gnu/egcs/gcc/Makefile.bsd-wrapper	2003/02/16 18:28:40	1.14
+++ src/gnu/egcs/gcc/Makefile.bsd-wrapper	2003/03/02 02:26:21
d255 1
a255 1
+#	$MirBSD: obsd.misc,v 1.20 2003/03/02 01:08:32 tg Exp $
d327 2
a328 2
--- src/gnu/egcs/gcc/config.gcc	2002/11/10 22:48:14	1.7
+++ src/gnu/egcs/gcc/config.gcc	2003/03/02 02:26:22
d347 2
a348 2
--- src/gnu/egcs/gcc/config/i386/openbsd.h	2001/09/05 08:22:36	1.2
+++ src/gnu/egcs/gcc/config/i386/openbsd.h	2003/03/02 02:26:22
d417 1
a417 1
@@@@ -72,8 +87,80 @@@@
d423 1
a423 1
 
d495 1
a495 1
+
a497 1
 /* Indicate when jump tables go in the text section.  This is
d556 2
a557 2
--- src/gnu/egcs/libf2c/Makefile.bsd-wrapper	2002/05/30 20:46:04	1.5
+++ src/gnu/egcs/libf2c/Makefile.bsd-wrapper	2003/03/02 02:26:22
d571 2
a572 2
--- src/gnu/egcs/libiberty/Makefile.bsd-wrapper1	1999/05/26 15:47:00	1.1
+++ src/gnu/egcs/libiberty/Makefile.bsd-wrapper1	2003/03/02 02:26:22
d596 2
a597 2
--- src/gnu/egcs/libio/editbuf.cc	1999/05/26 13:38:35	1.1.1.1
+++ src/gnu/egcs/libio/editbuf.cc	2003/03/02 02:26:24
d611 2
a612 2
--- src/gnu/egcs/libio/editbuf.h	1999/05/26 13:38:35	1.1.1.1
+++ src/gnu/egcs/libio/editbuf.h	2003/03/02 02:26:24
d627 2
a628 2
--- src/gnu/egcs/libio/parsestream.cc	1999/05/26 13:38:38	1.1.1.1
+++ src/gnu/egcs/libio/parsestream.cc	2003/03/02 02:26:24
d642 2
a643 2
--- src/gnu/egcs/libio/pfstream.cc	1999/05/26 13:38:38	1.1.1.1
+++ src/gnu/egcs/libio/pfstream.cc	2003/03/02 02:26:24
d657 2
a658 2
--- src/gnu/egcs/libstdc++/Makefile.bsd-wrapper	2003/02/09 19:31:50	1.12
+++ src/gnu/egcs/libstdc++/Makefile.bsd-wrapper	2003/03/02 02:26:24
d673 2
a674 2
--- src/gnu/usr.bin/binutils/Makefile.bsd-wrapper	2003/02/16 15:09:03	1.50
+++ src/gnu/usr.bin/binutils/Makefile.bsd-wrapper	2003/03/02 02:26:24
d723 2
a724 2
--- src/gnu/usr.bin/binutils/bfd/config.bfd	2002/08/11 22:51:48	1.27
+++ src/gnu/usr.bin/binutils/bfd/config.bfd	2003/03/02 02:26:25
d744 2
a745 2
--- src/gnu/usr.bin/binutils/gas/config/tc-i386.c	2002/05/13 17:07:36	1.6
+++ src/gnu/usr.bin/binutils/gas/config/tc-i386.c	2003/03/02 02:26:27
d769 2
a770 2
--- src/gnu/usr.bin/binutils/gas/configure	2002/08/11 22:51:48	1.26
+++ src/gnu/usr.bin/binutils/gas/configure	2003/03/02 02:26:31
d785 2
a786 2
--- src/gnu/usr.bin/binutils/gas/configure.in	2002/08/11 22:51:48	1.20
+++ src/gnu/usr.bin/binutils/gas/configure.in	2003/03/02 02:26:32
d801 2
a802 2
--- src/gnu/usr.bin/binutils/gdb/config/alpha/nm-obsd.h	2002/05/21 16:32:12	1.3
+++ src/gnu/usr.bin/binutils/gdb/config/alpha/nm-obsd.h	2003/03/02 02:26:32
d880 2
a881 2
--- src/gnu/usr.bin/binutils/gdb/config/alpha/obsd.mt	1997/02/02 00:40:32	1.1
+++ src/gnu/usr.bin/binutils/gdb/config/alpha/obsd.mt	2003/03/02 02:26:32
d892 2
a893 2
--- src/gnu/usr.bin/binutils/gdb/config/i386/nm-obsd.h	1998/03/29 22:17:34	1.2
+++ src/gnu/usr.bin/binutils/gdb/config/i386/nm-obsd.h	2003/03/02 02:26:32
d969 2
a970 2
--- src/gnu/usr.bin/binutils/ld/configure.tgt	2002/08/11 22:51:48	1.26
+++ src/gnu/usr.bin/binutils/ld/configure.tgt	2003/03/02 02:26:32
d985 2
a986 2
--- src/gnu/usr.bin/cvs/Makefile.bsd-wrapper	2003/02/16 18:28:41	1.42
+++ src/gnu/usr.bin/cvs/Makefile.bsd-wrapper	2003/03/02 02:26:32
d1017 2
a1018 2
--- src/gnu/usr.bin/gzip/Makefile	2002/12/09 23:46:38	1.13
+++ src/gnu/usr.bin/gzip/Makefile	2003/03/02 02:26:32
d1043 2
a1044 2
--- src/gnu/usr.bin/perl/hints/openbsd.sh	2003/01/20 00:07:31	1.28
+++ src/gnu/usr.bin/perl/hints/openbsd.sh	2003/03/02 02:26:32
d1059 2
a1060 2
--- src/gnu/usr.bin/texinfo/Makefile.bsd-wrapper	2003/02/16 18:28:41	1.37
+++ src/gnu/usr.bin/texinfo/Makefile.bsd-wrapper	2003/03/02 02:26:32
d1082 2
a1083 2
--- src/gnu/usr.sbin/mkhybrid/src/Makefile	2002/12/13 03:12:26	1.2
+++ src/gnu/usr.sbin/mkhybrid/src/Makefile	2003/03/02 02:26:32
d1098 2
a1099 2
--- src/gnu/usr.sbin/mkhybrid/src/diag/Makefile	2000/10/10 20:40:26	1.1
+++ src/gnu/usr.sbin/mkhybrid/src/diag/Makefile	2003/03/02 02:26:32
d1115 2
a1116 2
--- src/kerberosIV/Makefile	2001/07/03 18:33:03	1.33
+++ src/kerberosIV/Makefile	2003/03/02 02:26:32
d1136 2
a1137 2
--- src/kerberosIV/Makefile.inc	2002/06/11 15:23:28	1.16
+++ src/kerberosIV/Makefile.inc	2003/03/02 02:26:32
d1152 2
a1153 2
--- src/kerberosIV/lib/kadm/Makefile	2001/01/09 02:41:17	1.2
+++ src/kerberosIV/lib/kadm/Makefile	2003/03/02 02:26:32
d1168 2
a1169 2
--- src/kerberosIV/lib/roken/Makefile	2002/06/08 21:49:49	1.7
+++ src/kerberosIV/lib/roken/Makefile	2003/03/02 02:26:32
d1184 2
a1185 2
--- src/kerberosIV/src/appl/ftp/ftp/Makefile	2001/05/14 13:29:17	1.1.1.1
+++ src/kerberosIV/src/appl/ftp/ftp/Makefile	2003/03/02 02:26:32
d1203 2
a1204 2
--- src/kerberosIV/src/appl/ftp/ftpd/Makefile	2001/05/14 13:29:24	1.1.1.1
+++ src/kerberosIV/src/appl/ftp/ftpd/Makefile	2003/03/02 02:26:33
d1219 2
a1220 2
--- src/kerberosIV/src/include/Makefile	2001/05/14 13:29:38	1.1.1.1
+++ src/kerberosIV/src/include/Makefile	2003/03/02 02:26:33
d1235 2
a1236 2
--- src/lib/csu/common_elf/crtbegin.c	2002/02/16 21:27:20	1.6
+++ src/lib/csu/common_elf/crtbegin.c	2003/03/02 02:26:34
d1275 2
a1276 2
--- src/lib/csu/common_elf/crtbeginS.c	2002/02/16 21:27:20	1.2
+++ src/lib/csu/common_elf/crtbeginS.c	2003/03/02 02:26:34
d1313 2
a1314 2
--- src/lib/csu/i386/crt0.c	2003/02/28 18:05:51	1.9
+++ src/lib/csu/i386/crt0.c	2003/03/02 02:26:34
a1347 2
+
+static char	*_strrchr(char *, char);
d1350 2
d1361 1
a1361 1
 
d1381 1
a1381 1
+
d1501 2
a1502 2
--- src/lib/libc/arch/i386/SYS.h	2002/10/06 23:24:13	1.13
+++ src/lib/libc/arch/i386/SYS.h	2003/03/02 02:26:34
d1557 2
a1558 2
--- src/lib/libc/arch/i386/gen/alloca.S	1996/08/19 08:12:15	1.3
+++ src/lib/libc/arch/i386/gen/alloca.S	2003/03/02 02:26:34
d1570 2
a1571 2
--- src/lib/libc/arch/i386/gen/setjmp.S	2001/11/01 07:02:13	1.4
+++ src/lib/libc/arch/i386/gen/setjmp.S	2003/03/02 02:26:34
d1611 2
a1612 2
--- src/lib/libc/arch/i386/gen/sigsetjmp.S	2001/11/01 07:02:13	1.4
+++ src/lib/libc/arch/i386/gen/sigsetjmp.S	2003/03/02 02:26:34
d1654 2
a1655 2
--- src/lib/libc/arch/i386/net/Makefile.inc	1996/08/19 08:12:37	1.3
+++ src/lib/libc/arch/i386/net/Makefile.inc	2003/03/02 02:26:34
d1667 2
a1668 2
--- src/lib/libc/arch/i386/net/htonl.S	1996/08/19 08:12:38	1.2
+++ src/lib/libc/arch/i386/net/htonl.S	2003/03/02 02:26:34
d1721 1
a1721 1
+	.asciz "$OpenBSD: htonl.S$ $MirBSD: obsd.misc,v 1.20 2003/03/02 01:08:32 tg Exp $"
d1739 2
a1740 2
--- src/lib/libc/arch/i386/net/htons.S	1996/08/19 08:12:40	1.2
+++ src/lib/libc/arch/i386/net/htons.S	2003/03/02 02:26:34
d1793 1
a1793 1
+	.asciz "$OpenBSD: htons.S$ $MirBSD: obsd.misc,v 1.20 2003/03/02 01:08:32 tg Exp $"
d1808 2
a1809 2
--- src/lib/libc/arch/i386/sys/Ovfork.S	1998/11/20 11:18:29	1.3
+++ src/lib/libc/arch/i386/sys/Ovfork.S	2003/03/02 02:26:34
d1835 2
a1836 2
--- src/lib/libc/arch/i386/sys/brk.S	2002/10/06 23:31:41	1.5
+++ src/lib/libc/arch/i386/sys/brk.S	2003/03/02 02:26:34
d1861 2
a1862 2
--- src/lib/libc/arch/i386/sys/cerror.S	2002/10/06 23:24:13	1.3
+++ src/lib/libc/arch/i386/sys/cerror.S	2003/03/02 02:26:34
d1888 2
a1889 2
--- src/lib/libc/arch/i386/sys/exect.S	2002/10/06 23:24:13	1.3
+++ src/lib/libc/arch/i386/sys/exect.S	2003/03/02 02:26:34
d1909 2
a1910 2
--- src/lib/libc/arch/i386/sys/sbrk.S	2002/10/06 23:31:41	1.5
+++ src/lib/libc/arch/i386/sys/sbrk.S	2003/03/02 02:26:34
d1935 2
a1936 2
--- src/lib/libc/arch/i386/sys/sigprocmask.S	2002/10/06 23:24:13	1.5
+++ src/lib/libc/arch/i386/sys/sigprocmask.S	2003/03/02 02:26:34
d1956 2
a1957 2
--- src/lib/libc/arch/i386/sys/sigsuspend.S	2002/10/06 23:24:13	1.4
+++ src/lib/libc/arch/i386/sys/sigsuspend.S	2003/03/02 02:26:34
d1976 2
a1977 2
--- src/lib/libc/arch/i386/sys/syscall.S	2002/10/06 23:24:13	1.4
+++ src/lib/libc/arch/i386/sys/syscall.S	2003/03/02 02:26:34
d1996 2
a1997 2
--- src/lib/libcurses++/Makefile	1999/08/15 11:35:57	1.5
+++ src/lib/libcurses++/Makefile	2003/03/02 02:26:34
d2011 2
a2012 2
--- src/libexec/ftpd/Makefile	2002/01/25 06:33:23	1.21
+++ src/libexec/ftpd/Makefile	2003/03/02 02:26:34
d2027 2
a2028 2
--- src/libexec/login_chpass/Makefile	2002/05/11 00:20:20	1.2
+++ src/libexec/login_chpass/Makefile	2003/03/02 02:26:34
d2043 2
a2044 2
--- src/libexec/rshd/Makefile	2002/05/06 22:23:53	1.7
+++ src/libexec/rshd/Makefile	2003/03/02 02:26:34
d2059 2
a2060 2
--- src/sbin/disklabel/Makefile	2002/08/08 00:35:50	1.29
+++ src/sbin/disklabel/Makefile	2003/03/02 02:26:34
d2075 2
a2076 2
--- src/sbin/fdisk/Makefile	2002/06/26 18:34:26	1.20
+++ src/sbin/fdisk/Makefile	2003/03/02 02:26:34
d2091 2
a2092 2
--- src/sbin/fsck/fsutil.c	2002/09/06 21:16:16	1.8
+++ src/sbin/fsck/fsutil.c	2003/03/02 02:26:34
d2106 2
a2107 2
--- src/sbin/pfctl/Makefile	2003/01/09 17:33:19	1.12
+++ src/sbin/pfctl/Makefile	2003/03/02 02:26:34
d2122 2
a2123 2
--- src/sbin/photurisd/Makefile	2001/01/28 22:45:05	1.4
+++ src/sbin/photurisd/Makefile	2003/03/02 02:26:34
d2138 2
a2139 2
--- src/sbin/wsconsctl/Makefile	2002/08/12 10:47:06	1.11
+++ src/sbin/wsconsctl/Makefile	2003/03/02 02:26:34
d2154 2
a2155 2
--- src/share/lkm/vfs/module/Makefile	2001/06/27 06:16:47	1.7
+++ src/share/lkm/vfs/module/Makefile	2003/03/02 02:26:34
d2170 2
a2171 2
--- src/share/man/man4/options.4	2003/02/17 22:19:30	1.116
+++ src/share/man/man4/options.4	2003/03/02 02:26:35
d2173 1
a2173 1
+.\"	$MirBSD: obsd.misc,v 1.20 2003/03/02 01:08:32 tg Exp $
d2194 2
a2195 2
--- src/share/mk/bsd.README	2002/06/25 15:33:18	1.32
+++ src/share/mk/bsd.README	2003/03/02 02:26:35
d2211 2
a2212 2
--- src/share/mk/bsd.dep.mk	1998/06/09 19:29:45	1.4
+++ src/share/mk/bsd.dep.mk	2003/03/02 02:26:35
d2239 2
a2240 2
--- src/share/mk/bsd.own.mk	2002/12/07 22:31:00	1.63
+++ src/share/mk/bsd.own.mk	2003/03/02 02:26:35
d2264 2
a2265 2
--- src/share/mk/bsd.prog.mk	2002/11/10 23:03:55	1.34
+++ src/share/mk/bsd.prog.mk	2003/03/02 02:26:35
d2280 2
a2281 2
--- src/usr.bin/cpp/cpp.sh	1999/06/17 23:27:17	1.5
+++ src/usr.bin/cpp/cpp.sh	2003/03/02 02:26:36
d2284 1
a2284 1
+#	$MirBSD: obsd.misc,v 1.20 2003/03/02 01:08:32 tg Exp $
d2312 2
a2313 2
--- src/usr.bin/hexdump/parse.c	2002/03/14 06:51:42	1.10
+++ src/usr.bin/hexdump/parse.c	2003/03/02 02:26:36
d2328 2
a2329 2
--- src/usr.bin/keynote/Makefile	2002/05/11 00:20:20	1.10
+++ src/usr.bin/keynote/Makefile	2003/03/02 02:26:36
d2344 2
a2345 2
--- src/usr.bin/less/Makefile.bsd-wrapper	1999/02/03 23:36:45	1.18
+++ src/usr.bin/less/Makefile.bsd-wrapper	2003/03/02 02:26:36
d2371 2
a2372 2
--- src/usr.bin/yacc/skeleton.c	2002/12/03 21:34:21	1.19
+++ src/usr.bin/yacc/skeleton.c	2003/03/02 02:26:36
d2374 1
a2374 1
+/*	$MirBSD: obsd.misc,v 1.20 2003/03/02 01:08:32 tg Exp $	*/
d2399 1
a2399 1
+    "  = \"$OpenBSD: skeleton.c,v 1.19 2002/12/03 21:34:21 mickey Exp $ $MirBSD: obsd.misc,v 1.20 2003/03/02 01:08:32 tg Exp $\";",
d2408 2
a2409 2
--- src/usr.sbin/Makefile	2003/03/01 00:41:18	1.94
+++ src/usr.sbin/Makefile	2003/03/02 02:26:36
d2433 2
a2434 2
--- src/usr.sbin/authpf/authpf.c	2003/02/19 00:03:22	1.53
+++ src/usr.sbin/authpf/authpf.c	2003/03/02 02:26:37
d2449 2
a2450 2
--- src/usr.sbin/config/main.c	2002/09/06 19:02:06	1.29
+++ src/usr.sbin/config/main.c	2003/03/02 02:26:37
d2452 1
a2452 1
+/*	$MirBSD: obsd.misc,v 1.20 2003/03/02 01:08:32 tg Exp $	*/
d2549 2
a2550 2
--- src/usr.sbin/config/scan.l	2002/02/16 21:28:01	1.15
+++ src/usr.sbin/config/scan.l	2003/03/02 02:26:37
d2583 2
a2584 2
--- src/usr.sbin/mrouted/Makefile	2002/08/01 03:45:53	1.4
+++ src/usr.sbin/mrouted/Makefile	2003/03/02 02:26:37
@


1.20
log
@pre-build Sn#3-RC2

1914 KiB
@
text
@d33 1
a33 1
+++ src/bin/rcp/Makefile	2003/03/02 01:02:13
d49 1
a49 1
+++ src/bin/systrace/Makefile	2003/03/02 01:02:13
d70 1
a70 1
+++ src/distrib/crunch/Makefile.inc	2003/03/02 01:02:13
d83 1
a83 1
+++ src/distrib/crunch/crunchgen/Makefile	2003/03/02 01:02:13
d99 1
a99 1
+++ src/distrib/crunch/crunchide/crunchide.c	2003/03/02 01:02:13
d138 1
a138 1
+++ src/distrib/i386/common/Makefile.inc	2003/03/02 01:02:13
d185 1
a185 1
+++ src/distrib/special/pppd/Makefile	2003/03/02 01:02:13
d200 1
a200 1
+++ src/distrib/special/rsh/Makefile	2003/03/02 01:02:13
d215 1
a215 1
+++ src/games/hack/Makefile	2003/03/02 01:02:13
d231 1
a231 1
+++ src/gnu/egcs/Makefile.bsd-wrapper	2003/03/02 01:02:13
d252 1
a252 1
+++ src/gnu/egcs/gcc/Makefile.bsd-wrapper	2003/03/02 01:02:13
d254 1
a254 1
+#	$MirBSD: obsd.misc,v 1.19 2003/03/01 15:23:52 tg Exp $
d327 1
a327 1
+++ src/gnu/egcs/gcc/config.gcc	2003/03/02 01:02:14
d347 1
a347 1
+++ src/gnu/egcs/gcc/config/i386/openbsd.h	2003/03/02 01:02:15
d557 1
a557 1
+++ src/gnu/egcs/libf2c/Makefile.bsd-wrapper	2003/03/02 01:02:15
d572 1
a572 1
+++ src/gnu/egcs/libiberty/Makefile.bsd-wrapper1	2003/03/02 01:02:15
d597 1
a597 1
+++ src/gnu/egcs/libio/editbuf.cc	2003/03/02 01:02:16
d612 1
a612 1
+++ src/gnu/egcs/libio/editbuf.h	2003/03/02 01:02:16
d628 1
a628 1
+++ src/gnu/egcs/libio/parsestream.cc	2003/03/02 01:02:16
d643 1
a643 1
+++ src/gnu/egcs/libio/pfstream.cc	2003/03/02 01:02:16
d658 1
a658 1
+++ src/gnu/egcs/libstdc++/Makefile.bsd-wrapper	2003/03/02 01:02:16
d674 1
a674 1
+++ src/gnu/usr.bin/binutils/Makefile.bsd-wrapper	2003/03/02 01:02:16
d724 1
a724 1
+++ src/gnu/usr.bin/binutils/bfd/config.bfd	2003/03/02 01:02:17
d745 1
a745 1
+++ src/gnu/usr.bin/binutils/gas/config/tc-i386.c	2003/03/02 01:02:20
d770 1
a770 1
+++ src/gnu/usr.bin/binutils/gas/configure	2003/03/02 01:02:23
d786 1
a786 1
+++ src/gnu/usr.bin/binutils/gas/configure.in	2003/03/02 01:02:25
d802 1
a802 1
+++ src/gnu/usr.bin/binutils/gdb/config/alpha/nm-obsd.h	2003/03/02 01:02:25
d881 1
a881 1
+++ src/gnu/usr.bin/binutils/gdb/config/alpha/obsd.mt	2003/03/02 01:02:25
d893 1
a893 1
+++ src/gnu/usr.bin/binutils/gdb/config/i386/nm-obsd.h	2003/03/02 01:02:25
d970 1
a970 1
+++ src/gnu/usr.bin/binutils/ld/configure.tgt	2003/03/02 01:02:25
d986 1
a986 1
+++ src/gnu/usr.bin/cvs/Makefile.bsd-wrapper	2003/03/02 01:02:25
d1018 1
a1018 1
+++ src/gnu/usr.bin/gzip/Makefile	2003/03/02 01:02:25
d1044 1
a1044 1
+++ src/gnu/usr.bin/perl/hints/openbsd.sh	2003/03/02 01:02:25
d1060 1
a1060 1
+++ src/gnu/usr.bin/texinfo/Makefile.bsd-wrapper	2003/03/02 01:02:25
d1083 1
a1083 1
+++ src/gnu/usr.sbin/mkhybrid/src/Makefile	2003/03/02 01:02:25
d1099 1
a1099 1
+++ src/gnu/usr.sbin/mkhybrid/src/diag/Makefile	2003/03/02 01:02:25
d1116 1
a1116 1
+++ src/kerberosIV/Makefile	2003/03/02 01:02:25
d1137 1
a1137 1
+++ src/kerberosIV/Makefile.inc	2003/03/02 01:02:25
d1153 1
a1153 1
+++ src/kerberosIV/lib/kadm/Makefile	2003/03/02 01:02:25
d1169 1
a1169 1
+++ src/kerberosIV/lib/roken/Makefile	2003/03/02 01:02:25
d1185 1
a1185 1
+++ src/kerberosIV/src/appl/ftp/ftp/Makefile	2003/03/02 01:02:25
d1204 1
a1204 1
+++ src/kerberosIV/src/appl/ftp/ftpd/Makefile	2003/03/02 01:02:25
d1220 1
a1220 1
+++ src/kerberosIV/src/include/Makefile	2003/03/02 01:02:25
d1236 1
a1236 1
+++ src/lib/csu/common_elf/crtbegin.c	2003/03/02 01:02:26
d1276 1
a1276 1
+++ src/lib/csu/common_elf/crtbeginS.c	2003/03/02 01:02:26
d1314 1
a1314 1
+++ src/lib/csu/i386/crt0.c	2003/03/02 01:02:26
d1502 1
a1502 1
+++ src/lib/libc/arch/i386/SYS.h	2003/03/02 01:02:26
d1558 1
a1558 1
+++ src/lib/libc/arch/i386/gen/alloca.S	2003/03/02 01:02:26
d1571 1
a1571 1
+++ src/lib/libc/arch/i386/gen/setjmp.S	2003/03/02 01:02:26
d1612 1
a1612 1
+++ src/lib/libc/arch/i386/gen/sigsetjmp.S	2003/03/02 01:02:26
d1655 1
a1655 1
+++ src/lib/libc/arch/i386/net/Makefile.inc	2003/03/02 01:02:26
d1668 1
a1668 1
+++ src/lib/libc/arch/i386/net/htonl.S	2003/03/02 01:02:26
d1721 1
a1721 1
+	.asciz "$OpenBSD: htonl.S$ $MirBSD: obsd.tygs,v 1.34 2003/03/01 16:25:31 tg Exp $"
d1740 1
a1740 1
+++ src/lib/libc/arch/i386/net/htons.S	2003/03/02 01:02:26
d1793 1
a1793 1
+	.asciz "$OpenBSD: htons.S$ $MirBSD: obsd.tygs,v 1.34 2003/03/01 16:25:31 tg Exp $"
d1809 1
a1809 1
+++ src/lib/libc/arch/i386/sys/Ovfork.S	2003/03/02 01:02:26
d1836 1
a1836 1
+++ src/lib/libc/arch/i386/sys/brk.S	2003/03/02 01:02:26
d1862 1
a1862 1
+++ src/lib/libc/arch/i386/sys/cerror.S	2003/03/02 01:02:26
d1889 1
a1889 1
+++ src/lib/libc/arch/i386/sys/exect.S	2003/03/02 01:02:26
d1910 1
a1910 1
+++ src/lib/libc/arch/i386/sys/sbrk.S	2003/03/02 01:02:26
d1936 1
a1936 1
+++ src/lib/libc/arch/i386/sys/sigprocmask.S	2003/03/02 01:02:26
d1957 1
a1957 1
+++ src/lib/libc/arch/i386/sys/sigsuspend.S	2003/03/02 01:02:26
d1977 1
a1977 1
+++ src/lib/libc/arch/i386/sys/syscall.S	2003/03/02 01:02:26
d1997 1
a1997 1
+++ src/lib/libcurses++/Makefile	2003/03/02 01:02:26
d2012 1
a2012 1
+++ src/libexec/ftpd/Makefile	2003/03/02 01:02:26
d2028 1
a2028 1
+++ src/libexec/login_chpass/Makefile	2003/03/02 01:02:26
d2044 1
a2044 1
+++ src/libexec/rshd/Makefile	2003/03/02 01:02:26
d2060 1
a2060 1
+++ src/sbin/disklabel/Makefile	2003/03/02 01:02:26
d2076 1
a2076 1
+++ src/sbin/fdisk/Makefile	2003/03/02 01:02:26
d2092 1
a2092 1
+++ src/sbin/fsck/fsutil.c	2003/03/02 01:02:26
d2107 1
a2107 1
+++ src/sbin/pfctl/Makefile	2003/03/02 01:02:26
d2123 1
a2123 1
+++ src/sbin/photurisd/Makefile	2003/03/02 01:02:26
d2139 1
a2139 1
+++ src/sbin/wsconsctl/Makefile	2003/03/02 01:02:26
d2155 1
a2155 1
+++ src/share/lkm/vfs/module/Makefile	2003/03/02 01:02:26
d2171 1
a2171 1
+++ src/share/man/man4/options.4	2003/03/02 01:02:27
d2173 1
a2173 1
+.\"	$MirBSD: obsd.misc,v 1.19 2003/03/01 15:23:52 tg Exp $
d2195 1
a2195 1
+++ src/share/mk/bsd.README	2003/03/02 01:02:27
d2212 1
a2212 1
+++ src/share/mk/bsd.dep.mk	2003/03/02 01:02:27
d2240 1
a2240 1
+++ src/share/mk/bsd.own.mk	2003/03/02 01:02:27
d2265 1
a2265 1
+++ src/share/mk/bsd.prog.mk	2003/03/02 01:02:27
d2281 1
a2281 1
+++ src/usr.bin/cpp/cpp.sh	2003/03/02 01:02:28
d2284 1
a2284 1
+#	$MirBSD$
d2313 1
a2313 1
+++ src/usr.bin/hexdump/parse.c	2003/03/02 01:02:28
d2329 1
a2329 1
+++ src/usr.bin/keynote/Makefile	2003/03/02 01:02:28
d2345 1
a2345 1
+++ src/usr.bin/less/Makefile.bsd-wrapper	2003/03/02 01:02:28
d2372 1
a2372 1
+++ src/usr.bin/yacc/skeleton.c	2003/03/02 01:02:28
d2374 1
a2374 1
+/*	$MirBSD: obsd.misc,v 1.19 2003/03/01 15:23:52 tg Exp $	*/
d2399 1
a2399 1
+    "  = \"$OpenBSD: skeleton.c,v 1.19 2002/12/03 21:34:21 mickey Exp $ $MirBSD: obsd.misc,v 1.19 2003/03/01 15:23:52 tg Exp $\";",
d2409 1
a2409 1
+++ src/usr.sbin/Makefile	2003/03/02 01:02:28
d2419 9
d2434 1
a2434 1
+++ src/usr.sbin/authpf/authpf.c	2003/03/02 01:02:29
d2450 1
a2450 1
+++ src/usr.sbin/config/main.c	2003/03/02 01:02:29
d2452 1
a2452 1
+/*	$MirBSD: obsd.misc,v 1.19 2003/03/01 15:23:52 tg Exp $	*/
d2550 1
a2550 1
+++ src/usr.sbin/config/scan.l	2003/03/02 01:02:29
d2578 14
d2686 1
@


1.19
log
@post-build

saad@@ gave us another acronyme
the stuff except XF4 builds fine. XF4 untested.
@
text
@d9 1
a9 1
    placed in its entirety (not easily distinguishable in the diff).
d22 1
a22 1
This diff, ID $MirBSD: regen-obsdp.sh,v 1.13 2003/02/28 22:52:54 tg Exp $
d24 1
a24 1
against CTM on Sat Mar  1 15:21:28 UTC 2003.
d26 1
a26 2
### GENERATOR: @@(#)_MirBSD: regen-obsdp.sh,v 1.13 2003/02/28 22:52:54 tg Exp $
### CTM OpenBSD-cvs 3075
d32 2
a33 2
--- src/bin/rcp/Makefile	9 May 2002 18:44:23 -0000	1.8
+++ src/bin/rcp/Makefile	1 Mar 2003 13:40:49 -0000
d48 2
a49 2
--- src/bin/systrace/Makefile	16 Oct 2002 15:00:46 -0000	1.8
+++ src/bin/systrace/Makefile	1 Mar 2003 13:40:49 -0000
d69 2
a70 2
--- src/distrib/crunch/Makefile.inc	29 Jan 2001 01:18:59 -0000	1.3
+++ src/distrib/crunch/Makefile.inc	1 Mar 2003 13:40:49 -0000
d82 2
a83 2
--- src/distrib/crunch/crunchgen/Makefile	25 Sep 1996 06:40:32 -0000	1.2
+++ src/distrib/crunch/crunchgen/Makefile	1 Mar 2003 13:40:49 -0000
d98 2
a99 2
--- src/distrib/crunch/crunchide/crunchide.c	27 Jan 2003 19:41:08 -0000	1.17
+++ src/distrib/crunch/crunchide/crunchide.c	1 Mar 2003 13:40:49 -0000
d137 2
a138 2
--- src/distrib/i386/common/Makefile.inc	23 Sep 2002 18:30:41 -0000	1.8
+++ src/distrib/i386/common/Makefile.inc	1 Mar 2003 13:40:49 -0000
d184 2
a185 2
--- src/distrib/special/pppd/Makefile	17 Jun 1999 20:42:08 -0000	1.2
+++ src/distrib/special/pppd/Makefile	1 Mar 2003 13:40:49 -0000
d199 2
a200 2
--- src/distrib/special/rsh/Makefile	17 Jun 1999 20:42:09 -0000	1.2
+++ src/distrib/special/rsh/Makefile	1 Mar 2003 13:40:49 -0000
d214 2
a215 2
--- src/games/hack/Makefile	31 May 2002 03:46:13 -0000	1.13
+++ src/games/hack/Makefile	1 Mar 2003 13:40:49 -0000
d230 2
a231 2
--- src/gnu/egcs/Makefile.bsd-wrapper	11 Sep 2001 17:35:24 -0000	1.5
+++ src/gnu/egcs/Makefile.bsd-wrapper	1 Mar 2003 13:40:49 -0000
d251 2
a252 2
--- src/gnu/egcs/gcc/Makefile.bsd-wrapper	16 Feb 2003 18:28:18 -0000	1.14
+++ src/gnu/egcs/gcc/Makefile.bsd-wrapper	1 Mar 2003 13:40:49 -0000
d254 1
a254 1
+#	$MirBSD: obsd.misc,v 1.18 2003/03/01 13:16:06 tg Exp $
d326 2
a327 2
--- src/gnu/egcs/gcc/config.gcc	10 Nov 2002 22:47:52 -0000	1.7
+++ src/gnu/egcs/gcc/config.gcc	1 Mar 2003 13:40:49 -0000
d346 2
a347 2
--- src/gnu/egcs/gcc/config/i386/openbsd.h	5 Sep 2001 08:22:14 -0000	1.2
+++ src/gnu/egcs/gcc/config/i386/openbsd.h	1 Mar 2003 13:40:49 -0000
d416 1
a416 1
@@@@ -72,7 +87,79 @@@@
d422 1
a422 1
+
d494 1
a494 1
 
d497 1
d556 2
a557 2
--- src/gnu/egcs/libf2c/Makefile.bsd-wrapper	30 May 2002 20:45:42 -0000	1.5
+++ src/gnu/egcs/libf2c/Makefile.bsd-wrapper	1 Mar 2003 13:40:49 -0000
d571 2
a572 2
--- src/gnu/egcs/libiberty/Makefile.bsd-wrapper1	26 May 1999 15:46:38 -0000	1.1
+++ src/gnu/egcs/libiberty/Makefile.bsd-wrapper1	1 Mar 2003 13:40:52 -0000
d596 2
a597 2
--- src/gnu/egcs/libio/editbuf.cc	26 May 1999 13:38:13 -0000	1.1.1.1
+++ src/gnu/egcs/libio/editbuf.cc	1 Mar 2003 13:40:53 -0000
d611 2
a612 2
--- src/gnu/egcs/libio/editbuf.h	26 May 1999 13:38:13 -0000	1.1.1.1
+++ src/gnu/egcs/libio/editbuf.h	1 Mar 2003 13:40:53 -0000
d627 2
a628 2
--- src/gnu/egcs/libio/parsestream.cc	26 May 1999 13:38:16 -0000	1.1.1.1
+++ src/gnu/egcs/libio/parsestream.cc	1 Mar 2003 13:40:53 -0000
d642 2
a643 2
--- src/gnu/egcs/libio/pfstream.cc	26 May 1999 13:38:16 -0000	1.1.1.1
+++ src/gnu/egcs/libio/pfstream.cc	1 Mar 2003 13:40:53 -0000
d657 2
a658 2
--- src/gnu/egcs/libstdc++/Makefile.bsd-wrapper	9 Feb 2003 19:31:28 -0000	1.12
+++ src/gnu/egcs/libstdc++/Makefile.bsd-wrapper	1 Mar 2003 13:40:53 -0000
d673 2
a674 2
--- src/gnu/usr.bin/binutils/Makefile.bsd-wrapper	16 Feb 2003 15:08:41 -0000	1.50
+++ src/gnu/usr.bin/binutils/Makefile.bsd-wrapper	1 Mar 2003 13:40:53 -0000
d723 2
a724 2
--- src/gnu/usr.bin/binutils/bfd/config.bfd	11 Aug 2002 22:51:26 -0000	1.27
+++ src/gnu/usr.bin/binutils/bfd/config.bfd	1 Mar 2003 13:40:53 -0000
d744 2
a745 2
--- src/gnu/usr.bin/binutils/gas/config/tc-i386.c	13 May 2002 17:07:14 -0000	1.6
+++ src/gnu/usr.bin/binutils/gas/config/tc-i386.c	1 Mar 2003 13:40:53 -0000
d769 2
a770 2
--- src/gnu/usr.bin/binutils/gas/configure	11 Aug 2002 22:51:26 -0000	1.26
+++ src/gnu/usr.bin/binutils/gas/configure	1 Mar 2003 13:40:53 -0000
d785 2
a786 2
--- src/gnu/usr.bin/binutils/gas/configure.in	11 Aug 2002 22:51:26 -0000	1.20
+++ src/gnu/usr.bin/binutils/gas/configure.in	1 Mar 2003 13:40:53 -0000
d801 2
a802 2
--- src/gnu/usr.bin/binutils/gdb/config/alpha/nm-obsd.h	21 May 2002 16:31:50 -0000	1.3
+++ src/gnu/usr.bin/binutils/gdb/config/alpha/nm-obsd.h	1 Mar 2003 13:40:53 -0000
d880 2
a881 2
--- src/gnu/usr.bin/binutils/gdb/config/alpha/obsd.mt	2 Feb 1997 00:40:12 -0000	1.1
+++ src/gnu/usr.bin/binutils/gdb/config/alpha/obsd.mt	1 Mar 2003 13:40:53 -0000
d892 2
a893 2
--- src/gnu/usr.bin/binutils/gdb/config/i386/nm-obsd.h	29 Mar 1998 22:17:13 -0000	1.2
+++ src/gnu/usr.bin/binutils/gdb/config/i386/nm-obsd.h	1 Mar 2003 13:40:53 -0000
d969 2
a970 2
--- src/gnu/usr.bin/binutils/ld/configure.tgt	11 Aug 2002 22:51:26 -0000	1.26
+++ src/gnu/usr.bin/binutils/ld/configure.tgt	1 Mar 2003 13:40:53 -0000
d985 2
a986 2
--- src/gnu/usr.bin/cvs/Makefile.bsd-wrapper	16 Feb 2003 18:28:19 -0000	1.42
+++ src/gnu/usr.bin/cvs/Makefile.bsd-wrapper	1 Mar 2003 13:40:53 -0000
d1017 2
a1018 2
--- src/gnu/usr.bin/gzip/Makefile	9 Dec 2002 23:46:16 -0000	1.13
+++ src/gnu/usr.bin/gzip/Makefile	1 Mar 2003 13:40:53 -0000
d1043 2
a1044 2
--- src/gnu/usr.bin/perl/hints/openbsd.sh	20 Jan 2003 00:07:09 -0000	1.28
+++ src/gnu/usr.bin/perl/hints/openbsd.sh	1 Mar 2003 13:40:53 -0000
d1059 2
a1060 2
--- src/gnu/usr.bin/texinfo/Makefile.bsd-wrapper	16 Feb 2003 18:28:19 -0000	1.37
+++ src/gnu/usr.bin/texinfo/Makefile.bsd-wrapper	1 Mar 2003 13:40:53 -0000
d1082 2
a1083 2
--- src/gnu/usr.sbin/mkhybrid/src/Makefile	13 Dec 2002 03:12:04 -0000	1.2
+++ src/gnu/usr.sbin/mkhybrid/src/Makefile	1 Mar 2003 13:40:53 -0000
d1098 2
a1099 2
--- src/gnu/usr.sbin/mkhybrid/src/diag/Makefile	10 Oct 2000 20:40:04 -0000	1.1
+++ src/gnu/usr.sbin/mkhybrid/src/diag/Makefile	1 Mar 2003 13:40:53 -0000
d1115 2
a1116 2
--- src/kerberosIV/Makefile	3 Jul 2001 18:32:41 -0000	1.33
+++ src/kerberosIV/Makefile	1 Mar 2003 13:40:54 -0000
d1136 2
a1137 2
--- src/kerberosIV/Makefile.inc	11 Jun 2002 15:23:06 -0000	1.16
+++ src/kerberosIV/Makefile.inc	1 Mar 2003 13:40:54 -0000
d1152 2
a1153 2
--- src/kerberosIV/lib/kadm/Makefile	9 Jan 2001 02:40:55 -0000	1.2
+++ src/kerberosIV/lib/kadm/Makefile	1 Mar 2003 13:40:54 -0000
d1168 2
a1169 2
--- src/kerberosIV/lib/roken/Makefile	8 Jun 2002 21:49:27 -0000	1.7
+++ src/kerberosIV/lib/roken/Makefile	1 Mar 2003 13:40:54 -0000
d1184 2
a1185 2
--- src/kerberosIV/src/appl/ftp/ftp/Makefile	14 May 2001 13:28:55 -0000	1.1.1.1
+++ src/kerberosIV/src/appl/ftp/ftp/Makefile	1 Mar 2003 13:40:54 -0000
d1203 2
a1204 2
--- src/kerberosIV/src/appl/ftp/ftpd/Makefile	14 May 2001 13:29:02 -0000	1.1.1.1
+++ src/kerberosIV/src/appl/ftp/ftpd/Makefile	1 Mar 2003 13:40:54 -0000
d1219 2
a1220 2
--- src/kerberosIV/src/include/Makefile	14 May 2001 13:29:16 -0000	1.1.1.1
+++ src/kerberosIV/src/include/Makefile	1 Mar 2003 13:40:54 -0000
d1235 2
a1236 2
--- src/lib/csu/common_elf/crtbegin.c	16 Feb 2002 21:26:58 -0000	1.6
+++ src/lib/csu/common_elf/crtbegin.c	1 Mar 2003 13:40:54 -0000
d1275 2
a1276 2
--- src/lib/csu/common_elf/crtbeginS.c	16 Feb 2002 21:26:58 -0000	1.2
+++ src/lib/csu/common_elf/crtbeginS.c	1 Mar 2003 13:40:54 -0000
d1313 2
a1314 2
--- src/lib/csu/i386/crt0.c	28 Feb 2003 18:05:29 -0000	1.9
+++ src/lib/csu/i386/crt0.c	1 Mar 2003 13:57:13 -0000
d1348 2
a1351 2
+static char	*_strrchr(char *, char);
+
d1361 1
a1361 1
+
d1381 1
a1381 1
 
d1501 2
a1502 2
--- src/lib/libc/arch/i386/SYS.h	6 Oct 2002 23:23:51 -0000	1.13
+++ src/lib/libc/arch/i386/SYS.h	1 Mar 2003 13:40:54 -0000
d1557 2
a1558 2
--- src/lib/libc/arch/i386/gen/alloca.S	19 Aug 1996 08:11:55 -0000	1.3
+++ src/lib/libc/arch/i386/gen/alloca.S	1 Mar 2003 13:40:54 -0000
d1570 2
a1571 2
--- src/lib/libc/arch/i386/gen/setjmp.S	1 Nov 2001 07:01:51 -0000	1.4
+++ src/lib/libc/arch/i386/gen/setjmp.S	1 Mar 2003 13:40:54 -0000
d1611 2
a1612 2
--- src/lib/libc/arch/i386/gen/sigsetjmp.S	1 Nov 2001 07:01:51 -0000	1.4
+++ src/lib/libc/arch/i386/gen/sigsetjmp.S	1 Mar 2003 13:40:54 -0000
d1649 154
d1808 2
a1809 2
--- src/lib/libc/arch/i386/sys/Ovfork.S	20 Nov 1998 11:18:08 -0000	1.3
+++ src/lib/libc/arch/i386/sys/Ovfork.S	1 Mar 2003 13:40:54 -0000
d1835 2
a1836 2
--- src/lib/libc/arch/i386/sys/brk.S	6 Oct 2002 23:31:19 -0000	1.5
+++ src/lib/libc/arch/i386/sys/brk.S	1 Mar 2003 13:40:54 -0000
d1861 2
a1862 2
--- src/lib/libc/arch/i386/sys/cerror.S	6 Oct 2002 23:23:51 -0000	1.3
+++ src/lib/libc/arch/i386/sys/cerror.S	1 Mar 2003 13:40:54 -0000
d1888 2
a1889 2
--- src/lib/libc/arch/i386/sys/exect.S	6 Oct 2002 23:23:51 -0000	1.3
+++ src/lib/libc/arch/i386/sys/exect.S	1 Mar 2003 13:40:54 -0000
d1909 2
a1910 2
--- src/lib/libc/arch/i386/sys/sbrk.S	6 Oct 2002 23:31:19 -0000	1.5
+++ src/lib/libc/arch/i386/sys/sbrk.S	1 Mar 2003 13:40:54 -0000
d1935 2
a1936 2
--- src/lib/libc/arch/i386/sys/sigprocmask.S	6 Oct 2002 23:23:51 -0000	1.5
+++ src/lib/libc/arch/i386/sys/sigprocmask.S	1 Mar 2003 13:40:54 -0000
d1956 2
a1957 2
--- src/lib/libc/arch/i386/sys/sigsuspend.S	6 Oct 2002 23:23:51 -0000	1.4
+++ src/lib/libc/arch/i386/sys/sigsuspend.S	1 Mar 2003 13:40:54 -0000
d1976 2
a1977 2
--- src/lib/libc/arch/i386/sys/syscall.S	6 Oct 2002 23:23:51 -0000	1.4
+++ src/lib/libc/arch/i386/sys/syscall.S	1 Mar 2003 13:40:54 -0000
d1996 2
a1997 2
--- src/lib/libcurses++/Makefile	15 Aug 1999 11:35:35 -0000	1.5
+++ src/lib/libcurses++/Makefile	1 Mar 2003 13:40:54 -0000
d2011 2
a2012 2
--- src/libexec/ftpd/Makefile	25 Jan 2002 06:33:01 -0000	1.21
+++ src/libexec/ftpd/Makefile	1 Mar 2003 13:40:54 -0000
d2027 2
a2028 2
--- src/libexec/login_chpass/Makefile	11 May 2002 00:19:58 -0000	1.2
+++ src/libexec/login_chpass/Makefile	1 Mar 2003 13:40:54 -0000
d2043 2
a2044 2
--- src/libexec/rshd/Makefile	6 May 2002 22:23:31 -0000	1.7
+++ src/libexec/rshd/Makefile	1 Mar 2003 13:40:54 -0000
d2059 2
a2060 2
--- src/sbin/disklabel/Makefile	8 Aug 2002 00:35:28 -0000	1.29
+++ src/sbin/disklabel/Makefile	1 Mar 2003 13:40:54 -0000
d2075 2
a2076 2
--- src/sbin/fdisk/Makefile	26 Jun 2002 18:34:04 -0000	1.20
+++ src/sbin/fdisk/Makefile	1 Mar 2003 13:40:54 -0000
d2091 2
a2092 2
--- src/sbin/fsck/fsutil.c	6 Sep 2002 21:15:54 -0000	1.8
+++ src/sbin/fsck/fsutil.c	1 Mar 2003 13:40:54 -0000
d2106 2
a2107 2
--- src/sbin/pfctl/Makefile	9 Jan 2003 17:32:57 -0000	1.12
+++ src/sbin/pfctl/Makefile	1 Mar 2003 13:40:54 -0000
d2122 2
a2123 2
--- src/sbin/photurisd/Makefile	28 Jan 2001 22:44:43 -0000	1.4
+++ src/sbin/photurisd/Makefile	1 Mar 2003 13:40:54 -0000
d2138 2
a2139 2
--- src/sbin/wsconsctl/Makefile	12 Aug 2002 10:46:44 -0000	1.11
+++ src/sbin/wsconsctl/Makefile	1 Mar 2003 13:40:54 -0000
d2154 2
a2155 2
--- src/share/lkm/vfs/module/Makefile	27 Jun 2001 06:16:25 -0000	1.7
+++ src/share/lkm/vfs/module/Makefile	1 Mar 2003 13:40:55 -0000
d2170 2
a2171 2
--- src/share/man/man4/options.4	17 Feb 2003 22:19:08 -0000	1.116
+++ src/share/man/man4/options.4	1 Mar 2003 13:40:55 -0000
d2173 1
a2173 1
+.\"	$MirBSD: obsd.misc,v 1.18 2003/03/01 13:16:06 tg Exp $
d2194 2
a2195 2
--- src/share/mk/bsd.README	25 Jun 2002 15:32:56 -0000	1.32
+++ src/share/mk/bsd.README	1 Mar 2003 13:40:55 -0000
d2206 28
d2239 2
a2240 2
--- src/share/mk/bsd.own.mk	7 Dec 2002 22:30:38 -0000	1.63
+++ src/share/mk/bsd.own.mk	1 Mar 2003 13:40:57 -0000
d2259 48
d2312 2
a2313 2
--- src/usr.bin/hexdump/parse.c	14 Mar 2002 06:51:20 -0000	1.10
+++ src/usr.bin/hexdump/parse.c	1 Mar 2003 13:40:58 -0000
d2328 2
a2329 2
--- src/usr.bin/keynote/Makefile	11 May 2002 00:19:58 -0000	1.10
+++ src/usr.bin/keynote/Makefile	1 Mar 2003 13:40:58 -0000
d2344 2
a2345 2
--- src/usr.bin/less/Makefile.bsd-wrapper	3 Feb 1999 23:36:23 -0000	1.18
+++ src/usr.bin/less/Makefile.bsd-wrapper	1 Mar 2003 13:40:58 -0000
d2371 2
a2372 2
--- src/usr.bin/yacc/skeleton.c	3 Dec 2002 21:33:59 -0000	1.19
+++ src/usr.bin/yacc/skeleton.c	1 Mar 2003 13:40:58 -0000
d2374 1
a2374 1
+/*	$MirBSD: obsd.misc,v 1.18 2003/03/01 13:16:06 tg Exp $	*/
d2399 1
a2399 1
+    "  = \"$OpenBSD: skeleton.c,v 1.19 2002/12/03 21:34:21 mickey Exp $ $MirBSD: obsd.misc,v 1.18 2003/03/01 13:16:06 tg Exp $\";",
d2406 4
a2409 4
retrieving revision 1.93
diff -u -r1.93 Makefile
--- src/usr.sbin/Makefile	4 Feb 2003 01:34:46 -0000	1.93
+++ src/usr.sbin/Makefile	1 Mar 2003 13:40:58 -0000
d2424 2
a2425 2
--- src/usr.sbin/authpf/authpf.c	19 Feb 2003 00:03:00 -0000	1.53
+++ src/usr.sbin/authpf/authpf.c	1 Mar 2003 13:40:58 -0000
d2440 2
a2441 2
--- src/usr.sbin/config/main.c	6 Sep 2002 19:01:44 -0000	1.29
+++ src/usr.sbin/config/main.c	1 Mar 2003 13:40:58 -0000
d2443 1
a2443 1
+/*	$MirBSD: obsd.misc,v 1.18 2003/03/01 13:16:06 tg Exp $	*/
d2540 2
a2541 2
--- src/usr.sbin/config/scan.l	16 Feb 2002 21:27:39 -0000	1.15
+++ src/usr.sbin/config/scan.l	1 Mar 2003 13:40:58 -0000
d2627 3
d2651 1
d2653 2
@


1.18
log
@pre-build

fix ELF, file lists, domain, misc. stuff
@
text
@d24 1
a24 1
against CTM on Sat Mar  1 13:11:26 UTC 2003.
d34 1
a34 1
+++ src/bin/rcp/Makefile	1 Mar 2003 13:10:22 -0000
d50 1
a50 1
+++ src/bin/systrace/Makefile	1 Mar 2003 13:10:22 -0000
d71 1
a71 1
+++ src/distrib/crunch/Makefile.inc	1 Mar 2003 13:10:22 -0000
d84 1
a84 1
+++ src/distrib/crunch/crunchgen/Makefile	1 Mar 2003 13:10:22 -0000
d100 1
a100 1
+++ src/distrib/crunch/crunchide/crunchide.c	1 Mar 2003 13:10:22 -0000
d139 1
a139 1
+++ src/distrib/i386/common/Makefile.inc	1 Mar 2003 13:10:22 -0000
d186 1
a186 1
+++ src/distrib/special/pppd/Makefile	1 Mar 2003 13:10:22 -0000
d201 1
a201 1
+++ src/distrib/special/rsh/Makefile	1 Mar 2003 13:10:22 -0000
d216 1
a216 1
+++ src/games/hack/Makefile	1 Mar 2003 13:10:22 -0000
d232 1
a232 1
+++ src/gnu/egcs/Makefile.bsd-wrapper	1 Mar 2003 13:10:22 -0000
d253 1
a253 1
+++ src/gnu/egcs/gcc/Makefile.bsd-wrapper	1 Mar 2003 13:10:22 -0000
d255 1
a255 1
+#	$MirBSD: obsd.misc,v 1.17 2003/03/01 12:02:50 tg Exp $
d328 1
a328 1
+++ src/gnu/egcs/gcc/config.gcc	1 Mar 2003 13:10:22 -0000
d348 1
a348 1
+++ src/gnu/egcs/gcc/config/i386/openbsd.h	1 Mar 2003 13:10:23 -0000
d557 1
a557 1
+++ src/gnu/egcs/libf2c/Makefile.bsd-wrapper	1 Mar 2003 13:10:23 -0000
d572 1
a572 1
+++ src/gnu/egcs/libiberty/Makefile.bsd-wrapper1	1 Mar 2003 13:10:23 -0000
d597 1
a597 1
+++ src/gnu/egcs/libio/editbuf.cc	1 Mar 2003 13:10:23 -0000
d612 1
a612 1
+++ src/gnu/egcs/libio/editbuf.h	1 Mar 2003 13:10:23 -0000
d628 1
a628 1
+++ src/gnu/egcs/libio/parsestream.cc	1 Mar 2003 13:10:23 -0000
d643 1
a643 1
+++ src/gnu/egcs/libio/pfstream.cc	1 Mar 2003 13:10:23 -0000
d658 1
a658 1
+++ src/gnu/egcs/libstdc++/Makefile.bsd-wrapper	1 Mar 2003 13:10:23 -0000
d674 1
a674 1
+++ src/gnu/usr.bin/binutils/Makefile.bsd-wrapper	1 Mar 2003 13:10:23 -0000
d724 1
a724 1
+++ src/gnu/usr.bin/binutils/bfd/config.bfd	1 Mar 2003 13:10:23 -0000
d745 1
a745 1
+++ src/gnu/usr.bin/binutils/gas/config/tc-i386.c	1 Mar 2003 13:10:23 -0000
d770 1
a770 1
+++ src/gnu/usr.bin/binutils/gas/configure	1 Mar 2003 13:10:23 -0000
d786 1
a786 1
+++ src/gnu/usr.bin/binutils/gas/configure.in	1 Mar 2003 13:10:23 -0000
d802 1
a802 1
+++ src/gnu/usr.bin/binutils/gdb/config/alpha/nm-obsd.h	1 Mar 2003 13:10:23 -0000
d881 1
a881 1
+++ src/gnu/usr.bin/binutils/gdb/config/alpha/obsd.mt	1 Mar 2003 13:10:23 -0000
d893 1
a893 1
+++ src/gnu/usr.bin/binutils/gdb/config/i386/nm-obsd.h	1 Mar 2003 13:10:23 -0000
d970 1
a970 1
+++ src/gnu/usr.bin/binutils/ld/configure.tgt	1 Mar 2003 13:10:23 -0000
d986 1
a986 1
+++ src/gnu/usr.bin/cvs/Makefile.bsd-wrapper	1 Mar 2003 13:10:23 -0000
d1018 1
a1018 1
+++ src/gnu/usr.bin/gzip/Makefile	1 Mar 2003 13:10:24 -0000
d1044 1
a1044 1
+++ src/gnu/usr.bin/perl/hints/openbsd.sh	1 Mar 2003 13:10:24 -0000
d1060 1
a1060 1
+++ src/gnu/usr.bin/texinfo/Makefile.bsd-wrapper	1 Mar 2003 13:10:24 -0000
d1083 1
a1083 1
+++ src/gnu/usr.sbin/mkhybrid/src/Makefile	1 Mar 2003 13:10:24 -0000
d1099 1
a1099 1
+++ src/gnu/usr.sbin/mkhybrid/src/diag/Makefile	1 Mar 2003 13:10:24 -0000
d1116 1
a1116 1
+++ src/kerberosIV/Makefile	1 Mar 2003 13:10:24 -0000
d1137 1
a1137 1
+++ src/kerberosIV/Makefile.inc	1 Mar 2003 13:10:24 -0000
d1153 1
a1153 1
+++ src/kerberosIV/lib/kadm/Makefile	1 Mar 2003 13:10:24 -0000
d1169 1
a1169 1
+++ src/kerberosIV/lib/roken/Makefile	1 Mar 2003 13:10:24 -0000
d1185 1
a1185 1
+++ src/kerberosIV/src/appl/ftp/ftp/Makefile	1 Mar 2003 13:10:24 -0000
d1204 1
a1204 1
+++ src/kerberosIV/src/appl/ftp/ftpd/Makefile	1 Mar 2003 13:10:24 -0000
d1220 1
a1220 1
+++ src/kerberosIV/src/include/Makefile	1 Mar 2003 13:10:24 -0000
d1236 1
a1236 1
+++ src/lib/csu/common_elf/crtbegin.c	1 Mar 2003 13:10:24 -0000
d1276 1
a1276 1
+++ src/lib/csu/common_elf/crtbeginS.c	1 Mar 2003 13:10:24 -0000
d1314 1
a1314 1
+++ src/lib/csu/i386/crt0.c	1 Mar 2003 13:10:24 -0000
d1334 1
a1334 1
@@@@ -29,50 +30,64 @@@@
d1403 1
a1403 1
 	register char **argv, *ap;
d1426 1
d1428 3
a1430 1
@@@@ -82,45 +97,33 @@@@
d1432 2
a1433 2
 	}
 
d1440 1
a1440 1
-#endif
d1445 2
a1446 1
-
d1502 1
a1502 1
+++ src/lib/libc/arch/i386/SYS.h	1 Mar 2003 13:10:24 -0000
d1558 1
a1558 1
+++ src/lib/libc/arch/i386/gen/alloca.S	1 Mar 2003 13:10:24 -0000
d1571 1
a1571 1
+++ src/lib/libc/arch/i386/gen/setjmp.S	1 Mar 2003 13:10:24 -0000
d1612 1
a1612 1
+++ src/lib/libc/arch/i386/gen/sigsetjmp.S	1 Mar 2003 13:10:24 -0000
d1655 1
a1655 1
+++ src/lib/libc/arch/i386/sys/Ovfork.S	1 Mar 2003 13:10:24 -0000
d1682 1
a1682 1
+++ src/lib/libc/arch/i386/sys/brk.S	1 Mar 2003 13:10:24 -0000
d1708 1
a1708 1
+++ src/lib/libc/arch/i386/sys/cerror.S	1 Mar 2003 13:10:24 -0000
d1735 1
a1735 1
+++ src/lib/libc/arch/i386/sys/exect.S	1 Mar 2003 13:10:24 -0000
d1756 1
a1756 1
+++ src/lib/libc/arch/i386/sys/sbrk.S	1 Mar 2003 13:10:24 -0000
d1782 1
a1782 1
+++ src/lib/libc/arch/i386/sys/sigprocmask.S	1 Mar 2003 13:10:24 -0000
d1803 1
a1803 1
+++ src/lib/libc/arch/i386/sys/sigsuspend.S	1 Mar 2003 13:10:24 -0000
d1823 1
a1823 1
+++ src/lib/libc/arch/i386/sys/syscall.S	1 Mar 2003 13:10:24 -0000
d1843 1
a1843 1
+++ src/lib/libcurses++/Makefile	1 Mar 2003 13:10:24 -0000
d1858 1
a1858 1
+++ src/libexec/ftpd/Makefile	1 Mar 2003 13:10:24 -0000
d1874 1
a1874 1
+++ src/libexec/login_chpass/Makefile	1 Mar 2003 13:10:24 -0000
d1890 1
a1890 1
+++ src/libexec/rshd/Makefile	1 Mar 2003 13:10:24 -0000
d1906 1
a1906 1
+++ src/sbin/disklabel/Makefile	1 Mar 2003 13:10:24 -0000
d1922 1
a1922 1
+++ src/sbin/fdisk/Makefile	1 Mar 2003 13:10:24 -0000
d1938 1
a1938 1
+++ src/sbin/fsck/fsutil.c	1 Mar 2003 13:10:24 -0000
d1953 1
a1953 1
+++ src/sbin/pfctl/Makefile	1 Mar 2003 13:10:24 -0000
d1969 1
a1969 1
+++ src/sbin/photurisd/Makefile	1 Mar 2003 13:10:24 -0000
d1985 1
a1985 1
+++ src/sbin/wsconsctl/Makefile	1 Mar 2003 13:10:24 -0000
d2001 1
a2001 1
+++ src/share/lkm/vfs/module/Makefile	1 Mar 2003 13:10:24 -0000
d2017 1
a2017 1
+++ src/share/man/man4/options.4	1 Mar 2003 13:10:24 -0000
d2019 1
a2019 1
+.\"	$MirBSD: obsd.misc,v 1.17 2003/03/01 12:02:50 tg Exp $
d2041 1
a2041 1
+++ src/share/mk/bsd.README	1 Mar 2003 13:10:25 -0000
d2058 1
a2058 1
+++ src/share/mk/bsd.own.mk	1 Mar 2003 13:10:25 -0000
d2083 1
a2083 1
+++ src/usr.bin/hexdump/parse.c	1 Mar 2003 13:10:25 -0000
d2099 1
a2099 1
+++ src/usr.bin/keynote/Makefile	1 Mar 2003 13:10:25 -0000
d2115 1
a2115 1
+++ src/usr.bin/less/Makefile.bsd-wrapper	1 Mar 2003 13:10:25 -0000
d2142 1
a2142 1
+++ src/usr.bin/yacc/skeleton.c	1 Mar 2003 13:10:25 -0000
d2144 1
a2144 1
+/*	$MirBSD: obsd.misc,v 1.17 2003/03/01 12:02:50 tg Exp $	*/
d2169 1
a2169 1
+    "  = \"$OpenBSD: skeleton.c,v 1.19 2002/12/03 21:34:21 mickey Exp $ $MirBSD: obsd.misc,v 1.17 2003/03/01 12:02:50 tg Exp $\";",
d2179 1
a2179 1
+++ src/usr.sbin/Makefile	1 Mar 2003 13:10:25 -0000
d2195 1
a2195 1
+++ src/usr.sbin/authpf/authpf.c	1 Mar 2003 13:10:25 -0000
d2211 1
a2211 1
+++ src/usr.sbin/config/main.c	1 Mar 2003 13:10:25 -0000
d2213 1
a2213 1
+/*	$MirBSD: obsd.misc,v 1.17 2003/03/01 12:02:50 tg Exp $	*/
d2311 1
a2311 1
+++ src/usr.sbin/config/scan.l	1 Mar 2003 13:10:25 -0000
@


1.17
log
@not so fast, dear friend gcc...
ld.so sucks
@
text
@d24 1
a24 1
against CTM on Sat Mar  1 12:02:09 UTC 2003.
d27 1
a27 1
### CTM OpenBSD-cvs 3073
d34 1
a34 1
+++ src/bin/rcp/Makefile	1 Mar 2003 10:26:09 -0000
d50 1
a50 1
+++ src/bin/systrace/Makefile	1 Mar 2003 10:26:09 -0000
d71 1
a71 1
+++ src/distrib/crunch/Makefile.inc	1 Mar 2003 10:26:09 -0000
d84 1
a84 1
+++ src/distrib/crunch/crunchgen/Makefile	1 Mar 2003 10:26:09 -0000
d100 1
a100 1
+++ src/distrib/crunch/crunchide/crunchide.c	1 Mar 2003 10:26:09 -0000
d139 1
a139 1
+++ src/distrib/i386/common/Makefile.inc	1 Mar 2003 10:26:09 -0000
d186 1
a186 1
+++ src/distrib/special/pppd/Makefile	1 Mar 2003 10:26:09 -0000
d201 1
a201 1
+++ src/distrib/special/rsh/Makefile	1 Mar 2003 10:26:09 -0000
d216 1
a216 1
+++ src/games/hack/Makefile	1 Mar 2003 10:26:09 -0000
d232 1
a232 1
+++ src/gnu/egcs/Makefile.bsd-wrapper	1 Mar 2003 10:26:09 -0000
d253 1
a253 1
+++ src/gnu/egcs/gcc/Makefile.bsd-wrapper	1 Mar 2003 10:26:09 -0000
d255 1
a255 1
+#	$MirBSD: obsd.misc,v 1.16 2003/03/01 10:05:34 tg Exp $
d328 1
a328 1
+++ src/gnu/egcs/gcc/config.gcc	1 Mar 2003 10:26:09 -0000
d348 1
a348 1
+++ src/gnu/egcs/gcc/config/i386/openbsd.h	1 Mar 2003 10:26:09 -0000
d557 1
a557 1
+++ src/gnu/egcs/libf2c/Makefile.bsd-wrapper	1 Mar 2003 10:26:09 -0000
d572 1
a572 1
+++ src/gnu/egcs/libiberty/Makefile.bsd-wrapper1	1 Mar 2003 10:26:09 -0000
d597 1
a597 1
+++ src/gnu/egcs/libio/editbuf.cc	1 Mar 2003 10:26:09 -0000
d612 1
a612 1
+++ src/gnu/egcs/libio/editbuf.h	1 Mar 2003 10:26:09 -0000
d628 1
a628 1
+++ src/gnu/egcs/libio/parsestream.cc	1 Mar 2003 10:26:09 -0000
d643 1
a643 1
+++ src/gnu/egcs/libio/pfstream.cc	1 Mar 2003 10:26:09 -0000
d658 1
a658 1
+++ src/gnu/egcs/libstdc++/Makefile.bsd-wrapper	1 Mar 2003 10:26:10 -0000
d674 1
a674 1
+++ src/gnu/usr.bin/binutils/Makefile.bsd-wrapper	1 Mar 2003 10:26:10 -0000
d724 1
a724 1
+++ src/gnu/usr.bin/binutils/bfd/config.bfd	1 Mar 2003 10:26:10 -0000
d745 1
a745 1
+++ src/gnu/usr.bin/binutils/gas/config/tc-i386.c	1 Mar 2003 10:26:12 -0000
d770 1
a770 1
+++ src/gnu/usr.bin/binutils/gas/configure	1 Mar 2003 10:26:14 -0000
d786 1
a786 1
+++ src/gnu/usr.bin/binutils/gas/configure.in	1 Mar 2003 10:26:14 -0000
d802 1
a802 1
+++ src/gnu/usr.bin/binutils/gdb/config/alpha/nm-obsd.h	1 Mar 2003 10:26:14 -0000
d881 1
a881 1
+++ src/gnu/usr.bin/binutils/gdb/config/alpha/obsd.mt	1 Mar 2003 10:26:14 -0000
d893 1
a893 1
+++ src/gnu/usr.bin/binutils/gdb/config/i386/nm-obsd.h	1 Mar 2003 10:26:14 -0000
d970 1
a970 1
+++ src/gnu/usr.bin/binutils/ld/configure.tgt	1 Mar 2003 10:26:14 -0000
d986 1
a986 1
+++ src/gnu/usr.bin/cvs/Makefile.bsd-wrapper	1 Mar 2003 10:26:14 -0000
d1018 1
a1018 1
+++ src/gnu/usr.bin/gzip/Makefile	1 Mar 2003 10:26:14 -0000
d1044 1
a1044 1
+++ src/gnu/usr.bin/perl/hints/openbsd.sh	1 Mar 2003 10:26:14 -0000
d1060 1
a1060 1
+++ src/gnu/usr.bin/texinfo/Makefile.bsd-wrapper	1 Mar 2003 10:26:14 -0000
d1083 1
a1083 1
+++ src/gnu/usr.sbin/mkhybrid/src/Makefile	1 Mar 2003 10:26:14 -0000
d1099 1
a1099 1
+++ src/gnu/usr.sbin/mkhybrid/src/diag/Makefile	1 Mar 2003 10:26:14 -0000
d1116 1
a1116 1
+++ src/kerberosIV/Makefile	1 Mar 2003 10:26:14 -0000
d1137 1
a1137 1
+++ src/kerberosIV/Makefile.inc	1 Mar 2003 10:26:14 -0000
d1153 1
a1153 1
+++ src/kerberosIV/lib/kadm/Makefile	1 Mar 2003 10:26:14 -0000
d1169 1
a1169 1
+++ src/kerberosIV/lib/roken/Makefile	1 Mar 2003 10:26:14 -0000
d1185 1
a1185 1
+++ src/kerberosIV/src/appl/ftp/ftp/Makefile	1 Mar 2003 10:26:15 -0000
d1204 1
a1204 1
+++ src/kerberosIV/src/appl/ftp/ftpd/Makefile	1 Mar 2003 10:26:15 -0000
d1220 1
a1220 1
+++ src/kerberosIV/src/include/Makefile	1 Mar 2003 10:26:15 -0000
d1236 1
a1236 1
+++ src/lib/csu/common_elf/crtbegin.c	28 Feb 2003 20:24:36 -0000
d1276 1
a1276 1
+++ src/lib/csu/common_elf/crtbeginS.c	28 Feb 2003 20:24:36 -0000
d1311 4
a1314 4
retrieving revision 1.8
diff -u -r1.8 crt0.c
--- src/lib/csu/i386/crt0.c	17 Sep 2002 21:15:39 -0000	1.8
+++ src/lib/csu/i386/crt0.c	1 Mar 2003 10:26:15 -0000
d1334 1
a1334 1
@@@@ -29,92 +30,94 @@@@
d1343 1
a1343 1
 static char rcsid[] = "$OpenBSD: crt0.c,v 1.8 2002/09/17 21:16:01 deraadt Exp $";
d1403 2
a1404 1
-	register char **argv, *ap;
d1425 4
a1428 2
-			++__progname;
+			__progname++;
a1448 2
+
+	__init();
d1452 2
a1491 1
+
d1498 1
a1498 1
+++ src/lib/libc/arch/i386/SYS.h	1 Mar 2003 10:26:15 -0000
d1554 1
a1554 1
+++ src/lib/libc/arch/i386/gen/alloca.S	1 Mar 2003 10:26:15 -0000
d1567 1
a1567 1
+++ src/lib/libc/arch/i386/gen/setjmp.S	1 Mar 2003 10:26:15 -0000
d1608 1
a1608 1
+++ src/lib/libc/arch/i386/gen/sigsetjmp.S	1 Mar 2003 10:26:15 -0000
d1651 1
a1651 1
+++ src/lib/libc/arch/i386/sys/Ovfork.S	1 Mar 2003 10:26:15 -0000
d1678 1
a1678 1
+++ src/lib/libc/arch/i386/sys/brk.S	1 Mar 2003 10:26:15 -0000
d1704 1
a1704 1
+++ src/lib/libc/arch/i386/sys/cerror.S	1 Mar 2003 10:26:15 -0000
d1731 1
a1731 1
+++ src/lib/libc/arch/i386/sys/exect.S	1 Mar 2003 10:26:15 -0000
d1752 1
a1752 1
+++ src/lib/libc/arch/i386/sys/sbrk.S	1 Mar 2003 10:26:15 -0000
d1778 1
a1778 1
+++ src/lib/libc/arch/i386/sys/sigprocmask.S	1 Mar 2003 10:26:15 -0000
d1799 1
a1799 1
+++ src/lib/libc/arch/i386/sys/sigsuspend.S	1 Mar 2003 10:26:15 -0000
d1819 1
a1819 1
+++ src/lib/libc/arch/i386/sys/syscall.S	1 Mar 2003 10:26:15 -0000
d1839 1
a1839 1
+++ src/lib/libcurses++/Makefile	1 Mar 2003 10:26:15 -0000
d1854 1
a1854 1
+++ src/libexec/ftpd/Makefile	1 Mar 2003 10:26:15 -0000
d1870 1
a1870 1
+++ src/libexec/login_chpass/Makefile	1 Mar 2003 10:26:15 -0000
d1886 1
a1886 1
+++ src/libexec/rshd/Makefile	1 Mar 2003 10:26:15 -0000
d1902 1
a1902 1
+++ src/sbin/disklabel/Makefile	1 Mar 2003 10:26:15 -0000
d1918 1
a1918 1
+++ src/sbin/fdisk/Makefile	1 Mar 2003 10:26:15 -0000
d1934 1
a1934 1
+++ src/sbin/fsck/fsutil.c	1 Mar 2003 10:26:15 -0000
d1949 1
a1949 1
+++ src/sbin/pfctl/Makefile	1 Mar 2003 10:26:15 -0000
d1965 1
a1965 1
+++ src/sbin/photurisd/Makefile	1 Mar 2003 10:26:15 -0000
d1981 1
a1981 1
+++ src/sbin/wsconsctl/Makefile	1 Mar 2003 10:26:15 -0000
d1997 1
a1997 1
+++ src/share/lkm/vfs/module/Makefile	1 Mar 2003 10:26:15 -0000
d2013 1
a2013 1
+++ src/share/man/man4/options.4	1 Mar 2003 10:26:15 -0000
d2015 1
a2015 1
+.\"	$MirBSD: obsd.misc,v 1.16 2003/03/01 10:05:34 tg Exp $
d2037 1
a2037 1
+++ src/share/mk/bsd.README	1 Mar 2003 10:26:16 -0000
d2054 1
a2054 1
+++ src/share/mk/bsd.own.mk	1 Mar 2003 10:26:16 -0000
a2072 16
Index: src/sys/arch/i386/include/biosvar.h
===================================================================
RCS file: /cvs/src/sys/arch/i386/include/biosvar.h,v
retrieving revision 1.40
diff -u -r1.40 biosvar.h
--- src/sys/arch/i386/include/biosvar.h	14 Mar 2002 01:26:11 -0000	1.40
+++ src/sys/arch/i386/include/biosvar.h	1 Mar 2003 10:26:16 -0000
@@@@ -204,7 +204,7 @@@@
 #else
 #define	DOINT(n)	"int $0x20+(" #n ")"
 
-extern struct BIOS_regs {
+extern volatile struct BIOS_regs {
 	u_int32_t	biosr_ax;
 	u_int32_t	biosr_cx;
 	u_int32_t	biosr_dx;
d2079 1
a2079 1
+++ src/usr.bin/hexdump/parse.c	1 Mar 2003 10:26:16 -0000
d2095 1
a2095 1
+++ src/usr.bin/keynote/Makefile	1 Mar 2003 10:26:16 -0000
d2111 1
a2111 1
+++ src/usr.bin/less/Makefile.bsd-wrapper	1 Mar 2003 10:26:16 -0000
d2138 1
a2138 1
+++ src/usr.bin/yacc/skeleton.c	1 Mar 2003 10:26:16 -0000
d2140 1
a2140 1
+/*	$MirBSD: obsd.misc,v 1.16 2003/03/01 10:05:34 tg Exp $	*/
d2165 1
a2165 1
+    "  = \"$OpenBSD: skeleton.c,v 1.19 2002/12/03 21:34:21 mickey Exp $ $MirBSD: obsd.misc,v 1.16 2003/03/01 10:05:34 tg Exp $\";",
d2175 1
a2175 1
+++ src/usr.sbin/Makefile	1 Mar 2003 10:26:16 -0000
d2191 1
a2191 1
+++ src/usr.sbin/authpf/authpf.c	1 Mar 2003 10:26:16 -0000
d2207 1
a2207 1
+++ src/usr.sbin/config/main.c	1 Mar 2003 10:26:16 -0000
d2209 1
a2209 1
+/*	$MirBSD: obsd.misc,v 1.16 2003/03/01 10:05:34 tg Exp $	*/
d2307 1
a2307 1
+++ src/usr.sbin/config/scan.l	1 Mar 2003 10:26:16 -0000
a2334 128
Index: src/sys/arch/i386/include/loadfile_machdep.h
===================================================================
RCS file: /cvs/src/sys/arch/i386/include/loadfile_machdep.h,v
retrieving revision DEAD
--- /dev/null	Sat Mar  1 11:57:53 2003
+++ src/sys/arch/i386/include/loadfile_machdep.h	Sat Mar  1 10:26:16 2003
@@@@ -0,0 +1,65 @@@@
+/*	$OpenBSD: loadfile_machdep.h,v 1.1 2001/09/01 15:49:06 drahn Exp $	*/
+/*	$NetBSD: loadfile_machdep.h,v 1.1 1999/04/29 03:17:12 tsubai Exp $	*/
+
+/*-
+ * Copyright (c) 1999 The NetBSD Foundation, Inc.
+ * All rights reserved.
+ *
+ * This code is derived from software contributed to The NetBSD Foundation
+ * by Christos Zoulas.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ * 1. Redistributions of source code must retain the above copyright
+ *    notice, this list of conditions and the following disclaimer.
+ * 2. Redistributions in binary form must reproduce the above copyright
+ *    notice, this list of conditions and the following disclaimer in the
+ *    documentation and/or other materials provided with the distribution.
+ * 3. All advertising materials mentioning features or use of this software
+ *    must display the following acknowledgement:
+ *        This product includes software developed by the NetBSD
+ *        Foundation, Inc. and its contributors.
+ * 4. Neither the name of The NetBSD Foundation nor the names of its
+ *    contributors may be used to endorse or promote products derived
+ *    from this software without specific prior written permission.
+ *
+ * THIS SOFTWARE IS PROVIDED BY THE NETBSD FOUNDATION, INC. AND CONTRIBUTORS
+ * ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
+ * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
+ * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE FOUNDATION OR CONTRIBUTORS
+ * BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
+ * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
+ * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
+ * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
+ * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
+ * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
+ * POSSIBILITY OF SUCH DAMAGE.
+ */
+
+#ifndef	_LOADFILE_MACHDEP_H
+#define	_LOADFILE_MACHDEP_H
+
+#define BOOT_ELF
+#define BOOT_AOUT
+#define ELFSIZE 32
+
+#define LOAD_KERNEL	(LOAD_ALL & ~LOAD_TEXTA)
+#define COUNT_KERNEL	(COUNT_ALL & ~COUNT_TEXTA)
+
+#define LOADADDR(a)		((((u_long)(a)) + offset)&0xfffffff)
+#define ALIGNENTRY(a)		((u_long)(a))
+#define READ(f, b, c)		read((f), (void *)LOADADDR(b), (c))
+#define BCOPY(s, d, c)		memcpy((void *)LOADADDR(d), (void *)(s), (c))
+#define BZERO(d, c)		memset((void *)LOADADDR(d), 0, (c))
+#define	WARN(a)			(void)(printf a, \
+				    printf((errno ? ": %s\n" : "\n"), \
+				    strerror(errno)))
+#define PROGRESS(a)		(void) printf a
+#define ALLOC(a)		alloc(a)
+#define FREE(a, b)		free(a, b)
+#define OKMAGIC(a)		((a) == OMAGIC)
+
+void run_loadfile(u_long *, int);
+
+#endif
Index: src/sys/arch/i386/include/reloc.h
===================================================================
RCS file: /cvs/src/sys/arch/i386/include/reloc.h,v
retrieving revision DEAD
--- /dev/null	Sat Mar  1 11:57:53 2003
+++ src/sys/arch/i386/include/reloc.h	Sat Mar  1 10:26:16 2003
@@@@ -0,0 +1,49 @@@@
+/*	$OpenBSD$	*/
+
+/*
+ * Copyright (c) 2002,2003 Dale Rahn
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ * 1. Redistributions of source code must retain the above copyright
+ *    notice, this list of conditions and the following disclaimer.
+ * 2. Redistributions in binary form must reproduce the above copyright
+ *    notice, this list of conditions and the following disclaimer in the
+ *    documentation and/or other materials provided with the distribution.
+ *
+ * THIS SOFTWARE IS PROVIDED BY THE AUTHOR "AS IS" AND ANY EXPRESS
+ * OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
+ * ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY
+ * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
+ * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
+ * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
+ * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
+ * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
+ * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ */
+
+#ifndef	_MACH_RELOC_H 
+#define	_MACH_RELOC_H 
+
+#define	R_TYPE(X)	__CONCAT(RELOC_,X)
+
+#define	RELOC_NONE	0    /* No reloc */
+#define	RELOC_32	1    /* Direct 32 bit  */
+#define	RELOC_PC32	2    /* PC relative 32 bit */
+#define	RELOC_GOT32	3    /* 32 bit GOT entry */
+#define	RELOC_PLT32	4    /* 32 bit PLT address */
+#define	RELOC_COPY	5    /* Copy symbol at runtime */
+#define	RELOC_GLOB_DAT	6    /* Create GOT entry */
+#define	RELOC_JUMP_SLOT	7    /* Create PLT entry */
+#define	RELOC_RELATIVE	8    /* Adjust by program base */
+#define	RELOC_GOTOFF	9    /* 32 bit offset to GOT */
+#define	RELOC_GOTPC	10   /* 32 bit PC relative offset to GOT */
+#define	RELOC_16	20
+#define	RELOC_PC16	21
+#define	RELOC_8		22
+#define	RELOC_PC8	23
+
+#endif	/* _MACH_RELOC_H */
a2414 1
src/sys/arch/i386/include/biosvar.h		hmm
a2424 2
src/sys/arch/i386/include/loadfile_machdep.h	ELF
src/sys/arch/i386/include/reloc.h		ELF
d2427 1
a2427 1
misc. diffs, gcc-3.2 related, MicroBSD originated, Makefile stuff, etc.
@


1.16
log
@post-build developer

I'm not sure if egcs builds now...
@
text
@d24 1
a24 1
against CTM on Sat Mar  1 10:04:00 UTC 2003.
d34 1
a34 1
+++ src/bin/rcp/Makefile	1 Mar 2003 00:09:15 -0000
d50 1
a50 1
+++ src/bin/systrace/Makefile	1 Mar 2003 00:09:15 -0000
d71 1
a71 1
+++ src/distrib/crunch/Makefile.inc	1 Mar 2003 00:09:15 -0000
d84 1
a84 1
+++ src/distrib/crunch/crunchgen/Makefile	1 Mar 2003 00:09:16 -0000
d100 1
a100 1
+++ src/distrib/crunch/crunchide/crunchide.c	1 Mar 2003 00:09:16 -0000
d139 1
a139 1
+++ src/distrib/i386/common/Makefile.inc	1 Mar 2003 00:09:16 -0000
d186 1
a186 1
+++ src/distrib/special/pppd/Makefile	1 Mar 2003 00:09:16 -0000
d201 1
a201 1
+++ src/distrib/special/rsh/Makefile	1 Mar 2003 00:09:16 -0000
d216 1
a216 1
+++ src/games/hack/Makefile	1 Mar 2003 00:09:17 -0000
d232 1
a232 1
+++ src/gnu/egcs/Makefile.bsd-wrapper	1 Mar 2003 00:09:17 -0000
d253 1
a253 1
+++ src/gnu/egcs/gcc/Makefile.bsd-wrapper	1 Mar 2003 00:09:17 -0000
d255 1
a255 1
+#	$MirBSD: obsd.misc,v 1.15 2003/03/01 00:08:28 tg Exp $
d328 1
a328 1
+++ src/gnu/egcs/gcc/config.gcc	1 Mar 2003 00:09:17 -0000
d348 1
a348 1
+++ src/gnu/egcs/gcc/config/i386/openbsd.h	1 Mar 2003 00:09:17 -0000
d557 1
a557 1
+++ src/gnu/egcs/libf2c/Makefile.bsd-wrapper	1 Mar 2003 00:09:18 -0000
d572 1
a572 1
+++ src/gnu/egcs/libiberty/Makefile.bsd-wrapper1	1 Mar 2003 00:09:18 -0000
d597 1
a597 1
+++ src/gnu/egcs/libio/editbuf.cc	1 Mar 2003 00:09:18 -0000
d612 1
a612 1
+++ src/gnu/egcs/libio/editbuf.h	1 Mar 2003 00:09:19 -0000
d628 1
a628 1
+++ src/gnu/egcs/libio/parsestream.cc	1 Mar 2003 00:09:19 -0000
d643 1
a643 1
+++ src/gnu/egcs/libio/pfstream.cc	1 Mar 2003 00:09:19 -0000
d658 1
a658 1
+++ src/gnu/egcs/libstdc++/Makefile.bsd-wrapper	1 Mar 2003 00:09:20 -0000
d674 1
a674 1
+++ src/gnu/usr.bin/binutils/Makefile.bsd-wrapper	1 Mar 2003 00:09:20 -0000
d724 1
a724 1
+++ src/gnu/usr.bin/binutils/bfd/config.bfd	1 Mar 2003 00:09:21 -0000
d745 1
a745 1
+++ src/gnu/usr.bin/binutils/gas/config/tc-i386.c	1 Mar 2003 00:09:25 -0000
d770 1
a770 1
+++ src/gnu/usr.bin/binutils/gas/configure	1 Mar 2003 00:09:26 -0000
d786 1
a786 1
+++ src/gnu/usr.bin/binutils/gas/configure.in	1 Mar 2003 00:09:26 -0000
d802 1
a802 1
+++ src/gnu/usr.bin/binutils/gdb/config/alpha/nm-obsd.h	1 Mar 2003 00:09:27 -0000
d881 1
a881 1
+++ src/gnu/usr.bin/binutils/gdb/config/alpha/obsd.mt	1 Mar 2003 00:09:27 -0000
d893 1
a893 1
+++ src/gnu/usr.bin/binutils/gdb/config/i386/nm-obsd.h	1 Mar 2003 00:09:27 -0000
d970 1
a970 1
+++ src/gnu/usr.bin/binutils/ld/configure.tgt	1 Mar 2003 00:09:27 -0000
d986 1
a986 1
+++ src/gnu/usr.bin/cvs/Makefile.bsd-wrapper	1 Mar 2003 00:09:27 -0000
d1018 1
a1018 1
+++ src/gnu/usr.bin/gzip/Makefile	1 Mar 2003 00:09:27 -0000
d1044 1
a1044 1
+++ src/gnu/usr.bin/perl/hints/openbsd.sh	1 Mar 2003 00:09:28 -0000
d1060 1
a1060 1
+++ src/gnu/usr.bin/texinfo/Makefile.bsd-wrapper	1 Mar 2003 00:09:28 -0000
d1083 1
a1083 1
+++ src/gnu/usr.sbin/mkhybrid/src/Makefile	1 Mar 2003 00:09:28 -0000
d1099 1
a1099 1
+++ src/gnu/usr.sbin/mkhybrid/src/diag/Makefile	1 Mar 2003 00:09:28 -0000
d1116 1
a1116 1
+++ src/kerberosIV/Makefile	1 Mar 2003 00:09:28 -0000
d1137 1
a1137 1
+++ src/kerberosIV/Makefile.inc	1 Mar 2003 00:09:28 -0000
d1153 1
a1153 1
+++ src/kerberosIV/lib/kadm/Makefile	1 Mar 2003 00:09:28 -0000
d1169 1
a1169 1
+++ src/kerberosIV/lib/roken/Makefile	1 Mar 2003 00:09:28 -0000
d1185 1
a1185 1
+++ src/kerberosIV/src/appl/ftp/ftp/Makefile	1 Mar 2003 00:09:29 -0000
d1204 1
a1204 1
+++ src/kerberosIV/src/appl/ftp/ftpd/Makefile	1 Mar 2003 00:09:29 -0000
d1220 1
a1220 1
+++ src/kerberosIV/src/include/Makefile	1 Mar 2003 00:09:29 -0000
d1230 78
d1314 1
a1314 1
+++ src/lib/csu/i386/crt0.c	1 Mar 2003 00:09:29 -0000
d1496 1
a1496 1
+++ src/lib/libc/arch/i386/SYS.h	1 Mar 2003 00:09:29 -0000
d1552 1
a1552 1
+++ src/lib/libc/arch/i386/gen/alloca.S	1 Mar 2003 00:09:29 -0000
d1565 1
a1565 1
+++ src/lib/libc/arch/i386/gen/setjmp.S	1 Mar 2003 00:09:29 -0000
d1606 1
a1606 1
+++ src/lib/libc/arch/i386/gen/sigsetjmp.S	1 Mar 2003 00:09:29 -0000
d1649 1
a1649 1
+++ src/lib/libc/arch/i386/sys/Ovfork.S	1 Mar 2003 00:09:29 -0000
d1676 1
a1676 1
+++ src/lib/libc/arch/i386/sys/brk.S	1 Mar 2003 00:09:29 -0000
d1702 1
a1702 1
+++ src/lib/libc/arch/i386/sys/cerror.S	1 Mar 2003 00:09:29 -0000
d1729 1
a1729 1
+++ src/lib/libc/arch/i386/sys/exect.S	1 Mar 2003 00:09:29 -0000
d1750 1
a1750 1
+++ src/lib/libc/arch/i386/sys/sbrk.S	1 Mar 2003 00:09:29 -0000
d1776 1
a1776 1
+++ src/lib/libc/arch/i386/sys/sigprocmask.S	1 Mar 2003 00:09:29 -0000
d1797 1
a1797 1
+++ src/lib/libc/arch/i386/sys/sigsuspend.S	1 Mar 2003 00:09:29 -0000
d1817 1
a1817 1
+++ src/lib/libc/arch/i386/sys/syscall.S	1 Mar 2003 00:09:29 -0000
d1837 1
a1837 1
+++ src/lib/libcurses++/Makefile	1 Mar 2003 00:09:29 -0000
d1852 1
a1852 1
+++ src/libexec/ftpd/Makefile	1 Mar 2003 00:09:29 -0000
a1861 24
Index: src/libexec/ld.so/library.c
===================================================================
RCS file: /cvs/src/libexec/ld.so/library.c,v
retrieving revision 1.26
diff -u -r1.26 library.c
--- src/libexec/ld.so/library.c	2 Feb 2003 16:57:36 -0000	1.26
+++ src/libexec/ld.so/library.c	1 Mar 2003 00:09:30 -0000
@@@@ -201,6 +201,8 @@@@
 			_dl_closedir(dd);
 			if (match)
 				return (_dl_hint_store);
+		} else {
+			_dl_printf("err1 code %d\n", dd);
 		}
 
 		if (*pp)	/* Try curdir if ':' at end */
@@@@ -370,6 +372,7 @@@@
 
 	libfile = _dl_open(libname, O_RDONLY);
 	if (libfile < 0) {
+		_dl_printf("err code %d\n", libfile);
 		_dl_errno = DL_CANT_OPEN;
 		return(0);
 	}
d1868 1
a1868 1
+++ src/libexec/login_chpass/Makefile	1 Mar 2003 00:09:30 -0000
d1884 1
a1884 1
+++ src/libexec/rshd/Makefile	1 Mar 2003 00:09:30 -0000
d1900 1
a1900 1
+++ src/sbin/disklabel/Makefile	1 Mar 2003 00:09:30 -0000
d1916 1
a1916 1
+++ src/sbin/fdisk/Makefile	1 Mar 2003 00:09:30 -0000
d1932 1
a1932 1
+++ src/sbin/fsck/fsutil.c	1 Mar 2003 00:09:30 -0000
d1947 1
a1947 1
+++ src/sbin/pfctl/Makefile	1 Mar 2003 00:09:30 -0000
d1963 1
a1963 1
+++ src/sbin/photurisd/Makefile	1 Mar 2003 00:09:30 -0000
d1979 1
a1979 1
+++ src/sbin/wsconsctl/Makefile	1 Mar 2003 00:09:30 -0000
d1995 1
a1995 1
+++ src/share/lkm/vfs/module/Makefile	1 Mar 2003 00:09:30 -0000
d2011 1
a2011 1
+++ src/share/man/man4/options.4	1 Mar 2003 00:09:33 -0000
d2013 1
a2013 1
+.\"	$MirBSD: obsd.misc,v 1.15 2003/03/01 00:08:28 tg Exp $
d2035 1
a2035 1
+++ src/share/mk/bsd.README	1 Mar 2003 00:09:33 -0000
d2052 1
a2052 1
+++ src/share/mk/bsd.own.mk	1 Mar 2003 00:09:33 -0000
d2077 1
a2077 1
+++ src/sys/arch/i386/include/biosvar.h	1 Mar 2003 00:09:33 -0000
d2093 1
a2093 1
+++ src/usr.bin/hexdump/parse.c	1 Mar 2003 00:09:33 -0000
d2109 1
a2109 1
+++ src/usr.bin/keynote/Makefile	1 Mar 2003 00:09:33 -0000
d2125 1
a2125 1
+++ src/usr.bin/less/Makefile.bsd-wrapper	1 Mar 2003 00:09:33 -0000
d2152 1
a2152 1
+++ src/usr.bin/yacc/skeleton.c	1 Mar 2003 00:09:33 -0000
d2154 1
a2154 1
+/*	$MirBSD: obsd.misc,v 1.15 2003/03/01 00:08:28 tg Exp $	*/
d2179 1
a2179 1
+    "  = \"$OpenBSD: skeleton.c,v 1.19 2002/12/03 21:34:21 mickey Exp $ $MirBSD: obsd.misc,v 1.15 2003/03/01 00:08:28 tg Exp $\";",
d2189 1
a2189 1
+++ src/usr.sbin/Makefile	1 Mar 2003 00:09:33 -0000
d2205 1
a2205 1
+++ src/usr.sbin/authpf/authpf.c	1 Mar 2003 00:09:33 -0000
d2221 1
a2221 1
+++ src/usr.sbin/config/main.c	1 Mar 2003 00:09:33 -0000
d2223 1
a2223 1
+/*	$MirBSD: obsd.misc,v 1.15 2003/03/01 00:08:28 tg Exp $	*/
d2321 1
a2321 1
+++ src/usr.sbin/config/scan.l	1 Mar 2003 00:09:33 -0000
d2353 2
a2354 2
--- /dev/null	Sat Mar  1 10:00:31 2003
+++ src/sys/arch/i386/include/loadfile_machdep.h	Sat Mar  1 00:09:33 2003
d2425 2
a2426 2
--- /dev/null	Sat Mar  1 10:00:31 2003
+++ src/sys/arch/i386/include/reloc.h	Sat Mar  1 00:09:33 2003
d2528 2
a2544 1
src/libexec/ld.so/library.c			ELF
@


1.15
log
@auditing diffs
if gcc doesnt build now... i dunno
@
text
@d24 1
a24 1
against CTM on Sat Mar  1 00:06:35 UTC 2003.
d34 1
a34 1
+++ src/bin/rcp/Makefile	1 Mar 2003 00:01:18 -0000
d50 1
a50 1
+++ src/bin/systrace/Makefile	1 Mar 2003 00:01:18 -0000
d71 1
a71 1
+++ src/distrib/crunch/Makefile.inc	1 Mar 2003 00:01:18 -0000
d84 1
a84 1
+++ src/distrib/crunch/crunchgen/Makefile	1 Mar 2003 00:01:18 -0000
d100 1
a100 1
+++ src/distrib/crunch/crunchide/crunchide.c	1 Mar 2003 00:01:18 -0000
d139 1
a139 1
+++ src/distrib/i386/common/Makefile.inc	1 Mar 2003 00:01:18 -0000
d186 1
a186 1
+++ src/distrib/special/pppd/Makefile	1 Mar 2003 00:01:18 -0000
d201 1
a201 1
+++ src/distrib/special/rsh/Makefile	1 Mar 2003 00:01:18 -0000
d216 1
a216 1
+++ src/games/hack/Makefile	1 Mar 2003 00:01:19 -0000
d232 1
a232 1
+++ src/gnu/egcs/Makefile.bsd-wrapper	1 Mar 2003 00:01:19 -0000
d253 1
a253 1
+++ src/gnu/egcs/gcc/Makefile.bsd-wrapper	1 Mar 2003 00:01:19 -0000
d255 1
a255 1
+#	$MirBSD: obsd.misc,v 1.14 2003/02/28 18:22:10 tg Exp $
d328 1
a328 1
+++ src/gnu/egcs/gcc/config.gcc	1 Mar 2003 00:01:19 -0000
d348 1
a348 1
+++ src/gnu/egcs/gcc/config/i386/openbsd.h	1 Mar 2003 00:01:22 -0000
d557 1
a557 1
+++ src/gnu/egcs/libf2c/Makefile.bsd-wrapper	1 Mar 2003 00:01:22 -0000
d572 1
a572 1
+++ src/gnu/egcs/libiberty/Makefile.bsd-wrapper1	1 Mar 2003 00:01:22 -0000
d597 1
a597 1
+++ src/gnu/egcs/libio/editbuf.cc	1 Mar 2003 00:01:22 -0000
d612 1
a612 1
+++ src/gnu/egcs/libio/editbuf.h	1 Mar 2003 00:01:22 -0000
d628 1
a628 1
+++ src/gnu/egcs/libio/parsestream.cc	1 Mar 2003 00:01:22 -0000
d643 1
a643 1
+++ src/gnu/egcs/libio/pfstream.cc	1 Mar 2003 00:01:22 -0000
d658 1
a658 1
+++ src/gnu/egcs/libstdc++/Makefile.bsd-wrapper	1 Mar 2003 00:01:22 -0000
d674 1
a674 1
+++ src/gnu/usr.bin/binutils/Makefile.bsd-wrapper	1 Mar 2003 00:01:22 -0000
d724 1
a724 1
+++ src/gnu/usr.bin/binutils/bfd/config.bfd	1 Mar 2003 00:01:22 -0000
d745 1
a745 1
+++ src/gnu/usr.bin/binutils/gas/config/tc-i386.c	1 Mar 2003 00:01:23 -0000
d770 1
a770 1
+++ src/gnu/usr.bin/binutils/gas/configure	1 Mar 2003 00:01:23 -0000
d786 1
a786 1
+++ src/gnu/usr.bin/binutils/gas/configure.in	1 Mar 2003 00:01:23 -0000
d802 1
a802 1
+++ src/gnu/usr.bin/binutils/gdb/config/alpha/nm-obsd.h	1 Mar 2003 00:01:23 -0000
d881 1
a881 1
+++ src/gnu/usr.bin/binutils/gdb/config/alpha/obsd.mt	1 Mar 2003 00:01:23 -0000
d893 1
a893 1
+++ src/gnu/usr.bin/binutils/gdb/config/i386/nm-obsd.h	1 Mar 2003 00:01:24 -0000
d970 1
a970 1
+++ src/gnu/usr.bin/binutils/ld/configure.tgt	1 Mar 2003 00:01:24 -0000
d986 1
a986 1
+++ src/gnu/usr.bin/cvs/Makefile.bsd-wrapper	1 Mar 2003 00:01:24 -0000
d1018 1
a1018 1
+++ src/gnu/usr.bin/gzip/Makefile	1 Mar 2003 00:01:24 -0000
d1044 1
a1044 1
+++ src/gnu/usr.bin/perl/hints/openbsd.sh	1 Mar 2003 00:01:24 -0000
d1060 1
a1060 1
+++ src/gnu/usr.bin/texinfo/Makefile.bsd-wrapper	1 Mar 2003 00:01:24 -0000
d1083 1
a1083 1
+++ src/gnu/usr.sbin/mkhybrid/src/Makefile	1 Mar 2003 00:01:24 -0000
d1099 1
a1099 1
+++ src/gnu/usr.sbin/mkhybrid/src/diag/Makefile	1 Mar 2003 00:01:24 -0000
d1116 1
a1116 1
+++ src/kerberosIV/Makefile	1 Mar 2003 00:01:24 -0000
d1137 1
a1137 1
+++ src/kerberosIV/Makefile.inc	1 Mar 2003 00:01:24 -0000
d1153 1
a1153 1
+++ src/kerberosIV/lib/kadm/Makefile	1 Mar 2003 00:01:24 -0000
d1169 1
a1169 1
+++ src/kerberosIV/lib/roken/Makefile	1 Mar 2003 00:01:24 -0000
d1185 1
a1185 1
+++ src/kerberosIV/src/appl/ftp/ftp/Makefile	1 Mar 2003 00:01:24 -0000
d1204 1
a1204 1
+++ src/kerberosIV/src/appl/ftp/ftpd/Makefile	1 Mar 2003 00:01:24 -0000
d1220 1
a1220 1
+++ src/kerberosIV/src/include/Makefile	1 Mar 2003 00:01:24 -0000
d1236 1
a1236 1
+++ src/lib/csu/i386/crt0.c	1 Mar 2003 00:01:24 -0000
d1418 1
a1418 1
+++ src/lib/libc/arch/i386/SYS.h	1 Mar 2003 00:01:24 -0000
d1474 1
a1474 1
+++ src/lib/libc/arch/i386/gen/alloca.S	1 Mar 2003 00:01:24 -0000
d1487 1
a1487 1
+++ src/lib/libc/arch/i386/gen/setjmp.S	1 Mar 2003 00:01:24 -0000
d1528 1
a1528 1
+++ src/lib/libc/arch/i386/gen/sigsetjmp.S	1 Mar 2003 00:01:24 -0000
d1571 1
a1571 1
+++ src/lib/libc/arch/i386/sys/Ovfork.S	1 Mar 2003 00:01:24 -0000
d1598 1
a1598 1
+++ src/lib/libc/arch/i386/sys/brk.S	1 Mar 2003 00:01:24 -0000
d1624 1
a1624 1
+++ src/lib/libc/arch/i386/sys/cerror.S	1 Mar 2003 00:01:24 -0000
d1651 1
a1651 1
+++ src/lib/libc/arch/i386/sys/exect.S	1 Mar 2003 00:01:24 -0000
d1672 1
a1672 1
+++ src/lib/libc/arch/i386/sys/sbrk.S	1 Mar 2003 00:01:24 -0000
d1698 1
a1698 1
+++ src/lib/libc/arch/i386/sys/sigprocmask.S	1 Mar 2003 00:01:24 -0000
d1719 1
a1719 1
+++ src/lib/libc/arch/i386/sys/sigsuspend.S	1 Mar 2003 00:01:24 -0000
d1739 1
a1739 1
+++ src/lib/libc/arch/i386/sys/syscall.S	1 Mar 2003 00:01:24 -0000
d1759 1
a1759 1
+++ src/lib/libcurses++/Makefile	1 Mar 2003 00:01:24 -0000
d1774 1
a1774 1
+++ src/libexec/ftpd/Makefile	1 Mar 2003 00:01:24 -0000
d1790 1
a1790 1
+++ src/libexec/ld.so/library.c	1 Mar 2003 00:01:24 -0000
d1814 1
a1814 1
+++ src/libexec/login_chpass/Makefile	1 Mar 2003 00:01:25 -0000
d1830 1
a1830 1
+++ src/libexec/rshd/Makefile	1 Mar 2003 00:01:25 -0000
d1846 1
a1846 1
+++ src/sbin/disklabel/Makefile	1 Mar 2003 00:01:27 -0000
d1862 1
a1862 1
+++ src/sbin/fdisk/Makefile	1 Mar 2003 00:01:28 -0000
d1878 1
a1878 1
+++ src/sbin/fsck/fsutil.c	1 Mar 2003 00:01:28 -0000
d1893 1
a1893 1
+++ src/sbin/pfctl/Makefile	1 Mar 2003 00:01:28 -0000
d1909 1
a1909 1
+++ src/sbin/photurisd/Makefile	1 Mar 2003 00:01:28 -0000
d1925 1
a1925 1
+++ src/sbin/wsconsctl/Makefile	1 Mar 2003 00:01:28 -0000
d1941 1
a1941 1
+++ src/share/lkm/vfs/module/Makefile	1 Mar 2003 00:01:28 -0000
d1957 1
a1957 1
+++ src/share/man/man4/options.4	1 Mar 2003 00:01:28 -0000
d1959 1
a1959 1
+.\"	$MirBSD: obsd.misc,v 1.14 2003/02/28 18:22:10 tg Exp $
d1981 1
a1981 1
+++ src/share/mk/bsd.README	1 Mar 2003 00:01:28 -0000
d1998 1
a1998 1
+++ src/share/mk/bsd.own.mk	1 Mar 2003 00:01:28 -0000
d2023 1
a2023 1
+++ src/sys/arch/i386/include/biosvar.h	1 Mar 2003 00:01:28 -0000
d2039 1
a2039 1
+++ src/usr.bin/hexdump/parse.c	1 Mar 2003 00:01:28 -0000
d2055 1
a2055 1
+++ src/usr.bin/keynote/Makefile	1 Mar 2003 00:01:28 -0000
d2071 1
a2071 1
+++ src/usr.bin/less/Makefile.bsd-wrapper	1 Mar 2003 00:01:28 -0000
d2098 1
a2098 1
+++ src/usr.bin/yacc/skeleton.c	1 Mar 2003 00:01:28 -0000
d2100 1
a2100 1
+/*	$MirBSD: obsd.misc,v 1.14 2003/02/28 18:22:10 tg Exp $	*/
d2125 1
a2125 1
+    "  = \"$OpenBSD: skeleton.c,v 1.19 2002/12/03 21:34:21 mickey Exp $ $MirBSD: obsd.misc,v 1.14 2003/02/28 18:22:10 tg Exp $\";",
d2135 1
a2135 1
+++ src/usr.sbin/Makefile	1 Mar 2003 00:01:28 -0000
d2151 1
a2151 1
+++ src/usr.sbin/authpf/authpf.c	1 Mar 2003 00:01:28 -0000
d2167 1
a2167 1
+++ src/usr.sbin/config/main.c	1 Mar 2003 00:01:28 -0000
d2169 1
a2169 1
+/*	$MirBSD: obsd.misc,v 1.14 2003/02/28 18:22:10 tg Exp $	*/
d2267 1
a2267 1
+++ src/usr.sbin/config/scan.l	1 Mar 2003 00:01:28 -0000
d2299 2
a2300 2
--- /dev/null	Sat Mar  1 00:03:11 2003
+++ src/sys/arch/i386/include/loadfile_machdep.h	Sat Mar  1 00:01:28 2003
d2371 2
a2372 2
--- /dev/null	Sat Mar  1 00:03:11 2003
+++ src/sys/arch/i386/include/reloc.h	Sat Mar  1 00:01:28 2003
@


1.14
log
@intermediate broken

to survive a make build, does not mean,
to be able to build a kernel (not even a.out)

gcc was broken prior, too. hope it is fixed now.
@
text
@a2 1
>> Thank you, Theo de Raadt and all other contributors to OpenBSD.
a4 1
Contributors:
d13 1
a13 1
I retain the right to be known as the author of the work.
d16 4
a19 4
Use it at your own risk. Neither the author, nor contributors may be
held liable for any damage, directly or indirectly, which originated
by the creation or modification of this work. Since modern computing
devices are error-prone, flawless behaviour cannot be expected.
d22 1
a22 1
This diff, ID $MirBSD: regen-obsdp.sh,v 1.11 2003/02/23 17:34:59 tg Exp $
d24 1
a24 1
against CTM on Fri Feb 28 18:17:12 UTC 2003.
d26 1
a26 1
### GENERATOR: @@(#)_MirBSD: regen-obsdp.sh,v 1.11 2003/02/23 17:34:59 tg Exp $
d34 1
a34 1
+++ src/bin/rcp/Makefile	24 Feb 2003 21:32:50 -0000
d50 1
a50 1
+++ src/bin/systrace/Makefile	24 Feb 2003 21:32:50 -0000
d71 1
a71 1
+++ src/distrib/crunch/Makefile.inc	24 Feb 2003 21:32:50 -0000
d84 1
a84 1
+++ src/distrib/crunch/crunchgen/Makefile	24 Feb 2003 21:32:50 -0000
d100 1
a100 1
+++ src/distrib/crunch/crunchide/crunchide.c	24 Feb 2003 21:32:50 -0000
d139 1
a139 1
+++ src/distrib/i386/common/Makefile.inc	24 Feb 2003 21:32:50 -0000
d186 1
a186 1
+++ src/distrib/special/pppd/Makefile	24 Feb 2003 21:32:50 -0000
d201 1
a201 1
+++ src/distrib/special/rsh/Makefile	24 Feb 2003 21:32:50 -0000
d216 1
a216 1
+++ src/games/hack/Makefile	24 Feb 2003 21:32:50 -0000
d232 1
a232 1
+++ src/gnu/egcs/Makefile.bsd-wrapper	24 Feb 2003 21:32:50 -0000
d253 1
a253 1
+++ src/gnu/egcs/gcc/Makefile.bsd-wrapper	28 Feb 2003 16:20:45 -0000
d255 1
a255 1
+#	$MirBSD: obsd.misc,v 1.13 2003/02/24 21:32:06 tg Exp $
a321 8
@@@@ -140,6 +123,7 @@@@
 
 .include <bsd.obj.mk>
 .include <bsd.subdir.mk>
+
 .ifndef NOMAN
 .include <bsd.man.mk>
 .endif
d328 1
a328 1
+++ src/gnu/egcs/gcc/config.gcc	24 Feb 2003 21:32:50 -0000
d348 1
a348 1
+++ src/gnu/egcs/gcc/config/i386/openbsd.h	24 Feb 2003 21:32:50 -0000
d557 1
a557 1
+++ src/gnu/egcs/libf2c/Makefile.bsd-wrapper	24 Feb 2003 21:32:50 -0000
d572 1
a572 1
+++ src/gnu/egcs/libiberty/Makefile.bsd-wrapper1	24 Feb 2003 21:32:50 -0000
d597 1
a597 1
+++ src/gnu/egcs/libio/editbuf.cc	24 Feb 2003 21:32:50 -0000
d612 1
a612 1
+++ src/gnu/egcs/libio/editbuf.h	24 Feb 2003 21:32:50 -0000
d628 1
a628 1
+++ src/gnu/egcs/libio/parsestream.cc	24 Feb 2003 21:32:50 -0000
d643 1
a643 1
+++ src/gnu/egcs/libio/pfstream.cc	24 Feb 2003 21:32:50 -0000
d658 1
a658 1
+++ src/gnu/egcs/libstdc++/Makefile.bsd-wrapper	24 Feb 2003 21:32:50 -0000
d674 1
a674 1
+++ src/gnu/usr.bin/binutils/Makefile.bsd-wrapper	24 Feb 2003 21:32:51 -0000
d724 1
a724 1
+++ src/gnu/usr.bin/binutils/bfd/config.bfd	24 Feb 2003 21:32:51 -0000
d745 1
a745 1
+++ src/gnu/usr.bin/binutils/gas/config/tc-i386.c	24 Feb 2003 21:32:55 -0000
d770 1
a770 1
+++ src/gnu/usr.bin/binutils/gas/configure	24 Feb 2003 21:32:55 -0000
d786 1
a786 1
+++ src/gnu/usr.bin/binutils/gas/configure.in	24 Feb 2003 21:32:55 -0000
d802 1
a802 1
+++ src/gnu/usr.bin/binutils/gdb/config/alpha/nm-obsd.h	24 Feb 2003 21:32:55 -0000
d881 1
a881 1
+++ src/gnu/usr.bin/binutils/gdb/config/alpha/obsd.mt	24 Feb 2003 21:32:55 -0000
d893 1
a893 1
+++ src/gnu/usr.bin/binutils/gdb/config/i386/nm-obsd.h	24 Feb 2003 21:32:55 -0000
d970 1
a970 1
+++ src/gnu/usr.bin/binutils/ld/configure.tgt	24 Feb 2003 21:32:55 -0000
d986 1
a986 1
+++ src/gnu/usr.bin/cvs/Makefile.bsd-wrapper	24 Feb 2003 21:32:55 -0000
d1018 1
a1018 1
+++ src/gnu/usr.bin/gzip/Makefile	24 Feb 2003 21:32:55 -0000
d1044 1
a1044 1
+++ src/gnu/usr.bin/perl/hints/openbsd.sh	24 Feb 2003 21:32:55 -0000
d1060 1
a1060 1
+++ src/gnu/usr.bin/texinfo/Makefile.bsd-wrapper	24 Feb 2003 21:32:55 -0000
d1083 1
a1083 1
+++ src/gnu/usr.sbin/mkhybrid/src/Makefile	24 Feb 2003 21:32:55 -0000
d1099 1
a1099 1
+++ src/gnu/usr.sbin/mkhybrid/src/diag/Makefile	24 Feb 2003 21:32:55 -0000
d1116 1
a1116 1
+++ src/kerberosIV/Makefile	24 Feb 2003 21:32:55 -0000
d1137 1
a1137 1
+++ src/kerberosIV/Makefile.inc	24 Feb 2003 21:32:55 -0000
d1153 1
a1153 1
+++ src/kerberosIV/lib/kadm/Makefile	24 Feb 2003 21:32:55 -0000
d1169 1
a1169 1
+++ src/kerberosIV/lib/roken/Makefile	24 Feb 2003 21:32:56 -0000
d1185 1
a1185 1
+++ src/kerberosIV/src/appl/ftp/ftp/Makefile	24 Feb 2003 21:32:56 -0000
d1204 1
a1204 1
+++ src/kerberosIV/src/appl/ftp/ftpd/Makefile	24 Feb 2003 21:32:56 -0000
d1220 1
a1220 1
+++ src/kerberosIV/src/include/Makefile	24 Feb 2003 21:32:56 -0000
d1236 1
a1236 1
+++ src/lib/csu/i386/crt0.c	24 Feb 2003 21:32:56 -0000
d1418 1
a1418 1
+++ src/lib/libc/arch/i386/SYS.h	24 Feb 2003 21:32:56 -0000
d1474 1
a1474 1
+++ src/lib/libc/arch/i386/gen/alloca.S	24 Feb 2003 21:32:56 -0000
d1487 1
a1487 1
+++ src/lib/libc/arch/i386/gen/setjmp.S	24 Feb 2003 21:32:56 -0000
d1528 1
a1528 1
+++ src/lib/libc/arch/i386/gen/sigsetjmp.S	24 Feb 2003 21:32:56 -0000
d1571 1
a1571 1
+++ src/lib/libc/arch/i386/sys/Ovfork.S	24 Feb 2003 21:32:56 -0000
d1598 1
a1598 1
+++ src/lib/libc/arch/i386/sys/brk.S	24 Feb 2003 21:32:56 -0000
d1624 1
a1624 1
+++ src/lib/libc/arch/i386/sys/cerror.S	24 Feb 2003 21:32:56 -0000
d1651 1
a1651 1
+++ src/lib/libc/arch/i386/sys/exect.S	24 Feb 2003 21:32:56 -0000
d1672 1
a1672 1
+++ src/lib/libc/arch/i386/sys/sbrk.S	24 Feb 2003 21:32:56 -0000
d1698 1
a1698 1
+++ src/lib/libc/arch/i386/sys/sigprocmask.S	24 Feb 2003 21:32:56 -0000
d1719 1
a1719 1
+++ src/lib/libc/arch/i386/sys/sigsuspend.S	24 Feb 2003 21:32:56 -0000
d1739 1
a1739 1
+++ src/lib/libc/arch/i386/sys/syscall.S	24 Feb 2003 21:32:56 -0000
d1759 1
a1759 1
+++ src/lib/libcurses++/Makefile	24 Feb 2003 21:32:56 -0000
d1774 1
a1774 1
+++ src/libexec/ftpd/Makefile	24 Feb 2003 21:32:56 -0000
d1790 1
a1790 1
+++ src/libexec/ld.so/library.c	24 Feb 2003 21:32:56 -0000
d1814 1
a1814 1
+++ src/libexec/login_chpass/Makefile	24 Feb 2003 21:32:56 -0000
d1830 1
a1830 1
+++ src/libexec/rshd/Makefile	24 Feb 2003 21:32:56 -0000
d1846 1
a1846 1
+++ src/sbin/disklabel/Makefile	24 Feb 2003 21:32:56 -0000
d1862 1
a1862 1
+++ src/sbin/fdisk/Makefile	24 Feb 2003 21:32:56 -0000
d1878 1
a1878 1
+++ src/sbin/fsck/fsutil.c	24 Feb 2003 21:32:56 -0000
d1893 1
a1893 1
+++ src/sbin/pfctl/Makefile	24 Feb 2003 21:32:56 -0000
d1909 1
a1909 1
+++ src/sbin/photurisd/Makefile	24 Feb 2003 21:32:56 -0000
d1925 1
a1925 1
+++ src/sbin/wsconsctl/Makefile	24 Feb 2003 21:32:56 -0000
d1941 1
a1941 1
+++ src/share/lkm/vfs/module/Makefile	24 Feb 2003 21:32:57 -0000
d1957 1
a1957 1
+++ src/share/man/man4/options.4	24 Feb 2003 21:32:57 -0000
d1959 1
a1959 1
+.\"	$MirBSD: obsd.misc,v 1.13 2003/02/24 21:32:06 tg Exp $
d1981 1
a1981 1
+++ src/share/mk/bsd.README	24 Feb 2003 21:32:57 -0000
d1998 1
a1998 1
+++ src/share/mk/bsd.own.mk	24 Feb 2003 21:32:57 -0000
d2017 16
d2039 1
a2039 1
+++ src/usr.bin/hexdump/parse.c	24 Feb 2003 21:32:57 -0000
d2055 1
a2055 1
+++ src/usr.bin/keynote/Makefile	24 Feb 2003 21:32:57 -0000
d2071 1
a2071 1
+++ src/usr.bin/less/Makefile.bsd-wrapper	24 Feb 2003 21:32:57 -0000
d2098 1
a2098 1
+++ src/usr.bin/yacc/skeleton.c	24 Feb 2003 21:32:57 -0000
d2100 1
a2100 1
+/*	$MirBSD: obsd.misc,v 1.13 2003/02/24 21:32:06 tg Exp $	*/
d2125 1
a2125 1
+    "  = \"$OpenBSD: skeleton.c,v 1.19 2002/12/03 21:34:21 mickey Exp $ $MirBSD: obsd.misc,v 1.13 2003/02/24 21:32:06 tg Exp $\";",
d2135 1
a2135 1
+++ src/usr.sbin/Makefile	24 Feb 2003 21:32:57 -0000
d2151 1
a2151 1
+++ src/usr.sbin/authpf/authpf.c	24 Feb 2003 21:32:57 -0000
d2167 1
a2167 1
+++ src/usr.sbin/config/main.c	24 Feb 2003 21:32:57 -0000
d2169 1
a2169 1
+/*	$MirBSD: obsd.misc,v 1.13 2003/02/24 21:32:06 tg Exp $	*/
d2267 1
a2267 1
+++ src/usr.sbin/config/scan.l	24 Feb 2003 21:32:57 -0000
d2299 2
a2300 2
--- /dev/null	Fri Feb 28 18:11:26 2003
+++ src/sys/arch/i386/include/loadfile_machdep.h	Wed Feb 26 13:28:23 2003
d2371 2
a2372 2
--- /dev/null	Fri Feb 28 18:11:26 2003
+++ src/sys/arch/i386/include/reloc.h	Wed Feb 26 13:30:56 2003
d2502 1
a2517 5

NOTE:

src/lib/csu/common_elf/os-note-elf.h has NO NEWLINE AT END OF FILE
Do this manually; diff/patch cannot handle it *sigh*
@


1.13
log
@post-release development

Made make build release succeed and synched plists to the amount needed.
OTOH I don't know if a _kernel_ build with this will succeed...
@
text
@d26 1
a26 1
against CTM on Mon Feb 24 21:28:40 UTC 2003.
d29 1
a29 1
### CTM OpenBSD-cvs 3060
d36 1
a36 1
+++ src/bin/rcp/Makefile	23 Feb 2003 22:04:28 -0000
d52 1
a52 1
+++ src/bin/systrace/Makefile	23 Feb 2003 22:04:28 -0000
d73 1
a73 1
+++ src/distrib/crunch/Makefile.inc	23 Feb 2003 22:04:28 -0000
d86 1
a86 1
+++ src/distrib/crunch/crunchgen/Makefile	23 Feb 2003 22:04:28 -0000
d102 1
a102 1
+++ src/distrib/crunch/crunchide/crunchide.c	23 Feb 2003 22:04:28 -0000
d141 1
a141 1
+++ src/distrib/i386/common/Makefile.inc	23 Feb 2003 22:04:28 -0000
d188 1
a188 1
+++ src/distrib/special/pppd/Makefile	23 Feb 2003 22:04:28 -0000
d203 1
a203 1
+++ src/distrib/special/rsh/Makefile	23 Feb 2003 22:04:28 -0000
d218 1
a218 1
+++ src/games/hack/Makefile	23 Feb 2003 22:04:29 -0000
d234 1
a234 1
+++ src/gnu/egcs/Makefile.bsd-wrapper	23 Feb 2003 22:04:29 -0000
d255 1
a255 1
+++ src/gnu/egcs/gcc/Makefile.bsd-wrapper	23 Feb 2003 22:04:29 -0000
d257 1
a257 1
+#	$MirBSD: obsd.misc,v 1.12 2003/02/23 22:04:07 tg Exp $
d292 8
a299 1
@@@@ -107,23 +103,10 @@@@
d338 1
a338 1
+++ src/gnu/egcs/gcc/config.gcc	23 Feb 2003 22:04:29 -0000
d358 1
a358 1
+++ src/gnu/egcs/gcc/config/i386/openbsd.h	23 Feb 2003 22:04:30 -0000
d567 1
a567 1
+++ src/gnu/egcs/libf2c/Makefile.bsd-wrapper	23 Feb 2003 22:04:30 -0000
d582 1
a582 1
+++ src/gnu/egcs/libiberty/Makefile.bsd-wrapper1	23 Feb 2003 22:04:30 -0000
d607 1
a607 1
+++ src/gnu/egcs/libio/editbuf.cc	23 Feb 2003 22:04:30 -0000
d622 1
a622 1
+++ src/gnu/egcs/libio/editbuf.h	23 Feb 2003 22:04:30 -0000
d638 1
a638 1
+++ src/gnu/egcs/libio/parsestream.cc	23 Feb 2003 22:04:30 -0000
d653 1
a653 1
+++ src/gnu/egcs/libio/pfstream.cc	23 Feb 2003 22:04:30 -0000
d668 1
a668 1
+++ src/gnu/egcs/libstdc++/Makefile.bsd-wrapper	23 Feb 2003 22:04:30 -0000
d684 1
a684 1
+++ src/gnu/usr.bin/binutils/Makefile.bsd-wrapper	23 Feb 2003 22:04:30 -0000
d734 1
a734 1
+++ src/gnu/usr.bin/binutils/bfd/config.bfd	23 Feb 2003 22:04:30 -0000
d755 1
a755 1
+++ src/gnu/usr.bin/binutils/gas/config/tc-i386.c	23 Feb 2003 22:04:30 -0000
d780 1
a780 1
+++ src/gnu/usr.bin/binutils/gas/configure	23 Feb 2003 22:04:30 -0000
d796 1
a796 1
+++ src/gnu/usr.bin/binutils/gas/configure.in	23 Feb 2003 22:04:30 -0000
d812 1
a812 1
+++ src/gnu/usr.bin/binutils/gdb/config/alpha/nm-obsd.h	23 Feb 2003 22:04:30 -0000
d891 1
a891 1
+++ src/gnu/usr.bin/binutils/gdb/config/alpha/obsd.mt	23 Feb 2003 22:04:30 -0000
d903 1
a903 1
+++ src/gnu/usr.bin/binutils/gdb/config/i386/nm-obsd.h	23 Feb 2003 22:04:30 -0000
d980 1
a980 1
+++ src/gnu/usr.bin/binutils/ld/configure.tgt	23 Feb 2003 22:04:30 -0000
d996 1
a996 1
+++ src/gnu/usr.bin/cvs/Makefile.bsd-wrapper	23 Feb 2003 23:18:11 -0000
d1028 1
a1028 1
+++ src/gnu/usr.bin/gzip/Makefile	23 Feb 2003 22:04:30 -0000
d1054 1
a1054 1
+++ src/gnu/usr.bin/perl/hints/openbsd.sh	23 Feb 2003 22:04:30 -0000
d1070 1
a1070 1
+++ src/gnu/usr.bin/texinfo/Makefile.bsd-wrapper	23 Feb 2003 22:04:30 -0000
d1093 1
a1093 1
+++ src/gnu/usr.sbin/mkhybrid/src/Makefile	23 Feb 2003 22:04:31 -0000
d1109 1
a1109 1
+++ src/gnu/usr.sbin/mkhybrid/src/diag/Makefile	23 Feb 2003 22:04:31 -0000
d1126 1
a1126 1
+++ src/kerberosIV/Makefile	23 Feb 2003 22:04:31 -0000
d1147 1
a1147 1
+++ src/kerberosIV/Makefile.inc	23 Feb 2003 22:04:31 -0000
d1163 1
a1163 1
+++ src/kerberosIV/lib/kadm/Makefile	23 Feb 2003 22:04:31 -0000
d1179 1
a1179 1
+++ src/kerberosIV/lib/roken/Makefile	23 Feb 2003 22:04:31 -0000
d1195 1
a1195 1
+++ src/kerberosIV/src/appl/ftp/ftp/Makefile	23 Feb 2003 22:04:31 -0000
d1214 1
a1214 1
+++ src/kerberosIV/src/appl/ftp/ftpd/Makefile	23 Feb 2003 22:04:31 -0000
d1230 1
a1230 1
+++ src/kerberosIV/src/include/Makefile	23 Feb 2003 22:04:31 -0000
d1246 1
a1246 1
+++ src/lib/csu/i386/crt0.c	23 Feb 2003 22:04:31 -0000
d1428 1
a1428 1
+++ src/lib/libc/arch/i386/SYS.h	23 Feb 2003 22:04:31 -0000
d1484 1
a1484 1
+++ src/lib/libc/arch/i386/gen/alloca.S	23 Feb 2003 22:04:31 -0000
d1497 1
a1497 1
+++ src/lib/libc/arch/i386/gen/setjmp.S	23 Feb 2003 22:04:31 -0000
d1538 1
a1538 1
+++ src/lib/libc/arch/i386/gen/sigsetjmp.S	23 Feb 2003 22:04:31 -0000
d1581 1
a1581 1
+++ src/lib/libc/arch/i386/sys/Ovfork.S	23 Feb 2003 22:04:31 -0000
d1608 1
a1608 1
+++ src/lib/libc/arch/i386/sys/brk.S	23 Feb 2003 22:04:31 -0000
d1634 1
a1634 1
+++ src/lib/libc/arch/i386/sys/cerror.S	23 Feb 2003 22:04:31 -0000
d1661 1
a1661 1
+++ src/lib/libc/arch/i386/sys/exect.S	23 Feb 2003 22:04:31 -0000
d1682 1
a1682 1
+++ src/lib/libc/arch/i386/sys/sbrk.S	23 Feb 2003 22:04:31 -0000
d1708 1
a1708 1
+++ src/lib/libc/arch/i386/sys/sigprocmask.S	23 Feb 2003 22:04:31 -0000
d1729 1
a1729 1
+++ src/lib/libc/arch/i386/sys/sigsuspend.S	23 Feb 2003 22:04:31 -0000
d1749 1
a1749 1
+++ src/lib/libc/arch/i386/sys/syscall.S	23 Feb 2003 22:04:34 -0000
d1769 1
a1769 1
+++ src/lib/libcurses++/Makefile	23 Feb 2003 22:04:34 -0000
d1784 1
a1784 1
+++ src/libexec/ftpd/Makefile	23 Feb 2003 22:04:34 -0000
d1800 1
a1800 1
+++ src/libexec/ld.so/library.c	23 Feb 2003 22:04:34 -0000
d1824 1
a1824 1
+++ src/libexec/login_chpass/Makefile	23 Feb 2003 22:04:34 -0000
d1840 1
a1840 1
+++ src/libexec/rshd/Makefile	23 Feb 2003 22:04:34 -0000
d1856 1
a1856 1
+++ src/sbin/disklabel/Makefile	23 Feb 2003 22:04:34 -0000
d1872 1
a1872 1
+++ src/sbin/fdisk/Makefile	23 Feb 2003 22:04:34 -0000
d1888 1
a1888 1
+++ src/sbin/fsck/fsutil.c	23 Feb 2003 22:04:34 -0000
d1903 1
a1903 1
+++ src/sbin/pfctl/Makefile	23 Feb 2003 22:04:34 -0000
d1919 1
a1919 1
+++ src/sbin/photurisd/Makefile	23 Feb 2003 22:04:34 -0000
d1935 1
a1935 1
+++ src/sbin/wsconsctl/Makefile	23 Feb 2003 22:04:34 -0000
d1951 1
a1951 1
+++ src/share/lkm/vfs/module/Makefile	23 Feb 2003 22:04:34 -0000
d1967 1
a1967 1
+++ src/share/man/man4/options.4	23 Feb 2003 22:04:34 -0000
d1969 1
a1969 1
+.\"	$MirBSD: obsd.misc,v 1.12 2003/02/23 22:04:07 tg Exp $
d1991 1
a1991 1
+++ src/share/mk/bsd.README	23 Feb 2003 22:04:34 -0000
d2008 1
a2008 1
+++ src/share/mk/bsd.own.mk	23 Feb 2003 22:04:34 -0000
d2033 1
a2033 1
+++ src/usr.bin/hexdump/parse.c	23 Feb 2003 22:04:35 -0000
d2049 1
a2049 1
+++ src/usr.bin/keynote/Makefile	23 Feb 2003 22:04:35 -0000
d2065 1
a2065 1
+++ src/usr.bin/less/Makefile.bsd-wrapper	23 Feb 2003 22:59:24 -0000
d2092 1
a2092 1
+++ src/usr.bin/yacc/skeleton.c	23 Feb 2003 22:04:35 -0000
d2094 1
a2094 1
+/*	$MirBSD: obsd.misc,v 1.12 2003/02/23 22:04:07 tg Exp $	*/
d2119 1
a2119 1
+    "  = \"$OpenBSD: skeleton.c,v 1.19 2002/12/03 21:34:21 mickey Exp $ $MirBSD: obsd.misc,v 1.12 2003/02/23 22:04:07 tg Exp $\";",
d2129 1
a2129 1
+++ src/usr.sbin/Makefile	23 Feb 2003 23:06:30 -0000
d2145 1
a2145 1
+++ src/usr.sbin/authpf/authpf.c	23 Feb 2003 22:04:35 -0000
d2161 1
a2161 1
+++ src/usr.sbin/config/main.c	23 Feb 2003 22:04:35 -0000
d2163 1
a2163 1
+/*	$MirBSD: obsd.misc,v 1.12 2003/02/23 22:04:07 tg Exp $	*/
d2261 1
a2261 1
+++ src/usr.sbin/config/scan.l	23 Feb 2003 22:04:35 -0000
d2289 72
d2365 29
a2393 4
--- /dev/null	Mon Feb 24 21:18:01 2003
+++ src/sys/arch/i386/include/reloc.h	Sun Feb 23 22:04:35 2003
@@@@ -0,0 +1,24 @@@@
+/*	$MirBSD: obsd.misc,v 1.12 2003/02/23 22:04:07 tg Exp $	*/
d2395 2
a2396 2
+#ifndef	_MACH_RELOC_H
+#define	_MACH_RELOC_H
d2400 11
a2410 11
+#define	RELOC_NONE	0	/* No reloc */
+#define	RELOC_32	1	/* Direct 32 bit  */
+#define	RELOC_PC32	2	/* PC relative 32 bit */
+#define	RELOC_GOT32	3	/* 32 bit GOT entry */
+#define	RELOC_PLT32	4	/* 32 bit PLT address */
+#define	RELOC_COPY	5	/* Copy symbol at runtime */
+#define	RELOC_GLOB_DAT	6	/* Create GOT entry */
+#define	RELOC_JUMP_SLOT	7	/* Create PLT entry */
+#define	RELOC_RELATIVE	8	/* Adjust by program base */
+#define	RELOC_GOTOFF	9	/* 32 bit offset to GOT */
+#define	RELOC_GOTPC	10	/* 32 bit PC relative offset to GOT */
d2506 1
@


1.12
log
@pre-build development
do not use... cpp stuff is still untested (needs manual symlinking),
and userland as well
@
text
@d26 1
a26 1
against CTM on Sun Feb 23 22:02:58 UTC 2003.
d36 1
a36 1
+++ src/bin/rcp/Makefile	23 Feb 2003 20:05:21 -0000
d52 1
a52 1
+++ src/bin/systrace/Makefile	23 Feb 2003 20:05:21 -0000
d73 1
a73 1
+++ src/distrib/crunch/Makefile.inc	23 Feb 2003 20:05:21 -0000
d86 1
a86 1
+++ src/distrib/crunch/crunchgen/Makefile	23 Feb 2003 20:05:21 -0000
d102 1
a102 1
+++ src/distrib/crunch/crunchide/crunchide.c	23 Feb 2003 20:05:21 -0000
d141 1
a141 1
+++ src/distrib/i386/common/Makefile.inc	23 Feb 2003 20:05:21 -0000
d188 1
a188 1
+++ src/distrib/special/pppd/Makefile	23 Feb 2003 20:05:21 -0000
d203 1
a203 1
+++ src/distrib/special/rsh/Makefile	23 Feb 2003 20:05:21 -0000
d218 1
a218 1
+++ src/games/hack/Makefile	23 Feb 2003 20:05:21 -0000
d234 1
a234 1
+++ src/gnu/egcs/Makefile.bsd-wrapper	23 Feb 2003 20:05:21 -0000
d255 1
a255 1
+++ src/gnu/egcs/gcc/Makefile.bsd-wrapper	23 Feb 2003 21:58:11 -0000
d257 1
a257 1
+#	$MirBSD: obsd.misc,v 1.11 2003/02/23 20:05:16 tg Exp $
d331 1
a331 1
+++ src/gnu/egcs/gcc/config.gcc	23 Feb 2003 20:05:21 -0000
d351 1
a351 1
+++ src/gnu/egcs/gcc/config/i386/openbsd.h	23 Feb 2003 20:05:21 -0000
d560 1
a560 1
+++ src/gnu/egcs/libf2c/Makefile.bsd-wrapper	23 Feb 2003 20:05:21 -0000
d575 1
a575 1
+++ src/gnu/egcs/libiberty/Makefile.bsd-wrapper1	23 Feb 2003 20:05:21 -0000
d600 1
a600 1
+++ src/gnu/egcs/libio/editbuf.cc	23 Feb 2003 20:05:21 -0000
d615 1
a615 1
+++ src/gnu/egcs/libio/editbuf.h	23 Feb 2003 20:05:22 -0000
d631 1
a631 1
+++ src/gnu/egcs/libio/parsestream.cc	23 Feb 2003 20:05:22 -0000
d646 1
a646 1
+++ src/gnu/egcs/libio/pfstream.cc	23 Feb 2003 20:05:22 -0000
d661 1
a661 1
+++ src/gnu/egcs/libstdc++/Makefile.bsd-wrapper	23 Feb 2003 20:05:22 -0000
d677 1
a677 1
+++ src/gnu/usr.bin/binutils/Makefile.bsd-wrapper	23 Feb 2003 20:05:22 -0000
d727 1
a727 1
+++ src/gnu/usr.bin/binutils/bfd/config.bfd	23 Feb 2003 20:05:22 -0000
d748 1
a748 1
+++ src/gnu/usr.bin/binutils/gas/config/tc-i386.c	23 Feb 2003 20:05:22 -0000
d773 1
a773 1
+++ src/gnu/usr.bin/binutils/gas/configure	23 Feb 2003 20:05:22 -0000
d789 1
a789 1
+++ src/gnu/usr.bin/binutils/gas/configure.in	23 Feb 2003 20:05:22 -0000
d805 1
a805 1
+++ src/gnu/usr.bin/binutils/gdb/config/alpha/nm-obsd.h	23 Feb 2003 20:05:22 -0000
d884 1
a884 1
+++ src/gnu/usr.bin/binutils/gdb/config/alpha/obsd.mt	23 Feb 2003 20:05:22 -0000
d896 1
a896 1
+++ src/gnu/usr.bin/binutils/gdb/config/i386/nm-obsd.h	23 Feb 2003 20:05:22 -0000
d973 1
a973 1
+++ src/gnu/usr.bin/binutils/ld/configure.tgt	23 Feb 2003 20:05:22 -0000
d989 1
a989 1
+++ src/gnu/usr.bin/cvs/Makefile.bsd-wrapper	23 Feb 2003 20:05:22 -0000
d999 16
d1021 1
a1021 1
+++ src/gnu/usr.bin/gzip/Makefile	23 Feb 2003 20:05:22 -0000
d1047 1
a1047 1
+++ src/gnu/usr.bin/perl/hints/openbsd.sh	23 Feb 2003 21:36:49 -0000
d1063 1
a1063 1
+++ src/gnu/usr.bin/texinfo/Makefile.bsd-wrapper	23 Feb 2003 20:05:22 -0000
d1086 1
a1086 1
+++ src/gnu/usr.sbin/mkhybrid/src/Makefile	23 Feb 2003 20:05:22 -0000
d1102 1
a1102 1
+++ src/gnu/usr.sbin/mkhybrid/src/diag/Makefile	23 Feb 2003 20:05:22 -0000
d1119 1
a1119 1
+++ src/kerberosIV/Makefile	23 Feb 2003 20:05:22 -0000
d1140 1
a1140 1
+++ src/kerberosIV/Makefile.inc	23 Feb 2003 20:05:22 -0000
d1156 1
a1156 1
+++ src/kerberosIV/lib/kadm/Makefile	23 Feb 2003 20:05:22 -0000
d1172 1
a1172 1
+++ src/kerberosIV/lib/roken/Makefile	23 Feb 2003 20:05:22 -0000
d1188 1
a1188 1
+++ src/kerberosIV/src/appl/ftp/ftp/Makefile	23 Feb 2003 20:05:22 -0000
d1207 1
a1207 1
+++ src/kerberosIV/src/appl/ftp/ftpd/Makefile	23 Feb 2003 20:05:22 -0000
d1223 1
a1223 1
+++ src/kerberosIV/src/include/Makefile	23 Feb 2003 20:05:22 -0000
d1239 1
a1239 1
+++ src/lib/csu/i386/crt0.c	23 Feb 2003 20:05:22 -0000
d1421 1
a1421 1
+++ src/lib/libc/arch/i386/SYS.h	23 Feb 2003 20:05:22 -0000
d1477 1
a1477 1
+++ src/lib/libc/arch/i386/gen/alloca.S	23 Feb 2003 20:05:22 -0000
d1490 1
a1490 1
+++ src/lib/libc/arch/i386/gen/setjmp.S	23 Feb 2003 20:05:22 -0000
d1531 1
a1531 1
+++ src/lib/libc/arch/i386/gen/sigsetjmp.S	23 Feb 2003 20:05:22 -0000
d1574 1
a1574 1
+++ src/lib/libc/arch/i386/sys/Ovfork.S	23 Feb 2003 20:05:23 -0000
d1601 1
a1601 1
+++ src/lib/libc/arch/i386/sys/brk.S	23 Feb 2003 20:05:23 -0000
d1627 1
a1627 1
+++ src/lib/libc/arch/i386/sys/cerror.S	23 Feb 2003 20:05:23 -0000
d1654 1
a1654 1
+++ src/lib/libc/arch/i386/sys/exect.S	23 Feb 2003 20:05:23 -0000
d1675 1
a1675 1
+++ src/lib/libc/arch/i386/sys/sbrk.S	23 Feb 2003 20:05:23 -0000
d1701 1
a1701 1
+++ src/lib/libc/arch/i386/sys/sigprocmask.S	23 Feb 2003 20:05:23 -0000
d1722 1
a1722 1
+++ src/lib/libc/arch/i386/sys/sigsuspend.S	23 Feb 2003 20:05:23 -0000
d1742 1
a1742 1
+++ src/lib/libc/arch/i386/sys/syscall.S	23 Feb 2003 20:05:23 -0000
d1762 1
a1762 1
+++ src/lib/libcurses++/Makefile	23 Feb 2003 20:05:23 -0000
d1777 1
a1777 1
+++ src/libexec/ftpd/Makefile	23 Feb 2003 20:05:23 -0000
d1793 1
a1793 1
+++ src/libexec/ld.so/library.c	23 Feb 2003 20:05:23 -0000
d1817 1
a1817 1
+++ src/libexec/login_chpass/Makefile	23 Feb 2003 20:05:23 -0000
d1833 1
a1833 1
+++ src/libexec/rshd/Makefile	23 Feb 2003 20:05:23 -0000
d1849 1
a1849 1
+++ src/sbin/disklabel/Makefile	23 Feb 2003 20:05:23 -0000
d1865 1
a1865 1
+++ src/sbin/fdisk/Makefile	23 Feb 2003 20:05:23 -0000
d1881 1
a1881 1
+++ src/sbin/fsck/fsutil.c	23 Feb 2003 20:05:23 -0000
d1896 1
a1896 1
+++ src/sbin/pfctl/Makefile	23 Feb 2003 20:05:23 -0000
d1912 1
a1912 1
+++ src/sbin/photurisd/Makefile	23 Feb 2003 20:05:23 -0000
d1928 1
a1928 1
+++ src/sbin/wsconsctl/Makefile	23 Feb 2003 20:05:23 -0000
d1944 1
a1944 1
+++ src/share/lkm/vfs/module/Makefile	23 Feb 2003 20:05:23 -0000
d1960 1
a1960 1
+++ src/share/man/man4/options.4	23 Feb 2003 20:05:23 -0000
d1962 1
a1962 1
+.\"	$MirBSD: obsd.misc,v 1.11 2003/02/23 20:05:16 tg Exp $
d1984 1
a1984 1
+++ src/share/mk/bsd.README	23 Feb 2003 20:05:23 -0000
d2001 1
a2001 1
+++ src/share/mk/bsd.own.mk	23 Feb 2003 20:05:23 -0000
d2026 1
a2026 1
+++ src/usr.bin/hexdump/parse.c	23 Feb 2003 20:05:23 -0000
d2042 1
a2042 1
+++ src/usr.bin/keynote/Makefile	23 Feb 2003 20:05:23 -0000
d2052 27
d2085 1
a2085 1
+++ src/usr.bin/yacc/skeleton.c	23 Feb 2003 20:05:23 -0000
d2087 1
a2087 1
+/*	$MirBSD: obsd.misc,v 1.11 2003/02/23 20:05:16 tg Exp $	*/
d2112 1
a2112 1
+    "  = \"$OpenBSD: skeleton.c,v 1.19 2002/12/03 21:34:21 mickey Exp $ $MirBSD: obsd.misc,v 1.11 2003/02/23 20:05:16 tg Exp $\";",
d2116 16
d2138 1
a2138 1
+++ src/usr.sbin/authpf/authpf.c	23 Feb 2003 20:05:23 -0000
d2154 1
a2154 1
+++ src/usr.sbin/config/main.c	23 Feb 2003 20:05:23 -0000
d2156 1
a2156 1
+/*	$MirBSD: obsd.misc,v 1.11 2003/02/23 20:05:16 tg Exp $	*/
d2254 1
a2254 1
+++ src/usr.sbin/config/scan.l	23 Feb 2003 20:05:23 -0000
d2286 2
a2287 2
--- /dev/null	Sun Feb 23 21:56:41 2003
+++ src/sys/arch/i386/include/reloc.h	Sun Feb 23 20:05:23 2003
d2289 1
a2289 1
+/*	$MirBSD: obsd.misc,v 1.11 2003/02/23 20:05:16 tg Exp $	*/
d2394 1
@


1.11
log
@intermediate broken

fix some includes for ELF in sys/
fix libs
@
text
@d26 1
a26 1
against CTM on Sun Feb 23 20:03:24 UTC 2003.
d36 1
a36 1
+++ src/bin/rcp/Makefile	23 Feb 2003 19:00:39 -0000
d52 1
a52 1
+++ src/bin/systrace/Makefile	23 Feb 2003 19:00:39 -0000
d73 1
a73 1
+++ src/distrib/crunch/Makefile.inc	23 Feb 2003 19:00:39 -0000
d86 1
a86 1
+++ src/distrib/crunch/crunchgen/Makefile	23 Feb 2003 19:00:39 -0000
d102 1
a102 1
+++ src/distrib/crunch/crunchide/crunchide.c	23 Feb 2003 19:00:39 -0000
d141 1
a141 1
+++ src/distrib/i386/common/Makefile.inc	23 Feb 2003 19:00:39 -0000
d188 1
a188 1
+++ src/distrib/special/pppd/Makefile	23 Feb 2003 19:00:39 -0000
d203 1
a203 1
+++ src/distrib/special/rsh/Makefile	23 Feb 2003 19:00:39 -0000
d218 1
a218 1
+++ src/games/hack/Makefile	23 Feb 2003 19:00:39 -0000
d234 1
a234 1
+++ src/gnu/egcs/Makefile.bsd-wrapper	23 Feb 2003 19:00:39 -0000
d255 1
a255 1
+++ src/gnu/egcs/gcc/Makefile.bsd-wrapper	23 Feb 2003 19:00:39 -0000
d257 1
a257 1
+#	$MirBSD: obsd.misc,v 1.10 2003/02/23 19:00:34 tg Exp $
a261 1
-MLINKS+=	cccp.1 cpp.1
d263 1
a263 1
+MLINKS+=	cccp.1 pcpp.1
d292 1
a292 1
@@@@ -107,23 +103,11 @@@@
a303 1
+	mv ${DESTDIR}/usr/bin/cpp ${DESTDIR}/usr/bin/pcpp
d317 1
a317 1
@@@@ -140,6 +124,7 @@@@
d331 1
a331 1
+++ src/gnu/egcs/gcc/config.gcc	23 Feb 2003 19:00:39 -0000
d351 1
a351 1
+++ src/gnu/egcs/gcc/config/i386/openbsd.h	23 Feb 2003 19:00:39 -0000
d560 1
a560 1
+++ src/gnu/egcs/libf2c/Makefile.bsd-wrapper	23 Feb 2003 19:00:39 -0000
d575 1
a575 1
+++ src/gnu/egcs/libiberty/Makefile.bsd-wrapper1	23 Feb 2003 20:02:06 -0000
d600 1
a600 1
+++ src/gnu/egcs/libio/editbuf.cc	23 Feb 2003 19:00:39 -0000
d615 1
a615 1
+++ src/gnu/egcs/libio/editbuf.h	23 Feb 2003 19:00:39 -0000
d631 1
a631 1
+++ src/gnu/egcs/libio/parsestream.cc	23 Feb 2003 19:00:39 -0000
d646 1
a646 1
+++ src/gnu/egcs/libio/pfstream.cc	23 Feb 2003 19:00:39 -0000
d661 1
a661 1
+++ src/gnu/egcs/libstdc++/Makefile.bsd-wrapper	23 Feb 2003 19:00:39 -0000
d677 1
a677 1
+++ src/gnu/usr.bin/binutils/Makefile.bsd-wrapper	23 Feb 2003 19:00:39 -0000
d727 1
a727 1
+++ src/gnu/usr.bin/binutils/bfd/config.bfd	23 Feb 2003 19:00:39 -0000
d748 1
a748 1
+++ src/gnu/usr.bin/binutils/gas/config/tc-i386.c	23 Feb 2003 19:00:39 -0000
d773 1
a773 1
+++ src/gnu/usr.bin/binutils/gas/configure	23 Feb 2003 19:00:39 -0000
d789 1
a789 1
+++ src/gnu/usr.bin/binutils/gas/configure.in	23 Feb 2003 19:00:39 -0000
d805 1
a805 1
+++ src/gnu/usr.bin/binutils/gdb/config/alpha/nm-obsd.h	23 Feb 2003 19:00:39 -0000
d884 1
a884 1
+++ src/gnu/usr.bin/binutils/gdb/config/alpha/obsd.mt	23 Feb 2003 19:00:39 -0000
d896 1
a896 1
+++ src/gnu/usr.bin/binutils/gdb/config/i386/nm-obsd.h	23 Feb 2003 19:00:39 -0000
d973 1
a973 1
+++ src/gnu/usr.bin/binutils/ld/configure.tgt	23 Feb 2003 19:00:39 -0000
d989 1
a989 1
+++ src/gnu/usr.bin/cvs/Makefile.bsd-wrapper	23 Feb 2003 19:00:40 -0000
d1005 1
a1005 1
+++ src/gnu/usr.bin/gzip/Makefile	23 Feb 2003 19:00:40 -0000
d1025 16
d1047 1
a1047 1
+++ src/gnu/usr.bin/texinfo/Makefile.bsd-wrapper	23 Feb 2003 19:00:40 -0000
d1070 1
a1070 1
+++ src/gnu/usr.sbin/mkhybrid/src/Makefile	23 Feb 2003 19:00:40 -0000
d1086 1
a1086 1
+++ src/gnu/usr.sbin/mkhybrid/src/diag/Makefile	23 Feb 2003 19:00:40 -0000
d1103 1
a1103 1
+++ src/kerberosIV/Makefile	23 Feb 2003 19:00:40 -0000
d1124 1
a1124 1
+++ src/kerberosIV/Makefile.inc	23 Feb 2003 19:00:40 -0000
d1140 1
a1140 1
+++ src/kerberosIV/lib/kadm/Makefile	23 Feb 2003 19:00:40 -0000
d1156 1
a1156 1
+++ src/kerberosIV/lib/roken/Makefile	23 Feb 2003 19:00:40 -0000
d1172 1
a1172 1
+++ src/kerberosIV/src/appl/ftp/ftp/Makefile	23 Feb 2003 19:00:40 -0000
d1191 1
a1191 1
+++ src/kerberosIV/src/appl/ftp/ftpd/Makefile	23 Feb 2003 19:00:40 -0000
d1207 1
a1207 1
+++ src/kerberosIV/src/include/Makefile	23 Feb 2003 19:00:40 -0000
d1223 1
a1223 1
+++ src/lib/csu/i386/crt0.c	23 Feb 2003 19:00:40 -0000
d1405 1
a1405 1
+++ src/lib/libc/arch/i386/SYS.h	23 Feb 2003 19:00:40 -0000
d1461 1
a1461 1
+++ src/lib/libc/arch/i386/gen/alloca.S	23 Feb 2003 19:00:40 -0000
d1474 1
a1474 1
+++ src/lib/libc/arch/i386/gen/setjmp.S	23 Feb 2003 19:00:40 -0000
d1515 1
a1515 1
+++ src/lib/libc/arch/i386/gen/sigsetjmp.S	23 Feb 2003 19:00:40 -0000
d1558 1
a1558 1
+++ src/lib/libc/arch/i386/sys/Ovfork.S	23 Feb 2003 19:00:40 -0000
d1585 1
a1585 1
+++ src/lib/libc/arch/i386/sys/brk.S	23 Feb 2003 19:00:40 -0000
d1611 1
a1611 1
+++ src/lib/libc/arch/i386/sys/cerror.S	23 Feb 2003 19:00:40 -0000
d1638 1
a1638 1
+++ src/lib/libc/arch/i386/sys/exect.S	23 Feb 2003 19:00:40 -0000
d1659 1
a1659 1
+++ src/lib/libc/arch/i386/sys/sbrk.S	23 Feb 2003 19:00:40 -0000
d1685 1
a1685 1
+++ src/lib/libc/arch/i386/sys/sigprocmask.S	23 Feb 2003 19:00:40 -0000
d1706 1
a1706 1
+++ src/lib/libc/arch/i386/sys/sigsuspend.S	23 Feb 2003 19:00:40 -0000
d1726 1
a1726 1
+++ src/lib/libc/arch/i386/sys/syscall.S	23 Feb 2003 19:00:40 -0000
d1746 1
a1746 1
+++ src/lib/libcurses++/Makefile	23 Feb 2003 19:00:40 -0000
d1761 1
a1761 1
+++ src/libexec/ftpd/Makefile	23 Feb 2003 19:00:40 -0000
d1777 1
a1777 1
+++ src/libexec/ld.so/library.c	23 Feb 2003 19:00:40 -0000
d1801 1
a1801 1
+++ src/libexec/login_chpass/Makefile	23 Feb 2003 19:00:40 -0000
d1817 1
a1817 1
+++ src/libexec/rshd/Makefile	23 Feb 2003 19:00:40 -0000
d1833 1
a1833 1
+++ src/sbin/disklabel/Makefile	23 Feb 2003 19:00:40 -0000
d1849 1
a1849 1
+++ src/sbin/fdisk/Makefile	23 Feb 2003 19:00:40 -0000
d1865 1
a1865 1
+++ src/sbin/fsck/fsutil.c	23 Feb 2003 19:00:40 -0000
d1880 1
a1880 1
+++ src/sbin/pfctl/Makefile	23 Feb 2003 19:00:40 -0000
d1896 1
a1896 1
+++ src/sbin/photurisd/Makefile	23 Feb 2003 19:00:40 -0000
d1912 1
a1912 1
+++ src/sbin/wsconsctl/Makefile	23 Feb 2003 19:00:40 -0000
d1928 1
a1928 1
+++ src/share/lkm/vfs/module/Makefile	23 Feb 2003 19:00:40 -0000
d1944 1
a1944 1
+++ src/share/man/man4/options.4	23 Feb 2003 19:00:40 -0000
d1946 1
a1946 1
+.\"	$MirBSD: obsd.misc,v 1.10 2003/02/23 19:00:34 tg Exp $
d1968 1
a1968 1
+++ src/share/mk/bsd.README	23 Feb 2003 19:00:40 -0000
d1985 1
a1985 1
+++ src/share/mk/bsd.own.mk	23 Feb 2003 19:00:40 -0000
d2010 1
a2010 1
+++ src/usr.bin/hexdump/parse.c	23 Feb 2003 19:00:40 -0000
d2026 1
a2026 1
+++ src/usr.bin/keynote/Makefile	23 Feb 2003 19:00:40 -0000
d2042 1
a2042 1
+++ src/usr.bin/yacc/skeleton.c	23 Feb 2003 19:00:40 -0000
d2044 1
a2044 1
+/*	$MirBSD: obsd.misc,v 1.10 2003/02/23 19:00:34 tg Exp $	*/
d2069 1
a2069 1
+    "  = \"$OpenBSD: skeleton.c,v 1.19 2002/12/03 21:34:21 mickey Exp $ $MirBSD: obsd.misc,v 1.10 2003/02/23 19:00:34 tg Exp $\";",
d2079 1
a2079 1
+++ src/usr.sbin/authpf/authpf.c	23 Feb 2003 19:00:40 -0000
d2095 1
a2095 1
+++ src/usr.sbin/config/main.c	23 Feb 2003 19:00:40 -0000
d2097 1
a2097 1
+/*	$MirBSD: obsd.misc,v 1.10 2003/02/23 19:00:34 tg Exp $	*/
d2195 1
a2195 1
+++ src/usr.sbin/config/scan.l	23 Feb 2003 19:00:40 -0000
d2227 2
a2228 2
--- /dev/null	Sun Feb 23 20:02:11 2003
+++ src/sys/arch/i386/include/reloc.h	Sun Feb 23 19:00:40 2003
d2230 1
a2230 1
+/*	$MirBSD: obsd.misc,v 1.10 2003/02/23 19:00:34 tg Exp $	*/
d2294 1
@


1.10
log
@pre-build broken

fix make obj and first step of make build
@
text
@d26 1
a26 1
against CTM on Sun Feb 23 18:59:31 UTC 2003.
d36 1
a36 1
+++ src/bin/rcp/Makefile	23 Feb 2003 18:22:22 -0000
d52 1
a52 1
+++ src/bin/systrace/Makefile	23 Feb 2003 18:22:22 -0000
d73 1
a73 1
+++ src/distrib/crunch/Makefile.inc	23 Feb 2003 18:22:22 -0000
d86 1
a86 1
+++ src/distrib/crunch/crunchgen/Makefile	23 Feb 2003 18:22:22 -0000
d102 1
a102 1
+++ src/distrib/crunch/crunchide/crunchide.c	23 Feb 2003 18:22:22 -0000
d141 1
a141 1
+++ src/distrib/i386/common/Makefile.inc	23 Feb 2003 18:22:22 -0000
d188 1
a188 1
+++ src/distrib/special/pppd/Makefile	23 Feb 2003 18:22:22 -0000
d203 1
a203 1
+++ src/distrib/special/rsh/Makefile	23 Feb 2003 18:22:22 -0000
d218 1
a218 1
+++ src/games/hack/Makefile	23 Feb 2003 18:22:22 -0000
d234 1
a234 1
+++ src/gnu/egcs/Makefile.bsd-wrapper	23 Feb 2003 18:22:22 -0000
d255 1
a255 1
+++ src/gnu/egcs/gcc/Makefile.bsd-wrapper	23 Feb 2003 18:49:20 -0000
d257 1
a257 1
+#	$MirBSD: obsd.misc,v 1.9 2003/02/23 17:59:43 tg Exp $
d333 1
a333 1
+++ src/gnu/egcs/gcc/config.gcc	23 Feb 2003 18:22:22 -0000
d353 1
a353 1
+++ src/gnu/egcs/gcc/config/i386/openbsd.h	23 Feb 2003 18:22:22 -0000
d562 1
a562 1
+++ src/gnu/egcs/libf2c/Makefile.bsd-wrapper	23 Feb 2003 18:51:46 -0000
d577 2
a578 2
+++ src/gnu/egcs/libiberty/Makefile.bsd-wrapper1	23 Feb 2003 18:51:46 -0000
@@@@ -7,11 +7,12 @@@@
d583 1
d587 2
a588 1
 	PATH="/bin:/usr/bin:/sbin:/usr/sbin" \
d594 2
d602 1
a602 1
+++ src/gnu/egcs/libio/editbuf.cc	23 Feb 2003 18:22:22 -0000
d617 1
a617 1
+++ src/gnu/egcs/libio/editbuf.h	23 Feb 2003 18:22:22 -0000
d633 1
a633 1
+++ src/gnu/egcs/libio/parsestream.cc	23 Feb 2003 18:22:22 -0000
d648 1
a648 1
+++ src/gnu/egcs/libio/pfstream.cc	23 Feb 2003 18:22:22 -0000
d663 1
a663 1
+++ src/gnu/egcs/libstdc++/Makefile.bsd-wrapper	23 Feb 2003 18:22:22 -0000
d679 1
a679 1
+++ src/gnu/usr.bin/binutils/Makefile.bsd-wrapper	23 Feb 2003 18:53:11 -0000
d729 1
a729 1
+++ src/gnu/usr.bin/binutils/bfd/config.bfd	23 Feb 2003 18:22:23 -0000
d750 1
a750 1
+++ src/gnu/usr.bin/binutils/gas/config/tc-i386.c	23 Feb 2003 18:22:23 -0000
d775 1
a775 1
+++ src/gnu/usr.bin/binutils/gas/configure	23 Feb 2003 18:22:23 -0000
d791 1
a791 1
+++ src/gnu/usr.bin/binutils/gas/configure.in	23 Feb 2003 18:22:23 -0000
d807 1
a807 1
+++ src/gnu/usr.bin/binutils/gdb/config/alpha/nm-obsd.h	23 Feb 2003 18:22:23 -0000
d886 1
a886 1
+++ src/gnu/usr.bin/binutils/gdb/config/alpha/obsd.mt	23 Feb 2003 18:22:23 -0000
d898 1
a898 1
+++ src/gnu/usr.bin/binutils/gdb/config/i386/nm-obsd.h	23 Feb 2003 18:22:23 -0000
d975 1
a975 1
+++ src/gnu/usr.bin/binutils/ld/configure.tgt	23 Feb 2003 18:22:23 -0000
d991 1
a991 1
+++ src/gnu/usr.bin/cvs/Makefile.bsd-wrapper	23 Feb 2003 18:22:23 -0000
d1007 1
a1007 1
+++ src/gnu/usr.bin/gzip/Makefile	23 Feb 2003 18:22:23 -0000
d1033 1
a1033 1
+++ src/gnu/usr.bin/texinfo/Makefile.bsd-wrapper	23 Feb 2003 18:22:23 -0000
d1056 1
a1056 1
+++ src/gnu/usr.sbin/mkhybrid/src/Makefile	23 Feb 2003 18:22:23 -0000
d1072 1
a1072 1
+++ src/gnu/usr.sbin/mkhybrid/src/diag/Makefile	23 Feb 2003 18:22:23 -0000
d1089 1
a1089 1
+++ src/kerberosIV/Makefile	23 Feb 2003 18:22:23 -0000
d1110 1
a1110 1
+++ src/kerberosIV/Makefile.inc	23 Feb 2003 18:22:25 -0000
d1126 1
a1126 1
+++ src/kerberosIV/lib/kadm/Makefile	23 Feb 2003 18:22:26 -0000
d1142 1
a1142 1
+++ src/kerberosIV/lib/roken/Makefile	23 Feb 2003 18:22:26 -0000
d1158 1
a1158 1
+++ src/kerberosIV/src/appl/ftp/ftp/Makefile	23 Feb 2003 18:22:26 -0000
d1177 1
a1177 1
+++ src/kerberosIV/src/appl/ftp/ftpd/Makefile	23 Feb 2003 18:22:26 -0000
d1193 1
a1193 1
+++ src/kerberosIV/src/include/Makefile	23 Feb 2003 18:22:26 -0000
d1209 1
a1209 1
+++ src/lib/csu/i386/crt0.c	23 Feb 2003 18:22:26 -0000
d1391 1
a1391 1
+++ src/lib/libc/arch/i386/SYS.h	23 Feb 2003 18:22:26 -0000
d1447 1
a1447 1
+++ src/lib/libc/arch/i386/gen/alloca.S	23 Feb 2003 18:22:27 -0000
d1460 1
a1460 1
+++ src/lib/libc/arch/i386/gen/setjmp.S	23 Feb 2003 18:22:28 -0000
d1501 1
a1501 1
+++ src/lib/libc/arch/i386/gen/sigsetjmp.S	23 Feb 2003 18:22:28 -0000
d1544 1
a1544 1
+++ src/lib/libc/arch/i386/sys/Ovfork.S	23 Feb 2003 18:22:28 -0000
d1571 1
a1571 1
+++ src/lib/libc/arch/i386/sys/brk.S	23 Feb 2003 18:22:28 -0000
d1597 1
a1597 1
+++ src/lib/libc/arch/i386/sys/cerror.S	23 Feb 2003 18:22:28 -0000
d1624 1
a1624 1
+++ src/lib/libc/arch/i386/sys/exect.S	23 Feb 2003 18:22:28 -0000
d1645 1
a1645 1
+++ src/lib/libc/arch/i386/sys/sbrk.S	23 Feb 2003 18:22:28 -0000
d1671 1
a1671 1
+++ src/lib/libc/arch/i386/sys/sigprocmask.S	23 Feb 2003 18:22:28 -0000
d1692 1
a1692 1
+++ src/lib/libc/arch/i386/sys/sigsuspend.S	23 Feb 2003 18:22:28 -0000
d1712 1
a1712 1
+++ src/lib/libc/arch/i386/sys/syscall.S	23 Feb 2003 18:22:28 -0000
d1732 1
a1732 1
+++ src/lib/libcurses++/Makefile	23 Feb 2003 18:22:28 -0000
d1747 1
a1747 1
+++ src/libexec/ftpd/Makefile	23 Feb 2003 18:22:28 -0000
d1763 1
a1763 1
+++ src/libexec/ld.so/library.c	23 Feb 2003 18:22:28 -0000
d1787 1
a1787 1
+++ src/libexec/login_chpass/Makefile	23 Feb 2003 18:22:28 -0000
d1803 1
a1803 1
+++ src/libexec/rshd/Makefile	23 Feb 2003 18:22:28 -0000
d1819 1
a1819 1
+++ src/sbin/disklabel/Makefile	23 Feb 2003 18:22:28 -0000
d1835 1
a1835 1
+++ src/sbin/fdisk/Makefile	23 Feb 2003 18:22:28 -0000
d1851 1
a1851 1
+++ src/sbin/fsck/fsutil.c	23 Feb 2003 18:22:28 -0000
d1866 1
a1866 1
+++ src/sbin/pfctl/Makefile	23 Feb 2003 18:22:28 -0000
d1882 1
a1882 1
+++ src/sbin/photurisd/Makefile	23 Feb 2003 18:22:28 -0000
d1898 1
a1898 1
+++ src/sbin/wsconsctl/Makefile	23 Feb 2003 18:22:28 -0000
d1914 1
a1914 1
+++ src/share/lkm/vfs/module/Makefile	23 Feb 2003 18:22:28 -0000
d1930 1
a1930 1
+++ src/share/man/man4/options.4	23 Feb 2003 18:22:29 -0000
d1932 1
a1932 1
+.\"	$MirBSD: obsd.misc,v 1.9 2003/02/23 17:59:43 tg Exp $
d1954 1
a1954 1
+++ src/share/mk/bsd.README	23 Feb 2003 18:22:29 -0000
d1971 1
a1971 1
+++ src/share/mk/bsd.own.mk	23 Feb 2003 18:22:29 -0000
d1996 1
a1996 1
+++ src/usr.bin/hexdump/parse.c	23 Feb 2003 18:22:29 -0000
d2012 1
a2012 1
+++ src/usr.bin/keynote/Makefile	23 Feb 2003 18:22:29 -0000
d2028 1
a2028 1
+++ src/usr.bin/yacc/skeleton.c	23 Feb 2003 18:22:29 -0000
d2030 1
a2030 1
+/*	$MirBSD: obsd.misc,v 1.9 2003/02/23 17:59:43 tg Exp $	*/
d2055 1
a2055 1
+    "  = \"$OpenBSD: skeleton.c,v 1.19 2002/12/03 21:34:21 mickey Exp $ $MirBSD: obsd.misc,v 1.9 2003/02/23 17:59:43 tg Exp $\";",
d2065 1
a2065 1
+++ src/usr.sbin/authpf/authpf.c	23 Feb 2003 18:22:29 -0000
d2081 1
a2081 1
+++ src/usr.sbin/config/main.c	23 Feb 2003 18:22:29 -0000
d2083 1
a2083 1
+/*	$MirBSD: obsd.misc,v 1.9 2003/02/23 17:59:43 tg Exp $	*/
d2181 1
a2181 1
+++ src/usr.sbin/config/scan.l	23 Feb 2003 18:22:29 -0000
d2213 2
a2214 2
--- /dev/null	Sun Feb 23 18:56:40 2003
+++ src/sys/arch/i386/include/reloc.h	Sun Feb 23 18:22:29 2003
d2216 1
a2216 1
+/*	$MirBSD: obsd.misc,v 1.9 2003/02/23 17:59:43 tg Exp $	*/
@


1.9
log
@intermediate broken

first attempt to upgrade source tree and clean it up
additionally it makes libkern smaller by another like 20 bytes...
@
text
@d26 1
a26 1
against CTM on Sun Feb 23 17:37:37 UTC 2003.
d36 1
a36 1
+++ src/bin/rcp/Makefile	15 Feb 2003 15:38:21 -0000
d52 1
a52 1
+++ src/bin/systrace/Makefile	15 Feb 2003 15:38:21 -0000
d73 1
a73 1
+++ src/distrib/crunch/Makefile.inc	15 Feb 2003 15:38:21 -0000
d86 1
a86 1
+++ src/distrib/crunch/crunchgen/Makefile	15 Feb 2003 15:38:21 -0000
d102 1
a102 1
+++ src/distrib/crunch/crunchide/crunchide.c	15 Feb 2003 15:38:21 -0000
d141 1
a141 1
+++ src/distrib/i386/common/Makefile.inc	15 Feb 2003 15:38:21 -0000
d188 1
a188 1
+++ src/distrib/special/pppd/Makefile	15 Feb 2003 15:38:21 -0000
d203 1
a203 1
+++ src/distrib/special/rsh/Makefile	15 Feb 2003 15:38:21 -0000
d218 1
a218 1
+++ src/games/hack/Makefile	15 Feb 2003 15:38:21 -0000
d234 1
a234 1
+++ src/gnu/egcs/Makefile.bsd-wrapper	15 Feb 2003 15:38:21 -0000
d255 1
a255 1
+++ src/gnu/egcs/gcc/Makefile.bsd-wrapper	23 Feb 2003 16:57:36 -0000
d257 1
a257 1
+#	$MirBSD: obsd.misc,v 1.8 2003/02/15 15:27:31 tg Exp $
d281 1
a281 1
+		TCFLAGS="-O2 -DOPENBSD_NATIVE"
d285 9
a293 1
@@@@ -107,23 +102,11 @@@@
d319 1
a319 1
@@@@ -140,6 +123,7 @@@@
d333 1
a333 1
+++ src/gnu/egcs/gcc/config.gcc	15 Feb 2003 15:38:21 -0000
d353 1
a353 1
+++ src/gnu/egcs/gcc/config/i386/openbsd.h	15 Feb 2003 15:38:21 -0000
d556 36
d598 1
a598 1
+++ src/gnu/egcs/libio/editbuf.cc	15 Feb 2003 15:38:21 -0000
d613 1
a613 1
+++ src/gnu/egcs/libio/editbuf.h	15 Feb 2003 15:38:21 -0000
d629 1
a629 1
+++ src/gnu/egcs/libio/parsestream.cc	15 Feb 2003 15:38:21 -0000
d644 1
a644 1
+++ src/gnu/egcs/libio/pfstream.cc	15 Feb 2003 15:38:21 -0000
d659 1
a659 1
+++ src/gnu/egcs/libstdc++/Makefile.bsd-wrapper	23 Feb 2003 16:34:19 -0000
d675 1
a675 1
+++ src/gnu/usr.bin/binutils/Makefile.bsd-wrapper	23 Feb 2003 16:34:25 -0000
d693 26
d725 1
a725 1
+++ src/gnu/usr.bin/binutils/bfd/config.bfd	15 Feb 2003 15:38:21 -0000
d746 1
a746 1
+++ src/gnu/usr.bin/binutils/gas/config/tc-i386.c	15 Feb 2003 15:38:21 -0000
d771 1
a771 1
+++ src/gnu/usr.bin/binutils/gas/configure	15 Feb 2003 15:38:22 -0000
d787 1
a787 1
+++ src/gnu/usr.bin/binutils/gas/configure.in	15 Feb 2003 15:38:22 -0000
d803 1
a803 1
+++ src/gnu/usr.bin/binutils/gdb/config/alpha/nm-obsd.h	15 Feb 2003 15:38:22 -0000
d882 1
a882 1
+++ src/gnu/usr.bin/binutils/gdb/config/alpha/obsd.mt	15 Feb 2003 15:38:22 -0000
d894 1
a894 1
+++ src/gnu/usr.bin/binutils/gdb/config/i386/nm-obsd.h	15 Feb 2003 15:38:22 -0000
d971 1
a971 1
+++ src/gnu/usr.bin/binutils/ld/configure.tgt	15 Feb 2003 15:38:22 -0000
d987 1
a987 1
+++ src/gnu/usr.bin/cvs/Makefile.bsd-wrapper	23 Feb 2003 16:35:14 -0000
d1003 1
a1003 1
+++ src/gnu/usr.bin/gzip/Makefile	15 Feb 2003 15:38:22 -0000
d1029 1
a1029 1
+++ src/gnu/usr.bin/texinfo/Makefile.bsd-wrapper	23 Feb 2003 16:36:23 -0000
d1052 1
a1052 1
+++ src/gnu/usr.sbin/mkhybrid/src/Makefile	15 Feb 2003 15:38:22 -0000
d1068 1
a1068 1
+++ src/gnu/usr.sbin/mkhybrid/src/diag/Makefile	15 Feb 2003 15:38:22 -0000
d1085 1
a1085 1
+++ src/kerberosIV/Makefile	15 Feb 2003 15:38:22 -0000
d1106 1
a1106 1
+++ src/kerberosIV/Makefile.inc	15 Feb 2003 15:38:22 -0000
d1122 1
a1122 1
+++ src/kerberosIV/lib/kadm/Makefile	15 Feb 2003 15:38:22 -0000
d1138 1
a1138 1
+++ src/kerberosIV/lib/roken/Makefile	15 Feb 2003 15:38:22 -0000
d1154 1
a1154 1
+++ src/kerberosIV/src/appl/ftp/ftp/Makefile	15 Feb 2003 15:38:22 -0000
d1173 1
a1173 1
+++ src/kerberosIV/src/appl/ftp/ftpd/Makefile	15 Feb 2003 15:38:22 -0000
d1189 1
a1189 1
+++ src/kerberosIV/src/include/Makefile	15 Feb 2003 15:38:22 -0000
d1205 1
a1205 1
+++ src/lib/csu/i386/crt0.c	15 Feb 2003 15:38:22 -0000
d1387 1
a1387 1
+++ src/lib/libc/arch/i386/SYS.h	15 Feb 2003 15:38:22 -0000
d1443 1
a1443 1
+++ src/lib/libc/arch/i386/gen/alloca.S	15 Feb 2003 15:38:22 -0000
d1456 1
a1456 1
+++ src/lib/libc/arch/i386/gen/setjmp.S	15 Feb 2003 15:38:22 -0000
d1497 1
a1497 1
+++ src/lib/libc/arch/i386/gen/sigsetjmp.S	15 Feb 2003 15:38:22 -0000
d1540 1
a1540 1
+++ src/lib/libc/arch/i386/sys/Ovfork.S	15 Feb 2003 15:38:22 -0000
d1567 1
a1567 1
+++ src/lib/libc/arch/i386/sys/brk.S	15 Feb 2003 15:38:22 -0000
d1593 1
a1593 1
+++ src/lib/libc/arch/i386/sys/cerror.S	15 Feb 2003 15:38:22 -0000
d1620 1
a1620 1
+++ src/lib/libc/arch/i386/sys/exect.S	15 Feb 2003 15:38:22 -0000
d1641 1
a1641 1
+++ src/lib/libc/arch/i386/sys/sbrk.S	15 Feb 2003 15:38:22 -0000
d1667 1
a1667 1
+++ src/lib/libc/arch/i386/sys/sigprocmask.S	15 Feb 2003 15:38:22 -0000
d1688 1
a1688 1
+++ src/lib/libc/arch/i386/sys/sigsuspend.S	15 Feb 2003 15:38:22 -0000
d1708 1
a1708 1
+++ src/lib/libc/arch/i386/sys/syscall.S	15 Feb 2003 15:38:22 -0000
d1728 1
a1728 1
+++ src/lib/libcurses++/Makefile	15 Feb 2003 15:38:23 -0000
d1743 1
a1743 1
+++ src/libexec/ftpd/Makefile	15 Feb 2003 15:38:23 -0000
d1759 1
a1759 1
+++ src/libexec/ld.so/library.c	17 Feb 2003 19:25:01 -0000
d1783 1
a1783 1
+++ src/libexec/login_chpass/Makefile	15 Feb 2003 15:38:23 -0000
d1799 1
a1799 1
+++ src/libexec/rshd/Makefile	15 Feb 2003 15:38:23 -0000
d1815 1
a1815 1
+++ src/sbin/disklabel/Makefile	15 Feb 2003 15:38:23 -0000
d1831 1
a1831 1
+++ src/sbin/fdisk/Makefile	15 Feb 2003 15:38:23 -0000
d1847 1
a1847 1
+++ src/sbin/fsck/fsutil.c	15 Feb 2003 15:38:23 -0000
d1862 1
a1862 1
+++ src/sbin/pfctl/Makefile	15 Feb 2003 15:38:23 -0000
d1878 1
a1878 1
+++ src/sbin/photurisd/Makefile	15 Feb 2003 15:38:23 -0000
d1894 1
a1894 1
+++ src/sbin/wsconsctl/Makefile	15 Feb 2003 15:38:23 -0000
d1910 1
a1910 1
+++ src/share/lkm/vfs/module/Makefile	15 Feb 2003 15:38:23 -0000
d1926 1
a1926 1
+++ src/share/man/man4/options.4	23 Feb 2003 17:05:46 -0000
d1928 1
a1928 1
+.\"	$MirBSD: obsd.misc,v 1.8 2003/02/15 15:27:31 tg Exp $
d1950 1
a1950 1
+++ src/share/mk/bsd.README	15 Feb 2003 15:38:23 -0000
d1967 1
a1967 1
+++ src/share/mk/bsd.own.mk	15 Feb 2003 15:38:23 -0000
d1992 1
a1992 1
+++ src/usr.bin/hexdump/parse.c	15 Feb 2003 15:38:28 -0000
d2008 1
a2008 1
+++ src/usr.bin/keynote/Makefile	15 Feb 2003 15:38:28 -0000
d2024 1
a2024 1
+++ src/usr.bin/yacc/skeleton.c	15 Feb 2003 15:38:28 -0000
d2026 1
a2026 1
+/*	$MirBSD: obsd.misc,v 1.8 2003/02/15 15:27:31 tg Exp $	*/
d2051 1
a2051 1
+    "  = \"$OpenBSD: skeleton.c,v 1.19 2002/12/03 21:34:21 mickey Exp $ $MirBSD: obsd.misc,v 1.8 2003/02/15 15:27:31 tg Exp $\";",
d2061 1
a2061 1
+++ src/usr.sbin/authpf/authpf.c	23 Feb 2003 16:43:57 -0000
d2077 1
a2077 1
+++ src/usr.sbin/config/main.c	15 Feb 2003 15:38:28 -0000
d2079 1
a2079 1
+/*	$MirBSD: obsd.misc,v 1.8 2003/02/15 15:27:31 tg Exp $	*/
d2177 1
a2177 1
+++ src/usr.sbin/config/scan.l	15 Feb 2003 15:38:28 -0000
d2209 2
a2210 2
--- /dev/null	Sun Feb 23 17:24:43 2003
+++ src/sys/arch/i386/include/reloc.h	Sat Feb 15 15:38:28 2003
d2212 1
a2212 1
+/*	$MirBSD: obsd.misc,v 1.8 2003/02/15 15:27:31 tg Exp $	*/
d2258 2
d2265 1
a2265 1
src/gnu/usr.bin/binutils/Makefile.bsd-wrapper	ELF
@


1.8
log
@fix includes, css, rawrite
@
text
@d1 3
a3 1
>>> http://templeofhate.com/tglaser/MirBSD/index.php
d5 1
a5 1
Copyright (c) 2000-2003 by Thorsten "mirabile" Glaser <x86@@ePost.de>
d7 5
a11 4
Copyright (c) 1968-2003 NOP by the authors of and contributors to C,
    UNIX, BSD/Berkeley Unix, 386BSD, NetBSD and OpenBSD. The licen-
    ce of the file before patching also applies to the patch, unless
    special provisions are made.
d15 1
a15 4
I retain the right to be known as the author of the work. The author
and every single contributor, unless marked with "NOP" above, hereby
waive their right to require additional patent licences for usage of
this work, even if the work could infringe patents hold by them.
d24 1
a24 1
This diff, ID $MirBSD: regen-obsdp.sh,v 1.7 2003/02/10 19:33:07 tg Exp $
d26 1
a26 1
against /cvs on Tue Jan 28 23:58:42 UTC 2003.
d28 2
a29 1
### GENERATOR: @@(#)_MirBSD: regen-obsdp.sh,v 1.7 2003/02/10 19:33:07 tg Exp $
d36 1
a36 1
+++ src/bin/rcp/Makefile	11 Feb 2003 21:09:38 -0000
d52 1
a52 1
+++ src/bin/systrace/Makefile	11 Feb 2003 21:09:38 -0000
d73 1
a73 1
+++ src/distrib/crunch/Makefile.inc	11 Feb 2003 21:09:38 -0000
d86 1
a86 1
+++ src/distrib/crunch/crunchgen/Makefile	11 Feb 2003 21:09:38 -0000
d102 1
a102 1
+++ src/distrib/crunch/crunchide/crunchide.c	11 Feb 2003 21:09:38 -0000
d141 1
a141 1
+++ src/distrib/i386/common/Makefile.inc	11 Feb 2003 21:09:38 -0000
d188 1
a188 1
+++ src/distrib/special/pppd/Makefile	11 Feb 2003 21:09:38 -0000
d203 1
a203 1
+++ src/distrib/special/rsh/Makefile	11 Feb 2003 21:09:39 -0000
d218 1
a218 1
+++ src/games/hack/Makefile	11 Feb 2003 21:09:39 -0000
d234 1
a234 1
+++ src/gnu/egcs/Makefile.bsd-wrapper	11 Feb 2003 21:09:39 -0000
d252 14
a265 12
retrieving revision 1.12
diff -u -r1.12 Makefile.bsd-wrapper
--- src/gnu/egcs/gcc/Makefile.bsd-wrapper	18 Jan 2003 23:49:28 -0000	1.12
+++ src/gnu/egcs/gcc/Makefile.bsd-wrapper	11 Feb 2003 21:09:39 -0000
@@@@ -1,3 +1,4 @@@@
+#	$MirBSD: obsd.misc,v 1.7 2003/02/11 21:08:30 tg Exp $
 #	$OpenBSD: Makefile.bsd-wrapper,v 1.12 2003/01/18 23:49:50 deraadt Exp $
 
 MAN=		cccp.1 gcc.1 gcc-local.1 protoize.1
@@@@ -5,19 +6,13 @@@@
 MLINKS+=	cccp.1 cpp.1
 MLINKS+=	protoize.1 unprotize.1
d297 1
d301 2
a302 2
 	   ${DESTDIR}/usr/bin/gcc
 	ln -f ${DESTDIR}/usr/bin/gcc ${DESTDIR}/usr/bin/cc
d307 1
d325 1
a325 1
+++ src/gnu/egcs/gcc/config.gcc	11 Feb 2003 21:09:41 -0000
d345 1
a345 1
+++ src/gnu/egcs/gcc/config/i386/openbsd.h	11 Feb 2003 21:09:41 -0000
d554 1
a554 1
+++ src/gnu/egcs/libio/editbuf.cc	11 Feb 2003 21:09:42 -0000
d569 1
a569 1
+++ src/gnu/egcs/libio/editbuf.h	11 Feb 2003 21:09:42 -0000
d585 1
a585 1
+++ src/gnu/egcs/libio/parsestream.cc	11 Feb 2003 21:09:42 -0000
d600 1
a600 1
+++ src/gnu/egcs/libio/pfstream.cc	11 Feb 2003 21:09:42 -0000
d612 4
a615 4
retrieving revision 1.11
diff -u -r1.11 Makefile.bsd-wrapper
--- src/gnu/egcs/libstdc++/Makefile.bsd-wrapper	11 May 2002 00:19:56 -0000	1.11
+++ src/gnu/egcs/libstdc++/Makefile.bsd-wrapper	11 Feb 2003 21:09:42 -0000
d628 4
a631 4
retrieving revision 1.48
diff -u -r1.48 Makefile.bsd-wrapper
--- src/gnu/usr.bin/binutils/Makefile.bsd-wrapper	11 Aug 2002 22:51:26 -0000	1.48
+++ src/gnu/usr.bin/binutils/Makefile.bsd-wrapper	11 Feb 2003 21:09:42 -0000
d633 1
a633 1
 #	$OpenBSD: Makefile.bsd-wrapper,v 1.48 2002/08/11 22:51:48 art Exp $
d642 1
a642 1
 MAN=		binutils/objdump.1
d655 1
a655 1
+++ src/gnu/usr.bin/binutils/bfd/config.bfd	11 Feb 2003 21:09:42 -0000
d676 1
a676 1
+++ src/gnu/usr.bin/binutils/gas/config/tc-i386.c	11 Feb 2003 21:09:42 -0000
d701 1
a701 1
+++ src/gnu/usr.bin/binutils/gas/configure	11 Feb 2003 21:09:42 -0000
d717 1
a717 1
+++ src/gnu/usr.bin/binutils/gas/configure.in	11 Feb 2003 21:09:42 -0000
d733 1
a733 1
+++ src/gnu/usr.bin/binutils/gdb/config/alpha/nm-obsd.h	11 Feb 2003 21:09:42 -0000
d812 1
a812 1
+++ src/gnu/usr.bin/binutils/gdb/config/alpha/obsd.mt	11 Feb 2003 21:09:44 -0000
d824 1
a824 1
+++ src/gnu/usr.bin/binutils/gdb/config/i386/nm-obsd.h	11 Feb 2003 21:09:44 -0000
d901 1
a901 1
+++ src/gnu/usr.bin/binutils/ld/configure.tgt	11 Feb 2003 21:09:44 -0000
d914 4
a917 4
retrieving revision 1.41
diff -u -r1.41 Makefile.bsd-wrapper
--- src/gnu/usr.bin/cvs/Makefile.bsd-wrapper	3 Jun 2002 15:59:16 -0000	1.41
+++ src/gnu/usr.bin/cvs/Makefile.bsd-wrapper	11 Feb 2003 21:09:44 -0000
d933 1
a933 1
+++ src/gnu/usr.bin/gzip/Makefile	11 Feb 2003 21:09:44 -0000
d956 4
a959 4
retrieving revision 1.36
diff -u -r1.36 Makefile.bsd-wrapper
--- src/gnu/usr.bin/texinfo/Makefile.bsd-wrapper	11 Jun 2002 22:36:52 -0000	1.36
+++ src/gnu/usr.bin/texinfo/Makefile.bsd-wrapper	11 Feb 2003 21:09:44 -0000
d982 1
a982 1
+++ src/gnu/usr.sbin/mkhybrid/src/Makefile	11 Feb 2003 21:09:44 -0000
d998 1
a998 1
+++ src/gnu/usr.sbin/mkhybrid/src/diag/Makefile	11 Feb 2003 21:09:44 -0000
d1015 1
a1015 1
+++ src/kerberosIV/Makefile	11 Feb 2003 21:09:44 -0000
d1036 1
a1036 1
+++ src/kerberosIV/Makefile.inc	11 Feb 2003 21:09:44 -0000
d1052 1
a1052 1
+++ src/kerberosIV/lib/kadm/Makefile	11 Feb 2003 21:09:44 -0000
d1068 1
a1068 1
+++ src/kerberosIV/lib/roken/Makefile	11 Feb 2003 21:09:44 -0000
d1084 1
a1084 1
+++ src/kerberosIV/src/appl/ftp/ftp/Makefile	11 Feb 2003 21:09:44 -0000
d1103 1
a1103 1
+++ src/kerberosIV/src/appl/ftp/ftpd/Makefile	11 Feb 2003 21:09:44 -0000
d1119 1
a1119 1
+++ src/kerberosIV/src/include/Makefile	11 Feb 2003 21:09:45 -0000
d1135 1
a1135 1
+++ src/lib/csu/i386/crt0.c	11 Feb 2003 21:09:45 -0000
d1317 1
a1317 1
+++ src/lib/libc/arch/i386/SYS.h	11 Feb 2003 21:09:45 -0000
d1373 1
a1373 1
+++ src/lib/libc/arch/i386/gen/alloca.S	11 Feb 2003 21:09:45 -0000
d1386 1
a1386 1
+++ src/lib/libc/arch/i386/gen/setjmp.S	11 Feb 2003 21:09:45 -0000
d1427 1
a1427 1
+++ src/lib/libc/arch/i386/gen/sigsetjmp.S	11 Feb 2003 21:09:45 -0000
d1470 1
a1470 1
+++ src/lib/libc/arch/i386/sys/Ovfork.S	11 Feb 2003 21:09:45 -0000
d1497 1
a1497 1
+++ src/lib/libc/arch/i386/sys/brk.S	11 Feb 2003 21:09:45 -0000
d1523 1
a1523 1
+++ src/lib/libc/arch/i386/sys/cerror.S	11 Feb 2003 21:09:45 -0000
d1550 1
a1550 1
+++ src/lib/libc/arch/i386/sys/exect.S	11 Feb 2003 21:09:45 -0000
d1571 1
a1571 1
+++ src/lib/libc/arch/i386/sys/sbrk.S	11 Feb 2003 21:09:45 -0000
d1597 1
a1597 1
+++ src/lib/libc/arch/i386/sys/sigprocmask.S	11 Feb 2003 21:09:45 -0000
d1618 1
a1618 1
+++ src/lib/libc/arch/i386/sys/sigsuspend.S	11 Feb 2003 21:09:45 -0000
d1638 1
a1638 1
+++ src/lib/libc/arch/i386/sys/syscall.S	11 Feb 2003 21:09:45 -0000
d1658 1
a1658 1
+++ src/lib/libcurses++/Makefile	11 Feb 2003 21:09:45 -0000
d1673 1
a1673 1
+++ src/libexec/ftpd/Makefile	11 Feb 2003 21:09:45 -0000
d1686 5
a1690 5
retrieving revision 1.24
diff -u -r1.24 library.c
--- src/libexec/ld.so/library.c	13 Dec 2002 20:45:32 -0000	1.24
+++ src/libexec/ld.so/library.c	11 Feb 2003 21:09:45 -0000
@@@@ -204,6 +204,8 @@@@
d1699 1
a1699 1
@@@@ -372,6 +374,7 @@@@
d1713 1
a1713 1
+++ src/libexec/login_chpass/Makefile	11 Feb 2003 21:09:45 -0000
d1729 1
a1729 1
+++ src/libexec/rshd/Makefile	11 Feb 2003 21:09:45 -0000
d1745 1
a1745 1
+++ src/sbin/disklabel/Makefile	11 Feb 2003 21:09:45 -0000
d1761 1
a1761 1
+++ src/sbin/fdisk/Makefile	11 Feb 2003 21:09:45 -0000
d1777 1
a1777 1
+++ src/sbin/fsck/fsutil.c	11 Feb 2003 21:09:45 -0000
d1792 1
a1792 1
+++ src/sbin/pfctl/Makefile	11 Feb 2003 21:09:45 -0000
d1808 1
a1808 1
+++ src/sbin/photurisd/Makefile	11 Feb 2003 21:09:45 -0000
d1824 1
a1824 1
+++ src/sbin/wsconsctl/Makefile	11 Feb 2003 21:09:45 -0000
d1840 1
a1840 1
+++ src/share/lkm/vfs/module/Makefile	11 Feb 2003 21:09:45 -0000
d1853 4
a1856 4
retrieving revision 1.114
diff -u -r1.114 options.4
--- src/share/man/man4/options.4	4 Jan 2003 22:11:25 -0000	1.114
+++ src/share/man/man4/options.4	11 Feb 2003 21:09:45 -0000
d1858 2
a1859 2
+.\"	$MirBSD: obsd.misc,v 1.7 2003/02/11 21:08:30 tg Exp $
 .\"	$OpenBSD: options.4,v 1.114 2003/01/04 22:11:47 miod Exp $
d1880 1
a1880 1
+++ src/share/mk/bsd.README	11 Feb 2003 21:09:45 -0000
d1897 1
a1897 1
+++ src/share/mk/bsd.own.mk	11 Feb 2003 21:09:45 -0000
a1915 2158
Index: src/sys/arch/i386/i386/bios.c
===================================================================
RCS file: /cvs/src/sys/arch/i386/i386/bios.c,v
retrieving revision 1.49
diff -u -r1.49 bios.c
--- src/sys/arch/i386/i386/bios.c	20 May 2002 16:37:39 -0000	1.49
+++ src/sys/arch/i386/i386/bios.c	11 Feb 2003 21:09:45 -0000
@@@@ -171,7 +171,7 @@@@
 
 			bios32_entry.segment = GSEL(GCODE_SEL, SEL_KPL);
 			bios32_entry.offset = (u_int32_t)ISA_HOLE_VADDR(h->entry);
-			printf(", BIOS32 rev. %d @@ 0x%lx", h->rev, h->entry);
+			printf(", BIOS32 rev. %d @@ 0x%x", h->rev, h->entry);
 			break;
 		}
 	}
Index: src/sys/arch/i386/i386/db_magic.s
===================================================================
RCS file: /cvs/src/sys/arch/i386/i386/db_magic.s,v
retrieving revision 1.1
diff -u -r1.1 db_magic.s
--- src/sys/arch/i386/i386/db_magic.s	4 May 1996 14:32:40 -0000	1.1
+++ src/sys/arch/i386/i386/db_magic.s	11 Feb 2003 21:09:45 -0000
@@@@ -112,50 +112,50 @@@@
  */
 ENTRY(dr0)
       movl    S_ARG0, %eax
-      movl    %eax,_dr_addr
+      movl    %eax,_C_LABEL(dr_addr)
       movl    %eax, %db0
       movl    $0, %ecx
       jmp     0f
 ENTRY(dr1)
       movl    S_ARG0, %eax
-      movl    %eax,_dr_addr+1*4
+      movl    %eax,_C_LABEL(dr_addr)+1*4
       movl    %eax, %db1
       movl    $2, %ecx
       jmp     0f
 ENTRY(dr2)
       movl    S_ARG0, %eax
-      movl    %eax,_dr_addr+2*4
+      movl    %eax,_C_LABEL(dr_addr)+2*4
       movl    %eax, %db2
       movl    $4, %ecx
       jmp     0f
 ENTRY(dr3)
       movl    S_ARG0, %eax
-      movl    %eax,_dr_addr+3*4
+      movl    %eax,_C_LABEL(dr_addr)+3*4
       movl    %eax, %db3
       movl    $6, %ecx
 0:
       pushl   %ebp
       movl    %esp, %ebp
       movl    %db7, %edx
-      movl    %edx,_dr_addr+4*4
+      movl    %edx,_C_LABEL(dr_addr)+4*4
       andl    dr_msk(,%ecx,2),%edx    /* clear out new entry */
-      movl    %edx,_dr_addr+5*4
+      movl    %edx,_C_LABEL(dr_addr)+5*4
       movzbl  B_ARG3, %eax
       andb    $3, %al
       shll    %cl, %eax
       orl     %eax, %edx
       movzbl  B_ARG1, %eax
       andb    $3, %al
-      addb    $0x10, %ecx
+      addb    $0x10, %cl
       shll    %cl, %eax
       orl     %eax, %edx
       movzbl  B_ARG2, %eax
       andb    $3, %al
-      addb    $0x2, %ecx
+      addb    $0x2, %cl
       shll    %cl, %eax
       orl     %eax, %edx
       movl    %edx, %db7
-      movl    %edx,_dr_addr+7*4
+      movl    %edx,_C_LABEL(dr_addr)+7*4
       movl    %edx, %eax
       leave
       ret
Index: src/sys/arch/i386/i386/in_cksum.s
===================================================================
RCS file: /cvs/src/sys/arch/i386/i386/in_cksum.s,v
retrieving revision 1.5
diff -u -r1.5 in_cksum.s
--- src/sys/arch/i386/i386/in_cksum.s	4 Jul 2001 08:57:25 -0000	1.5
+++ src/sys/arch/i386/i386/in_cksum.s	11 Feb 2003 21:09:45 -0000
@@@@ -180,13 +180,17 @@@@
 
 in_cksum49:	pushl	%edi			# len - bytes checksummed
 		pushl	$warning		# push warning string
-		call	_printf			# printf()
+		call	_C_LABEL(printf)	# printf()
 		leal	8(%esp), %esp		#
 		jmp	in_cksum48		#
 
 		.data
 
+#ifdef __ELF__
+		.align	4
+#else
 		.align	2
+#endif
 
 table1:		.long	in_cksum8		# 4-byte aligned
 		.long	in_cksum4		# checksum 3 bytes
Index: src/sys/arch/i386/i386/locore.s
===================================================================
RCS file: /cvs/src/sys/arch/i386/i386/locore.s,v
retrieving revision 1.68
diff -u -r1.68 locore.s
--- src/sys/arch/i386/i386/locore.s	9 Jan 2003 22:26:47 -0000	1.68
+++ src/sys/arch/i386/i386/locore.s	11 Feb 2003 21:09:45 -0000
@@@@ -70,9 +70,15 @@@@
 /*
  * override user-land alignment before including asm.h
  */
+#ifdef __ELF__
+#define	ALIGN_DATA	.align	4
+#define	ALIGN_TEXT	.align	4,0x90	/* 4-byte boundaries, NOP-filled */
+#define	SUPERALIGN_TEXT	.align	16,0x90	/* 16-byte boundaries better for 486 */
+#else
 #define	ALIGN_DATA	.align	2
 #define	ALIGN_TEXT	.align	2,0x90	/* 4-byte boundaries, NOP-filled */
 #define	SUPERALIGN_TEXT	.align	4,0x90	/* 16-byte boundaries better for 486 */
+#endif
 #define _ALIGN_TEXT	ALIGN_TEXT
 #include <machine/asm.h>
 
@@@@ -100,8 +106,8 @@@@
 	pushl	%ds		; \
 	pushl	%es		; \
 	movl	$GSEL(GDATA_SEL, SEL_KPL),%eax	; \
-	movl	%ax,%ds		; \
-	movl	%ax,%es
+	movw	%ax,%ds		; \
+	movw	%ax,%es
 #define	INTRFASTEXIT \
 	popl	%es		; \
 	popl	%ds		; \
@@@@ -591,14 +597,14 @@@@
 
 	/* Clear segment registers; always null in proc0. */
 	xorl	%ecx,%ecx
-	movl	%cx,%fs
-	movl	%cx,%gs
+	movw	%cx,%fs
+	movw	%cx,%gs
 
 	call	_C_LABEL(main)
 
 NENTRY(proc_trampoline)
 	pushl	%ebx
-	call	%esi
+	call	*%esi
 	addl	$4,%esp
 	INTRFASTEXIT
 	/* NOTREACHED */
@@@@ -609,7 +615,7 @@@@
  * Signal trampoline; copied to top of user stack.
  */
 NENTRY(sigcode)
-	call	SIGF_HANDLER(%esp)
+	call	*SIGF_HANDLER(%esp)
 	leal	SIGF_SC(%esp),%eax	# scp (the call may have clobbered the
 					# copy at SIGF_SCP(%esp))
 #ifdef VM86
@@@@ -618,8 +624,8 @@@@
 #endif
 	movl	SC_FS(%eax),%ecx
 	movl	SC_GS(%eax),%edx
-	movl	%cx,%fs
-	movl	%dx,%gs
+	movw	%cx,%fs
+	movw	%dx,%gs
 1:	pushl	%eax
 	pushl	%eax			# junk to fake return address
 	movl	$SYS_sigreturn,%eax
@@@@ -633,7 +639,7 @@@@
 
 #ifdef COMPAT_SVR4
 NENTRY(svr4_sigcode)
-	call	SVR4_SIGF_HANDLER(%esp)
+	call	*SVR4_SIGF_HANDLER(%esp)
 	leal	SVR4_SIGF_UC(%esp),%eax	# ucp (the call may have clobbered the
 					# copy at SIGF_UCP(%esp))
 #ifdef VM86
@@@@ -642,8 +648,8 @@@@
 #endif
 	movl	SVR4_UC_FS(%eax),%ecx
 	movl	SVR4_UC_GS(%eax),%edx
-	movl	%cx,%fs
-	movl	%dx,%gs
+	movw	%cx,%fs
+	movw	%dx,%gs
 1:	pushl	%eax
 	pushl	$1			# setcontext(p) == syscontext(1, p)
 	pushl	%eax			# junk to fake return address
@@@@ -662,7 +668,7 @@@@
  * Signal trampoline; copied to top of user stack.
  */
 NENTRY(linux_sigcode)
-	call	LINUX_SIGF_HANDLER(%esp)
+	call	*LINUX_SIGF_HANDLER(%esp)
 	leal	LINUX_SIGF_SC(%esp),%ebx # scp (the call may have clobbered the
 					# copy at SIGF_SCP(%esp))
 #ifdef VM86
@@@@ -671,8 +677,8 @@@@
 #endif
 	movl	LINUX_SC_FS(%ebx),%ecx
 	movl	LINUX_SC_GS(%ebx),%edx
-	movl	%cx,%fs
-	movl	%dx,%gs
+	movw	%cx,%fs
+	movw	%dx,%gs
 1:	pushl	%eax			# junk to fake return address
 	movl	$LINUX_SYS_sigreturn,%eax
 	int	$0x80			# enter kernel with args on stack
@@@@ -689,7 +695,7 @@@@
  * Signal trampoline; copied to top of user stack.
  */
 NENTRY(freebsd_sigcode)
-	call	FREEBSD_SIGF_HANDLER(%esp)
+	call	*FREEBSD_SIGF_HANDLER(%esp)
 	leal	FREEBSD_SIGF_SC(%esp),%eax # scp (the call may have clobbered
 					# the copy at SIGF_SCP(%esp))
 	pushl	%eax
@@@@ -1277,9 +1283,9 @@@@
 	nop
 1:	/* Reload "stale" selectors. */
 	movl	$GSEL(GDATA_SEL, SEL_KPL),%eax
-	movl	%ax,%ds
-	movl	%ax,%es
-	movl	%ax,%ss
+	movw	%ax,%ds
+	movw	%ax,%es
+	movw	%ax,%ss
 	/* Reload code selector by doing intersegment return. */
 	popl	%eax
 	pushl	$GSEL(GCODE_SEL, SEL_KPL)
@@@@ -1527,8 +1533,8 @@@@
 	xorl	%eax, %eax
 	xorl	%ecx, %ecx
 #endif
-	movl	%fs,%ax
-	movl	%gs,%cx
+	movw	%fs,%ax
+	movw	%gs,%cx
 	movl	%eax,PCB_FS(%esi)
 	movl	%ecx,PCB_GS(%esi)
 
@@@@ -1587,8 +1593,8 @@@@
 	/* Restore segment registers. */
 	movl	PCB_FS(%esi),%eax
 	movl	PCB_GS(%esi),%ecx
-	movl	%ax,%fs
-	movl	%cx,%gs
+	movw	%ax,%fs
+	movw	%cx,%gs
 
 switch_restored:
 	/* Restore cr0 (including FPU state). */
@@@@ -1651,8 +1657,8 @@@@
 
 	/* Clear segment registers; always null in proc0. */
 	xorl	%ecx,%ecx
-	movl	%cx,%fs
-	movl	%cx,%gs
+	movw	%cx,%fs
+	movw	%cx,%gs
 
 	/* Restore cr0 (including FPU state). */
 	movl	PCB_CR0(%esi),%ecx
@@@@ -1688,8 +1694,8 @@@@
 	xorl	%eax, %eax
 	xorl	%ecx, %ecx
 #endif
-	movl	%fs,%ax
-	movl	%gs,%cx
+	movw	%fs,%ax
+	movw	%gs,%cx
 	movl	%eax,PCB_FS(%edx)
 	movl	%ecx,PCB_GS(%edx)
 
@@@@ -1714,7 +1720,11 @@@@
  * XXX - debugger traps are now interrupt gates so at least bdb doesn't lose
  * control.  The sti's give the standard losing behaviour for ddb and kgdb.
  */
+#ifdef __ELF__
+#define	IDTVEC(name)	ALIGN_TEXT; .globl X/**/name; X/**/name:
+#else
 #define	IDTVEC(name)	ALIGN_TEXT; .globl _X/**/name; _X/**/name:
+#endif
 
 #define	TRAP(a)		pushl $(a) ; jmp _C_LABEL(alltraps)
 #define	ZTRAP(a)	pushl $0 ; TRAP(a)
@@@@ -1750,7 +1760,7 @@@@
 	pushl	$T_DNA
 	INTRENTRY
 	pushl	_C_LABEL(curproc)
-	call	_C_LABEL(npxdna)
+	call	*_C_LABEL(npxdna)
 	addl	$4,%esp
 	testl	%eax,%eax
 	jz	calltrap
@@@@ -1820,7 +1830,7 @@@@
 	ZTRAP(T_PROTFLT)
 NENTRY(resume_pop_ds)
 	movl	$GSEL(GDATA_SEL, SEL_KPL),%eax
-	movl	%ax,%es
+	movw	%ax,%es
 NENTRY(resume_pop_es)
 	movl	$T_PROTFLT,TF_TRAPNO(%esp)
 	jmp	calltrap
Index: src/sys/arch/i386/i386/machdep.c
===================================================================
RCS file: /cvs/src/sys/arch/i386/i386/machdep.c,v
retrieving revision 1.220
diff -u -r1.220 machdep.c
--- src/sys/arch/i386/i386/machdep.c	16 Jan 2003 19:39:01 -0000	1.220
+++ src/sys/arch/i386/i386/machdep.c	11 Feb 2003 21:09:45 -0000
@@@@ -392,7 +392,7 @@@@
 	phys_map = uvm_km_suballoc(kernel_map, &minaddr, &maxaddr,
 				   VM_PHYS_SIZE, 0, FALSE, NULL);
 
-	printf("avail mem = %lu (%uK)\n", ptoa(uvmexp.free),
+	printf("avail mem = %lu (%luK)\n", ptoa(uvmexp.free),
 	    ptoa(uvmexp.free)/1024);
 	printf("using %d buffers containing %u bytes (%uK) of memory\n",
 		nbuf, bufpages * PAGE_SIZE, bufpages * PAGE_SIZE / 1024);
@@@@ -1187,7 +1187,7 @@@@
 	const char *name, *modifier, *vendorname, *token;
 	const char *cpu_device = "cpu0";
 	int class = CPUCLASS_386, vendor, i, max;
-	int family, model, step, modif, cachesize;
+	int family = 0, model, step, modif, cachesize;
 	const struct cpu_cpuid_nameclass *cpup = NULL;
 	void (*cpu_setup)(const char *, int, int);
 
@@@@ -2203,8 +2203,9 @@@@
 
 			if (extent_alloc_region(iomem_ex, a, e - a, EX_NOWAIT))
 				/* XXX What should we do? */
-				printf("\nWARNING: CAN'T ALLOCATE RAM (%x-%x)"
-				    " FROM IOMEM EXTENT MAP!\n", a, e);
+				printf("\nWARNING: CAN'T ALLOCATE RAM (%lx-%lx)"
+				    " FROM IOMEM EXTENT MAP!\n", (unsigned long) a,
+				    (unsigned long) e);
 
 			physmem += atop(e - a);
 			dumpmem[i].start = atop(a);
Index: src/sys/arch/i386/i386/microtime.s
===================================================================
RCS file: /cvs/src/sys/arch/i386/i386/microtime.s,v
retrieving revision 1.16
diff -u -r1.16 microtime.s
--- src/sys/arch/i386/i386/microtime.s	24 Sep 2002 00:06:00 -0000	1.16
+++ src/sys/arch/i386/i386/microtime.s	11 Feb 2003 21:09:45 -0000
@@@@ -49,7 +49,7 @@@@
 ENTRY(microtime)
 
 #if defined(I586_CPU) || defined(I686_CPU)
-	movl	_pentium_mhz, %ecx
+	movl	_C_LABEL(pentium_mhz), %ecx
 	testl	%ecx, %ecx
 	jne	pentium_microtime
 #else
@@@@ -97,7 +97,7 @@@@
 
 	movl	$11932,%edx	# counter limit
 
-	testb	$IRQ_BIT(0),_ipending + IRQ_BYTE(0)
+	testb	$IRQ_BIT(0),_C_LABEL(ipending) + IRQ_BYTE(0)
 	jnz	1f
 
 	cmpl	$12,%ecx	# check for potential overflow
@@@@ -123,8 +123,8 @@@@
 	shrl	$12,%eax		# a = a/4096 = 3433d/4096
 
 common_microtime:
-	movl	_time,%edx	# get time.tv_sec
-	addl	_time+4,%eax	# add time.tv_usec
+	movl	_C_LABEL(time),%edx	# get time.tv_sec
+	addl	_C_LABEL(time)+4,%eax	# add time.tv_usec
 
 	popfl			# enable interrupts
 	
@@@@ -141,8 +141,8 @@@@
 
 #if defined(I586_CPU) || defined(I686_CPU)
 	.data
-	.globl	_pentium_base_tsc
-	.comm	_pentium_base_tsc,8
+	.globl	_C_LABEL(pentium_base_tsc)
+	.comm	_C_LABEL(pentium_base_tsc),8
 	.text
 
 	.align	2, 0x90
@@@@ -150,8 +150,8 @@@@
 	pushfl
 	cli
 	.byte	0x0f, 0x31	# RDTSC
-	subl	_pentium_base_tsc,%eax
-	sbbl	_pentium_base_tsc+4,%edx
+	subl	_C_LABEL(pentium_base_tsc),%eax
+	sbbl	_C_LABEL(pentium_base_tsc)+4,%edx
 	/*
 	 * correct the high word first so we won't
 	 * receive a result overflow aka div/0 fault
Index: src/sys/arch/i386/i386/random.s
===================================================================
RCS file: /cvs/src/sys/arch/i386/i386/random.s,v
retrieving revision 1.3
diff -u -r1.3 random.s
--- src/sys/arch/i386/i386/random.s	4 Jul 2001 08:57:25 -0000	1.3
+++ src/sys/arch/i386/i386/random.s	11 Feb 2003 21:09:45 -0000
@@@@ -45,20 +45,20 @@@@
 #include <machine/asm.h>
 
 	.data
-	.globl	__randseed
-__randseed:
+	.globl	_C_LABEL(_randseed)
+_C_LABEL(_randseed):
 	.long	1
 	.text
 ENTRY(random)
 	movl	$16807,%eax
-	imull	__randseed
+	imull	_C_LABEL(_randseed)
 	shld	$1,%eax,%edx
 	andl	$0x7fffffff,%eax
 	addl	%edx,%eax
 	js	1f
-	movl	%eax,__randseed
+	movl	%eax,_C_LABEL(_randseed)
 	ret
 1:
 	subl	$0x7fffffff,%eax
-	movl	%eax,__randseed
+	movl	%eax,_C_LABEL(_randseed)
 	ret
Index: src/sys/arch/i386/include/asm.h
===================================================================
RCS file: /cvs/src/sys/arch/i386/include/asm.h,v
retrieving revision 1.5
diff -u -r1.5 asm.h
--- src/sys/arch/i386/include/asm.h	5 Sep 2001 08:22:14 -0000	1.5
+++ src/sys/arch/i386/include/asm.h	11 Feb 2003 21:09:45 -0000
@@@@ -45,10 +45,10 @@@@
 #ifdef PIC
 #define PIC_PROLOGUE	\
 	pushl	%ebx;	\
-	call	1f;	\
-1:			\
+	call	666f;	\
+666:			\
 	popl	%ebx;	\
-	addl	$__GLOBAL_OFFSET_TABLE_+[.-1b], %ebx
+	addl	$_C_LABEL(_GLOBAL_OFFSET_TABLE_)+[.-666b], %ebx
 #define PIC_EPILOGUE	\
 	popl	%ebx
 #define PIC_PLT(x)	x@@PLT
@@@@ -62,12 +62,25 @@@@
 #define PIC_GOTOFF(x)	x
 #endif
 
-#ifdef __STDC__
-# define _C_LABEL(x)	_ ## x
-#else
-# define _C_LABEL(x)	_/**/x
-#endif
+#define _C_LABEL(name)	name
 #define	_ASM_LABEL(x)	x
+
+/*
+ * WEAK ALIAS: create a weak alias (ELF only)
+ */
+#ifdef __ELF__
+#define WEAK_ALIAS(alias,sym) \
+	.weak alias; \
+	alias = sym
+#endif
+
+/*
+ * WARN_REFERENCES: create a warning if the specified symbol is referenced
+ * (ELF only).
+ */
+#ifdef __ELF__
+	.section .gnu.warning. ## _sym ; .ascii _msg ; .text
+#endif /* __ELF__ */
 
 /* let kernels and others override entrypoint alignment */
 #ifndef _ALIGN_TEXT
Index: src/sys/arch/i386/include/bus.h
===================================================================
RCS file: /cvs/src/sys/arch/i386/include/bus.h,v
retrieving revision 1.34
diff -u -r1.34 bus.h
--- src/sys/arch/i386/include/bus.h	16 Jan 2003 04:15:38 -0000	1.34
+++ src/sys/arch/i386/include/bus.h	11 Feb 2003 21:09:46 -0000
@@@@ -639,9 +639,9 @@@@
 	int _port1 = (h1)+(o1); int _port2 = (h2)+(o2); int _cnt=(cnt);	\
 	if ((t) == I386_BUS_SPACE_IO) {					\
 		__asm __volatile("					\
-		1:	movl %w1,%%dx				;	\
+		1:	movl %w1,%%edx				;	\
 			inb  %%dx,%%al				;	\
-			movl %w0,%%dx				;	\
+			movl %w0,%%edx				;	\
 			outb %%al,%%dx				;	\
 			incl %0					;	\
 			incl %1					;	\
@@@@ -656,14 +656,14 @@@@
 	int _port1 = (h1)+(o1); int _port2 = (h2)+(o2); int _cnt=(cnt);	\
 	if ((t) == I386_BUS_SPACE_IO) {					\
 		__asm __volatile("					\
-		1:	movl %w1,%%dx				;	\
+		1:	movl %k1,%%edx				;	\
 			inw  %%dx,%%ax				;	\
-			movl %w0,%%dx				;	\
+			movl %k0,%%edx				;	\
 			outw %%ax,%%dx				;	\
 			addl $2, %0				;	\
 			addl $2, %1				;	\
 			loop 1b"				:	\
-		    "+D" (_port2), "+S" (_port1), "+c" ((_cnt))	::	\
+		    "+D" (_port2), "+ES" (_port1), "+c" ((_cnt))	::	\
 		    "%edx", "%eax", "cc");				\
 	} else								\
 		i386_space_copy(_port1, _port2, 2, _cnt);		\
@@@@ -673,14 +673,14 @@@@
 	int _port1 = (h1)+(o1); int _port2 = (h2)+(o2); int _cnt=(cnt);	\
 	if ((t) == I386_BUS_SPACE_IO) {					\
 		__asm __volatile("					\
-		1:	movl %w1,%%dx				;	\
+		1:f	movl %w1,%%edx				;	\
 			inl  %%dx,%%eax				;	\
-			movl %w0,%%dx				;	\
+			movl %w0,%%edx				;	\
 			outl %%eax,%%dx				;	\
 			addl $4, %0				;	\
 			addl $4, %1				;	\
 			loop 1b"				:	\
-		    "+D" (_port2), "+S" (_port1), "+c" ((_cnt))	::	\
+		    "+D" (_port2), "+ES" (_port1), "+c" ((_cnt))	::	\
 		    "%edx", "%eax", "cc");				\
 	} else								\
 		i386_space_copy(_port1, _port2, 4, _cnt);		\
Index: src/sys/arch/i386/include/cdefs.h
===================================================================
RCS file: /cvs/src/sys/arch/i386/include/cdefs.h,v
retrieving revision 1.7
diff -u -r1.7 cdefs.h
--- src/sys/arch/i386/include/cdefs.h	18 Aug 2001 02:34:44 -0000	1.7
+++ src/sys/arch/i386/include/cdefs.h	11 Feb 2003 21:09:46 -0000
@@@@ -9,34 +9,11 @@@@
 #ifndef	_MACHINE_CDEFS_H_
 #define	_MACHINE_CDEFS_H_
 
-#ifndef	_C_LABEL
-#ifdef __STDC__
-#define _C_LABEL(x)	__STRING(_ ## x)
-#else
-#define _C_LABEL(x)	__STRING(_/**/x)
-#endif
-#endif /* _C_LABEL */
-
-#ifdef __GNUC__
-#ifdef __STDC__
-#define __indr_reference(sym,alias)	\
-	__asm__(".stabs \"_" #alias "\",11,0,0,0");	\
-	__asm__(".stabs \"_" #sym "\",1,0,0,0")
-#define __warn_references(sym,msg)	\
-	__asm__(".stabs \"" msg "\",30,0,0,0");		\
-	__asm__(".stabs \"_" #sym "\",1,0,0,0")
-#define __weak_alias(alias,sym)				\
-	__asm__(".weak _" #alias "; _" #alias "= _" __STRING(sym))
-#else
-#define __indr_reference(sym,alias)	\
-	__asm__(".stabs \"_/**/alias\",11,0,0,0");	\
-	__asm__(".stabs \"_/**/sym\",1,0,0,0")
-#define __warn_references(sym,msg)	\
-	__asm__(".stabs msg,30,0,0,0");			\
-	__asm__(".stabs \"_/**/sym\",1,0,0,0")
-#define __weak_alias(alias,sym)				\
-	__asm__(".weak _/**/alias; _/**/alias = _/**/sym")
-#endif
+#if defined(__GNUC__) && defined(__STDC__)
+#define __weak_alias(alias,sym)						\
+	__asm__(".weak " __STRING(alias) " ; " __STRING(alias) " = " __STRING(sym))
+#define __warn_references(sym,msg)					\
+	__asm__(".section .gnu.warning." __STRING(sym) " ; .ascii \"" msg "\" ; .text")
 #else
 #define __indr_reference(sym,alias)
 #define __warn_references(sym,msg)
Index: src/sys/arch/i386/include/db_machdep.h
===================================================================
RCS file: /cvs/src/sys/arch/i386/include/db_machdep.h,v
retrieving revision 1.7
diff -u -r1.7 db_machdep.h
--- src/sys/arch/i386/include/db_machdep.h	14 Mar 2002 01:26:11 -0000	1.7
+++ src/sys/arch/i386/include/db_machdep.h	11 Feb 2003 21:09:46 -0000
@@@@ -97,6 +97,8 @@@@
 #define DB_TASK_NAME_TITLE	"COMMAND                "
 #define DB_TASK_NAME_LEN	23
 #define DB_NULL_TASK_NAME	"?                      "
+#define DB_ELF_SYMBOLS
+#define DB_ELFSIZE		32
 
 /*
  * Constants for KGDB.
Index: src/sys/arch/i386/include/intr.h
===================================================================
RCS file: /cvs/src/sys/arch/i386/include/intr.h,v
retrieving revision 1.18
diff -u -r1.18 intr.h
--- src/sys/arch/i386/include/intr.h	11 Dec 2002 07:15:49 -0000	1.18
+++ src/sys/arch/i386/include/intr.h	11 Feb 2003 21:09:46 -0000
@@@@ -226,7 +226,8 @@@@
 softintr(mask)
 	int mask;
 {
-	__asm __volatile("orl %0,_ipending" : : "ir" (mask));
+	__asm __volatile("orl %1, %0" : "=m"(ipending) : "ir" (mask));
+
 }
 
 #define	setsoftast()	(astpending = 1)
Index: src/sys/arch/i386/include/param.h
===================================================================
RCS file: /cvs/src/sys/arch/i386/include/param.h,v
retrieving revision 1.21
diff -u -r1.21 param.h
--- src/sys/arch/i386/include/param.h	26 Jun 2002 08:42:17 -0000	1.21
+++ src/sys/arch/i386/include/param.h	11 Feb 2003 21:09:46 -0000
@@@@ -61,9 +61,15 @@@@
  * Round p (pointer or byte index) up to a correctly-aligned value
  * for all data types (int, long, ...).   The result is u_int and
  * must be cast to any desired pointer type.
+ *
+ * ALIGNED_POINTER is a boolean macro that checks whether an address
+ * is valid to fetch data elements of type t from on this architecture.
+ * This does not reflect the optimal alignment, just the possibility
+ * (within reasonable limits). 
  */
 #define ALIGNBYTES	(sizeof(int) - 1)
 #define ALIGN(p)	(((u_int)(p) + ALIGNBYTES) &~ ALIGNBYTES)
+#define ALIGNED_POINTER(p,t)   1
 
 #define	PGSHIFT		12		/* LOG2(NBPG) */
 #define	NBPG		(1 << PGSHIFT)	/* bytes/page */
Index: src/sys/arch/i386/isa/clock.c
===================================================================
RCS file: /cvs/src/sys/arch/i386/isa/clock.c,v
retrieving revision 1.28
diff -u -r1.28 clock.c
--- src/sys/arch/i386/isa/clock.c	6 Jul 2002 19:13:58 -0000	1.28
+++ src/sys/arch/i386/isa/clock.c	11 Feb 2003 21:09:46 -0000
@@@@ -198,7 +198,7 @@@@
 
 	/* Check diagnostic status */
 	if ((s = mc146818_read(NULL, NVRAM_DIAG)) != 0)	/* XXX softc */
-		printf("RTC BIOS diagnostic error %b\n", (unsigned int) s, 
+		printf("RTC BIOS diagnostic error %d %s\n", (unsigned int) s,
 		    NVRAM_DIAG_BITS);
 }
 
Index: src/sys/arch/i386/isa/icu.s
===================================================================
RCS file: /cvs/src/sys/arch/i386/isa/icu.s,v
retrieving revision 1.18
diff -u -r1.18 icu.s
--- src/sys/arch/i386/isa/icu.s	4 Dec 2001 00:00:14 -0000	1.18
+++ src/sys/arch/i386/isa/icu.s	11 Feb 2003 21:09:46 -0000
@@@@ -139,7 +139,7 @@@@
 	call	_C_LABEL(comsoft)
 	movl	%ebx,_C_LABEL(cpl)
 #endif
-	jmp	%esi
+	jmp	*%esi
 
 #define DONETISR(s, c) \
 	.globl  _C_LABEL(c)	;\
@@@@ -155,7 +155,7 @@@@
 	xchgl	_C_LABEL(netisr),%edi
 #include <net/netisr_dispatch.h>
 	movl	%ebx,_C_LABEL(cpl)
-	jmp	%esi
+	jmp	*%esi
 #undef DONETISR
 
 IDTVEC(softclock)
@@@@ -163,5 +163,5 @@@@
 	movl	%eax,_C_LABEL(cpl)
 	call	_C_LABEL(softclock)
 	movl	%ebx,_C_LABEL(cpl)
-	jmp	%esi
+	jmp	*%esi
 
Index: src/sys/arch/i386/isa/npx.c
===================================================================
RCS file: /cvs/src/sys/arch/i386/isa/npx.c,v
retrieving revision 1.25
diff -u -r1.25 npx.c
--- src/sys/arch/i386/isa/npx.c	14 Mar 2002 01:26:11 -0000	1.25
+++ src/sys/arch/i386/isa/npx.c	11 Feb 2003 21:09:46 -0000
@@@@ -145,6 +145,11 @@@@
 extern int i386_fpu_exception;
 extern int i386_fpu_fdivbug;
 
+#ifdef __ELF__
+#define AOUT_UNDERSCORE ""
+#else
+#define AOUT_UNDERSCORE "_"
+#endif
 /*
  * Special interrupt handlers.  Someday intr0-intr15 will be used to count
  * interrupts.  We'll still need a special exception 16 handler.  The busy
@@@@ -152,9 +157,9 @@@@
  */
 void probeintr(void);
 asm (".text\n\t"
-"_probeintr:\n\t"
+AOUT_UNDERSCORE "probeintr:\n\t"
 	"ss\n\t"
-	"incl	_npx_intrs_while_probing\n\t"
+	"incl	" AOUT_UNDERSCORE "npx_intrs_while_probing\n\t"
 	"pushl	%eax\n\t"
 	"movb	$0x20,%al	# EOI (asm in strings loses cpp features)\n\t"
 	"outb	%al,$0xa0	# IO_ICU2\n\t"
@@@@ -166,9 +171,9 @@@@
 
 void probetrap(void);
 asm (".text\n\t"
-"_probetrap:\n\t"
+AOUT_UNDERSCORE "probetrap:\n\t"
 	"ss\n\t"
-	"incl	_npx_traps_while_probing\n\t"
+	"incl	" AOUT_UNDERSCORE "npx_traps_while_probing\n\t"
 	"fnclex\n\t"
 	"iret\n\t");
 
@@@@ -307,7 +312,7 @@@@
 
 int npx586bug1(int, int);
 asm (".text\n\t"
-"_npx586bug1:\n\t"
+AOUT_UNDERSCORE "npx586bug1:\n\t"
 	"fildl	4(%esp)		# x\n\t"
 	"fildl	8(%esp)		# y\n\t"
 	"fld	%st(1)\n\t"
Index: src/sys/arch/i386/isa/pccom.c
===================================================================
RCS file: /cvs/src/sys/arch/i386/isa/pccom.c,v
retrieving revision 1.42
diff -u -r1.42 pccom.c
--- src/sys/arch/i386/isa/pccom.c	14 Mar 2002 01:26:11 -0000	1.42
+++ src/sys/arch/i386/isa/pccom.c	11 Feb 2003 21:09:46 -0000
@@@@ -911,7 +911,7 @@@@
 #endif
 		if (ISSET(sc->sc_hwflags, COM_HW_FIFO)) {
 			u_int8_t fifo = FIFO_ENABLE|FIFO_RCV_RST|FIFO_XMT_RST;
-			u_int8_t lcr;
+			u_int8_t lcr = 0;
 
 			switch (sc->sc_uarttype) {
 			case COM_UART_ST16650V2:
@@@@ -1377,7 +1377,7 @@@@
 		if (!ISSET(sc->sc_hwflags, COM_HW_HAYESP) &&
 		    ISSET(sc->sc_hwflags, COM_HW_FIFO)) {
 			u_int8_t fifo = FIFO_ENABLE;
-			u_int8_t lcr2;
+			u_int8_t lcr2 = 0;
 
 			switch (sc->sc_uarttype) {
 			case COM_UART_ST16650V2:
Index: src/sys/arch/i386/isa/vector.s
===================================================================
RCS file: /cvs/src/sys/arch/i386/isa/vector.s,v
retrieving revision 1.15
diff -u -r1.15 vector.s
--- src/sys/arch/i386/isa/vector.s	6 Dec 2001 21:08:51 -0000	1.15
+++ src/sys/arch/i386/isa/vector.s	11 Feb 2003 21:09:46 -0000
@@@@ -85,16 +85,16 @@@@
 #ifdef ICU_HARDWARE_MASK
 
 #define	MASK(irq_num, icu) \
-	movb	_imen + IRQ_BYTE(irq_num),%al				;\
+	movb	_C_LABEL(imen) + IRQ_BYTE(irq_num),%al				;\
 	orb	$IRQ_BIT(irq_num),%al					;\
-	movb	%al,_imen + IRQ_BYTE(irq_num)				;\
+	movb	%al,_C_LABEL(imen) + IRQ_BYTE(irq_num)				;\
 	FASTER_NOP							;\
 	outb	%al,$(icu+1)
 #define	UNMASK(irq_num, icu) \
 	cli								;\
-	movb	_imen + IRQ_BYTE(irq_num),%al				;\
+	movb	_C_LABEL(imen) + IRQ_BYTE(irq_num),%al				;\
 	andb	$~IRQ_BIT(irq_num),%al					;\
-	movb	%al,_imen + IRQ_BYTE(irq_num)				;\
+	movb	%al,_C_LABEL(imen) + IRQ_BYTE(irq_num)				;\
 	FASTER_NOP							;\
 	outb	%al,$(icu+1)						;\
 	sti
@@@@ -130,7 +130,7 @@@@
  * scattered cld's?
  */
 
-	.globl	_isa_strayintr
+	.globl	_C_LABEL(isa_strayintr)
 
 /*
  * Normal vectors.
@@@@ -154,7 +154,7 @@@@
 	pushl	%cs							;\
 	pushl	%esi							;\
 	cli								;\
-_Xintr/**/irq_num/**/:							;\
+_C_LABEL(Xintr)/**/irq_num/**/:						;\
 	pushl	$0			/* dummy error code */		;\
 	pushl	$T_ASTFLT		/* trap # for doing ASTs */	;\
 	INTRENTRY							;\
@@@@ -162,26 +162,26 @@@@
 	MASK(irq_num, icu)		/* mask it in hardware */	;\
 	ack(irq_num)			/* and allow other intrs */	;\
 	incl	MY_COUNT+V_INTR		/* statistical info */		;\
-	movl	_C_LABEL(iminlevel) + (irq_num) * 4, %eax			;\
+	movl	_C_LABEL(iminlevel) + (irq_num) * 4, %eax		;\
 	movzbl	_C_LABEL(cpl),%ebx					;\
 	cmpl	%eax,%ebx						;\
 	jae	_C_LABEL(Xhold/**/irq_num)/* currently masked; hold it */;\
-_Xresume/**/irq_num/**/:						;\
+_C_LABEL(Xresume)/**/irq_num/**/:					;\
 	movzbl	_C_LABEL(cpl),%eax	/* cpl to restore on exit */	;\
 	pushl	%eax							;\
-	movl	_C_LABEL(imaxlevel) + (irq_num) * 4,%eax			;\
+	movl	_C_LABEL(imaxlevel) + (irq_num) * 4,%eax		;\
 	movl	%eax,_C_LABEL(cpl)	/* block enough for this irq */	;\
 	sti				/* safe to take intrs now */	;\
-	movl	_intrhand + (irq_num) * 4,%ebx	/* head of chain */	;\
+	movl	_C_LABEL(intrhand) + (irq_num) * 4,%ebx	/* head of chain */	;\
 	testl	%ebx,%ebx						;\
-	jz	_Xstray/**/irq_num	/* no handlears; we're stray */	;\
+	jz	_C_LABEL(Xstray)/**/irq_num	/* no handlears; we're stray */	;\
 	STRAY_INITIALIZE		/* nobody claimed it yet */	;\
 7:	movl	IH_ARG(%ebx),%eax	/* get handler arg */		;\
 	testl	%eax,%eax						;\
 	jnz	4f							;\
 	movl	%esp,%eax		/* 0 means frame pointer */	;\
 4:	pushl	%eax							;\
-	call	IH_FUN(%ebx)		/* call it */			;\
+	call	*IH_FUN(%ebx)		/* call it */			;\
 	addl	$4,%esp			/* toss the arg */		;\
 	STRAY_INTEGRATE			/* maybe he claimed it */	;\
 	orl	%eax,%eax		/* should it be counted? */	;\
@@@@ -192,14 +192,14 @@@@
 	jnz	7b							;\
 	STRAY_TEST			/* see if it's a stray */	;\
 6:	UNMASK(irq_num, icu)		/* unmask it in hardware */	;\
-	jmp	_Xdoreti		/* lower spl and do ASTs */	;\
+	jmp	_C_LABEL(Xdoreti)	/* lower spl and do ASTs */	;\
 IDTVEC(stray/**/irq_num)						;\
 	pushl	$irq_num						;\
-	call	_isa_strayintr						;\
+	call	_C_LABEL(isa_strayintr)					;\
 	addl	$4,%esp							;\
 	jmp	6b							;\
 IDTVEC(hold/**/irq_num)							;\
-	orb	$IRQ_BIT(irq_num),_ipending + IRQ_BYTE(irq_num)		;\
+	orb	$IRQ_BIT(irq_num),_C_LABEL(ipending) + IRQ_BYTE(irq_num)	;\
 	INTRFASTEXIT
 
 #if defined(DEBUG) && defined(notdef)
@@@@ -209,7 +209,7 @@@@
 	orl	%eax,%esi
 #define	STRAY_TEST \
 	testl	%esi,%esi						;\
-	jz	_Xstray/**/irq_num
+	jz	_C_LABEL(Xstray)/**/irq_num
 #else /* !DEBUG */
 #define	STRAY_INITIALIZE
 #define	STRAY_INTEGRATE
@@@@ -245,37 +245,51 @@@@
  */
 /* interrupt service routine entry points */
 IDTVEC(intr)
-	.long   _Xintr0, _Xintr1, _Xintr2, _Xintr3, _Xintr4, _Xintr5, _Xintr6
-	.long   _Xintr7, _Xintr8, _Xintr9, _Xintr10, _Xintr11, _Xintr12
-	.long   _Xintr13, _Xintr14, _Xintr15
+	.long   _C_LABEL(Xintr0), _C_LABEL(Xintr1), _C_LABEL(Xintr2)
+	.long	_C_LABEL(Xintr3), _C_LABEL(Xintr4), _C_LABEL(Xintr5)
+	.long	_C_LABEL(Xintr6), _C_LABEL(Xintr7), _C_LABEL(Xintr8)
+	.long	_C_LABEL(Xintr9), _C_LABEL(Xintr10), _C_LABEL(Xintr11)
+	.long	_C_LABEL(Xintr12), _C_LABEL(Xintr13)
+	.long	_C_LABEL(Xintr14), _C_LABEL(Xintr15)
 
 /*
  * These tables are used by Xdoreti() and Xspllower().
  */
 /* resume points for suspended interrupts */
 IDTVEC(resume)
-	.long   _Xresume0, _Xresume1, _Xresume2, _Xresume3, _Xresume4
-	.long   _Xresume5, _Xresume6, _Xresume7, _Xresume8, _Xresume9
-	.long   _Xresume10, _Xresume11, _Xresume12, _Xresume13, _Xresume14
-	.long   _Xresume15
+	.long	_C_LABEL(Xresume0), _C_LABEL(Xresume1)
+	.long	_C_LABEL(Xresume2), _C_LABEL(Xresume3)
+	.long	_C_LABEL(Xresume4), _C_LABEL(Xresume5)
+	.long	_C_LABEL(Xresume6), _C_LABEL(Xresume7)
+	.long	_C_LABEL(Xresume8), _C_LABEL(Xresume9)
+	.long	_C_LABEL(Xresume10), _C_LABEL(Xresume11)
+	.long	_C_LABEL(Xresume12), _C_LABEL(Xresume13)
+	.long	_C_LABEL(Xresume14), _C_LABEL(Xresume15)
 	/* for soft interrupts */
 	.long	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
-	.long	_Xsofttty, _Xsoftnet, _Xsoftclock
+	.long	_C_LABEL(Xsofttty), _C_LABEL(Xsoftnet)
+	.long	_C_LABEL(Xsoftclock)
 /* fake interrupts to resume from splx() */
 IDTVEC(recurse)
-	.long   _Xrecurse0, _Xrecurse1, _Xrecurse2, _Xrecurse3, _Xrecurse4
-	.long   _Xrecurse5, _Xrecurse6, _Xrecurse7, _Xrecurse8, _Xrecurse9
-	.long   _Xrecurse10, _Xrecurse11, _Xrecurse12, _Xrecurse13, _Xrecurse14
-	.long   _Xrecurse15
+	.long	_C_LABEL(Xrecurse0), _C_LABEL(Xrecurse1)
+	.long	_C_LABEL(Xrecurse2), _C_LABEL(Xrecurse3)
+	.long	_C_LABEL(Xrecurse4), _C_LABEL(Xrecurse5)
+	.long	_C_LABEL(Xrecurse6), _C_LABEL(Xrecurse7)
+	.long	_C_LABEL(Xrecurse8), _C_LABEL(Xrecurse9)
+	.long	_C_LABEL(Xrecurse10), _C_LABEL(Xrecurse11)
+	.long	_C_LABEL(Xrecurse12), _C_LABEL(Xrecurse13)
+	.long	_C_LABEL(Xrecurse14), _C_LABEL(Xrecurse15)
 	/* for soft interrupts */
 	.long	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
-	.long	_Xsofttty, _Xsoftnet, _Xsoftclock
+	.long	_C_LABEL(Xsofttty), _C_LABEL(Xsoftnet)
+	.long	_C_LABEL(Xsoftclock)
 
 /* Some bogus data, to keep vmstat happy, for now. */
-	.globl	_intrnames, _eintrnames, _intrcnt, _eintrcnt
-_intrnames:
+	.globl	_C_LABEL(intrnames), _C_LABEL(eintrnames)
+	.globl	_C_LABEL(intrcnt), _C_LABEL(eintrcnt)
+_C_LABEL(intrnames):
 	.long	0
-_eintrnames:
-_intrcnt:
+_C_LABEL(eintrnames):
+_C_LABEL(intrcnt):
 	.long	0
-_eintrcnt:
+_C_LABEL(eintrcnt):
Index: src/sys/arch/i386/pci/pchb.c
===================================================================
RCS file: /cvs/src/sys/arch/i386/pci/pchb.c,v
retrieving revision 1.38
diff -u -r1.38 pchb.c
--- src/sys/arch/i386/pci/pchb.c	8 Jan 2003 01:45:45 -0000	1.38
+++ src/sys/arch/i386/pci/pchb.c	11 Feb 2003 21:09:46 -0000
@@@@ -362,7 +362,7 @@@@
 			timersub(&tv2, &tv1, &tv1);
 			if (tv1.tv_sec)
 				tv1.tv_usec += 1000000 * tv1.tv_sec;
-			printf(": rng active, %dKb/sec",
+			printf(": rng active, %ld Kb/sec",
 			    8 * 1000000 / tv1.tv_usec);
 
 			timeout_set(&sc->sc_tmo, pchb_rnd, sc);
Index: src/sys/arch/i386/pci/pci_addr_fixup.c
===================================================================
RCS file: /cvs/src/sys/arch/i386/pci/pci_addr_fixup.c,v
retrieving revision 1.14
diff -u -r1.14 pci_addr_fixup.c
--- src/sys/arch/i386/pci/pci_addr_fixup.c	14 Jun 2002 21:34:36 -0000	1.14
+++ src/sys/arch/i386/pci/pci_addr_fixup.c	11 Feb 2003 21:09:46 -0000
@@@@ -131,8 +131,9 @@@@
 		start = PCIADDR_ISAMEM_RESERVE;
 	sc->mem_alloc_start = (start + 0x100000 + 1) & ~(0x100000 - 1);
 	sc->port_alloc_start = PCIADDR_ISAPORT_RESERVE;
-	PCIBIOS_PRINTV((" Physical memory end: 0x%08x\n PCI memory mapped I/O "
-	    "space start: 0x%08x\n", avail_end, sc->mem_alloc_start));
+	PCIBIOS_PRINTV((" Physical memory end: 0x%08lx\n PCI memory mapped I/O "
+	    "space start: 0x%08lx\n", (unsigned long) avail_end,
+	    (unsigned long) sc->mem_alloc_start));
 
 	if (sc->nbogus == 0)
 		return; /* no need to fixup */
@@@@ -308,11 +309,11 @@@@
 
 	if (pciaddr_ioaddr(pci_conf_read(pc, tag, mapreg)) != *addr) {
 		pci_conf_write(pc, tag, mapreg, 0); /* clear */
-		printf("fixup failed. (new address=%#x)\n", *addr);
+		printf("fixup failed. (new address=%#lx)\n", *addr);
 		return (1);
 	}
 	if (!pcibios_flags & PCIBIOS_VERBOSE)
-		printf("new address 0x%08x\n", *addr);
+		printf("new address 0x%08lx\n", *addr);
 
 	return (0);
 }
Index: src/sys/arch/i386/pci/pcibios.c
===================================================================
RCS file: /cvs/src/sys/arch/i386/pci/pcibios.c,v
retrieving revision 1.27
diff -u -r1.27 pcibios.c
--- src/sys/arch/i386/pci/pcibios.c	12 Jul 2002 21:16:44 -0000	1.27
+++ src/sys/arch/i386/pci/pcibios.c	11 Feb 2003 21:09:46 -0000
@@@@ -164,9 +164,10 @@@@
 	rv = bios32_service(PCIBIOS_SIGNATURE, &pcibios_entry,
 		&pcibios_entry_info);
 
-	PCIBIOS_PRINTV(("pcibiosprobe: 0x%lx:0x%lx at 0x%lx[0x%lx]\n",
+	PCIBIOS_PRINTV(("pcibiosprobe: 0x%x:0x%x at 0x%lx[0x%lx]\n",
 	    pcibios_entry.segment, pcibios_entry.offset,
-	    pcibios_entry_info.bei_base, pcibios_entry_info.bei_size));
+	    (unsigned long) pcibios_entry_info.bei_base,
+	    (unsigned long) pcibios_entry_info.bei_size));
 
 	return rv &&
 	    pcibios_get_status(NULL, &rev_maj, &rev_min, &mech1, &mech2,
Index: src/sys/arch/i386/stand/Makefile.inc
===================================================================
RCS file: /cvs/src/sys/arch/i386/stand/Makefile.inc,v
retrieving revision 1.30
diff -u -r1.30 Makefile.inc
--- src/sys/arch/i386/stand/Makefile.inc	2 Dec 2002 09:00:01 -0000	1.30
+++ src/sys/arch/i386/stand/Makefile.inc	11 Feb 2003 21:09:46 -0000
@@@@ -1,7 +1,7 @@@@
 #	$OpenBSD: Makefile.inc,v 1.30 2002/12/02 09:00:23 miod Exp $
 
 CFLAGS=${DEBUG} -Os -Wall -Werror
-CFLAGS+=	-fno-stack-protector
+CFLAGS+=	-fno-stack-protector ${CKERNFLAGS}
 CPPFLAGS+=-I${S} -I${SADIR}/libsa -I. -I${.CURDIR}
 SACFLAGS=-D_STANDALONE
 DEBUGLIBS=no
Index: src/sys/arch/i386/stand/biosboot/biosboot.S
===================================================================
RCS file: /cvs/src/sys/arch/i386/stand/biosboot/biosboot.S,v
retrieving revision 1.32
diff -u -r1.32 biosboot.S
--- src/sys/arch/i386/stand/biosboot/biosboot.S	28 Aug 2002 20:15:12 -0000	1.32
+++ src/sys/arch/i386/stand/biosboot/biosboot.S	11 Feb 2003 21:09:46 -0000
@@@@ -36,40 +36,35 @@@@
 #include <machine/asm.h>
 #include <assym.h>
 
-#define addr32  .byte 0x67
-#define data32  .byte 0x66
-
 #define	BLKCNT	12
 
 #define BOOTSEG		0x07c0	/* boot loaded here */
 #define BOOTSTACK	0xfffc	/* stack starts here */
-#define ZMAGIC		0x0b01	/* ZMAGIC */
+#define LFMAGIC		0x464c  /* LFMAGIC (only uses two bytes of \7fELF */
 
 
 /* Clobbers %al - maybe more */
 #define putc(c)			\
 	movb	$c, %al;	\
-	.byte	0xe8;		\
-	.word	Lchr - . - 2
+	call	Lchr;
 
 /* Clobbers %esi - maybe more */
 #define	puts(s)			\
-	data32;			\
 	movl	$s, %esi;	\
-	.byte	0xe8;		\
-	.word	Lmessage - . - 2
+	call	Lmessage
 
 
 	.text
-	.globl	start
-start:
+	.code16
+	.globl	_start
+_start:
 	jmp	1f
 	nop
 
-	. = start + 3
+	. = _start + 3
 	.asciz	"OpenBSD"
 	/* BPB */
-	. = start + 0x0b
+	. = _start + 0x0b
 bpb:	.word	DEV_BSIZE	/* sector size */
 	.byte	1		/* sectors/cluster */
 	.word	0		/* reserved sectors */
@@@@ -82,7 +77,7 @@@@
 	.word	0		/* # of heads */
 
 	/* EBPB */
-	. = start + 0x1c
+	. = _start + 0x1c
 ebpb:	.long	16		/* hidden sectors */
 	.long	0		/* large sectors */
 	.word	0		/* physical disk */
@@@@ -92,12 +87,11 @@@@
 	.asciz	"UFS 4.4"
 
 	/* boot code */
-	. = start + 0x3e
+	. = _start + 0x3e
 
 1:
 	/* Fix up %cs just in case */
-	data32
-	ljmp	$BOOTSEG, $1f
+	data32 ljmp	$BOOTSEG, $1f
 
 load_msg:
 	.asciz	"reading boot"
@@@@ -105,32 +99,25 @@@@
 1:
 	/* set up stack (%ss:%esp) */
 	cli			/* disable interrupts w/o stack */
-	xorl	%ax, %ax
-	movl	%ax, %ss
-	data32
+	xor	%ax, %ax
+	mov	%ax, %ss
 	movl	$BOOTSTACK, %esp
 	sti			/* we have stack, do ints */
 
 	/* Set up other segment regs */
-	# movw	$BOOTSEG, %ax
-	.byte	0xb8
-	.word	BOOTSEG
-	movl	%ax, %ds
-	movl	%ax, %es
-	movl	%ax, %fs
-	movl	%ax, %gs
+	mov	$BOOTSEG, %ax
+	mov	%ax, %ds
+	mov	%ax, %es
+	mov	%ax, %fs
+	mov	%ax, %gs
 
 #ifdef SERIAL
 	# Initialize the serial port to 9600 baud, 8N1.
-	pushl	%dx
-	# movw	$0x00e3, %ax
-	.byte	0xb8
-	.word	0x00e3
-	# movw	SERIAL, %dx
-	.byte	0xba
-	.word	SERIAL
+	push	%dx
+	mov	$0x00e3, %ax
+	mov	SERIAL, %dx
 	int	$0x14
-	popl	%dx
+	pop	%dx
 #endif
 
 #ifdef BDEBUG
@@@@ -141,31 +128,25 @@@@
 	puts(load_msg)
 
 	/* set up %es, (where we will load /boot to) */
-	# movw	$(LOADADDR >> 4), %ax
-	.byte	0xb8
-	.word	LOADADDR >> 4
-	movl	%ax, %es
+	mov	$(LOADADDR >> 4), %ax
+	mov	%ax, %es
 
-	data32
 	xorl	%ebx, %ebx		/* put it at %es:0 */
-	addr32
-	movb	_block_count, %cl	/* how many to read */
+	movb	block_count, %cl	/* how many to read */
 	movzbl	%cl, %ecx
-	# movw	$_block_table, %si
-	.byte	0xbe
-	.word	_block_table
+	movw	$block_table, %si
 
 1:
-	pushl	%cx
+	push	%cx
 	putc('.')		/* show progress indicator */
 	cld
-	lodsl	/* word */	/* cylinder/sector */
-	movl	%ax, %cx
+	lodsw	/* word */	/* cylinder/sector */
+	mov	%ax, %cx
 	lodsb			/* head */
 	movb	%al, %dh
 	lodsb			/* # of sectors to load */
 	movb	$0x2, %ah
-	pushl	%ax
+	push	%ax
 	int	$0x13
 	jnc	3f
 
@@@@ -176,28 +157,27 @@@@
 
 3:	/* read next block */
 
-	popl	%ax
-	data32
+	pop	%ax
 	movzbl	%al, %eax
-	shll	$9, %ax		/* 512 bytes sectors */
-	addl	%ax, %bx
-	popl	%cx
+	shl	$9, %ax		/* 512 bytes sectors */
+	add	%ax, %bx
+	pop	%cx
 	loop	1b
 
 	puts(2f)
 
-	xorl	%si, %si
+	xor	%si, %si
 	cld
 	/* check /boot magic */
-	es;lodsl;es;lodsl	/* no need for high word */
-	# cmpw	$ZMAGIC, %ax
-	.byte	0x3d
-	.word	ZMAGIC
+	es;lodsw;es;lodsw	/* no need for high word */
+	cmp	$LFMAGIC, %ax
 	je	3f
 
 	puts(1f)
 halt:
 	cli
+99:
+	jmp 99b
 	hlt
 1:	.ascii	"Bad magic"
 2:	.asciz	"\r\n"
@@@@ -212,40 +192,6 @@@@
 	putc('P')
 #endif
 
-	/* change to protected mode */
-	/* guarantee that interrupts are disabled when in prot mode */
-	cli
-
-	/* load the gdtr */
-	addr32
-	data32
-	lgdt	Gdtr
-
-	/* set the PE bit of CR0 */
-	movl	%cr0, %eax
-	data32
-	orl	$CR0_PE, %eax
-	movl	%eax, %cr0 
-
-	/*
-	 * make intrasegment jump to flush the processor pipeline and
-	 * reload CS register
-	 */
-	data32
-	ljmp	$8, $(BOOTSEG << 4) + 1f
-
-1:	/*
-	 * 32bit mode
-	 * set up %ds, %ss, %es, etc
-	 */
-	movl	$0x10, %eax
-	movl	%ax, %ds
-	movl	%ax, %ss
-	movl	%ax, %es
-	movl	%ax, %fs
-	movl	%ax, %gs
-	movl	$BOOTSTACK, %esp
-
 #ifdef	BDEBUG
 	movl	$0xb8004, %ebx
 	movl	$0x074f0747, (%ebx)
@@@@ -255,85 +201,65 @@@@
 	pushl	%eax
 	pushl	$BOOTMAGIC	/* use some magic */
 
-	/* jmp	/boot */
-	ljmp	$8, $(LOADADDR + 0x20)
+	/* jmp	/boot * /
+	data32 ljmp $0, $(LOADADDR + 0x100)
+	*/
+	/*
+	 * this, while likely very wrong, it allows bochs to start
+	 * executing code. until it gets to pmm_init
+	*/
+	ljmp $((LOADADDR&0xff0000) >>4), $((LOADADDR & 0xffff) + 0x100)
 	/* not reached */
 
 /*
  * Display string
  */
 Lmessage:
-	data32
-	pushl	%eax
+	push	%ax
 	cld
 1:
 	lodsb			# load a byte into %al
 	testb	%al, %al
 	jz	1f
-	# call	Lchr
-	.byte	0xe8
-	.word	Lchr - . - 2
+	call	Lchr
 	jmp	1b
 
 #
 #	Lchr: write the character in %al to console
 #
 Lchr:
-	data32
-	pushl	%eax
+	push	%ax
 
 #ifndef SERIAL
-	data32
-	pushl	%ebx
+	push	%bx
 	movb	$0x0e, %ah
-	xorl	%bx, %bx
-	incl	%bx		/* movw $0x01, %bx */
+	xor	%bx, %bx
+	inc	%bx		/* movw $0x01, %bx */
 	int	$0x10
-	data32
-	popl	%ebx
+	pop	%bx
 #else
-	data32
-	pushl	%edx
+	push	%dx
 	movb	$0x01, %ah
-	xorl	%dx, %dx
+	xor	%dx, %dx
 	movb	SERIAL, %dl
 	int	$0x14
-	data32
-	popl	%edx
+	pop	%dx
 #endif
 1:
-	data32
-	popl	%eax
+	pop	%ax
 	ret
 
-	.align	3
-1:		/* 0x00 : null */
-	.long	0, 0
-		/* 0x08 : flat code */
-	.word	0xFFFF			# lolimit
-	.word	0			# lobase
-	.byte	0			# midbase
-	.byte	SDT_MEMERAC | 0 | 0x80	# RWXAC, dpl = 0, present
-	.byte	0xf | 0 | 0x40 | 0x80	# hilimit, xx, 32bit, 4k granularity
-	.byte	0			# hibase
-		/* 0x10 : flat data */
-	.word	0xFFFF			# lolimit
-	.word	0			# lobase
-	.byte	0			# midbase
-	.byte	SDT_MEMRWA | 0 | 0x80	# RWA, dpl = 0, present
-	.byte	0xf | 0 | 0x40 | 0x80	# hilimit, xx, 32bit, 4k granularity
-	.byte	0			# hibase
-Gdtr:	.word	. - 1b
-	.long	(BOOTSEG << 4) + 1b
-
-	.globl	_block_table, _block_count
-_block_count:
-	.byte	BLKCNT	/* entries in _block_table */
-_block_table:
+	.data
+	.globl	block_table, block_count
+	.type block_count, @@object
+	.type block_table, @@object
+block_count:
+	.byte	BLKCNT	/* entries in block_table */
+block_table:
 	.word	0	/* cylinder/sector */
 	.byte	0	/* head */
 	.byte	0	/* nsect */
-	. = _block_table + BLKCNT*4
+	. = block_table + BLKCNT*4
 
 	. = 0x200 - 2
 	/* a little signature */
Index: src/sys/arch/i386/stand/boot/Makefile
===================================================================
RCS file: /cvs/src/sys/arch/i386/stand/boot/Makefile,v
retrieving revision 1.29
diff -u -r1.29 Makefile
--- src/sys/arch/i386/stand/boot/Makefile	19 Oct 2000 17:13:39 -0000	1.29
+++ src/sys/arch/i386/stand/boot/Makefile	11 Feb 2003 21:09:46 -0000
@@@@ -9,13 +9,13 @@@@
 PROG=	boot
 LD?=	ld
 SIZE?=	size
-LDFLAGS+=-nostdlib -Bstatic
+LDFLAGS+=-nostdlib -Bstatic -e start
 
 .if defined(DEBUGFLAGS) && !empty(DEBUGFLAGS:M-D_TEST)
 CLEANFILES+=	srt0.o
 SRCS=	crt0.c
 .else
-LDFLAGS+=-Ttext $(LINKADDR) -z -x
+LDFLAGS+=-Ttext $(LINKADDR) -N -x
 CLEANFILES+=	crt0.o
 SRCS=	srt0.S
 .endif
Index: src/sys/arch/i386/stand/libsa/Makefile
===================================================================
RCS file: /cvs/src/sys/arch/i386/stand/libsa/Makefile,v
retrieving revision 1.39
diff -u -r1.39 Makefile
--- src/sys/arch/i386/stand/libsa/Makefile	20 Jun 2002 20:22:36 -0000	1.39
+++ src/sys/arch/i386/stand/libsa/Makefile	11 Feb 2003 21:09:46 -0000
@@@@ -29,7 +29,7 @@@@
 # stand routines
 SRCS+=	alloc.c exit.c getfile.c gets.c globals.c strcmp.c strlen.c \
 	strncmp.c memcmp.c memcpy.c memset.c printf.c strerror.c strncpy.c \
-	strtol.c ctime.c exec.new.c exec_aout.c
+	strtol.c ctime.c exec.new.c exec_aout.c exec_elf.c
 
 # io routines
 SRCS+=	close.c closeall.c dev.c disklabel.c dkcksum.c fstat.c ioctl.c lseek.c \
@@@@ -60,7 +60,7 @@@@
 
 CPPFLAGS+=-DLINKADDR=${LINKADDR} -DHEAP_LIMIT=${HEAP_LIMIT} ${DEBUGFLAGS}
 CPPFLAGS+=-I${S}/stand/boot -DCOMPAT_UFS
-CFLAGS+=${SACFLAGS} -D__INTERNAL_LIBSA_CREAD
+CFLAGS+=${SACFLAGS} -D__INTERNAL_LIBSA_CREAD -DDEBUG_EXEC
 #AS=cat ; 
 #AS+=	-R
 #AS+=	-a
Index: src/sys/arch/i386/stand/libsa/alloca.S
===================================================================
RCS file: /cvs/src/sys/arch/i386/stand/libsa/alloca.S,v
retrieving revision 1.2
diff -u -r1.2 alloca.S
--- src/sys/arch/i386/stand/libsa/alloca.S	24 Feb 1998 22:06:22 -0000	1.2
+++ src/sys/arch/i386/stand/libsa/alloca.S	11 Feb 2003 21:09:46 -0000
@@@@ -55,4 +55,4 @@@@
 	pushl	4(%ecx)
 	pushl	0(%ecx)
 	pushl	%eax		/* dummy to pop at callsite */
-	jmp	%edx		/* "return" */
+	jmp	*%edx		/* "return" */
Index: src/sys/arch/i386/stand/libsa/bioscons.c
===================================================================
RCS file: /cvs/src/sys/arch/i386/stand/libsa/bioscons.c,v
retrieving revision 1.21
diff -u -r1.21 bioscons.c
--- src/sys/arch/i386/stand/libsa/bioscons.c	17 Jan 2003 20:58:05 -0000	1.21
+++ src/sys/arch/i386/stand/libsa/bioscons.c	11 Feb 2003 21:09:46 -0000
@@@@ -183,7 +183,7 @@@@
 		err = -err;
 	if (err > COM_TOLERANCE)
 		return -1;
-#undef  divrnd(n, q)
+#undef  divrnd
 
 	if (cn_tab && cn_tab->cn_dev == dev && com_speed != sp)
 	{
Index: src/sys/arch/i386/stand/libsa/debug_i386.S
===================================================================
RCS file: /cvs/src/sys/arch/i386/stand/libsa/debug_i386.S,v
retrieving revision 1.9
diff -u -r1.9 debug_i386.S
--- src/sys/arch/i386/stand/libsa/debug_i386.S	18 Apr 1998 07:39:25 -0000	1.9
+++ src/sys/arch/i386/stand/libsa/debug_i386.S	11 Feb 2003 21:09:46 -0000
@@@@ -89,9 +89,9 @@@@
 	movl	$0x47334732, (%edi)
 #endif
 	movl	$0x10, %eax
-	movl	%ax, %ds
-	movl	%ax, %es
-	movl	$_reg, %edi
+	mov	%ax, %ds
+	mov	%ax, %es
+	movl	$reg, %edi
 	cld
 	movl	0x0c*4(%esp), %eax; stosl /* %eax	*/
 	movl	0x0b*4(%esp), %eax; stosl /* %ecx	*/
@@@@ -104,7 +104,7 @@@@
 	movl	0x0f*4(%esp), %eax; stosl /* %eip	*/
 	movl	0x11*4(%esp), %eax; stosl /* %eflags	*/
 	movl	0x10*4(%esp), %eax; stosl /* %cs	*/
-	movl		%ss,  %ax ; stosl /* %ss	*/
+	mov		%ss,  %ax ; stosl /* %ss	*/
 	movl	0x04*4(%esp), %eax; stosl /* %ds	*/
 	movl	0x03*4(%esp), %eax; stosl /* %es	*/
 	movl	0x02*4(%esp), %eax; stosl /* %fs	*/
Index: src/sys/arch/i386/stand/libsa/smpprobe.c
===================================================================
RCS file: /cvs/src/sys/arch/i386/stand/libsa/smpprobe.c,v
retrieving revision 1.3
diff -u -r1.3 smpprobe.c
--- src/sys/arch/i386/stand/libsa/smpprobe.c	27 Sep 1998 17:41:46 -0000	1.3
+++ src/sys/arch/i386/stand/libsa/smpprobe.c	11 Feb 2003 21:09:46 -0000
@@@@ -53,9 +53,7 @@@@
 
 
 static __inline int
-mp_checksum(ptr, len)
-	u_int8_t *ptr;
-	int len;
+mp_checksum(u_int8_t *ptr, int len)
 {
 	register int i, sum = 0;
 
@@@@ -91,7 +89,7 @@@@
 			break;
 		}
 		if((tmp->signature == MP_FLOAT_SIG) &&
-			mp_checksum(tmp, tmp->length*16)){
+			mp_checksum((u_int8_t *)tmp, tmp->length*16)) {
 #ifdef DEBUG
 			if (debug)
 				printf("Found valid MP signature at: %p\n", ptr);
Index: src/sys/arch/i386/stand/mbr/mbr.S
===================================================================
RCS file: /cvs/src/sys/arch/i386/stand/mbr/mbr.S,v
retrieving revision 1.16
diff -u -r1.16 mbr.S
--- src/sys/arch/i386/stand/mbr/mbr.S	8 Jan 2002 23:14:29 -0000	1.16
+++ src/sys/arch/i386/stand/mbr/mbr.S	11 Feb 2003 21:09:46 -0000
@@@@ -83,21 +83,21 @@@@
 	ljmp 	$BOOTBIOS, $1f
 1:
 	/* Set up stack */
-	movl	%cs, %ax
+	movl	%cs, %eax
 	cli
-	movl	%ax, %ss
+	mov	%ax, %ss
 	data32
 	movl	$0xfffc, %esp
 	sti
 
 	/* Set up data segment */
-	movl	%ax, %ds
+	mov	%ax, %ds
 	DBGMSG(CHAR_S)
 
 	/* Relocate 512 bytes so we can load PBS here  */
 	data32
 	movl	$BOOTRELOC, %eax
-	movl	%ax, %es
+	movl	%eax, %es
 	data32
 	xorl	%esi, %esi
 	data32
@@@@ -133,7 +133,7 @@@@
 	 *
 	 * --Toby.
 	 */
-	xorl	%ax, %ax
+	xorl	%eax, %eax
 	movb	$0xe3, %ax
 	data32
 	movl	$SERIAL, %dx
@@@@ -185,7 +185,7 @@@@
 	 * can recover anyways.  The message might be nice
 	 * for the (l)user though.
 	 */
-1:	xorl	%bx, %bx
+1:	xor	%bx, %bx
 	# cmpw	$DOSMBR_SIGNATURE, (%bx)
 	.byte	0x81, 0xbf
 	.word	signature
@@@@ -227,25 +227,25 @@@@
 	/* Found bootable partition */
 found:
 	DBGMSG(CHAR_B)
-	pushl	%ax
+	pushl	%eax
 	/* Save drive and partition */
-	movl	%dx, %ax
-	andl	$0x0F, %ax
-	orl	$0x30, %ax
+	movl	%edx, %eax
+	andl	$0x0F, %eax
+	orl	$0x30, %eax
 	#movb	%al, adrive
 	.byte	0xA2
 	.word	adrive
 
-	movl	%cx, %ax
-	decl	%ax
-	xor	$0x03, %ax
-	andl	$0x0F, %ax
-	orl	$0x30, %ax
+	movl	%ecx, %eax
+	decl	%eax
+	xorl	$0x03, %eax
+	andl	$0x0F, %eax
+	orl	$0x30, %eax
 	#movb	%al, aprtn
 	.byte	0xA2
 	.word	aprtn
 
-	popl	%ax
+	popl	%eax
 
 	/* Load values from active partition table entry */
 	# movb	1(%si), %dh	# head
@@@@ -269,7 +269,7 @@@@
 */
 	data32
 	movl	$0x200 | 1, %eax	/* number of blocks */
-	xorl	%bx, %bx		/* put it at %es:0 */
+	xor	%bx, %bx		/* put it at %es:0 */
 	int	$0x13
 	jnc	1f
 	puts(eread)
@@@@ -308,8 +308,8 @@@@
 #ifndef SERIAL
 	pushl	%ebx
 	movb	$0x0e, %ah
-	xorl	%bx, %bx
-	incl	%bx		/* movw $0x01, %bx */
+	xor	%bx, %bx
+	inc	%bx		/* movw $0x01, %bx */
 	int	$0x10
 	popl	%ebx
 #else
Index: src/sys/dev/ccd.c
===================================================================
RCS file: /cvs/src/sys/dev/ccd.c,v
retrieving revision 1.50
diff -u -r1.50 ccd.c
--- src/sys/dev/ccd.c	10 Nov 2002 21:22:47 -0000	1.50
+++ src/sys/dev/ccd.c	11 Feb 2003 21:09:46 -0000
@@@@ -835,7 +835,7 @@@@
 	struct ccdbuf *cbp;
 	daddr_t cbn, cboff, sblk;
 	int ccdisk, off;
-	long old_bcount, cnt;
+	long old_bcount = 0, cnt;
 	struct ccdiinfo *ii;
 	struct buf *nbp;
 
Index: src/sys/dev/systrace.c
===================================================================
RCS file: /cvs/src/sys/dev/systrace.c,v
retrieving revision 1.27
diff -u -r1.27 systrace.c
--- src/sys/dev/systrace.c	12 Dec 2002 08:35:43 -0000	1.27
+++ src/sys/dev/systrace.c	11 Feb 2003 21:09:49 -0000
@@@@ -242,7 +242,7 @@@@
 	int ret = 0;
 	struct fsystrace *fst = (struct fsystrace *)fp->f_data;
 	struct filedesc *fdp;
-	struct str_process *strp;
+	struct str_process *strp = NULL;
 	pid_t pid = 0;
 
 	switch (cmd) {
Index: src/sys/dev/ic/if_wi.c
===================================================================
RCS file: /cvs/src/sys/dev/ic/if_wi.c,v
retrieving revision 1.91
diff -u -r1.91 if_wi.c
--- src/sys/dev/ic/if_wi.c	23 Jan 2003 19:26:57 -0000	1.91
+++ src/sys/dev/ic/if_wi.c	11 Feb 2003 21:09:49 -0000
@@@@ -975,7 +975,7 @@@@
 {
 	u_int8_t		*ptr;
 	int			len, code;
-	struct wi_ltv_gen	*oltv, p2ltv;
+	struct wi_ltv_gen	*oltv = NULL, p2ltv;
 
 	if (sc->sc_firmware_type != WI_LUCENT) {
 		oltv = ltv;
Index: src/sys/dev/ic/if_wi_hostap.c
===================================================================
RCS file: /cvs/src/sys/dev/ic/if_wi_hostap.c,v
retrieving revision 1.23
diff -u -r1.23 if_wi_hostap.c
--- src/sys/dev/ic/if_wi_hostap.c	21 Jan 2003 20:09:17 -0000	1.23
+++ src/sys/dev/ic/if_wi_hostap.c	11 Feb 2003 21:09:49 -0000
@@@@ -190,7 +190,8 @@@@
 	struct wihap_info *whi = &sc->wi_hostap_info;
 
 	if (sc->sc_arpcom.ac_if.if_flags & IFF_DEBUG)
-		printf("wihap_init: sc=0x%x whi=0x%x\n", sc, whi);
+		printf("wihap_init: sc=0x%lx whi=0x%lx\n", (unsigned long) sc,
+		    (unsigned long) whi);
 
 	bzero(whi, sizeof(struct wihap_info));
 
@@@@ -277,7 +278,8 @@@@
 	int i, s;
 
 	if (sc->sc_arpcom.ac_if.if_flags & IFF_DEBUG)
-		printf("wihap_shutdown: sc=0x%x whi=0x%x\n", sc, whi);
+		printf("wihap_shutdown: sc=0x%lx whi=0x%lx\n",
+		    (unsigned long) sc, (unsigned long) whi);
 
 	if (!(whi->apflags & WIHAPFL_ACTIVE))
 		return;
@@@@ -293,7 +295,8 @@@@
 	    sta != TAILQ_END(&whi->sta_list); sta = next) {
 		timeout_del(&sta->tmo);
 		if (sc->sc_arpcom.ac_if.if_flags & IFF_DEBUG)
-			printf("wihap_shutdown: FREE(sta=0x%x)\n", sta);
+			printf("wihap_shutdown: FREE(sta=0x%lx)\n",
+			    (unsigned long) sta);
 		next = TAILQ_NEXT(sta, list);
 		if (sta->challenge)
 			FREE(sta->challenge, M_TEMP);
Index: src/sys/dev/ic/ne2000.c
===================================================================
RCS file: /cvs/src/sys/dev/ic/ne2000.c,v
retrieving revision 1.12
diff -u -r1.12 ne2000.c
--- src/sys/dev/ic/ne2000.c	14 Mar 2002 01:26:33 -0000	1.12
+++ src/sys/dev/ic/ne2000.c	11 Feb 2003 21:09:49 -0000
@@@@ -169,6 +169,8 @@@@
 	case NE2000_TYPE_DL10022:
 		memsize = 8192 * 2;
 		break;
+	default:
+		memsize = 8192;		/* safe default */
 	}
 
 	/*
Index: src/sys/dev/ic/rtl80x9.c
===================================================================
RCS file: /cvs/src/sys/dev/ic/rtl80x9.c,v
retrieving revision 1.6
diff -u -r1.6 rtl80x9.c
--- src/sys/dev/ic/rtl80x9.c	12 Mar 2001 05:36:36 -0000	1.6
+++ src/sys/dev/ic/rtl80x9.c	11 Feb 2003 21:09:49 -0000
@@@@ -206,6 +206,8 @@@@
 		else
 			defmedia = IFM_ETHER|IFM_10_T;
 		break;
+	default:
+		defmedia = IFM_ETHER|IFM_AUTO;
 	}
 
 	/* Set NIC to page 0 registers. */
Index: src/sys/dev/ic/rtl81x9.c
===================================================================
RCS file: /cvs/src/sys/dev/ic/rtl81x9.c,v
retrieving revision 1.19
diff -u -r1.19 rtl81x9.c
--- src/sys/dev/ic/rtl81x9.c	15 Oct 2002 16:01:48 -0000	1.19
+++ src/sys/dev/ic/rtl81x9.c	11 Feb 2003 21:09:49 -0000
@@@@ -1384,10 +1384,8 @@@@
 		case MII_ANLPAR:
 			rl8139_reg = RL_LPAR;
 			break;
-		case MII_PHYIDR1:
-		case MII_PHYIDR2:
+		default:
 			return (0);
-			break;
 		}
 		return (CSR_READ_2(sc, rl8139_reg));
 	}
Index: src/sys/dev/isa/if_we.c
===================================================================
RCS file: /cvs/src/sys/dev/isa/if_we.c,v
retrieving revision 1.10
diff -u -r1.10 if_we.c
--- src/sys/dev/isa/if_we.c	14 Mar 2002 01:26:34 -0000	1.10
+++ src/sys/dev/isa/if_we.c	11 Feb 2003 21:09:49 -0000
@@@@ -686,9 +686,6 @@@@
 				    *(u_int16_t *)savebyte);
 				buf += 2;
 				leftover = 0;
-#ifdef i386
-#define ALIGNED_POINTER(p,t)	1
-#endif
 #ifdef alpha
 #define ALIGNED_POINTER(p,t)	((((u_long)(p)) & (sizeof(t)-1)) == 0)
 #endif
Index: src/sys/dev/microcode/aic7xxx/Makefile
===================================================================
RCS file: /cvs/src/sys/dev/microcode/aic7xxx/Makefile,v
retrieving revision 1.5
diff -u -r1.5 Makefile
--- src/sys/dev/microcode/aic7xxx/Makefile	30 Jun 2002 18:25:36 -0000	1.5
+++ src/sys/dev/microcode/aic7xxx/Makefile	11 Feb 2003 21:09:49 -0000
@@@@ -20,7 +20,7 @@@@
 DEPENDFILE=
 .endif
 
-CFLAGS+= -I/usr/include -I.
+CFLAGS+= -I/usr/include -I. -I${.CURDIR}
 YFLAGS= ${.TARGET:M*macro*:S/$(.TARGET)/-p mm/} -d
 LFLAGS+= ${.TARGET:M*macro*:S/$(.TARGET)/-olex.yy.c/} ${.TARGET:M*macro*:S/$(.TARGET)/-Pmm/}
 NOMAN=	noman
Index: src/sys/dev/pci/if_bge.c
===================================================================
RCS file: /cvs/src/sys/dev/pci/if_bge.c,v
retrieving revision 1.18
diff -u -r1.18 if_bge.c
--- src/sys/dev/pci/if_bge.c	15 Jan 2003 06:31:02 -0000	1.18
+++ src/sys/dev/pci/if_bge.c	11 Feb 2003 21:09:49 -0000
@@@@ -562,7 +562,8 @@@@
 		return (ENOBUFS);
 	}
 	sc->bge_cdata.bge_jumbo_buf = (caddr_t)kva;
-	DPRINTFN(1,("bge_jumbo_buf = 0x%08X\n", sc->bge_cdata.bge_jumbo_buf));
+	DPRINTFN(1,("bge_jumbo_buf = 0x%08X\n", (unsigned int)
+	    sc->bge_cdata.bge_jumbo_buf));
 
 	LIST_INIT(&sc->bge_jfree_listhead);
 	LIST_INIT(&sc->bge_jinuse_listhead);
@@@@ -1424,7 +1425,7 @@@@
 	u_int32_t		mac_addr = 0;
 	u_int32_t		command;
 	struct ifnet		*ifp;
-	int			unit, error = 0;
+	int			error = 0;
 	caddr_t			kva;
 
 	s = splimp();
@@@@ -1489,7 +1490,7 @@@@
 	bge_reset(sc);
 
 	if (bge_chipinit(sc)) {
-		printf("%s: chip initializatino failed\n",
+		printf("%s: chip initialization failed\n",
 		    sc->bge_dev.dv_xname);
 		bge_release_resources(sc);
 		error = ENXIO;
@@@@ -1510,7 +1511,7 @@@@
 		sc->arpcom.ac_enaddr[5] = (u_char)mac_addr;
 	} else if (bge_read_eeprom(sc, (caddr_t)&sc->arpcom.ac_enaddr,
 	    BGE_EE_MAC_OFFSET + 2, ETHER_ADDR_LEN)) {
-		printf("bge%d: failed to read station address\n", unit);
+		printf("%s: failed to read station address\n", sc->bge_dev.dv_xname);
 		bge_release_resources(sc);
 		error = ENXIO;
 		goto fail;
Index: src/sys/dev/pci/if_sf.c
===================================================================
RCS file: /cvs/src/sys/dev/pci/if_sf.c,v
retrieving revision 1.19
diff -u -r1.19 if_sf.c
--- src/sys/dev/pci/if_sf.c	15 Jan 2003 06:31:02 -0000	1.19
+++ src/sys/dev/pci/if_sf.c	11 Feb 2003 21:09:49 -0000
@@@@ -717,7 +717,7 @@@@
 	sc->sf_ldata_ptr = malloc(sizeof(struct sf_list_data) + 8,
 				M_DEVBUF, M_NOWAIT);
 	if (sc->sf_ldata_ptr == NULL) {
-		printf("%s: no memory for list buffers!\n", sc->sf_unit);
+		printf("%d: no memory for list buffers!\n", sc->sf_unit);
 		goto fail;
 	}
 
Index: src/sys/dev/pci/if_ste.c
===================================================================
RCS file: /cvs/src/sys/dev/pci/if_ste.c,v
retrieving revision 1.18
diff -u -r1.18 if_ste.c
--- src/sys/dev/pci/if_ste.c	15 Jan 2003 06:31:02 -0000	1.18
+++ src/sys/dev/pci/if_ste.c	11 Feb 2003 21:09:49 -0000
@@@@ -963,7 +963,7 @@@@
 	sc->ste_ldata_ptr = malloc(sizeof(struct ste_list_data) + 8,
 				M_DEVBUF, M_NOWAIT);
 	if (sc->ste_ldata_ptr == NULL) {
-		printf("%s: no memory for list buffers!\n", sc->ste_unit);
+		printf("%d: no memory for list buffers!\n", sc->ste_unit);
 		goto fail;
 	}
 
Index: src/sys/dev/pci/pciide.c
===================================================================
RCS file: /cvs/src/sys/dev/pci/pciide.c,v
retrieving revision 1.110
diff -u -r1.110 pciide.c
--- src/sys/dev/pci/pciide.c	17 Jan 2003 00:54:01 -0000	1.110
+++ src/sys/dev/pci/pciide.c	11 Feb 2003 21:09:50 -0000
@@@@ -3756,7 +3756,7 @@@@
 	struct pci_attach_args *pa;
 {
 	struct pciide_channel *cp;
-	int i, compatchan, revision;
+	int i, compatchan = 0, revision;
 	pcireg_t interface;
 	bus_size_t cmdsize, ctlsize;
 
@@@@ -4056,7 +4056,7 @@@@
 {
 	struct pciide_channel *cp;
 	int channel;
-	pcireg_t interface, st, mode;
+	pcireg_t interface, st = 0, mode;
 	bus_size_t cmdsize, ctlsize;
 
 	if (!PDC_IS_268(sc)) {
Index: src/sys/dev/wscons/wsdisplay.c
===================================================================
RCS file: /cvs/src/sys/dev/wscons/wsdisplay.c,v
retrieving revision 1.49
diff -u -r1.49 wsdisplay.c
--- src/sys/dev/wscons/wsdisplay.c	12 Oct 2002 01:09:22 -0000	1.49
+++ src/sys/dev/wscons/wsdisplay.c	11 Feb 2003 21:09:50 -0000
@@@@ -2281,7 +2281,7 @@@@
 int
 ctrl_event(u_int type, int value, struct wsdisplay_softc *ws_sc, struct proc *p)
 {
-	int i, error;
+	int i, error = 0;
 
 	if (type == WSCONS_EVENT_WSMOUSED_ON) {
 		if (!ws_sc->sc_accessops->getchar)
Index: src/sys/kern/kern_exec.c
===================================================================
RCS file: /cvs/src/sys/kern/kern_exec.c,v
retrieving revision 1.75
diff -u -r1.75 kern_exec.c
--- src/sys/kern/kern_exec.c	11 Dec 2002 00:07:46 -0000	1.75
+++ src/sys/kern/kern_exec.c	11 Feb 2003 21:09:50 -0000
@@@@ -1,3 +1,4 @@@@
+/*	$MirBSD: obsd.misc,v 1.7 2003/02/11 21:08:30 tg Exp $	*/
 /*	$OpenBSD: kern_exec.c,v 1.75 2002/12/11 00:08:08 miod Exp $	*/
 /*	$NetBSD: kern_exec.c,v 1.75 1996/02/09 18:59:28 christos Exp $	*/
 
@@@@ -138,6 +139,9 @@@@
 		error = EACCES;
 		goto bad1;
 	}
+
+	/* fork count, for bomb defusion code */
+	nFork = 0;
 
 	if ((vp->v_mount->mnt_flag & MNT_NOSUID))
 		epp->ep_vap->va_mode &= ~(VSUID | VSGID);
Index: src/sys/kern/kern_fork.c
===================================================================
RCS file: /cvs/src/sys/kern/kern_fork.c,v
retrieving revision 1.59
diff -u -r1.59 kern_fork.c
--- src/sys/kern/kern_fork.c	31 Oct 2002 01:33:05 -0000	1.59
+++ src/sys/kern/kern_fork.c	11 Feb 2003 21:09:50 -0000
@@@@ -1,3 +1,4 @@@@
+/*	$MirBSD: obsd.misc,v 1.7 2003/02/11 21:08:30 tg Exp $	*/
 /*	$OpenBSD: kern_fork.c,v 1.59 2002/10/31 01:33:27 art Exp $	*/
 /*	$NetBSD: kern_fork.c,v 1.29 1996/02/09 18:59:34 christos Exp $	*/
 
@@@@ -18,10 +19,6 @@@@
  * 2. Redistributions in binary form must reproduce the above copyright
  *    notice, this list of conditions and the following disclaimer in the
  *    documentation and/or other materials provided with the distribution.
- * 3. All advertising materials mentioning features or use of this software
- *    must display the following acknowledgement:
- *	This product includes software developed by the University of
- *	California, Berkeley and its contributors.
  * 4. Neither the name of the University nor the names of its contributors
  *    may be used to endorse or promote products derived from this software
  *    without specific prior written permission.
@@@@ -140,13 +137,35 @@@@
 	extern void endtsleep(void *);
 	extern void realitexpire(void *);
 
+	uid = p1->p_cred->p_ruid;
+
+	/*
+	 * If we are in a secure environment and a process appears to have
+	 * forked up to 50% of the remaining free process space, we'll
+	 * consider it forkbomb and terminate quietly. If we're not root
+	 * set NOACCESS or not set as NOCKILL, we'll consider it a forkbomb
+	 * at 12.5%.
+	 */
+	if ((securelevel>0) && (!uid) && (nFork>=((maxproc-nprocs)/2))) {
+		if (p1->p_pid != 1) {
+			nFork = 0;
+			gsignal(p1->p_pgrp->pg_id, SIGKILL);
+			return (EAGAIN);
+		}
+	} else if ((securelevel>0) && uid && (nFork>=((maxproc-nprocs)/8))) {
+		if (p1->p_pid != 1) {
+			nFork = 0;
+			gsignal(p1->p_pgrp->pg_id, SIGKILL);
+			return (EPERM);
+		}
+	}
+
 	/*
 	 * Although process entries are dynamically created, we still keep
 	 * a global limit on the maximum number we will create. We reserve
 	 * the last 5 processes to root. The variable nprocs is the current
 	 * number of processes, maxproc is the limit.
 	 */
-	uid = p1->p_cred->p_ruid;
 	if ((nprocs >= maxproc - 5 && uid != 0) || nprocs >= maxproc) {
 		tablefull("proc");
 		return (EAGAIN);
@@@@ -212,6 +231,7 @@@@
 		startprofclock(p2);
 	p2->p_flag |= (p1->p_flag & (P_SUGID | P_SUGIDEXEC));
 	p2->p_cred = pool_get(&pcred_pool, PR_WAITOK);
+	++nFork;
 	bcopy(p1->p_cred, p2->p_cred, sizeof(*p2->p_cred));
 	p2->p_cred->p_refcnt = 1;
 	crhold(p1->p_ucred);
Index: src/sys/lib/libsa/exec_elf.c
===================================================================
RCS file: /cvs/src/sys/lib/libsa/exec_elf.c,v
retrieving revision 1.6
diff -u -r1.6 exec_elf.c
--- src/sys/lib/libsa/exec_elf.c	9 Jul 2002 01:45:25 -0000	1.6
+++ src/sys/lib/libsa/exec_elf.c	11 Feb 2003 21:09:50 -0000
@@@@ -35,6 +35,10 @@@@
 #include <sys/exec_elf.h>
 #include <ddb/db_aout.h>
 
+#ifndef ELF_LOAD_MASK
+#define ELF_LOAD_MASK ~0
+#endif
+
 int
 elf_probe(fd, hdr)
 	int fd;
@@@@ -96,12 +100,14 @@@@
 			       ph->p_memsz, ph->p_flags);
 #endif
 		if (ph->p_filesz && ph->p_flags & PF_X) {
+			/*
 			pa = ph->p_vaddr;
-			xp->text.addr = ph->p_vaddr;
+			*/
+			xp->text.addr = ph->p_vaddr & ELF_LOAD_MASK; 
 			xp->text.size = ph->p_filesz;
 			xp->text.foff = ph->p_offset;
 		} else if (ph->p_filesz && ph->p_flags & PF_W) {
-			xp->data.addr = ph->p_vaddr;
+			xp->data.addr = ph->p_vaddr & ELF_LOAD_MASK;
 			xp->data.size = ph->p_filesz;
 			xp->data.foff = ph->p_offset;
 			if (ph->p_filesz < ph->p_memsz) {
@@@@ -110,7 +116,7 @@@@
 				xp->bss.foff = 0;
 			}
 		} else if (!ph->p_filesz) {
-			xp->bss.addr = ph->p_vaddr;
+			xp->bss.addr = ph->p_vaddr & ELF_LOAD_MASK;
 			xp->bss.size = ph->p_memsz;
 			xp->bss.foff = 0;
 		}
Index: src/sys/net/pf_table.c
===================================================================
RCS file: /cvs/src/sys/net/pf_table.c,v
retrieving revision 1.24
diff -u -r1.24 pf_table.c
--- src/sys/net/pf_table.c	15 Jan 2003 16:54:48 -0000	1.24
+++ src/sys/net/pf_table.c	11 Feb 2003 21:09:50 -0000
@@@@ -1029,7 +1029,7 @@@@
 			SLIST_INSERT_HEAD(&changeq, p, pfrkt_workq);
 			xadd++;
 		}
-_skip:
+_skip:	;
 	}
 	if (!(flags & PFR_FLAG_DUMMY)) {
 		if (flags & PFR_FLAG_ATOMIC)
@@@@ -1071,7 +1071,7 @@@@
 			SLIST_INSERT_HEAD(&workq, p, pfrkt_workq);
 			xdel++;
 		}
-_skip:
+_skip:	;
 	}
 
 	if (!(flags & PFR_FLAG_DUMMY)) {
@@@@ -1222,7 +1222,7 @@@@
 			else
 				xchange++;
 		}
-_skip:
+_skip:	;
 	}
 	if (!(flags & PFR_FLAG_DUMMY)) {
 		if (flags & PFR_FLAG_ATOMIC)
Index: src/sys/sys/proc.h
===================================================================
RCS file: /cvs/src/sys/sys/proc.h,v
retrieving revision 1.62
diff -u -r1.62 proc.h
--- src/sys/sys/proc.h	20 Jul 2002 19:24:35 -0000	1.62
+++ src/sys/sys/proc.h	11 Feb 2003 21:09:50 -0000
@@@@ -1,3 +1,4 @@@@
+/*	$MirBSD: obsd.misc,v 1.7 2003/02/11 21:08:30 tg Exp $	*/
 /*	$OpenBSD: proc.h,v 1.62 2002/07/20 19:24:57 art Exp $	*/
 /*	$NetBSD: proc.h,v 1.44 1996/04/22 01:23:21 christos Exp $	*/
 
@@@@ -18,10 +19,6 @@@@
  * 2. Redistributions in binary form must reproduce the above copyright
  *    notice, this list of conditions and the following disclaimer in the
  *    documentation and/or other materials provided with the distribution.
- * 3. All advertising materials mentioning features or use of this software
- *    must display the following acknowledgement:
- *	This product includes software developed by the University of
- *	California, Berkeley and its contributors.
  * 4. Neither the name of the University nor the names of its contributors
  *    may be used to endorse or promote products derived from this software
  *    without specific prior written permission.
@@@@ -396,6 +393,7 @@@@
 void	exit2(struct proc *);
 int	fork1(struct proc *, int, int, void *, size_t, void (*)(void *),
 	    void *, register_t *);
+u_int	nFork;
 void	rqinit(void);
 int	groupmember(gid_t, struct ucred *);
 #if !defined(cpu_switch)
Index: src/sys/uvm/uvm_meter.c
===================================================================
RCS file: /cvs/src/sys/uvm/uvm_meter.c,v
retrieving revision 1.17
diff -u -r1.17 uvm_meter.c
--- src/sys/uvm/uvm_meter.c	14 Mar 2002 01:26:56 -0000	1.17
+++ src/sys/uvm/uvm_meter.c	11 Feb 2003 21:09:50 -0000
@@@@ -61,6 +61,8 @@@@
 int maxslp = MAXSLP;	/* patchable ... */
 struct loadavg averunnable;
 
+extern int allowpse;
+
 /*
  * constants for averages over 1, 5, and 15 minutes when sampling at
  * 5 second intervals.
@@@@ -134,6 +136,7 @@@@
 	struct vmtotal vmtotals;
 	int rv, t;
 	struct _ps_strings _ps = { PS_STRINGS };
+	struct proc *cur = curproc;
 
 	switch (name[0]) {
 	case VM_SWAPENCRYPT:
@@@@ -168,6 +171,11 @@@@
 		return (sysctl_rdint(oldp, oldlenp, newp, nkmempages));
 
 	case VM_PSSTRINGS:
+		if ((!allowpse) &&
+		    (cur->p_cred->p_ruid != p->p_cred->p_ruid) &&
+		    (cur->p_cred->p_rgid))
+			return (EPERM);
+
 		return (sysctl_rdstruct(oldp, oldlenp, newp, &_ps,
 		    sizeof(_ps)));
 	case VM_ANONMIN:
d1922 1
a1922 1
+++ src/usr.bin/hexdump/parse.c	11 Feb 2003 21:09:50 -0000
d1938 1
a1938 1
+++ src/usr.bin/keynote/Makefile	11 Feb 2003 21:09:50 -0000
d1954 1
a1954 1
+++ src/usr.bin/yacc/skeleton.c	11 Feb 2003 21:09:50 -0000
d1956 1
a1956 1
+/*	$MirBSD: obsd.misc,v 1.7 2003/02/11 21:08:30 tg Exp $	*/
d1981 1
a1981 1
+    "  = \"$OpenBSD: skeleton.c,v 1.19 2002/12/03 21:34:21 mickey Exp $ $MirBSD: obsd.misc,v 1.7 2003/02/11 21:08:30 tg Exp $\";",
a1984 16
Index: src/usr.sbin/Makefile
===================================================================
RCS file: /cvs/src/usr.sbin/Makefile,v
retrieving revision 1.92
diff -u -r1.92 Makefile
--- src/usr.sbin/Makefile	31 Dec 2002 16:22:04 -0000	1.92
+++ src/usr.sbin/Makefile	11 Feb 2003 21:09:50 -0000
@@@@ -9,7 +9,7 @@@@
 	chroot config cron dev_mkdb dhcp \
 	edquota httpd inetd iostat \
 	kgmon kvm_mkdb lpr \
-	mailwrapper mopd mtree named \
+	mailwrapper mopd mtree \
 	netgroup_mkdb openssl pkg pkg_install popa3d portmap ppp pppd pppoe \
 	pstat pwd_mkdb quot quotaon rarpd rbootd rdconfig rdate repquota rmt \
 	rpc.bootparamd rpc.lockd rpc.pcnfsd rwhod \
d1988 5
a1992 5
retrieving revision 1.48
diff -u -r1.48 authpf.c
--- src/usr.sbin/authpf/authpf.c	27 Jan 2003 00:58:58 -0000	1.48
+++ src/usr.sbin/authpf/authpf.c	11 Feb 2003 21:09:50 -0000
@@@@ -425,7 +425,7 @@@@
d2007 1
a2007 1
+++ src/usr.sbin/config/main.c	11 Feb 2003 21:09:50 -0000
d2009 1
a2009 1
+/*	$MirBSD: obsd.misc,v 1.7 2003/02/11 21:08:30 tg Exp $	*/
d2107 1
a2107 1
+++ src/usr.sbin/config/scan.l	11 Feb 2003 21:09:50 -0000
d2139 2
a2140 2
--- /dev/null	Sat Feb 15 14:36:01 2003
+++ src/sys/arch/i386/include/reloc.h	Thu Feb 13 14:02:27 2003
d2142 1
a2142 1
+/*	$MirBSD$	*/
a2241 50
src/sys/arch/i386/i386/bios.c
src/sys/arch/i386/i386/db_magic.s		ELF
src/sys/arch/i386/i386/in_cksum.s		ELF
src/sys/arch/i386/i386/locore.s			ELF
src/sys/arch/i386/i386/machdep.c
src/sys/arch/i386/i386/microtime.s		ELF
src/sys/arch/i386/i386/random.s			ELF
src/sys/arch/i386/include/asm.h			ELF
src/sys/arch/i386/include/bus.h			ELF
src/sys/arch/i386/include/cdefs.h		ELF
src/sys/arch/i386/include/db_machdep.h		ELF
src/sys/arch/i386/include/intr.h		ELF
src/sys/arch/i386/include/param.h		ELF
src/sys/arch/i386/isa/clock.c
src/sys/arch/i386/isa/icu.s			ELF
src/sys/arch/i386/isa/npx.c			ELF
src/sys/arch/i386/isa/pccom.c
src/sys/arch/i386/isa/vector.s			ELF
src/sys/arch/i386/pci/pchb.c
src/sys/arch/i386/pci/pci_addr_fixup.c
src/sys/arch/i386/pci/pcibios.c
src/sys/arch/i386/stand/Makefile.inc		kernelcflags
src/sys/arch/i386/stand/biosboot/biosboot.S	ELF
src/sys/arch/i386/stand/boot/Makefile		ELF
src/sys/arch/i386/stand/libsa/Makefile		ELF
src/sys/arch/i386/stand/libsa/alloca.S		ELF
src/sys/arch/i386/stand/libsa/bioscons.c	ansi/etc fixes
src/sys/arch/i386/stand/libsa/debug_i386.S	ELF
src/sys/arch/i386/stand/libsa/smpprobe.c	ansi/etc fixes
src/sys/arch/i386/stand/mbr/mbr.S		ELF
src/sys/dev/ccd.c
src/sys/dev/ic/if_wi.c
src/sys/dev/ic/if_wi_hostap.c
src/sys/dev/ic/ne2000.c
src/sys/dev/ic/rtl80x9.c
src/sys/dev/ic/rtl81x9.c
src/sys/dev/isa/if_we.c				ELF
src/sys/dev/microcode/aic7xxx/Makefile		$.curdir
src/sys/dev/pci/if_bge.c
src/sys/dev/pci/if_sf.c
src/sys/dev/pci/if_ste.c
src/sys/dev/pci/pciide.c
src/sys/dev/systrace.c				; after :
src/sys/dev/wscons/wsdisplay.c
src/sys/kern/kern_exec.c			BDSM fork bomb defusion
src/sys/kern/kern_fork.c			BDSM fork bomb defusion
src/sys/lib/libsa/exec_elf.c			ELF
src/sys/net/pf_table.c				: ;
src/sys/sys/proc.h				BDSM fork bomb defusion
src/sys/uvm/uvm_meter.c				todd@@ - ps ae
@


1.7
log
@post-build

MirBSD goes ELF now
still needs a.out loader (and kernel?)

add more signatures; fix hostname
@
text
@d35 1
a35 1
+++ src/bin/rcp/Makefile	11 Feb 2003 20:15:53 -0000
d51 1
a51 1
+++ src/bin/systrace/Makefile	11 Feb 2003 20:15:53 -0000
d72 1
a72 1
+++ src/distrib/crunch/Makefile.inc	11 Feb 2003 20:15:53 -0000
d85 1
a85 1
+++ src/distrib/crunch/crunchgen/Makefile	11 Feb 2003 20:15:53 -0000
d101 1
a101 1
+++ src/distrib/crunch/crunchide/crunchide.c	11 Feb 2003 20:15:53 -0000
d140 1
a140 1
+++ src/distrib/i386/common/Makefile.inc	11 Feb 2003 20:15:53 -0000
d187 1
a187 1
+++ src/distrib/special/pppd/Makefile	11 Feb 2003 20:15:53 -0000
d202 1
a202 1
+++ src/distrib/special/rsh/Makefile	11 Feb 2003 20:15:53 -0000
d217 1
a217 1
+++ src/games/hack/Makefile	11 Feb 2003 20:15:53 -0000
d233 1
a233 1
+++ src/gnu/egcs/Makefile.bsd-wrapper	11 Feb 2003 20:15:53 -0000
d254 1
a254 1
+++ src/gnu/egcs/gcc/Makefile.bsd-wrapper	11 Feb 2003 20:15:53 -0000
d256 1
a256 1
+#	$MirBSD: obsd.misc,v 1.6 2003/02/11 20:02:18 tg Exp $
d320 1
a320 1
+++ src/gnu/egcs/gcc/config.gcc	11 Feb 2003 20:15:54 -0000
d340 1
a340 1
+++ src/gnu/egcs/gcc/config/i386/openbsd.h	11 Feb 2003 20:15:56 -0000
d549 1
a549 1
+++ src/gnu/egcs/libio/editbuf.cc	11 Feb 2003 20:15:57 -0000
d564 1
a564 1
+++ src/gnu/egcs/libio/editbuf.h	11 Feb 2003 20:15:57 -0000
d580 1
a580 1
+++ src/gnu/egcs/libio/parsestream.cc	11 Feb 2003 20:15:57 -0000
d595 1
a595 1
+++ src/gnu/egcs/libio/pfstream.cc	11 Feb 2003 20:15:57 -0000
d610 1
a610 1
+++ src/gnu/egcs/libstdc++/Makefile.bsd-wrapper	11 Feb 2003 20:15:57 -0000
d626 1
a626 1
+++ src/gnu/usr.bin/binutils/Makefile.bsd-wrapper	11 Feb 2003 20:15:57 -0000
d650 1
a650 1
+++ src/gnu/usr.bin/binutils/bfd/config.bfd	11 Feb 2003 20:15:57 -0000
d671 1
a671 1
+++ src/gnu/usr.bin/binutils/gas/config/tc-i386.c	11 Feb 2003 20:15:57 -0000
d696 1
a696 1
+++ src/gnu/usr.bin/binutils/gas/configure	11 Feb 2003 20:15:57 -0000
d712 1
a712 1
+++ src/gnu/usr.bin/binutils/gas/configure.in	11 Feb 2003 20:15:57 -0000
d728 1
a728 1
+++ src/gnu/usr.bin/binutils/gdb/config/alpha/nm-obsd.h	11 Feb 2003 20:15:58 -0000
d807 1
a807 1
+++ src/gnu/usr.bin/binutils/gdb/config/alpha/obsd.mt	11 Feb 2003 20:15:58 -0000
d819 1
a819 1
+++ src/gnu/usr.bin/binutils/gdb/config/i386/nm-obsd.h	11 Feb 2003 20:15:58 -0000
d896 1
a896 1
+++ src/gnu/usr.bin/binutils/ld/configure.tgt	11 Feb 2003 20:15:58 -0000
d912 1
a912 1
+++ src/gnu/usr.bin/cvs/Makefile.bsd-wrapper	11 Feb 2003 20:15:58 -0000
d928 1
a928 1
+++ src/gnu/usr.bin/gzip/Makefile	11 Feb 2003 20:15:58 -0000
d954 1
a954 1
+++ src/gnu/usr.bin/texinfo/Makefile.bsd-wrapper	11 Feb 2003 20:15:58 -0000
d977 1
a977 1
+++ src/gnu/usr.sbin/mkhybrid/src/Makefile	11 Feb 2003 20:15:58 -0000
d993 1
a993 1
+++ src/gnu/usr.sbin/mkhybrid/src/diag/Makefile	11 Feb 2003 20:15:58 -0000
d1010 1
a1010 1
+++ src/kerberosIV/Makefile	11 Feb 2003 20:15:58 -0000
d1031 1
a1031 1
+++ src/kerberosIV/Makefile.inc	11 Feb 2003 20:15:58 -0000
d1047 1
a1047 1
+++ src/kerberosIV/lib/kadm/Makefile	11 Feb 2003 20:15:58 -0000
d1063 1
a1063 1
+++ src/kerberosIV/lib/roken/Makefile	11 Feb 2003 20:15:58 -0000
d1079 1
a1079 1
+++ src/kerberosIV/src/appl/ftp/ftp/Makefile	11 Feb 2003 20:15:58 -0000
d1098 1
a1098 1
+++ src/kerberosIV/src/appl/ftp/ftpd/Makefile	11 Feb 2003 20:15:58 -0000
d1114 1
a1114 1
+++ src/kerberosIV/src/include/Makefile	11 Feb 2003 20:15:58 -0000
d1130 1
a1130 1
+++ src/lib/csu/i386/crt0.c	11 Feb 2003 20:15:58 -0000
d1312 1
a1312 1
+++ src/lib/libc/arch/i386/SYS.h	11 Feb 2003 20:15:58 -0000
d1368 1
a1368 1
+++ src/lib/libc/arch/i386/gen/alloca.S	11 Feb 2003 20:15:58 -0000
d1381 1
a1381 1
+++ src/lib/libc/arch/i386/gen/setjmp.S	11 Feb 2003 20:15:58 -0000
d1422 1
a1422 1
+++ src/lib/libc/arch/i386/gen/sigsetjmp.S	11 Feb 2003 20:15:58 -0000
d1465 1
a1465 1
+++ src/lib/libc/arch/i386/sys/Ovfork.S	11 Feb 2003 20:15:58 -0000
d1492 1
a1492 1
+++ src/lib/libc/arch/i386/sys/brk.S	11 Feb 2003 20:15:58 -0000
d1518 1
a1518 1
+++ src/lib/libc/arch/i386/sys/cerror.S	11 Feb 2003 20:15:58 -0000
d1545 1
a1545 1
+++ src/lib/libc/arch/i386/sys/exect.S	11 Feb 2003 20:15:58 -0000
d1566 1
a1566 1
+++ src/lib/libc/arch/i386/sys/sbrk.S	11 Feb 2003 20:15:58 -0000
d1592 1
a1592 1
+++ src/lib/libc/arch/i386/sys/sigprocmask.S	11 Feb 2003 20:15:58 -0000
d1613 1
a1613 1
+++ src/lib/libc/arch/i386/sys/sigsuspend.S	11 Feb 2003 20:15:58 -0000
d1633 1
a1633 1
+++ src/lib/libc/arch/i386/sys/syscall.S	11 Feb 2003 20:15:58 -0000
d1653 1
a1653 1
+++ src/lib/libcurses++/Makefile	11 Feb 2003 20:15:58 -0000
d1668 1
a1668 1
+++ src/libexec/ftpd/Makefile	11 Feb 2003 20:15:58 -0000
d1684 1
a1684 1
+++ src/libexec/ld.so/library.c	11 Feb 2003 20:15:59 -0000
d1708 1
a1708 1
+++ src/libexec/login_chpass/Makefile	11 Feb 2003 20:15:59 -0000
d1724 1
a1724 1
+++ src/libexec/rshd/Makefile	11 Feb 2003 20:15:59 -0000
d1740 1
a1740 1
+++ src/sbin/disklabel/Makefile	11 Feb 2003 20:15:59 -0000
d1756 1
a1756 1
+++ src/sbin/fdisk/Makefile	11 Feb 2003 20:15:59 -0000
d1772 1
a1772 1
+++ src/sbin/fsck/fsutil.c	11 Feb 2003 20:15:59 -0000
d1787 1
a1787 1
+++ src/sbin/pfctl/Makefile	11 Feb 2003 20:15:59 -0000
d1803 1
a1803 1
+++ src/sbin/photurisd/Makefile	11 Feb 2003 20:15:59 -0000
d1819 1
a1819 1
+++ src/sbin/wsconsctl/Makefile	11 Feb 2003 20:15:59 -0000
d1835 1
a1835 1
+++ src/share/lkm/vfs/module/Makefile	11 Feb 2003 20:15:59 -0000
d1851 1
a1851 1
+++ src/share/man/man4/options.4	11 Feb 2003 20:15:59 -0000
d1853 1
a1853 1
+.\"	$MirBSD: obsd.misc,v 1.6 2003/02/11 20:02:18 tg Exp $
d1875 1
a1875 1
+++ src/share/mk/bsd.README	11 Feb 2003 20:16:02 -0000
d1892 1
a1892 1
+++ src/share/mk/bsd.own.mk	11 Feb 2003 20:16:02 -0000
d1917 1
a1917 1
+++ src/sys/arch/i386/i386/bios.c	11 Feb 2003 20:16:02 -0000
d1933 1
a1933 1
+++ src/sys/arch/i386/i386/db_magic.s	11 Feb 2003 20:16:02 -0000
d2000 1
a2000 1
+++ src/sys/arch/i386/i386/in_cksum.s	11 Feb 2003 20:16:02 -0000
d2026 1
a2026 1
+++ src/sys/arch/i386/i386/locore.s	11 Feb 2003 20:16:02 -0000
d2234 1
a2234 1
+++ src/sys/arch/i386/i386/machdep.c	11 Feb 2003 20:16:02 -0000
d2271 1
a2271 1
+++ src/sys/arch/i386/i386/microtime.s	11 Feb 2003 20:16:02 -0000
d2329 1
a2329 1
+++ src/sys/arch/i386/i386/random.s	11 Feb 2003 20:16:02 -0000
d2362 1
a2362 1
+++ src/sys/arch/i386/include/asm.h	11 Feb 2003 20:16:02 -0000
d2414 1
a2414 1
+++ src/sys/arch/i386/include/bus.h	11 Feb 2003 20:16:02 -0000
d2469 1
a2469 1
+++ src/sys/arch/i386/include/cdefs.h	11 Feb 2003 20:16:02 -0000
d2516 1
a2516 1
+++ src/sys/arch/i386/include/db_machdep.h	11 Feb 2003 20:16:02 -0000
d2532 1
a2532 1
+++ src/sys/arch/i386/include/intr.h	11 Feb 2003 20:16:02 -0000
d2549 1
a2549 1
+++ src/sys/arch/i386/include/param.h	11 Feb 2003 20:16:02 -0000
d2572 1
a2572 1
+++ src/sys/arch/i386/isa/clock.c	11 Feb 2003 20:16:03 -0000
d2588 1
a2588 1
+++ src/sys/arch/i386/isa/icu.s	11 Feb 2003 20:16:03 -0000
d2620 1
a2620 1
+++ src/sys/arch/i386/isa/npx.c	11 Feb 2003 20:16:03 -0000
d2672 1
a2672 1
+++ src/sys/arch/i386/isa/pccom.c	11 Feb 2003 20:16:03 -0000
d2697 1
a2697 1
+++ src/sys/arch/i386/isa/vector.s	11 Feb 2003 20:16:03 -0000
d2873 1
a2873 1
+++ src/sys/arch/i386/pci/pchb.c	11 Feb 2003 20:16:03 -0000
d2889 1
a2889 1
+++ src/sys/arch/i386/pci/pci_addr_fixup.c	11 Feb 2003 20:16:03 -0000
d2922 1
a2922 1
+++ src/sys/arch/i386/pci/pcibios.c	11 Feb 2003 20:16:03 -0000
d2942 1
a2942 1
+++ src/sys/arch/i386/stand/Makefile.inc	11 Feb 2003 20:16:03 -0000
d2958 1
a2958 1
+++ src/sys/arch/i386/stand/biosboot/biosboot.S	11 Feb 2003 20:16:03 -0000
d3314 1
a3314 1
+++ src/sys/arch/i386/stand/boot/Makefile	11 Feb 2003 20:16:03 -0000
d3337 1
a3337 1
+++ src/sys/arch/i386/stand/libsa/Makefile	11 Feb 2003 20:16:03 -0000
d3362 1
a3362 1
+++ src/sys/arch/i386/stand/libsa/alloca.S	11 Feb 2003 20:16:03 -0000
d3375 1
a3375 1
+++ src/sys/arch/i386/stand/libsa/bioscons.c	11 Feb 2003 20:16:03 -0000
d3391 1
a3391 1
+++ src/sys/arch/i386/stand/libsa/debug_i386.S	11 Feb 2003 20:16:03 -0000
d3420 1
a3420 1
+++ src/sys/arch/i386/stand/libsa/smpprobe.c	11 Feb 2003 20:16:03 -0000
d3447 1
a3447 1
+++ src/sys/arch/i386/stand/mbr/mbr.S	11 Feb 2003 20:16:03 -0000
d3554 1
a3554 1
+++ src/sys/dev/ccd.c	11 Feb 2003 20:16:03 -0000
d3570 1
a3570 1
+++ src/sys/dev/systrace.c	11 Feb 2003 20:16:03 -0000
d3586 1
a3586 1
+++ src/sys/dev/ic/if_wi.c	11 Feb 2003 20:16:03 -0000
d3602 1
a3602 1
+++ src/sys/dev/ic/if_wi_hostap.c	11 Feb 2003 20:16:03 -0000
d3639 1
a3639 1
+++ src/sys/dev/ic/ne2000.c	11 Feb 2003 20:16:03 -0000
d3655 1
a3655 1
+++ src/sys/dev/ic/rtl80x9.c	11 Feb 2003 20:16:03 -0000
d3671 1
a3671 1
+++ src/sys/dev/ic/rtl81x9.c	11 Feb 2003 20:16:03 -0000
d3690 1
a3690 1
+++ src/sys/dev/isa/if_we.c	11 Feb 2003 20:16:03 -0000
d3707 1
a3707 1
+++ src/sys/dev/microcode/aic7xxx/Makefile	11 Feb 2003 20:16:03 -0000
d3723 1
a3723 1
+++ src/sys/dev/pci/if_bge.c	11 Feb 2003 20:16:05 -0000
d3767 1
a3767 1
+++ src/sys/dev/pci/if_sf.c	11 Feb 2003 20:16:06 -0000
d3783 1
a3783 1
+++ src/sys/dev/pci/if_ste.c	11 Feb 2003 20:16:06 -0000
d3799 1
a3799 1
+++ src/sys/dev/pci/pciide.c	11 Feb 2003 20:16:06 -0000
d3824 1
a3824 1
+++ src/sys/dev/wscons/wsdisplay.c	11 Feb 2003 20:16:06 -0000
d3840 1
a3840 1
+++ src/sys/kern/kern_exec.c	11 Feb 2003 20:16:06 -0000
d3842 1
a3842 1
+/*	$MirBSD: obsd.misc,v 1.6 2003/02/11 20:02:18 tg Exp $	*/
d3862 1
a3862 1
+++ src/sys/kern/kern_fork.c	11 Feb 2003 20:16:06 -0000
d3864 1
a3864 1
+/*	$MirBSD: obsd.misc,v 1.6 2003/02/11 20:02:18 tg Exp $	*/
d3930 1
a3930 1
+++ src/sys/lib/libsa/exec_elf.c	11 Feb 2003 20:16:06 -0000
d3974 1
a3974 1
+++ src/sys/net/pf_table.c	11 Feb 2003 20:16:06 -0000
d4008 1
a4008 1
+++ src/sys/sys/proc.h	11 Feb 2003 20:16:06 -0000
d4010 1
a4010 1
+/*	$MirBSD: obsd.misc,v 1.6 2003/02/11 20:02:18 tg Exp $	*/
d4039 1
a4039 1
+++ src/sys/uvm/uvm_meter.c	11 Feb 2003 20:16:06 -0000
d4075 1
a4075 1
+++ src/usr.bin/hexdump/parse.c	11 Feb 2003 20:16:06 -0000
d4091 1
a4091 1
+++ src/usr.bin/keynote/Makefile	11 Feb 2003 20:16:06 -0000
d4107 1
a4107 1
+++ src/usr.bin/yacc/skeleton.c	11 Feb 2003 20:16:07 -0000
d4109 1
a4109 1
+/*	$MirBSD: obsd.misc,v 1.6 2003/02/11 20:02:18 tg Exp $	*/
d4134 1
a4134 1
+    "  = \"$OpenBSD: skeleton.c,v 1.19 2002/12/03 21:34:21 mickey Exp $ $MirBSD: obsd.misc,v 1.6 2003/02/11 20:02:18 tg Exp $\";",
d4144 1
a4144 1
+++ src/usr.sbin/Makefile	11 Feb 2003 20:16:07 -0000
d4160 1
a4160 1
+++ src/usr.sbin/authpf/authpf.c	11 Feb 2003 20:16:07 -0000
d4176 1
a4176 1
+++ src/usr.sbin/config/main.c	11 Feb 2003 20:16:07 -0000
d4178 1
a4178 1
+/*	$MirBSD: obsd.misc,v 1.6 2003/02/11 20:02:18 tg Exp $	*/
d4276 1
a4276 1
+++ src/usr.sbin/config/scan.l	11 Feb 2003 20:16:07 -0000
d4304 31
d4470 1
@


1.6
log
@Uhm. Prepare for MirBSD -> ELF and obsd/ -> mbsd/
Did not mean to checkin diffs yet. They are incomplete.
@
text
@d35 1
a35 1
+++ src/bin/rcp/Makefile	10 Feb 2003 19:41:49 -0000
d51 1
a51 1
+++ src/bin/systrace/Makefile	10 Feb 2003 19:41:49 -0000
d72 1
a72 1
+++ src/distrib/crunch/Makefile.inc	10 Feb 2003 19:41:49 -0000
d85 1
a85 1
+++ src/distrib/crunch/crunchgen/Makefile	10 Feb 2003 19:41:49 -0000
d101 1
a101 1
+++ src/distrib/crunch/crunchide/crunchide.c	10 Feb 2003 19:41:49 -0000
d140 1
a140 1
+++ src/distrib/i386/common/Makefile.inc	10 Feb 2003 19:41:49 -0000
d187 1
a187 1
+++ src/distrib/special/pppd/Makefile	10 Feb 2003 19:41:51 -0000
d202 1
a202 1
+++ src/distrib/special/rsh/Makefile	10 Feb 2003 19:41:52 -0000
d217 1
a217 1
+++ src/games/hack/Makefile	10 Feb 2003 19:41:52 -0000
d233 1
a233 1
+++ src/gnu/egcs/Makefile.bsd-wrapper	10 Feb 2003 19:41:52 -0000
d254 1
a254 1
+++ src/gnu/egcs/gcc/Makefile.bsd-wrapper	10 Feb 2003 19:41:52 -0000
d256 1
a256 1
+#	$MirBSD: obsd.misc,v 1.5 2003/02/10 19:41:25 tg Exp $
d320 1
a320 1
+++ src/gnu/egcs/gcc/config.gcc	10 Feb 2003 19:41:52 -0000
d340 1
a340 1
+++ src/gnu/egcs/gcc/config/i386/openbsd.h	10 Feb 2003 19:41:52 -0000
d549 1
a549 1
+++ src/gnu/egcs/libio/editbuf.cc	10 Feb 2003 19:41:53 -0000
d564 1
a564 1
+++ src/gnu/egcs/libio/editbuf.h	10 Feb 2003 19:41:53 -0000
d580 1
a580 1
+++ src/gnu/egcs/libio/parsestream.cc	10 Feb 2003 19:41:53 -0000
d595 1
a595 1
+++ src/gnu/egcs/libio/pfstream.cc	10 Feb 2003 19:41:53 -0000
d610 1
a610 1
+++ src/gnu/egcs/libstdc++/Makefile.bsd-wrapper	10 Feb 2003 19:41:53 -0000
d626 1
a626 1
+++ src/gnu/usr.bin/binutils/Makefile.bsd-wrapper	10 Feb 2003 19:41:53 -0000
d650 1
a650 1
+++ src/gnu/usr.bin/binutils/bfd/config.bfd	10 Feb 2003 19:41:53 -0000
d671 1
a671 1
+++ src/gnu/usr.bin/binutils/gas/config/tc-i386.c	10 Feb 2003 19:41:53 -0000
d696 1
a696 1
+++ src/gnu/usr.bin/binutils/gas/configure	10 Feb 2003 19:41:53 -0000
d712 1
a712 1
+++ src/gnu/usr.bin/binutils/gas/configure.in	10 Feb 2003 19:41:53 -0000
d728 1
a728 1
+++ src/gnu/usr.bin/binutils/gdb/config/alpha/nm-obsd.h	10 Feb 2003 19:41:53 -0000
d807 1
a807 1
+++ src/gnu/usr.bin/binutils/gdb/config/alpha/obsd.mt	10 Feb 2003 19:41:53 -0000
d819 1
a819 1
+++ src/gnu/usr.bin/binutils/gdb/config/i386/nm-obsd.h	10 Feb 2003 19:41:53 -0000
d896 1
a896 1
+++ src/gnu/usr.bin/binutils/ld/configure.tgt	10 Feb 2003 19:41:53 -0000
d912 1
a912 1
+++ src/gnu/usr.bin/cvs/Makefile.bsd-wrapper	10 Feb 2003 19:41:53 -0000
d928 1
a928 1
+++ src/gnu/usr.bin/gzip/Makefile	10 Feb 2003 19:41:53 -0000
d954 1
a954 1
+++ src/gnu/usr.bin/texinfo/Makefile.bsd-wrapper	10 Feb 2003 19:41:53 -0000
d977 1
a977 1
+++ src/gnu/usr.sbin/mkhybrid/src/Makefile	10 Feb 2003 19:41:53 -0000
d993 1
a993 1
+++ src/gnu/usr.sbin/mkhybrid/src/diag/Makefile	10 Feb 2003 19:41:53 -0000
d1010 1
a1010 1
+++ src/kerberosIV/Makefile	10 Feb 2003 19:41:53 -0000
d1031 1
a1031 1
+++ src/kerberosIV/Makefile.inc	10 Feb 2003 19:41:53 -0000
d1047 1
a1047 1
+++ src/kerberosIV/lib/kadm/Makefile	10 Feb 2003 19:41:54 -0000
d1063 1
a1063 1
+++ src/kerberosIV/lib/roken/Makefile	10 Feb 2003 19:41:54 -0000
d1079 1
a1079 1
+++ src/kerberosIV/src/appl/ftp/ftp/Makefile	10 Feb 2003 19:41:54 -0000
d1098 1
a1098 1
+++ src/kerberosIV/src/appl/ftp/ftpd/Makefile	10 Feb 2003 19:41:54 -0000
d1114 1
a1114 1
+++ src/kerberosIV/src/include/Makefile	10 Feb 2003 19:41:54 -0000
d1130 1
a1130 1
+++ src/lib/csu/i386/crt0.c	10 Feb 2003 19:41:54 -0000
d1312 1
a1312 1
+++ src/lib/libc/arch/i386/SYS.h	10 Feb 2003 19:41:54 -0000
d1368 1
a1368 1
+++ src/lib/libc/arch/i386/gen/alloca.S	10 Feb 2003 19:41:54 -0000
d1381 1
a1381 1
+++ src/lib/libc/arch/i386/gen/setjmp.S	10 Feb 2003 19:41:54 -0000
d1422 1
a1422 1
+++ src/lib/libc/arch/i386/gen/sigsetjmp.S	10 Feb 2003 19:41:54 -0000
d1465 1
a1465 1
+++ src/lib/libc/arch/i386/sys/Ovfork.S	10 Feb 2003 19:41:54 -0000
d1492 1
a1492 1
+++ src/lib/libc/arch/i386/sys/brk.S	10 Feb 2003 19:41:54 -0000
d1518 1
a1518 1
+++ src/lib/libc/arch/i386/sys/cerror.S	10 Feb 2003 19:41:54 -0000
d1545 1
a1545 1
+++ src/lib/libc/arch/i386/sys/exect.S	10 Feb 2003 19:41:54 -0000
d1566 1
a1566 1
+++ src/lib/libc/arch/i386/sys/sbrk.S	10 Feb 2003 19:41:54 -0000
d1592 1
a1592 1
+++ src/lib/libc/arch/i386/sys/sigprocmask.S	10 Feb 2003 19:41:54 -0000
d1613 1
a1613 1
+++ src/lib/libc/arch/i386/sys/sigsuspend.S	10 Feb 2003 19:41:54 -0000
d1633 1
a1633 1
+++ src/lib/libc/arch/i386/sys/syscall.S	10 Feb 2003 19:41:54 -0000
d1653 1
a1653 1
+++ src/lib/libcurses++/Makefile	10 Feb 2003 19:41:54 -0000
d1668 1
a1668 1
+++ src/libexec/ftpd/Makefile	10 Feb 2003 19:41:54 -0000
d1684 1
a1684 1
+++ src/libexec/ld.so/library.c	10 Feb 2003 19:41:54 -0000
d1708 1
a1708 1
+++ src/libexec/login_chpass/Makefile	10 Feb 2003 19:41:54 -0000
d1724 1
a1724 1
+++ src/libexec/rshd/Makefile	10 Feb 2003 19:41:54 -0000
d1740 1
a1740 1
+++ src/sbin/disklabel/Makefile	10 Feb 2003 19:41:54 -0000
d1756 1
a1756 1
+++ src/sbin/fdisk/Makefile	10 Feb 2003 19:41:54 -0000
d1772 1
a1772 1
+++ src/sbin/fsck/fsutil.c	10 Feb 2003 19:41:54 -0000
d1787 1
a1787 1
+++ src/sbin/pfctl/Makefile	10 Feb 2003 19:41:54 -0000
d1803 1
a1803 1
+++ src/sbin/photurisd/Makefile	10 Feb 2003 19:41:54 -0000
d1819 1
a1819 1
+++ src/sbin/wsconsctl/Makefile	10 Feb 2003 19:41:54 -0000
d1835 1
a1835 1
+++ src/share/lkm/vfs/module/Makefile	10 Feb 2003 19:41:54 -0000
d1851 1
a1851 1
+++ src/share/man/man4/options.4	10 Feb 2003 19:41:57 -0000
d1853 1
a1853 1
+.\"	$MirBSD: obsd.misc,v 1.5 2003/02/10 19:41:25 tg Exp $
d1875 1
a1875 1
+++ src/share/mk/bsd.README	10 Feb 2003 19:41:58 -0000
d1892 1
a1892 1
+++ src/share/mk/bsd.own.mk	10 Feb 2003 19:41:58 -0000
d1917 1
a1917 1
+++ src/sys/arch/i386/i386/bios.c	10 Feb 2003 19:41:58 -0000
d1933 1
a1933 1
+++ src/sys/arch/i386/i386/db_magic.s	10 Feb 2003 19:41:58 -0000
d2000 1
a2000 1
+++ src/sys/arch/i386/i386/in_cksum.s	10 Feb 2003 19:41:58 -0000
d2026 1
a2026 1
+++ src/sys/arch/i386/i386/locore.s	10 Feb 2003 19:41:58 -0000
d2234 1
a2234 1
+++ src/sys/arch/i386/i386/machdep.c	10 Feb 2003 19:41:58 -0000
d2271 1
a2271 1
+++ src/sys/arch/i386/i386/microtime.s	10 Feb 2003 19:41:58 -0000
d2329 1
a2329 1
+++ src/sys/arch/i386/i386/random.s	10 Feb 2003 19:41:58 -0000
d2362 1
a2362 1
+++ src/sys/arch/i386/include/asm.h	10 Feb 2003 19:41:58 -0000
d2414 1
a2414 1
+++ src/sys/arch/i386/include/bus.h	10 Feb 2003 19:41:58 -0000
d2469 1
a2469 1
+++ src/sys/arch/i386/include/cdefs.h	10 Feb 2003 19:41:58 -0000
d2516 1
a2516 1
+++ src/sys/arch/i386/include/db_machdep.h	10 Feb 2003 19:41:58 -0000
d2532 1
a2532 1
+++ src/sys/arch/i386/include/intr.h	10 Feb 2003 19:41:58 -0000
d2549 1
a2549 1
+++ src/sys/arch/i386/include/param.h	10 Feb 2003 19:41:58 -0000
d2572 1
a2572 1
+++ src/sys/arch/i386/isa/clock.c	10 Feb 2003 19:41:58 -0000
d2588 1
a2588 1
+++ src/sys/arch/i386/isa/icu.s	10 Feb 2003 19:41:58 -0000
d2620 1
a2620 1
+++ src/sys/arch/i386/isa/npx.c	10 Feb 2003 19:41:58 -0000
d2672 1
a2672 1
+++ src/sys/arch/i386/isa/pccom.c	10 Feb 2003 19:41:58 -0000
d2697 1
a2697 1
+++ src/sys/arch/i386/isa/vector.s	10 Feb 2003 19:41:58 -0000
d2873 1
a2873 1
+++ src/sys/arch/i386/pci/pchb.c	10 Feb 2003 19:41:58 -0000
d2889 1
a2889 1
+++ src/sys/arch/i386/pci/pci_addr_fixup.c	10 Feb 2003 19:41:58 -0000
d2922 1
a2922 1
+++ src/sys/arch/i386/pci/pcibios.c	10 Feb 2003 19:41:58 -0000
d2942 1
a2942 1
+++ src/sys/arch/i386/stand/Makefile.inc	10 Feb 2003 19:41:58 -0000
d2958 1
a2958 1
+++ src/sys/arch/i386/stand/biosboot/biosboot.S	10 Feb 2003 19:41:58 -0000
d3314 1
a3314 1
+++ src/sys/arch/i386/stand/boot/Makefile	10 Feb 2003 21:19:14 -0000
d3337 1
a3337 1
+++ src/sys/arch/i386/stand/libsa/Makefile	10 Feb 2003 19:41:58 -0000
d3362 1
a3362 1
+++ src/sys/arch/i386/stand/libsa/alloca.S	10 Feb 2003 19:41:58 -0000
d3375 1
a3375 1
+++ src/sys/arch/i386/stand/libsa/bioscons.c	10 Feb 2003 19:41:58 -0000
d3391 1
a3391 1
+++ src/sys/arch/i386/stand/libsa/debug_i386.S	10 Feb 2003 19:41:58 -0000
d3420 1
a3420 1
+++ src/sys/arch/i386/stand/libsa/smpprobe.c	10 Feb 2003 19:41:58 -0000
d3447 1
a3447 1
+++ src/sys/arch/i386/stand/mbr/mbr.S	10 Feb 2003 19:41:58 -0000
d3554 1
a3554 1
+++ src/sys/dev/ccd.c	10 Feb 2003 19:41:58 -0000
d3570 1
a3570 1
+++ src/sys/dev/systrace.c	10 Feb 2003 19:41:58 -0000
d3586 1
a3586 1
+++ src/sys/dev/ic/if_wi.c	10 Feb 2003 19:41:59 -0000
d3602 1
a3602 1
+++ src/sys/dev/ic/if_wi_hostap.c	10 Feb 2003 19:41:59 -0000
d3639 1
a3639 1
+++ src/sys/dev/ic/ne2000.c	10 Feb 2003 19:41:59 -0000
d3655 1
a3655 1
+++ src/sys/dev/ic/rtl80x9.c	10 Feb 2003 19:41:59 -0000
d3671 1
a3671 1
+++ src/sys/dev/ic/rtl81x9.c	10 Feb 2003 19:41:59 -0000
d3690 1
a3690 1
+++ src/sys/dev/isa/if_we.c	10 Feb 2003 19:41:59 -0000
d3707 1
a3707 1
+++ src/sys/dev/microcode/aic7xxx/Makefile	10 Feb 2003 19:41:59 -0000
d3723 1
a3723 1
+++ src/sys/dev/pci/if_bge.c	10 Feb 2003 19:41:59 -0000
d3767 1
a3767 1
+++ src/sys/dev/pci/if_sf.c	10 Feb 2003 19:41:59 -0000
d3783 1
a3783 1
+++ src/sys/dev/pci/if_ste.c	10 Feb 2003 19:41:59 -0000
d3799 1
a3799 1
+++ src/sys/dev/pci/pciide.c	10 Feb 2003 19:42:01 -0000
d3824 1
a3824 1
+++ src/sys/dev/wscons/wsdisplay.c	10 Feb 2003 19:42:02 -0000
d3840 1
a3840 1
+++ src/sys/kern/kern_exec.c	10 Feb 2003 19:42:02 -0000
d3842 1
a3842 1
+/*	$MirBSD: obsd.misc,v 1.5 2003/02/10 19:41:25 tg Exp $	*/
d3862 1
a3862 1
+++ src/sys/kern/kern_fork.c	10 Feb 2003 19:42:02 -0000
d3864 1
a3864 1
+/*	$MirBSD: obsd.misc,v 1.5 2003/02/10 19:41:25 tg Exp $	*/
d3930 1
a3930 1
+++ src/sys/lib/libsa/exec_elf.c	10 Feb 2003 19:42:02 -0000
d3974 1
a3974 1
+++ src/sys/net/pf_table.c	10 Feb 2003 19:42:02 -0000
d4008 1
a4008 1
+++ src/sys/sys/proc.h	10 Feb 2003 19:42:02 -0000
d4010 1
a4010 1
+/*	$MirBSD: obsd.misc,v 1.5 2003/02/10 19:41:25 tg Exp $	*/
d4039 1
a4039 1
+++ src/sys/uvm/uvm_meter.c	10 Feb 2003 19:42:02 -0000
d4075 1
a4075 1
+++ src/usr.bin/hexdump/parse.c	10 Feb 2003 19:42:02 -0000
d4091 1
a4091 1
+++ src/usr.bin/keynote/Makefile	10 Feb 2003 19:42:02 -0000
d4107 1
a4107 1
+++ src/usr.bin/yacc/skeleton.c	10 Feb 2003 19:42:02 -0000
d4109 1
a4109 1
+/*	$MirBSD: obsd.misc,v 1.5 2003/02/10 19:41:25 tg Exp $	*/
d4134 1
a4134 1
+    "  = \"$OpenBSD: skeleton.c,v 1.19 2002/12/03 21:34:21 mickey Exp $ $MirBSD: obsd.misc,v 1.5 2003/02/10 19:41:25 tg Exp $\";",
d4144 1
a4144 1
+++ src/usr.sbin/Makefile	10 Feb 2003 19:42:02 -0000
d4160 1
a4160 1
+++ src/usr.sbin/authpf/authpf.c	10 Feb 2003 19:42:02 -0000
d4176 1
a4176 1
+++ src/usr.sbin/config/main.c	10 Feb 2003 19:42:03 -0000
d4178 1
a4178 1
+/*	$MirBSD: obsd.misc,v 1.5 2003/02/10 19:41:25 tg Exp $	*/
d4276 1
a4276 1
+++ src/usr.sbin/config/scan.l	10 Feb 2003 19:42:03 -0000
a4321 1
src/games/sail/pl_7.c				fix varargs
a4339 7
src/gnu/usr.bin/binutils/ld/emulparams/elf32_sparc.sh	ELF?
src/gnu/usr.bin/binutils/ld/emulparams/elf32ppc.sh	ELF?
src/gnu/usr.bin/binutils/ld/emulparams/elf64_sparc.sh	ELF?
src/gnu/usr.bin/binutils/ld/emulparams/elf64alpha.sh	ELF?
src/gnu/usr.bin/binutils/ld/emulparams/elf_i386.sh	ELF?
src/gnu/usr.bin/binutils/ld/emulparams/hppaobsd.sh	ELF?
src/gnu/usr.bin/binutils/ld/scripttempl/elf.sc		ELF?
a4417 1
src/sys/dev/pci/bktr/bktr_core.c		warning operation ... may be undefined
d4442 5
@


1.5
log
@pre-build (development!)

+---------------.,
| ELF is there! ||
+===============''

- ports did not update INDEX
  there are conflicts in it
- diff set lists are not synched
- distrib sets are not touched at all
- still statically linked :)
- needs ELF system and EGCC to build
- no kernel yet, sorry

not to be used. backup only.
@
text
@d26 1
a26 1
against /cvs on Tue Jan 28 22:02:42 UTC 2003.
d35 1
a35 1
+++ src/bin/rcp/Makefile	27 Jan 2003 21:18:35 -0000
d51 1
a51 1
+++ src/bin/systrace/Makefile	27 Jan 2003 21:18:35 -0000
d72 1
a72 1
+++ src/distrib/crunch/Makefile.inc	27 Jan 2003 21:18:35 -0000
d85 1
a85 1
+++ src/distrib/crunch/crunchgen/Makefile	27 Jan 2003 21:18:35 -0000
d101 1
a101 1
+++ src/distrib/crunch/crunchide/crunchide.c	3 Feb 2003 20:00:11 -0000
d140 1
a140 1
+++ src/distrib/i386/common/Makefile.inc	3 Feb 2003 20:00:11 -0000
d187 1
a187 1
+++ src/distrib/special/pppd/Makefile	27 Jan 2003 21:18:35 -0000
d202 1
a202 1
+++ src/distrib/special/rsh/Makefile	27 Jan 2003 21:18:35 -0000
d217 1
a217 1
+++ src/games/hack/Makefile	27 Jan 2003 21:18:35 -0000
d233 1
a233 1
+++ src/gnu/egcs/Makefile.bsd-wrapper	27 Jan 2003 21:18:35 -0000
d254 1
a254 1
+++ src/gnu/egcs/gcc/Makefile.bsd-wrapper	27 Jan 2003 21:18:35 -0000
d256 1
a256 1
+#	$MirBSD: obsd.misc,v 1.4 2003/01/27 21:17:20 tg Exp $
d320 1
a320 1
+++ src/gnu/egcs/gcc/config.gcc	3 Feb 2003 20:00:11 -0000
d340 1
a340 1
+++ src/gnu/egcs/gcc/config/i386/openbsd.h	3 Feb 2003 20:00:11 -0000
d549 1
a549 1
+++ src/gnu/egcs/libio/editbuf.cc	27 Jan 2003 21:18:35 -0000
d564 1
a564 1
+++ src/gnu/egcs/libio/editbuf.h	27 Jan 2003 21:18:35 -0000
d580 1
a580 1
+++ src/gnu/egcs/libio/parsestream.cc	27 Jan 2003 21:18:35 -0000
d595 1
a595 1
+++ src/gnu/egcs/libio/pfstream.cc	27 Jan 2003 21:18:35 -0000
d610 1
a610 1
+++ src/gnu/egcs/libstdc++/Makefile.bsd-wrapper	27 Jan 2003 21:18:35 -0000
d626 1
a626 1
+++ src/gnu/usr.bin/binutils/Makefile.bsd-wrapper	3 Feb 2003 20:00:11 -0000
d650 1
a650 1
+++ src/gnu/usr.bin/binutils/bfd/config.bfd	3 Feb 2003 20:00:11 -0000
d671 1
a671 1
+++ src/gnu/usr.bin/binutils/gas/config/tc-i386.c	3 Feb 2003 20:00:11 -0000
d696 1
a696 1
+++ src/gnu/usr.bin/binutils/gas/configure	3 Feb 2003 20:00:11 -0000
d712 1
a712 1
+++ src/gnu/usr.bin/binutils/gas/configure.in	3 Feb 2003 20:00:11 -0000
d728 1
a728 1
+++ src/gnu/usr.bin/binutils/gdb/config/alpha/nm-obsd.h	3 Feb 2003 20:00:12 -0000
d807 1
a807 1
+++ src/gnu/usr.bin/binutils/gdb/config/alpha/obsd.mt	3 Feb 2003 20:00:12 -0000
d819 1
a819 1
+++ src/gnu/usr.bin/binutils/gdb/config/i386/nm-obsd.h	3 Feb 2003 20:00:12 -0000
d896 1
a896 1
+++ src/gnu/usr.bin/binutils/ld/configure.tgt	3 Feb 2003 20:00:12 -0000
a905 18
Index: src/gnu/usr.bin/binutils/ld/emulparams/hppaobsd.sh
===================================================================
RCS file: /cvs/src/gnu/usr.bin/binutils/ld/emulparams/hppaobsd.sh,v
retrieving revision 1.2
diff -u -r1.2 hppaobsd.sh
--- src/gnu/usr.bin/binutils/ld/emulparams/hppaobsd.sh	5 Jun 2002 19:16:02 -0000	1.2
+++ src/gnu/usr.bin/binutils/ld/emulparams/hppaobsd.sh	3 Feb 2003 20:00:12 -0000
@@@@ -11,6 +11,10 @@@@
 OTHER_READONLY_SECTIONS='.PARISC.unwind : { *(.PARISC.unwind) } '
 DATA_START_SYMBOLS='PROVIDE ($global$ = .);'
 DATA_PLT=
+PAD_RO=
+RODATA_PADSIZE=${MAXPAGESIZE}
+PAD_GOT=
+PAD_PLT=
 GENERATE_SHLIB_SCRIPT=yes
 TEMPLATE_NAME=elf32
 EXTRA_EM_FILE=hppaelf
d912 1
a912 1
+++ src/gnu/usr.bin/cvs/Makefile.bsd-wrapper	27 Jan 2003 21:18:35 -0000
d928 1
a928 1
+++ src/gnu/usr.bin/gzip/Makefile	3 Feb 2003 20:00:12 -0000
d954 1
a954 1
+++ src/gnu/usr.bin/texinfo/Makefile.bsd-wrapper	27 Jan 2003 21:18:36 -0000
d977 1
a977 1
+++ src/gnu/usr.sbin/mkhybrid/src/Makefile	27 Jan 2003 21:18:36 -0000
d993 1
a993 1
+++ src/gnu/usr.sbin/mkhybrid/src/diag/Makefile	27 Jan 2003 21:18:36 -0000
d1010 1
a1010 1
+++ src/kerberosIV/Makefile	27 Jan 2003 21:18:36 -0000
d1031 1
a1031 1
+++ src/kerberosIV/Makefile.inc	27 Jan 2003 21:18:36 -0000
d1047 1
a1047 1
+++ src/kerberosIV/lib/kadm/Makefile	27 Jan 2003 21:18:36 -0000
d1063 1
a1063 1
+++ src/kerberosIV/lib/roken/Makefile	27 Jan 2003 21:18:36 -0000
d1079 1
a1079 1
+++ src/kerberosIV/src/appl/ftp/ftp/Makefile	27 Jan 2003 21:18:36 -0000
d1098 1
a1098 1
+++ src/kerberosIV/src/appl/ftp/ftpd/Makefile	27 Jan 2003 21:18:36 -0000
d1114 1
a1114 1
+++ src/kerberosIV/src/include/Makefile	27 Jan 2003 21:18:36 -0000
d1130 1
a1130 1
+++ src/lib/csu/i386/crt0.c	3 Feb 2003 20:00:12 -0000
d1312 1
a1312 1
+++ src/lib/libc/arch/i386/SYS.h	10 Feb 2003 16:56:20 -0000
d1368 1
a1368 1
+++ src/lib/libc/arch/i386/gen/alloca.S	3 Feb 2003 20:00:12 -0000
d1381 1
a1381 1
+++ src/lib/libc/arch/i386/gen/setjmp.S	3 Feb 2003 20:00:12 -0000
d1422 1
a1422 1
+++ src/lib/libc/arch/i386/gen/sigsetjmp.S	3 Feb 2003 20:00:12 -0000
d1465 1
a1465 1
+++ src/lib/libc/arch/i386/sys/Ovfork.S	3 Feb 2003 20:00:12 -0000
d1492 1
a1492 1
+++ src/lib/libc/arch/i386/sys/brk.S	3 Feb 2003 20:00:12 -0000
d1518 1
a1518 1
+++ src/lib/libc/arch/i386/sys/cerror.S	3 Feb 2003 20:00:12 -0000
d1545 1
a1545 1
+++ src/lib/libc/arch/i386/sys/exect.S	3 Feb 2003 20:00:12 -0000
d1566 1
a1566 1
+++ src/lib/libc/arch/i386/sys/sbrk.S	3 Feb 2003 20:00:12 -0000
d1592 1
a1592 1
+++ src/lib/libc/arch/i386/sys/sigprocmask.S	3 Feb 2003 20:00:12 -0000
d1613 1
a1613 1
+++ src/lib/libc/arch/i386/sys/sigsuspend.S	3 Feb 2003 20:00:12 -0000
d1633 1
a1633 1
+++ src/lib/libc/arch/i386/sys/syscall.S	3 Feb 2003 20:00:12 -0000
d1653 1
a1653 1
+++ src/lib/libcurses++/Makefile	27 Jan 2003 21:18:36 -0000
d1668 1
a1668 1
+++ src/libexec/ftpd/Makefile	27 Jan 2003 21:18:36 -0000
d1684 1
a1684 1
+++ src/libexec/ld.so/library.c	3 Feb 2003 20:00:12 -0000
d1708 1
a1708 1
+++ src/libexec/login_chpass/Makefile	27 Jan 2003 21:18:36 -0000
d1724 1
a1724 1
+++ src/libexec/rshd/Makefile	27 Jan 2003 21:18:36 -0000
d1740 1
a1740 1
+++ src/sbin/disklabel/Makefile	27 Jan 2003 21:18:36 -0000
d1756 1
a1756 1
+++ src/sbin/fdisk/Makefile	27 Jan 2003 21:18:36 -0000
d1772 1
a1772 1
+++ src/sbin/fsck/fsutil.c	27 Jan 2003 21:18:36 -0000
d1787 1
a1787 1
+++ src/sbin/pfctl/Makefile	27 Jan 2003 21:18:36 -0000
d1803 1
a1803 1
+++ src/sbin/photurisd/Makefile	27 Jan 2003 21:18:36 -0000
d1819 1
a1819 1
+++ src/sbin/wsconsctl/Makefile	27 Jan 2003 21:18:36 -0000
d1835 1
a1835 1
+++ src/share/lkm/vfs/module/Makefile	27 Jan 2003 21:18:36 -0000
d1851 1
a1851 1
+++ src/share/man/man4/options.4	27 Jan 2003 21:18:37 -0000
d1853 1
a1853 1
+.\"	$MirBSD: obsd.misc,v 1.4 2003/01/27 21:17:20 tg Exp $
d1875 1
a1875 1
+++ src/share/mk/bsd.README	27 Jan 2003 21:18:37 -0000
d1892 1
a1892 1
+++ src/share/mk/bsd.own.mk	3 Feb 2003 20:00:12 -0000
d1917 1
a1917 1
+++ src/sys/arch/i386/i386/bios.c	27 Jan 2003 21:18:37 -0000
d1933 1
a1933 1
+++ src/sys/arch/i386/i386/db_magic.s	3 Feb 2003 20:00:13 -0000
d2000 1
a2000 1
+++ src/sys/arch/i386/i386/in_cksum.s	3 Feb 2003 20:00:13 -0000
d2026 1
a2026 1
+++ src/sys/arch/i386/i386/locore.s	3 Feb 2003 20:00:13 -0000
d2234 1
a2234 1
+++ src/sys/arch/i386/i386/machdep.c	27 Jan 2003 21:18:37 -0000
d2271 1
a2271 1
+++ src/sys/arch/i386/i386/microtime.s	3 Feb 2003 20:00:13 -0000
d2329 1
a2329 1
+++ src/sys/arch/i386/i386/random.s	3 Feb 2003 20:00:13 -0000
d2362 1
a2362 1
+++ src/sys/arch/i386/include/asm.h	3 Feb 2003 20:00:13 -0000
d2414 1
a2414 1
+++ src/sys/arch/i386/include/bus.h	3 Feb 2003 20:00:13 -0000
d2469 1
a2469 1
+++ src/sys/arch/i386/include/cdefs.h	3 Feb 2003 20:00:13 -0000
d2516 1
a2516 1
+++ src/sys/arch/i386/include/db_machdep.h	3 Feb 2003 20:00:13 -0000
d2532 1
a2532 1
+++ src/sys/arch/i386/include/intr.h	3 Feb 2003 20:00:23 -0000
d2549 1
a2549 1
+++ src/sys/arch/i386/include/param.h	3 Feb 2003 20:00:23 -0000
d2572 1
a2572 1
+++ src/sys/arch/i386/isa/clock.c	27 Jan 2003 21:18:40 -0000
d2588 1
a2588 1
+++ src/sys/arch/i386/isa/icu.s	3 Feb 2003 20:00:23 -0000
d2620 1
a2620 1
+++ src/sys/arch/i386/isa/npx.c	3 Feb 2003 20:00:23 -0000
d2672 1
a2672 1
+++ src/sys/arch/i386/isa/pccom.c	27 Jan 2003 21:18:40 -0000
d2697 1
a2697 1
+++ src/sys/arch/i386/isa/vector.s	3 Feb 2003 20:00:23 -0000
d2873 1
a2873 1
+++ src/sys/arch/i386/pci/pchb.c	27 Jan 2003 21:18:40 -0000
d2889 1
a2889 1
+++ src/sys/arch/i386/pci/pci_addr_fixup.c	27 Jan 2003 21:18:40 -0000
d2922 1
a2922 1
+++ src/sys/arch/i386/pci/pcibios.c	27 Jan 2003 21:18:40 -0000
d2942 1
a2942 1
+++ src/sys/arch/i386/stand/Makefile.inc	27 Jan 2003 21:18:40 -0000
d2958 1
a2958 1
+++ src/sys/arch/i386/stand/biosboot/biosboot.S	3 Feb 2003 20:00:23 -0000
d3314 9
a3322 2
+++ src/sys/arch/i386/stand/boot/Makefile	3 Feb 2003 20:00:23 -0000
@@@@ -15,7 +15,7 @@@@
d3337 1
a3337 1
+++ src/sys/arch/i386/stand/libsa/Makefile	3 Feb 2003 20:00:23 -0000
d3362 1
a3362 1
+++ src/sys/arch/i386/stand/libsa/alloca.S	3 Feb 2003 20:00:23 -0000
d3375 1
a3375 1
+++ src/sys/arch/i386/stand/libsa/bioscons.c	27 Jan 2003 21:18:40 -0000
d3391 1
a3391 1
+++ src/sys/arch/i386/stand/libsa/debug_i386.S	3 Feb 2003 20:00:23 -0000
d3420 1
a3420 1
+++ src/sys/arch/i386/stand/libsa/smpprobe.c	27 Jan 2003 21:18:40 -0000
d3447 1
a3447 1
+++ src/sys/arch/i386/stand/mbr/mbr.S	3 Feb 2003 20:00:23 -0000
d3554 1
a3554 1
+++ src/sys/dev/ccd.c	27 Jan 2003 21:18:41 -0000
d3570 1
a3570 1
+++ src/sys/dev/systrace.c	27 Jan 2003 21:18:41 -0000
d3586 1
a3586 1
+++ src/sys/dev/ic/if_wi.c	27 Jan 2003 21:18:41 -0000
d3602 1
a3602 1
+++ src/sys/dev/ic/if_wi_hostap.c	27 Jan 2003 21:18:41 -0000
d3639 1
a3639 1
+++ src/sys/dev/ic/ne2000.c	27 Jan 2003 21:18:41 -0000
d3655 1
a3655 1
+++ src/sys/dev/ic/rtl80x9.c	27 Jan 2003 21:18:41 -0000
d3671 1
a3671 1
+++ src/sys/dev/ic/rtl81x9.c	27 Jan 2003 21:18:41 -0000
d3690 1
a3690 1
+++ src/sys/dev/isa/if_we.c	3 Feb 2003 20:00:23 -0000
d3707 1
a3707 1
+++ src/sys/dev/microcode/aic7xxx/Makefile	27 Jan 2003 21:18:41 -0000
d3723 1
a3723 1
+++ src/sys/dev/pci/if_bge.c	27 Jan 2003 21:18:41 -0000
d3767 1
a3767 1
+++ src/sys/dev/pci/if_sf.c	27 Jan 2003 21:18:41 -0000
d3783 1
a3783 1
+++ src/sys/dev/pci/if_ste.c	27 Jan 2003 21:18:41 -0000
d3799 1
a3799 1
+++ src/sys/dev/pci/pciide.c	27 Jan 2003 21:18:41 -0000
d3824 1
a3824 1
+++ src/sys/dev/wscons/wsdisplay.c	27 Jan 2003 21:18:41 -0000
d3840 1
a3840 1
+++ src/sys/kern/kern_exec.c	27 Jan 2003 21:18:41 -0000
d3842 1
a3842 1
+/*	$MirBSD: obsd.misc,v 1.4 2003/01/27 21:17:20 tg Exp $	*/
d3862 1
a3862 1
+++ src/sys/kern/kern_fork.c	27 Jan 2003 21:18:41 -0000
d3864 1
a3864 1
+/*	$MirBSD: obsd.misc,v 1.4 2003/01/27 21:17:20 tg Exp $	*/
d3930 1
a3930 1
+++ src/sys/lib/libsa/exec_elf.c	3 Feb 2003 20:00:23 -0000
d3974 1
a3974 1
+++ src/sys/net/pf_table.c	27 Jan 2003 21:18:41 -0000
d4008 1
a4008 1
+++ src/sys/sys/proc.h	27 Jan 2003 21:18:41 -0000
d4010 1
a4010 1
+/*	$MirBSD: obsd.misc,v 1.4 2003/01/27 21:17:20 tg Exp $	*/
d4039 1
a4039 1
+++ src/sys/uvm/uvm_meter.c	27 Jan 2003 21:18:41 -0000
d4075 1
a4075 1
+++ src/usr.bin/hexdump/parse.c	27 Jan 2003 21:18:41 -0000
d4091 1
a4091 1
+++ src/usr.bin/keynote/Makefile	27 Jan 2003 21:18:41 -0000
d4107 1
a4107 1
+++ src/usr.bin/yacc/skeleton.c	27 Jan 2003 21:18:41 -0000
d4109 1
a4109 1
+/*	$MirBSD: obsd.misc,v 1.4 2003/01/27 21:17:20 tg Exp $	*/
d4134 1
a4134 1
+    "  = \"$OpenBSD: skeleton.c,v 1.19 2002/12/03 21:34:21 mickey Exp $ $MirBSD: obsd.misc,v 1.4 2003/01/27 21:17:20 tg Exp $\";",
d4144 1
a4144 1
+++ src/usr.sbin/Makefile	27 Jan 2003 21:18:41 -0000
d4160 1
a4160 1
+++ src/usr.sbin/authpf/authpf.c	27 Jan 2003 21:18:41 -0000
d4176 1
a4176 1
+++ src/usr.sbin/config/main.c	27 Jan 2003 21:18:41 -0000
d4178 1
a4178 1
+/*	$MirBSD: obsd.misc,v 1.4 2003/01/27 21:17:20 tg Exp $	*/
d4276 1
a4276 1
+++ src/usr.sbin/config/scan.l	27 Jan 2003 21:18:41 -0000
@


1.4
log
@another
MirBSD Snapshot #2 RC3
@
text
@d24 1
a24 1
This diff, ID $MirBSD: regen-obsdp.sh,v 1.6 2003/01/21 19:56:49 tg Exp $
d26 1
a26 1
against anoncvs@@anoncvs.ca.openbsd.org:/cvs on Mon Jan 27 17:30:00 UTC 2003.
d28 1
a28 1
### GENERATOR: @@(#)_MirBSD: regen-obsdp.sh,v 1.6 2003/01/21 19:56:49 tg Exp $
d34 2
a35 2
--- src/bin/rcp/Makefile	2002/05/09 18:44:45	1.8
+++ src/bin/rcp/Makefile	2003/01/27 21:08:34
d50 2
a51 2
--- src/bin/systrace/Makefile	2002/10/16 15:01:08	1.8
+++ src/bin/systrace/Makefile	2003/01/27 21:08:34
d71 2
a72 2
--- src/distrib/crunch/Makefile.inc	2001/01/29 01:19:21	1.3
+++ src/distrib/crunch/Makefile.inc	2003/01/27 21:08:34
d84 2
a85 2
--- src/distrib/crunch/crunchgen/Makefile	1996/09/25 06:40:52	1.2
+++ src/distrib/crunch/crunchgen/Makefile	2003/01/27 21:08:34
d95 86
d186 2
a187 2
--- src/distrib/special/pppd/Makefile	1999/06/17 20:42:30	1.2
+++ src/distrib/special/pppd/Makefile	2003/01/27 21:08:34
d201 2
a202 2
--- src/distrib/special/rsh/Makefile	1999/06/17 20:42:31	1.2
+++ src/distrib/special/rsh/Makefile	2003/01/27 21:08:34
d216 2
a217 2
--- src/games/hack/Makefile	2002/05/31 03:46:35	1.13
+++ src/games/hack/Makefile	2003/01/27 21:08:34
d232 2
a233 2
--- src/gnu/egcs/Makefile.bsd-wrapper	2001/09/11 17:35:46	1.5
+++ src/gnu/egcs/Makefile.bsd-wrapper	2003/01/27 21:08:34
d253 2
a254 2
--- src/gnu/egcs/gcc/Makefile.bsd-wrapper	2003/01/18 23:49:50	1.12
+++ src/gnu/egcs/gcc/Makefile.bsd-wrapper	2003/01/27 21:08:34
d256 1
a256 1
+#	$MirBSD: obsd.misc,v 1.3 2003/01/27 17:47:09 tg Exp $
d314 229
d548 2
a549 2
--- src/gnu/egcs/libio/editbuf.cc	1999/05/26 13:38:35	1.1.1.1
+++ src/gnu/egcs/libio/editbuf.cc	2003/01/27 21:08:34
d563 2
a564 2
--- src/gnu/egcs/libio/editbuf.h	1999/05/26 13:38:35	1.1.1.1
+++ src/gnu/egcs/libio/editbuf.h	2003/01/27 21:08:34
d579 2
a580 2
--- src/gnu/egcs/libio/parsestream.cc	1999/05/26 13:38:38	1.1.1.1
+++ src/gnu/egcs/libio/parsestream.cc	2003/01/27 21:08:34
d594 2
a595 2
--- src/gnu/egcs/libio/pfstream.cc	1999/05/26 13:38:38	1.1.1.1
+++ src/gnu/egcs/libio/pfstream.cc	2003/01/27 21:08:34
d609 2
a610 2
--- src/gnu/egcs/libstdc++/Makefile.bsd-wrapper	2002/05/11 00:20:18	1.11
+++ src/gnu/egcs/libstdc++/Makefile.bsd-wrapper	2003/01/27 21:08:35
d620 304
d929 2
a930 2
--- src/gnu/usr.bin/cvs/Makefile.bsd-wrapper	2002/06/03 15:59:38	1.41
+++ src/gnu/usr.bin/cvs/Makefile.bsd-wrapper	2003/01/27 21:08:35
d940 26
d971 2
a972 2
--- src/gnu/usr.bin/texinfo/Makefile.bsd-wrapper	2002/06/11 22:37:14	1.36
+++ src/gnu/usr.bin/texinfo/Makefile.bsd-wrapper	2003/01/27 21:08:35
d994 2
a995 2
--- src/gnu/usr.sbin/mkhybrid/src/Makefile	2002/12/13 03:12:26	1.2
+++ src/gnu/usr.sbin/mkhybrid/src/Makefile	2003/01/27 21:08:35
d1010 2
a1011 2
--- src/gnu/usr.sbin/mkhybrid/src/diag/Makefile	2000/10/10 20:40:26	1.1
+++ src/gnu/usr.sbin/mkhybrid/src/diag/Makefile	2003/01/27 21:08:35
d1027 2
a1028 2
--- src/kerberosIV/Makefile	2001/07/03 18:33:03	1.33
+++ src/kerberosIV/Makefile	2003/01/27 21:08:35
d1048 2
a1049 2
--- src/kerberosIV/Makefile.inc	2002/06/11 15:23:28	1.16
+++ src/kerberosIV/Makefile.inc	2003/01/27 21:08:35
d1064 2
a1065 2
--- src/kerberosIV/lib/kadm/Makefile	2001/01/09 02:41:17	1.2
+++ src/kerberosIV/lib/kadm/Makefile	2003/01/27 21:08:35
d1080 2
a1081 2
--- src/kerberosIV/lib/roken/Makefile	2002/06/08 21:49:49	1.7
+++ src/kerberosIV/lib/roken/Makefile	2003/01/27 21:08:35
d1096 2
a1097 2
--- src/kerberosIV/src/appl/ftp/ftp/Makefile	2001/05/14 13:29:17	1.1.1.1
+++ src/kerberosIV/src/appl/ftp/ftp/Makefile	2003/01/27 21:08:35
d1115 2
a1116 2
--- src/kerberosIV/src/appl/ftp/ftpd/Makefile	2001/05/14 13:29:24	1.1.1.1
+++ src/kerberosIV/src/appl/ftp/ftpd/Makefile	2003/01/27 21:08:35
d1131 2
a1132 2
--- src/kerberosIV/src/include/Makefile	2001/05/14 13:29:38	1.1.1.1
+++ src/kerberosIV/src/include/Makefile	2003/01/27 21:08:35
d1142 182
d1329 4
a1332 25
--- src/lib/libc/arch/i386/SYS.h	2002/10/06 23:24:13	1.13
+++ src/lib/libc/arch/i386/SYS.h	2003/01/27 21:08:35
@@@@ -49,8 +49,19 @@@@
 
 /* Use both _thread_sys_{syscall} and [weak] {syscall}. */
 
+#ifdef _THREAD_SAFE
 #ifdef __STDC__
 #define	SYSENTRY(x)					\
+			ENTRY(_thread_sys_ ## x)
+#else /* ! __STDC__ */
+#define	SYSENTRY(x)					\
+			ENTRY(_thread_sys_/**/x)
+#endif /* ! __STDC__ */
+
+#else /* ! _THREAD_SAFE */
+
+#ifdef __STDC__
+#define	SYSENTRY(x)					\
 			ENTRY(_thread_sys_ ## x)	\
 			.weak _C_LABEL(x);		\
 			_C_LABEL(x) = _C_LABEL(_thread_sys_ ## x)
@@@@ -60,6 +71,7 @@@@
 			.weak _C_LABEL(x);		\
 			_C_LABEL(x) = _C_LABEL(_thread_sys_/**/x)
a1333 1
+#endif /* ! _THREAD_SAFE */
d1335 330
a1664 2
 #ifdef __STDC__
 #define	__DO_SYSCALL(x)					\
d1670 2
a1671 2
--- src/lib/libcurses++/Makefile	1999/08/15 11:35:57	1.5
+++ src/lib/libcurses++/Makefile	2003/01/27 21:08:35
d1685 2
a1686 2
--- src/libexec/ftpd/Makefile	2002/01/25 06:33:23	1.21
+++ src/libexec/ftpd/Makefile	2003/01/27 21:08:35
d1696 24
d1725 2
a1726 2
--- src/libexec/login_chpass/Makefile	2002/05/11 00:20:20	1.2
+++ src/libexec/login_chpass/Makefile	2003/01/27 21:08:35
d1741 2
a1742 2
--- src/libexec/rshd/Makefile	2002/05/06 22:23:53	1.7
+++ src/libexec/rshd/Makefile	2003/01/27 21:08:35
d1757 2
a1758 2
--- src/sbin/disklabel/Makefile	2002/08/08 00:35:50	1.29
+++ src/sbin/disklabel/Makefile	2003/01/27 21:08:35
d1773 2
a1774 2
--- src/sbin/fdisk/Makefile	2002/06/26 18:34:26	1.20
+++ src/sbin/fdisk/Makefile	2003/01/27 21:08:35
d1789 2
a1790 2
--- src/sbin/fsck/fsutil.c	2002/09/06 21:16:16	1.8
+++ src/sbin/fsck/fsutil.c	2003/01/27 21:08:35
d1804 2
a1805 2
--- src/sbin/pfctl/Makefile	2003/01/09 17:33:19	1.12
+++ src/sbin/pfctl/Makefile	2003/01/27 21:08:35
d1820 2
a1821 2
--- src/sbin/photurisd/Makefile	2001/01/28 22:45:05	1.4
+++ src/sbin/photurisd/Makefile	2003/01/27 21:08:35
d1836 2
a1837 2
--- src/sbin/wsconsctl/Makefile	2002/08/12 10:47:06	1.11
+++ src/sbin/wsconsctl/Makefile	2003/01/27 21:08:35
d1852 2
a1853 2
--- src/share/lkm/vfs/module/Makefile	2001/06/27 06:16:47	1.7
+++ src/share/lkm/vfs/module/Makefile	2003/01/27 21:08:35
d1868 2
a1869 2
--- src/share/man/man4/options.4	2003/01/04 22:11:47	1.114
+++ src/share/man/man4/options.4	2003/01/27 21:08:36
d1871 1
a1871 1
+.\"	$MirBSD: obsd.misc,v 1.3 2003/01/27 17:47:09 tg Exp $
d1892 2
a1893 2
--- src/share/mk/bsd.README	2002/06/25 15:33:18	1.32
+++ src/share/mk/bsd.README	2003/01/27 21:08:36
d1909 2
a1910 2
--- src/share/mk/bsd.own.mk	2002/12/07 22:31:00	1.63
+++ src/share/mk/bsd.own.mk	2003/01/27 21:08:37
d1920 9
a1928 23
Index: src/share/termtypes/termtypes.master
===================================================================
RCS file: /cvs/src/share/termtypes/termtypes.master,v
retrieving revision 1.33
diff -u -r1.33 termtypes.master
--- src/share/termtypes/termtypes.master	2002/03/28 21:22:04	1.33
+++ src/share/termtypes/termtypes.master	2003/01/27 21:09:01
@@@@ -1445,13 +1445,13 @@@@
 # after the manner of the pcvt entries.
 wsvt25|NetBSD wscons in 25 line DEC VT220 mode, 
 	bce, msgr,
-	colors#16, cols#80, lines#25, ncv#32, pairs#64,
+	colors#8, cols#80, lines#25, ncv#3, pairs#64,
 	op=\E[m, setab=\E[4%p1%dm, setaf=\E[3%p1%dm,
 	use=vt220, 
 
 wsvt25m|NetBSD wscons in 25 line DEC VT220 mode with Meta, 
 	bce, km, msgr,
-	colors#16, cols#80, lines#25, ncv#32, pairs#64,
+	colors#8, cols#80, lines#25, ncv#3, pairs#64,
 	op=\E[m, setab=\E[4%p1%dm, setaf=\E[3%p1%dm,
 	use=vt220, 
 
d1934 2
a1935 2
--- src/sys/arch/i386/i386/bios.c	2002/05/20 16:38:01	1.49
+++ src/sys/arch/i386/i386/bios.c	2003/01/27 21:09:01
d1945 301
d2251 2
a2252 2
--- src/sys/arch/i386/i386/machdep.c	2003/01/16 19:39:23	1.220
+++ src/sys/arch/i386/i386/machdep.c	2003/01/27 21:09:04
d2283 301
d2589 2
a2590 2
--- src/sys/arch/i386/isa/clock.c	2002/07/06 19:14:20	1.28
+++ src/sys/arch/i386/isa/clock.c	2003/01/27 21:09:04
d2600 84
d2689 2
a2690 2
--- src/sys/arch/i386/isa/pccom.c	2002/03/14 01:26:33	1.42
+++ src/sys/arch/i386/isa/pccom.c	2003/01/27 21:09:05
d2709 176
d2890 2
a2891 2
--- src/sys/arch/i386/pci/pchb.c	2003/01/08 01:46:07	1.38
+++ src/sys/arch/i386/pci/pchb.c	2003/01/27 21:09:05
d2906 2
a2907 2
--- src/sys/arch/i386/pci/pci_addr_fixup.c	2002/06/14 21:34:58	1.14
+++ src/sys/arch/i386/pci/pci_addr_fixup.c	2003/01/27 21:09:05
d2939 2
a2940 2
--- src/sys/arch/i386/pci/pcibios.c	2002/07/12 21:17:06	1.27
+++ src/sys/arch/i386/pci/pcibios.c	2003/01/27 21:09:07
d2959 2
a2960 2
--- src/sys/arch/i386/stand/Makefile.inc	2002/12/02 09:00:23	1.30
+++ src/sys/arch/i386/stand/Makefile.inc	2003/01/27 21:09:07
d2970 410
d3385 2
a3386 2
--- src/sys/arch/i386/stand/libsa/bioscons.c	2003/01/17 20:58:27	1.21
+++ src/sys/arch/i386/stand/libsa/bioscons.c	2003/01/27 21:09:07
d3396 29
d3430 2
a3431 2
--- src/sys/arch/i386/stand/libsa/smpprobe.c	1998/09/27 17:42:07	1.3
+++ src/sys/arch/i386/stand/libsa/smpprobe.c	2003/01/27 21:09:07
d3452 107
d3564 2
a3565 2
--- src/sys/dev/ccd.c	2002/11/10 21:23:09	1.50
+++ src/sys/dev/ccd.c	2003/01/27 21:09:08
d3580 2
a3581 2
--- src/sys/dev/systrace.c	2002/12/12 08:36:05	1.27
+++ src/sys/dev/systrace.c	2003/01/27 21:09:08
d3596 2
a3597 2
--- src/sys/dev/ic/if_wi.c	2003/01/23 19:27:19	1.91
+++ src/sys/dev/ic/if_wi.c	2003/01/27 21:09:10
d3612 2
a3613 2
--- src/sys/dev/ic/if_wi_hostap.c	2003/01/21 20:09:39	1.23
+++ src/sys/dev/ic/if_wi_hostap.c	2003/01/27 21:09:11
d3649 2
a3650 2
--- src/sys/dev/ic/ne2000.c	2002/03/14 01:26:55	1.12
+++ src/sys/dev/ic/ne2000.c	2003/01/27 21:09:11
d3665 2
a3666 2
--- src/sys/dev/ic/rtl80x9.c	2001/03/12 05:36:58	1.6
+++ src/sys/dev/ic/rtl80x9.c	2003/01/27 21:09:12
d3681 2
a3682 2
--- src/sys/dev/ic/rtl81x9.c	2002/10/15 16:02:10	1.19
+++ src/sys/dev/ic/rtl81x9.c	2003/01/27 21:09:12
d3695 17
d3717 2
a3718 2
--- src/sys/dev/microcode/aic7xxx/Makefile	2002/06/30 18:25:58	1.5
+++ src/sys/dev/microcode/aic7xxx/Makefile	2003/01/27 21:09:12
d3733 2
a3734 2
--- src/sys/dev/pci/if_bge.c	2003/01/15 06:31:24	1.18
+++ src/sys/dev/pci/if_bge.c	2003/01/27 21:09:15
d3777 2
a3778 2
--- src/sys/dev/pci/if_sf.c	2003/01/15 06:31:24	1.19
+++ src/sys/dev/pci/if_sf.c	2003/01/27 21:09:15
d3793 2
a3794 2
--- src/sys/dev/pci/if_ste.c	2003/01/15 06:31:24	1.18
+++ src/sys/dev/pci/if_ste.c	2003/01/27 21:09:16
d3809 2
a3810 2
--- src/sys/dev/pci/pciide.c	2003/01/17 00:54:23	1.110
+++ src/sys/dev/pci/pciide.c	2003/01/27 21:09:19
d3834 2
a3835 2
--- src/sys/dev/wscons/wsdisplay.c	2002/10/12 01:09:44	1.49
+++ src/sys/dev/wscons/wsdisplay.c	2003/01/27 21:09:20
d3850 2
a3851 2
--- src/sys/kern/kern_exec.c	2002/12/11 00:08:08	1.75
+++ src/sys/kern/kern_exec.c	2003/01/27 21:09:20
d3853 1
a3853 1
+/*	$MirBSD: obsd.misc,v 1.3 2003/01/27 17:47:09 tg Exp $	*/
d3872 2
a3873 2
--- src/sys/kern/kern_fork.c	2002/10/31 01:33:27	1.59
+++ src/sys/kern/kern_fork.c	2003/01/27 21:09:21
d3875 1
a3875 1
+/*	$MirBSD: obsd.misc,v 1.3 2003/01/27 17:47:09 tg Exp $	*/
d3935 44
d3984 2
a3985 2
--- src/sys/net/pf_table.c	2003/01/15 16:55:10	1.24
+++ src/sys/net/pf_table.c	2003/01/27 21:09:21
d4018 2
a4019 2
--- src/sys/sys/proc.h	2002/07/20 19:24:57	1.62
+++ src/sys/sys/proc.h	2003/01/27 21:09:22
d4021 1
a4021 1
+/*	$MirBSD: obsd.misc,v 1.3 2003/01/27 17:47:09 tg Exp $	*/
d4049 2
a4050 2
--- src/sys/uvm/uvm_meter.c	2002/03/14 01:27:18	1.17
+++ src/sys/uvm/uvm_meter.c	2003/01/27 21:09:22
d4085 2
a4086 2
--- src/usr.bin/hexdump/parse.c	2002/03/14 06:51:42	1.10
+++ src/usr.bin/hexdump/parse.c	2003/01/27 21:09:22
d4101 2
a4102 2
--- src/usr.bin/keynote/Makefile	2002/05/11 00:20:20	1.10
+++ src/usr.bin/keynote/Makefile	2003/01/27 21:09:22
d4117 2
a4118 2
--- src/usr.bin/yacc/skeleton.c	2002/12/03 21:34:21	1.19
+++ src/usr.bin/yacc/skeleton.c	2003/01/27 21:09:22
d4120 1
a4120 1
+/*	$MirBSD: obsd.misc,v 1.3 2003/01/27 17:47:09 tg Exp $	*/
d4145 1
a4145 1
+    "  = \"$OpenBSD: skeleton.c,v 1.19 2002/12/03 21:34:21 mickey Exp $ $MirBSD: obsd.misc,v 1.3 2003/01/27 17:47:09 tg Exp $\";",
d4154 2
a4155 2
--- src/usr.sbin/Makefile	2002/12/31 16:22:26	1.92
+++ src/usr.sbin/Makefile	2003/01/27 21:09:22
d4170 2
a4171 2
--- src/usr.sbin/authpf/authpf.c	2003/01/27 00:59:20	1.48
+++ src/usr.sbin/authpf/authpf.c	2003/01/27 21:09:24
d4186 2
a4187 2
--- src/usr.sbin/config/main.c	2002/09/06 19:02:06	1.29
+++ src/usr.sbin/config/main.c	2003/01/27 21:09:24
d4189 1
a4189 1
+/*	$MirBSD: obsd.misc,v 1.3 2003/01/27 17:47:09 tg Exp $	*/
d4286 2
a4287 2
--- src/usr.sbin/config/scan.l	2002/02/16 21:28:01	1.15
+++ src/usr.sbin/config/scan.l	2003/01/27 21:09:24
d4328 2
d4336 2
d4343 16
d4360 1
d4371 13
a4383 1
src/lib/libc/arch/i386/SYS.h			no weak symbols in .a libs?
d4386 1
d4398 1
a4398 2
src/share/mk/bsd.own.mk				no-kerberos4
src/share/termtypes/termtypes.master		fix terminal entry for lynx
d4400 3
d4404 8
d4413 2
d4416 1
d4421 4
d4426 1
d4428 1
d4435 1
d4446 1
@


1.3
log
@Release Candidate #2
@
text
@d26 1
a26 1
against anoncvs@@anoncvs.ca.openbsd.org:/cvs on Mon Jan 27 12:20:00 UTC 2003.
d35 1
a35 1
+++ src/bin/rcp/Makefile	2003/01/27 17:40:17
d51 1
a51 1
+++ src/bin/systrace/Makefile	2003/01/27 17:40:17
d72 1
a72 1
+++ src/distrib/crunch/Makefile.inc	2003/01/27 17:40:17
d85 1
a85 1
+++ src/distrib/crunch/crunchgen/Makefile	2003/01/27 17:40:17
d101 1
a101 1
+++ src/distrib/special/pppd/Makefile	2003/01/27 17:40:17
d116 1
a116 1
+++ src/distrib/special/rsh/Makefile	2003/01/27 17:40:17
d131 1
a131 1
+++ src/games/hack/Makefile	2003/01/27 17:40:17
d147 1
a147 1
+++ src/gnu/egcs/Makefile.bsd-wrapper	2003/01/27 17:40:17
d168 1
a168 1
+++ src/gnu/egcs/gcc/Makefile.bsd-wrapper	2003/01/27 17:40:17
d170 1
a170 1
+#	$MirBSD: obsd.misc,v 1.2 2003/01/27 15:38:17 tg Exp $
d234 1
a234 1
+++ src/gnu/egcs/libio/editbuf.cc	2003/01/27 17:40:17
d249 1
a249 1
+++ src/gnu/egcs/libio/editbuf.h	2003/01/27 17:40:17
d265 1
a265 1
+++ src/gnu/egcs/libio/parsestream.cc	2003/01/27 17:40:17
d280 1
a280 1
+++ src/gnu/egcs/libio/pfstream.cc	2003/01/27 17:40:17
d295 1
a295 1
+++ src/gnu/egcs/libstdc++/Makefile.bsd-wrapper	2003/01/27 17:40:18
d311 1
a311 1
+++ src/gnu/usr.bin/cvs/Makefile.bsd-wrapper	2003/01/27 17:40:18
d327 1
a327 1
+++ src/gnu/usr.bin/texinfo/Makefile.bsd-wrapper	2003/01/27 17:40:18
d350 1
a350 1
+++ src/gnu/usr.sbin/mkhybrid/src/Makefile	2003/01/27 17:40:18
d366 1
a366 1
+++ src/gnu/usr.sbin/mkhybrid/src/diag/Makefile	2003/01/27 17:40:18
d383 1
a383 1
+++ src/kerberosIV/Makefile	2003/01/27 17:40:18
d404 1
a404 1
+++ src/kerberosIV/Makefile.inc	2003/01/27 17:40:18
d420 1
a420 1
+++ src/kerberosIV/lib/kadm/Makefile	2003/01/27 17:40:18
d436 1
a436 1
+++ src/kerberosIV/lib/roken/Makefile	2003/01/27 17:40:18
d452 1
a452 1
+++ src/kerberosIV/src/appl/ftp/ftp/Makefile	2003/01/27 17:40:18
d471 1
a471 1
+++ src/kerberosIV/src/appl/ftp/ftpd/Makefile	2003/01/27 17:40:18
d487 1
a487 1
+++ src/kerberosIV/src/include/Makefile	2003/01/27 17:40:18
d503 1
a503 1
+++ src/lib/libc/arch/i386/SYS.h	2003/01/27 17:40:18
d538 1
a538 1
+++ src/lib/libcurses++/Makefile	2003/01/27 17:40:18
d553 1
a553 1
+++ src/libexec/ftpd/Makefile	2003/01/27 17:40:18
d569 1
a569 1
+++ src/libexec/login_chpass/Makefile	2003/01/27 17:40:18
d585 1
a585 1
+++ src/libexec/rshd/Makefile	2003/01/27 17:40:18
d601 1
a601 1
+++ src/sbin/disklabel/Makefile	2003/01/27 17:40:18
d617 1
a617 1
+++ src/sbin/fdisk/Makefile	2003/01/27 17:40:18
d633 1
a633 1
+++ src/sbin/fsck/fsutil.c	2003/01/27 17:40:18
d648 1
a648 1
+++ src/sbin/pfctl/Makefile	2003/01/27 17:40:18
d664 1
a664 1
+++ src/sbin/photurisd/Makefile	2003/01/27 17:40:18
d680 1
a680 1
+++ src/sbin/wsconsctl/Makefile	2003/01/27 17:40:18
d696 1
a696 1
+++ src/share/lkm/vfs/module/Makefile	2003/01/27 17:40:18
d712 1
a712 1
+++ src/share/man/man4/options.4	2003/01/27 17:40:19
d714 1
a714 1
+.\"	$MirBSD: obsd.misc,v 1.2 2003/01/27 15:38:17 tg Exp $
d736 1
a736 1
+++ src/share/mk/bsd.README	2003/01/27 17:40:19
d753 1
a753 1
+++ src/share/mk/bsd.own.mk	2003/01/27 17:40:20
d769 1
a769 1
+++ src/share/termtypes/termtypes.master	2003/01/27 17:40:42
d792 1
a792 1
+++ src/sys/arch/i386/i386/bios.c	2003/01/27 17:40:42
d808 1
a808 1
+++ src/sys/arch/i386/i386/machdep.c	2003/01/27 17:40:46
d845 1
a845 1
+++ src/sys/arch/i386/isa/clock.c	2003/01/27 17:40:46
d861 1
a861 1
+++ src/sys/arch/i386/isa/pccom.c	2003/01/27 17:40:47
d886 1
a886 1
+++ src/sys/arch/i386/pci/pchb.c	2003/01/27 17:40:47
d902 1
a902 1
+++ src/sys/arch/i386/pci/pci_addr_fixup.c	2003/01/27 17:40:47
d935 1
a935 1
+++ src/sys/arch/i386/pci/pcibios.c	2003/01/27 17:40:48
d955 1
a955 1
+++ src/sys/arch/i386/stand/Makefile.inc	2003/01/27 17:40:48
d971 1
a971 1
+++ src/sys/arch/i386/stand/libsa/bioscons.c	2003/01/27 17:40:48
d987 1
a987 1
+++ src/sys/arch/i386/stand/libsa/smpprobe.c	2003/01/27 17:40:48
d1014 1
a1014 1
+++ src/sys/dev/ccd.c	2003/01/27 17:40:50
d1030 1
a1030 1
+++ src/sys/dev/systrace.c	2003/01/27 17:40:50
d1046 1
a1046 1
+++ src/sys/dev/ic/if_wi.c	2003/01/27 17:40:51
d1062 1
a1062 1
+++ src/sys/dev/ic/if_wi_hostap.c	2003/01/27 17:40:52
d1099 1
a1099 1
+++ src/sys/dev/ic/ne2000.c	2003/01/27 17:40:52
d1115 1
a1115 1
+++ src/sys/dev/ic/rtl80x9.c	2003/01/27 17:40:53
d1131 1
a1131 1
+++ src/sys/dev/ic/rtl81x9.c	2003/01/27 17:40:53
d1150 1
a1150 1
+++ src/sys/dev/microcode/aic7xxx/Makefile	2003/01/27 17:40:53
d1166 1
a1166 1
+++ src/sys/dev/pci/if_bge.c	2003/01/27 17:40:56
d1210 1
a1210 1
+++ src/sys/dev/pci/if_sf.c	2003/01/27 17:40:56
d1226 1
a1226 1
+++ src/sys/dev/pci/if_ste.c	2003/01/27 17:40:57
d1242 1
a1242 1
+++ src/sys/dev/pci/pciide.c	2003/01/27 17:41:00
d1267 1
a1267 1
+++ src/sys/dev/wscons/wsdisplay.c	2003/01/27 17:41:01
d1283 1
a1283 1
+++ src/sys/kern/kern_exec.c	2003/01/27 17:41:01
d1285 1
a1285 1
+/*	$MirBSD: obsd.misc,v 1.2 2003/01/27 15:38:17 tg Exp $	*/
d1305 1
a1305 1
+++ src/sys/kern/kern_fork.c	2003/01/27 17:41:02
d1307 1
a1307 1
+/*	$MirBSD: obsd.misc,v 1.2 2003/01/27 15:38:17 tg Exp $	*/
d1373 1
a1373 1
+++ src/sys/net/pf_table.c	2003/01/27 17:41:02
d1407 1
a1407 1
+++ src/sys/sys/proc.h	2003/01/27 17:41:03
d1409 1
a1409 1
+/*	$MirBSD: obsd.misc,v 1.2 2003/01/27 15:38:17 tg Exp $	*/
d1438 1
a1438 1
+++ src/sys/uvm/uvm_meter.c	2003/01/27 17:41:04
d1474 1
a1474 1
+++ src/usr.bin/hexdump/parse.c	2003/01/27 17:41:04
d1490 1
a1490 1
+++ src/usr.bin/keynote/Makefile	2003/01/27 17:41:04
d1506 1
a1506 1
+++ src/usr.bin/yacc/skeleton.c	2003/01/27 17:41:04
d1508 1
a1508 1
+/*	$MirBSD: obsd.misc,v 1.2 2003/01/27 15:38:17 tg Exp $	*/
d1533 1
a1533 1
+    "  = \"$OpenBSD: skeleton.c,v 1.19 2002/12/03 21:34:21 mickey Exp $ $MirBSD: obsd.misc,v 1.2 2003/01/27 15:38:17 tg Exp $\";",
d1543 1
a1543 1
+++ src/usr.sbin/Makefile	2003/01/27 17:41:04
d1559 1
a1559 1
+++ src/usr.sbin/authpf/authpf.c	2003/01/27 17:41:05
d1575 1
a1575 1
+++ src/usr.sbin/config/main.c	2003/01/27 17:41:05
d1577 1
a1577 1
+/*	$MirBSD: obsd.misc,v 1.2 2003/01/27 15:38:17 tg Exp $	*/
d1675 1
a1675 1
+++ src/usr.sbin/config/scan.l	2003/01/27 17:41:05
@


1.2
log
@snapshot release candidate
todo:
 + cvs repo (ports, src) check for diff
 + make build
 + make release
 + checkflist
 + if !correct: regen diffs, do again
 + upload
@
text
@d35 1
a35 1
+++ src/bin/rcp/Makefile	2003/01/27 15:34:33
d51 1
a51 1
+++ src/bin/systrace/Makefile	2003/01/27 15:34:33
d72 1
a72 1
+++ src/distrib/crunch/Makefile.inc	2003/01/27 15:34:33
d85 1
a85 1
+++ src/distrib/crunch/crunchgen/Makefile	2003/01/27 15:34:33
d101 1
a101 1
+++ src/distrib/special/pppd/Makefile	2003/01/27 15:34:33
d116 1
a116 1
+++ src/distrib/special/rsh/Makefile	2003/01/27 15:34:33
d131 1
a131 1
+++ src/games/hack/Makefile	2003/01/27 15:34:33
d147 1
a147 1
+++ src/gnu/egcs/Makefile.bsd-wrapper	2003/01/27 15:34:33
d168 1
a168 1
+++ src/gnu/egcs/gcc/Makefile.bsd-wrapper	2003/01/27 15:34:33
d170 1
a170 1
+#	$MirBSD: obsd.misc,v 1.1 2003/01/26 13:10:25 tg Exp $
d234 1
a234 1
+++ src/gnu/egcs/libio/editbuf.cc	2003/01/27 15:34:33
d249 1
a249 1
+++ src/gnu/egcs/libio/editbuf.h	2003/01/27 15:34:33
d265 1
a265 1
+++ src/gnu/egcs/libio/parsestream.cc	2003/01/27 15:34:33
d280 1
a280 1
+++ src/gnu/egcs/libio/pfstream.cc	2003/01/27 15:34:33
d295 1
a295 1
+++ src/gnu/egcs/libstdc++/Makefile.bsd-wrapper	2003/01/27 15:34:35
d311 1
a311 1
+++ src/gnu/usr.bin/cvs/Makefile.bsd-wrapper	2003/01/27 15:34:35
d327 1
a327 1
+++ src/gnu/usr.bin/texinfo/Makefile.bsd-wrapper	2003/01/27 15:34:35
d350 1
a350 1
+++ src/gnu/usr.sbin/mkhybrid/src/Makefile	2003/01/27 15:34:35
d366 1
a366 1
+++ src/gnu/usr.sbin/mkhybrid/src/diag/Makefile	2003/01/27 15:34:35
d383 1
a383 1
+++ src/kerberosIV/Makefile	2003/01/27 15:34:35
d404 1
a404 1
+++ src/kerberosIV/Makefile.inc	2003/01/27 15:34:35
d420 1
a420 1
+++ src/kerberosIV/lib/kadm/Makefile	2003/01/27 15:34:35
d436 1
a436 1
+++ src/kerberosIV/lib/roken/Makefile	2003/01/27 15:34:35
d452 1
a452 1
+++ src/kerberosIV/src/appl/ftp/ftp/Makefile	2003/01/27 15:34:35
d471 1
a471 1
+++ src/kerberosIV/src/appl/ftp/ftpd/Makefile	2003/01/27 15:34:35
d487 1
a487 1
+++ src/kerberosIV/src/include/Makefile	2003/01/27 15:34:35
d503 1
a503 1
+++ src/lib/libc/arch/i386/SYS.h	2003/01/27 15:34:35
d532 15
d553 1
a553 1
+++ src/libexec/ftpd/Makefile	2003/01/27 15:34:35
d569 1
a569 1
+++ src/libexec/login_chpass/Makefile	2003/01/27 15:34:35
d585 1
a585 1
+++ src/libexec/rshd/Makefile	2003/01/27 15:34:35
d601 1
a601 1
+++ src/sbin/disklabel/Makefile	2003/01/27 15:34:35
d617 1
a617 1
+++ src/sbin/fdisk/Makefile	2003/01/27 15:34:35
d633 1
a633 1
+++ src/sbin/fsck/fsutil.c	2003/01/27 15:34:35
d648 1
a648 1
+++ src/sbin/pfctl/Makefile	2003/01/27 15:34:35
d664 1
a664 1
+++ src/sbin/photurisd/Makefile	2003/01/27 15:34:35
d680 1
a680 1
+++ src/sbin/wsconsctl/Makefile	2003/01/27 15:34:35
d696 1
a696 1
+++ src/share/lkm/vfs/module/Makefile	2003/01/27 15:34:35
d712 1
a712 1
+++ src/share/man/man4/options.4	2003/01/27 15:34:36
d714 1
a714 1
+.\"	$MirBSD: obsd.misc,v 1.1 2003/01/26 13:10:25 tg Exp $
d736 1
a736 1
+++ src/share/mk/bsd.README	2003/01/27 15:34:36
d753 1
a753 1
+++ src/share/mk/bsd.own.mk	2003/01/27 15:34:36
d769 1
a769 1
+++ src/share/termtypes/termtypes.master	2003/01/27 15:34:58
d792 1
a792 1
+++ src/sys/arch/i386/i386/bios.c	2003/01/27 15:34:58
d808 1
a808 1
+++ src/sys/arch/i386/i386/machdep.c	2003/01/27 15:35:01
d845 1
a845 1
+++ src/sys/arch/i386/isa/clock.c	2003/01/27 15:35:01
d861 1
a861 1
+++ src/sys/arch/i386/isa/pccom.c	2003/01/27 15:35:03
d886 1
a886 1
+++ src/sys/arch/i386/pci/pchb.c	2003/01/27 15:35:03
d902 1
a902 1
+++ src/sys/arch/i386/pci/pci_addr_fixup.c	2003/01/27 15:35:03
d935 1
a935 1
+++ src/sys/arch/i386/pci/pcibios.c	2003/01/27 15:35:04
d955 1
a955 1
+++ src/sys/arch/i386/stand/Makefile.inc	2003/01/27 15:35:04
d971 1
a971 1
+++ src/sys/arch/i386/stand/libsa/bioscons.c	2003/01/27 15:35:04
d987 1
a987 1
+++ src/sys/arch/i386/stand/libsa/smpprobe.c	2003/01/27 15:35:04
d1014 1
a1014 1
+++ src/sys/dev/ccd.c	2003/01/27 15:35:04
d1030 1
a1030 1
+++ src/sys/dev/systrace.c	2003/01/27 15:35:05
d1046 1
a1046 1
+++ src/sys/dev/ic/if_wi.c	2003/01/27 15:35:06
d1062 1
a1062 1
+++ src/sys/dev/ic/if_wi_hostap.c	2003/01/27 15:35:08
d1099 1
a1099 1
+++ src/sys/dev/ic/ne2000.c	2003/01/27 15:35:08
d1115 1
a1115 1
+++ src/sys/dev/ic/rtl80x9.c	2003/01/27 15:35:09
d1131 1
a1131 1
+++ src/sys/dev/ic/rtl81x9.c	2003/01/27 15:35:09
d1150 1
a1150 1
+++ src/sys/dev/microcode/aic7xxx/Makefile	2003/01/27 15:35:09
d1166 1
a1166 1
+++ src/sys/dev/pci/if_bge.c	2003/01/27 15:35:11
d1210 1
a1210 1
+++ src/sys/dev/pci/if_sf.c	2003/01/27 15:35:11
d1226 1
a1226 1
+++ src/sys/dev/pci/if_ste.c	2003/01/27 15:35:13
d1242 1
a1242 1
+++ src/sys/dev/pci/pciide.c	2003/01/27 15:35:15
d1267 1
a1267 1
+++ src/sys/dev/wscons/wsdisplay.c	2003/01/27 15:35:16
d1283 1
a1283 1
+++ src/sys/kern/kern_exec.c	2003/01/27 15:35:16
d1285 1
a1285 1
+/*	$MirBSD: obsd.misc,v 1.1 2003/01/26 13:10:25 tg Exp $	*/
d1305 1
a1305 1
+++ src/sys/kern/kern_fork.c	2003/01/27 15:35:18
d1307 1
a1307 1
+/*	$MirBSD: obsd.misc,v 1.1 2003/01/26 13:10:25 tg Exp $	*/
d1373 1
a1373 1
+++ src/sys/net/pf_table.c	2003/01/27 15:35:18
d1407 1
a1407 1
+++ src/sys/sys/proc.h	2003/01/27 15:35:19
d1409 1
a1409 1
+/*	$MirBSD: obsd.misc,v 1.1 2003/01/26 13:10:25 tg Exp $	*/
d1438 1
a1438 1
+++ src/sys/uvm/uvm_meter.c	2003/01/27 15:35:19
d1474 1
a1474 1
+++ src/usr.bin/hexdump/parse.c	2003/01/27 15:35:19
d1490 1
a1490 1
+++ src/usr.bin/keynote/Makefile	2003/01/27 15:35:19
d1506 1
a1506 1
+++ src/usr.bin/yacc/skeleton.c	2003/01/27 15:35:19
d1508 1
a1508 1
+/*	$MirBSD: obsd.misc,v 1.1 2003/01/26 13:10:25 tg Exp $	*/
d1533 1
a1533 1
+    "  = \"$OpenBSD: skeleton.c,v 1.19 2002/12/03 21:34:21 mickey Exp $ $MirBSD: obsd.misc,v 1.1 2003/01/26 13:10:25 tg Exp $\";",
d1543 1
a1543 1
+++ src/usr.sbin/Makefile	2003/01/27 15:35:19
a1552 9
@@@@ -38,5 +38,8 @@@@
 .if (${YP:L} == "yes")
 SUBDIR+=ypbind yppoll ypset ypserv
 .endif
+
+# $MirBSD: obsd.misc,v 1.1 2003/01/26 13:10:25 tg Exp $
+SUBDIR+=host
 
 .include <bsd.subdir.mk>
d1559 1
a1559 1
+++ src/usr.sbin/authpf/authpf.c	2003/01/27 15:35:20
d1575 1
a1575 1
+++ src/usr.sbin/config/main.c	2003/01/27 15:35:20
d1577 1
a1577 1
+/*	$MirBSD: obsd.misc,v 1.1 2003/01/26 13:10:25 tg Exp $	*/
d1675 1
a1675 1
+++ src/usr.sbin/config/scan.l	2003/01/27 15:35:20
d1739 1
d1786 1
a1786 1
src/usr.sbin/Makefile				-named -bind +host
@


1.1
log
@sync
fix gcc-3.2 port (uses humantime-ulimit!)
switch system CXX to g++-3.2
bump mc
make build, fix
plug some compiler warnings (uninitialized, trigraph, ...)
make release, sync plists

merge obsd.gcc and obsd.mini to obsd.misc
@
text
@d26 1
a26 1
against CTM on Sun Jan 26 13:05:01 UTC 2003.
a28 1
### CTM OpenBSD-cvs 2976
d34 2
a35 2
--- src/bin/rcp/Makefile	9 May 2002 18:44:23 -0000	1.8
+++ src/bin/rcp/Makefile	26 Jan 2003 13:00:40 -0000
d50 2
a51 2
--- src/bin/systrace/Makefile	16 Oct 2002 15:00:46 -0000	1.8
+++ src/bin/systrace/Makefile	26 Jan 2003 13:00:40 -0000
d71 2
a72 2
--- src/distrib/crunch/Makefile.inc	29 Jan 2001 01:18:59 -0000	1.3
+++ src/distrib/crunch/Makefile.inc	26 Jan 2003 13:00:40 -0000
d84 2
a85 2
--- src/distrib/crunch/crunchgen/Makefile	25 Sep 1996 06:40:32 -0000	1.2
+++ src/distrib/crunch/crunchgen/Makefile	26 Jan 2003 13:00:40 -0000
d100 2
a101 2
--- src/distrib/special/pppd/Makefile	17 Jun 1999 20:42:08 -0000	1.2
+++ src/distrib/special/pppd/Makefile	26 Jan 2003 13:00:40 -0000
d115 2
a116 2
--- src/distrib/special/rsh/Makefile	17 Jun 1999 20:42:09 -0000	1.2
+++ src/distrib/special/rsh/Makefile	26 Jan 2003 13:00:40 -0000
d130 2
a131 2
--- src/games/hack/Makefile	31 May 2002 03:46:13 -0000	1.13
+++ src/games/hack/Makefile	26 Jan 2003 13:00:40 -0000
d146 2
a147 2
--- src/gnu/egcs/Makefile.bsd-wrapper	11 Sep 2001 17:35:24 -0000	1.5
+++ src/gnu/egcs/Makefile.bsd-wrapper	26 Jan 2003 13:00:40 -0000
d167 2
a168 2
--- src/gnu/egcs/gcc/Makefile.bsd-wrapper	18 Jan 2003 23:49:28 -0000	1.12
+++ src/gnu/egcs/gcc/Makefile.bsd-wrapper	26 Jan 2003 13:00:40 -0000
d170 1
a170 1
+#	$MirBSD: obsd.gcc,v 1.15 2003/01/24 16:24:59 tg Exp $
d174 1
a174 1
@@@@ -5,19 +6,19 @@@@
a178 1
+.if defined(BOOTSTRAP) || !defined(USE_OLD_CPLUSPLUS)
d180 1
a180 1
 .else
d183 1
a183 3
+LANGUAGES=--enable-languages='c,c++'
+MAN+=		cp/g++.1
 MLINKS+=	g++.1 c++.1
d185 1
a185 1
 .endif
d196 1
a196 1
@@@@ -107,23 +108,11 @@@@
d220 1
a220 1
@@@@ -140,6 +129,7 @@@@
d233 2
a234 2
--- src/gnu/egcs/libio/editbuf.cc	26 May 1999 13:38:13 -0000	1.1.1.1
+++ src/gnu/egcs/libio/editbuf.cc	26 Jan 2003 13:00:40 -0000
d248 2
a249 2
--- src/gnu/egcs/libio/editbuf.h	26 May 1999 13:38:13 -0000	1.1.1.1
+++ src/gnu/egcs/libio/editbuf.h	26 Jan 2003 13:00:40 -0000
d264 2
a265 2
--- src/gnu/egcs/libio/parsestream.cc	26 May 1999 13:38:16 -0000	1.1.1.1
+++ src/gnu/egcs/libio/parsestream.cc	26 Jan 2003 13:00:40 -0000
d279 2
a280 2
--- src/gnu/egcs/libio/pfstream.cc	26 May 1999 13:38:16 -0000	1.1.1.1
+++ src/gnu/egcs/libio/pfstream.cc	26 Jan 2003 13:00:40 -0000
d294 2
a295 2
--- src/gnu/egcs/libstdc++/Makefile.bsd-wrapper	11 May 2002 00:19:56 -0000	1.11
+++ src/gnu/egcs/libstdc++/Makefile.bsd-wrapper	26 Jan 2003 13:00:40 -0000
d310 2
a311 2
--- src/gnu/usr.bin/cvs/Makefile.bsd-wrapper	3 Jun 2002 15:59:16 -0000	1.41
+++ src/gnu/usr.bin/cvs/Makefile.bsd-wrapper	26 Jan 2003 13:00:40 -0000
d326 2
a327 2
--- src/gnu/usr.bin/texinfo/Makefile.bsd-wrapper	11 Jun 2002 22:36:52 -0000	1.36
+++ src/gnu/usr.bin/texinfo/Makefile.bsd-wrapper	26 Jan 2003 13:00:40 -0000
d349 2
a350 2
--- src/gnu/usr.sbin/mkhybrid/src/Makefile	13 Dec 2002 03:12:04 -0000	1.2
+++ src/gnu/usr.sbin/mkhybrid/src/Makefile	26 Jan 2003 13:00:40 -0000
d365 2
a366 2
--- src/gnu/usr.sbin/mkhybrid/src/diag/Makefile	10 Oct 2000 20:40:04 -0000	1.1
+++ src/gnu/usr.sbin/mkhybrid/src/diag/Makefile	26 Jan 2003 13:00:40 -0000
d382 2
a383 2
--- src/kerberosIV/Makefile	3 Jul 2001 18:32:41 -0000	1.33
+++ src/kerberosIV/Makefile	26 Jan 2003 13:00:40 -0000
d403 2
a404 2
--- src/kerberosIV/Makefile.inc	11 Jun 2002 15:23:06 -0000	1.16
+++ src/kerberosIV/Makefile.inc	26 Jan 2003 13:00:40 -0000
d419 2
a420 2
--- src/kerberosIV/lib/kadm/Makefile	9 Jan 2001 02:40:55 -0000	1.2
+++ src/kerberosIV/lib/kadm/Makefile	26 Jan 2003 13:00:40 -0000
d435 2
a436 2
--- src/kerberosIV/lib/roken/Makefile	8 Jun 2002 21:49:27 -0000	1.7
+++ src/kerberosIV/lib/roken/Makefile	26 Jan 2003 13:00:40 -0000
d451 2
a452 2
--- src/kerberosIV/src/appl/ftp/ftp/Makefile	14 May 2001 13:28:55 -0000	1.1.1.1
+++ src/kerberosIV/src/appl/ftp/ftp/Makefile	26 Jan 2003 13:00:41 -0000
d470 2
a471 2
--- src/kerberosIV/src/appl/ftp/ftpd/Makefile	14 May 2001 13:29:02 -0000	1.1.1.1
+++ src/kerberosIV/src/appl/ftp/ftpd/Makefile	26 Jan 2003 13:00:41 -0000
d486 2
a487 2
--- src/kerberosIV/src/include/Makefile	14 May 2001 13:29:16 -0000	1.1.1.1
+++ src/kerberosIV/src/include/Makefile	26 Jan 2003 13:00:41 -0000
d502 3
a504 3
--- src/lib/libc/arch/i386/SYS.h	6 Oct 2002 23:23:51 -0000	1.13
+++ src/lib/libc/arch/i386/SYS.h	26 Jan 2003 13:00:41 -0000
@@@@ -49,6 +49,17 @@@@
d509 2
a510 2
+#ifdef __STDC__
+#define	SYSENTRY(x)					\
d519 2
a520 2
 #ifdef __STDC__
 #define	SYSENTRY(x)					\
d522 2
d537 2
a538 2
--- src/libexec/ftpd/Makefile	25 Jan 2002 06:33:01 -0000	1.21
+++ src/libexec/ftpd/Makefile	26 Jan 2003 13:00:41 -0000
d553 2
a554 2
--- src/libexec/login_chpass/Makefile	11 May 2002 00:19:58 -0000	1.2
+++ src/libexec/login_chpass/Makefile	26 Jan 2003 13:00:41 -0000
d569 2
a570 2
--- src/libexec/rshd/Makefile	6 May 2002 22:23:31 -0000	1.7
+++ src/libexec/rshd/Makefile	26 Jan 2003 13:00:41 -0000
d585 2
a586 2
--- src/sbin/disklabel/Makefile	8 Aug 2002 00:35:28 -0000	1.29
+++ src/sbin/disklabel/Makefile	26 Jan 2003 13:00:41 -0000
d601 2
a602 2
--- src/sbin/fdisk/Makefile	26 Jun 2002 18:34:04 -0000	1.20
+++ src/sbin/fdisk/Makefile	26 Jan 2003 13:00:41 -0000
d617 2
a618 2
--- src/sbin/fsck/fsutil.c	6 Sep 2002 21:15:54 -0000	1.8
+++ src/sbin/fsck/fsutil.c	26 Jan 2003 13:00:41 -0000
d632 2
a633 2
--- src/sbin/pfctl/Makefile	9 Jan 2003 17:32:57 -0000	1.12
+++ src/sbin/pfctl/Makefile	26 Jan 2003 13:00:41 -0000
d648 2
a649 2
--- src/sbin/photurisd/Makefile	28 Jan 2001 22:44:43 -0000	1.4
+++ src/sbin/photurisd/Makefile	26 Jan 2003 13:00:41 -0000
d664 2
a665 2
--- src/sbin/wsconsctl/Makefile	12 Aug 2002 10:46:44 -0000	1.11
+++ src/sbin/wsconsctl/Makefile	26 Jan 2003 13:00:41 -0000
d680 2
a681 2
--- src/share/lkm/vfs/module/Makefile	27 Jun 2001 06:16:25 -0000	1.7
+++ src/share/lkm/vfs/module/Makefile	26 Jan 2003 13:00:41 -0000
d696 2
a697 2
--- src/share/man/man4/options.4	4 Jan 2003 22:11:25 -0000	1.114
+++ src/share/man/man4/options.4	26 Jan 2003 13:00:42 -0000
d699 1
a699 1
+.\"	$MirBSD: obsd.mini,v 1.15 2003/01/24 16:24:59 tg Exp $
d720 2
a721 2
--- src/share/mk/bsd.README	25 Jun 2002 15:32:56 -0000	1.32
+++ src/share/mk/bsd.README	26 Jan 2003 13:00:41 -0000
d737 2
a738 2
--- src/share/mk/bsd.own.mk	7 Dec 2002 22:30:38 -0000	1.63
+++ src/share/mk/bsd.own.mk	26 Jan 2003 13:00:41 -0000
d753 2
a754 2
--- src/share/termtypes/termtypes.master	28 Mar 2002 21:21:42 -0000	1.33
+++ src/share/termtypes/termtypes.master	26 Jan 2003 13:00:42 -0000
d776 2
a777 2
--- src/sys/arch/i386/i386/bios.c	20 May 2002 16:37:39 -0000	1.49
+++ src/sys/arch/i386/i386/bios.c	26 Jan 2003 13:00:42 -0000
d792 2
a793 2
--- src/sys/arch/i386/i386/machdep.c	16 Jan 2003 19:39:01 -0000	1.220
+++ src/sys/arch/i386/i386/machdep.c	26 Jan 2003 13:00:42 -0000
d829 2
a830 2
--- src/sys/arch/i386/isa/clock.c	6 Jul 2002 19:13:58 -0000	1.28
+++ src/sys/arch/i386/isa/clock.c	26 Jan 2003 13:00:42 -0000
d845 2
a846 2
--- src/sys/arch/i386/isa/pccom.c	14 Mar 2002 01:26:11 -0000	1.42
+++ src/sys/arch/i386/isa/pccom.c	26 Jan 2003 13:00:42 -0000
d870 2
a871 2
--- src/sys/arch/i386/pci/pchb.c	8 Jan 2003 01:45:45 -0000	1.38
+++ src/sys/arch/i386/pci/pchb.c	26 Jan 2003 13:00:42 -0000
d886 2
a887 2
--- src/sys/arch/i386/pci/pci_addr_fixup.c	14 Jun 2002 21:34:36 -0000	1.14
+++ src/sys/arch/i386/pci/pci_addr_fixup.c	26 Jan 2003 13:00:42 -0000
d919 2
a920 2
--- src/sys/arch/i386/pci/pcibios.c	12 Jul 2002 21:16:44 -0000	1.27
+++ src/sys/arch/i386/pci/pcibios.c	26 Jan 2003 13:00:42 -0000
d939 2
a940 2
--- src/sys/arch/i386/stand/Makefile.inc	2 Dec 2002 09:00:01 -0000	1.30
+++ src/sys/arch/i386/stand/Makefile.inc	26 Jan 2003 13:00:41 -0000
d955 2
a956 2
--- src/sys/arch/i386/stand/libsa/bioscons.c	17 Jan 2003 20:58:05 -0000	1.21
+++ src/sys/arch/i386/stand/libsa/bioscons.c	26 Jan 2003 13:00:41 -0000
d971 2
a972 2
--- src/sys/arch/i386/stand/libsa/smpprobe.c	27 Sep 1998 17:41:46 -0000	1.3
+++ src/sys/arch/i386/stand/libsa/smpprobe.c	26 Jan 2003 13:00:42 -0000
d998 2
a999 2
--- src/sys/dev/ccd.c	10 Nov 2002 21:22:47 -0000	1.50
+++ src/sys/dev/ccd.c	26 Jan 2003 13:00:42 -0000
d1014 2
a1015 2
--- src/sys/dev/systrace.c	12 Dec 2002 08:35:43 -0000	1.27
+++ src/sys/dev/systrace.c	26 Jan 2003 13:00:42 -0000
d1030 2
a1031 2
--- src/sys/dev/ic/if_wi.c	23 Jan 2003 19:26:57 -0000	1.91
+++ src/sys/dev/ic/if_wi.c	26 Jan 2003 13:00:42 -0000
d1046 2
a1047 2
--- src/sys/dev/ic/if_wi_hostap.c	21 Jan 2003 20:09:17 -0000	1.23
+++ src/sys/dev/ic/if_wi_hostap.c	26 Jan 2003 13:00:42 -0000
d1083 2
a1084 2
--- src/sys/dev/ic/ne2000.c	14 Mar 2002 01:26:33 -0000	1.12
+++ src/sys/dev/ic/ne2000.c	26 Jan 2003 13:00:42 -0000
d1099 2
a1100 2
--- src/sys/dev/ic/rtl80x9.c	12 Mar 2001 05:36:36 -0000	1.6
+++ src/sys/dev/ic/rtl80x9.c	26 Jan 2003 13:00:43 -0000
d1115 2
a1116 2
--- src/sys/dev/ic/rtl81x9.c	15 Oct 2002 16:01:48 -0000	1.19
+++ src/sys/dev/ic/rtl81x9.c	26 Jan 2003 13:00:43 -0000
d1134 2
a1135 2
--- src/sys/dev/microcode/aic7xxx/Makefile	30 Jun 2002 18:25:36 -0000	1.5
+++ src/sys/dev/microcode/aic7xxx/Makefile	26 Jan 2003 13:00:41 -0000
d1150 2
a1151 2
--- src/sys/dev/pci/if_bge.c	15 Jan 2003 06:31:02 -0000	1.18
+++ src/sys/dev/pci/if_bge.c	26 Jan 2003 13:00:43 -0000
d1194 2
a1195 2
--- src/sys/dev/pci/if_sf.c	15 Jan 2003 06:31:02 -0000	1.19
+++ src/sys/dev/pci/if_sf.c	26 Jan 2003 13:00:43 -0000
d1210 2
a1211 2
--- src/sys/dev/pci/if_ste.c	15 Jan 2003 06:31:02 -0000	1.18
+++ src/sys/dev/pci/if_ste.c	26 Jan 2003 13:00:43 -0000
d1226 2
a1227 2
--- src/sys/dev/pci/pciide.c	17 Jan 2003 00:54:01 -0000	1.110
+++ src/sys/dev/pci/pciide.c	26 Jan 2003 13:00:43 -0000
d1251 2
a1252 2
--- src/sys/dev/wscons/wsdisplay.c	12 Oct 2002 01:09:22 -0000	1.49
+++ src/sys/dev/wscons/wsdisplay.c	26 Jan 2003 13:00:43 -0000
d1267 2
a1268 2
--- src/sys/kern/kern_exec.c	11 Dec 2002 00:07:46 -0000	1.75
+++ src/sys/kern/kern_exec.c	26 Jan 2003 13:00:43 -0000
d1270 1
a1270 1
+/*	$MirBSD: obsd.mini,v 1.15 2003/01/24 16:24:59 tg Exp $	*/
d1289 2
a1290 2
--- src/sys/kern/kern_fork.c	31 Oct 2002 01:33:05 -0000	1.59
+++ src/sys/kern/kern_fork.c	26 Jan 2003 13:00:43 -0000
d1292 1
a1292 1
+/*	$MirBSD: obsd.mini,v 1.15 2003/01/24 16:24:59 tg Exp $	*/
d1357 2
a1358 2
--- src/sys/net/pf_table.c	15 Jan 2003 16:54:48 -0000	1.24
+++ src/sys/net/pf_table.c	26 Jan 2003 13:00:41 -0000
d1391 2
a1392 2
--- src/sys/sys/proc.h	20 Jul 2002 19:24:35 -0000	1.62
+++ src/sys/sys/proc.h	26 Jan 2003 13:00:43 -0000
d1394 1
a1394 1
+/*	$MirBSD: obsd.mini,v 1.15 2003/01/24 16:24:59 tg Exp $	*/
d1422 2
a1423 2
--- src/sys/uvm/uvm_meter.c	14 Mar 2002 01:26:56 -0000	1.17
+++ src/sys/uvm/uvm_meter.c	26 Jan 2003 13:00:43 -0000
d1458 2
a1459 2
--- src/usr.bin/hexdump/parse.c	14 Mar 2002 06:51:20 -0000	1.10
+++ src/usr.bin/hexdump/parse.c	26 Jan 2003 13:00:43 -0000
d1474 2
a1475 2
--- src/usr.bin/keynote/Makefile	11 May 2002 00:19:58 -0000	1.10
+++ src/usr.bin/keynote/Makefile	26 Jan 2003 13:00:41 -0000
d1490 2
a1491 2
--- src/usr.bin/yacc/skeleton.c	3 Dec 2002 21:33:59 -0000	1.19
+++ src/usr.bin/yacc/skeleton.c	26 Jan 2003 13:00:41 -0000
d1493 1
a1493 1
+/*	$MirBSD: obsd.gcc,v 1.15 2003/01/24 16:24:59 tg Exp $	*/
d1518 1
a1518 1
+    "  = \"$OpenBSD: skeleton.c,v 1.19 2002/12/03 21:34:21 mickey Exp $ $MirBSD: obsd.gcc,v 1.15 2003/01/24 16:24:59 tg Exp $\";",
d1527 2
a1528 2
--- src/usr.sbin/Makefile	31 Dec 2002 16:22:04 -0000	1.92
+++ src/usr.sbin/Makefile	26 Jan 2003 13:00:41 -0000
d1543 1
a1543 1
+# $MirBSD: obsd.gcc,v 1.15 2003/01/24 16:24:59 tg Exp $
d1550 5
a1554 5
retrieving revision 1.47
diff -u -r1.47 authpf.c
--- src/usr.sbin/authpf/authpf.c	26 Jan 2003 02:49:37 -0000	1.47
+++ src/usr.sbin/authpf/authpf.c	26 Jan 2003 13:00:41 -0000
@@@@ -437,7 +437,7 @@@@
d1568 2
a1569 2
--- src/usr.sbin/config/main.c	6 Sep 2002 19:01:44 -0000	1.29
+++ src/usr.sbin/config/main.c	26 Jan 2003 13:00:43 -0000
d1571 1
a1571 1
+/*	$MirBSD: obsd.mini,v 1.15 2003/01/24 16:24:59 tg Exp $	*/
d1668 2
a1669 2
--- src/usr.sbin/config/scan.l	16 Feb 2002 21:27:39 -0000	1.15
+++ src/usr.sbin/config/scan.l	26 Jan 2003 13:00:43 -0000
@

