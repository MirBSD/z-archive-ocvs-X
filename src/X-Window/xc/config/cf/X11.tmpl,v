head	1.7;
access;
symbols
	tg-mergetmp-2:1.7
	cvs-200410241530:1.1.1.9
	cvs-200410012000:1.1.1.9
	cvs-200407141120:1.1.1.9
	cvs-200406231010:1.1.1.8
	MIRBSD_7quater:1.1.1.5
	cvs-200405271510:1.1.1.7
	XFree86_4_4_0:1.1.9.2
	cvs-200403021700:1.1.1.6
	XFREE86_20040213:1.1.9.1
	xc:1.1.9
	cvs-200401291925:1.1.1.5
	MIRBSD_7_ALPHA:1.1.1.5.0.4
	MIRBSD_7:1.1.1.5.0.2
	MIRBSD_7ter:1.1.1.5
	cvs-20011091815:1.1.1.5
	cvs-200309162130:1.1.1.4
	cvs-200308302005:1.1.1.4
	ctmx-0388:1.1.1.4
	cvs-200307072234:1.1.1.4
	ctmx-0387:1.1.1.4
	ctmx-0384:1.1.1.4
	MIRBSD_5:1.1.1.4
	ctmx-0375:1.1.1.4
	ctmx-0373:1.1.1.4
	ctm-0371:1.1.1.4
	ctm-0370:1.1.1.4
	MIRBSD_4:1.1.1.3
	ctm-0363:1.1.1.3
	ctm-0359:1.1.1.2
	ctm-0349:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.7
date	2004.07.14.14.15.08;	author tg;	state Stab;
branches;
next	1.6;

1.6
date	2004.06.23.12.35.55;	author tg;	state Exp;
branches;
next	1.5;

1.5
date	2004.03.07.23.17.25;	author tg;	state Exp;
branches;
next	1.4;

1.4
date	2004.03.07.23.15.24;	author tg;	state Exp;
branches;
next	1.3;

1.3
date	2004.03.07.17.46.12;	author tg;	state Exp;
branches;
next	1.2;

1.2
date	2003.05.01.12.16.29;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2003.03.22.19.59.28;	author tg;	state Exp;
branches
	1.1.1.1
	1.1.9.1;
next	;

1.1.1.1
date	2003.03.22.19.59.28;	author tg;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2003.04.08.18.17.20;	author tg;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	2003.04.13.15.11.27;	author tg;	state Exp;
branches;
next	1.1.1.4;

1.1.1.4
date	2003.05.05.17.06.04;	author tg;	state Exp;
branches;
next	1.1.1.5;

1.1.1.5
date	2003.11.09.18.24.46;	author tg;	state Exp;
branches;
next	1.1.1.6;

1.1.1.6
date	2004.03.02.17.20.30;	author tg;	state Exp;
branches;
next	1.1.1.7;

1.1.1.7
date	2004.05.27.15.59.33;	author tg;	state Exp;
branches;
next	1.1.1.8;

1.1.1.8
date	2004.06.23.11.10.20;	author tg;	state Exp;
branches;
next	1.1.1.9;

1.1.1.9
date	2004.07.14.11.37.56;	author tg;	state Exp;
branches;
next	;

1.1.9.1
date	2004.02.14.19.01.36;	author tg;	state Exp;
branches;
next	1.1.9.2;

1.1.9.2
date	2004.03.05.21.40.53;	author tg;	state Exp;
branches;
next	;


desc
@@


1.7
log
@merge OpenBSD; adapt MirOS BSD; fix french spelling to english
@
text
@XCOMM ----------------------------------------------------------------------
XCOMM X Window System Build Parameters and Rules
XCOMM $Xorg: X11.tmpl,v 1.6 2000/08/17 19:41:46 cpqbld Exp $
XCOMM
XCOMM
XCOMM
XCOMM
XCOMM $XFree86: xc/config/cf/X11.tmpl,v 1.249 2004/02/16 18:14:33 dawes Exp $

/***************************************************************************
 *                                                                         *
 *                            DEFAULT DEFINITIONS                          *
 *                                                                         *
 * The following section contains defaults for things that can             *
 * overridden in the various *.cf and site.def files.  DO NOT EDIT!        *
 *                                                                         *
 **************************************************************************/

#define ProjectX		604	/* do *not* change this line */

/* The following project-specific rules are defined at the end of this file:
 *
 * InstallAppDefaults		(class)
 * InstallAppDefaultsLong	(file,class)
 * MakeFontsDir			(deplist)
 * MakeFcCache			(deplist)
 * MakeFonts			()
 * InstallFontObjs		(objs,dest)
 * InstallFonts			(dest)
 * InstallFontAliases		(dest)
 * InstallFcCache		(dest)
 * FontSrc			(basename)
 * FontBaseObj			(basename)
 * InstallFontScale		(dest)
 * UncompressedFontTarget	(basename)
 * CompressedFontTarget		(basename)
 * FontTarget			(basename)
 * FontObj			(basename)
 * MakeXkbDir			(basedir,subdir)
 */

/* X.Org release string */
#ifndef XOrgReleaseString
#define XOrgReleaseString	Release 6.6
#endif

#ifndef XOrgManNameString
#define XOrgManNameString	X Version 11
#endif

XORGRELSTRING = XOrgReleaseString
XORGMANNAME = XOrgManNameString

#ifndef XOrgManDefs
#define XOrgManDefs -D__xorgversion__='"$(XORGRELSTRING)" "$(XORGMANNAME)"'
#endif

#ifndef XVendorManNameString
#define XVendorManNameString XOrgManNameString
#endif
#ifndef XVendorManVersionString
#define XVendorManVersionString XOrgReleaseString
#endif

VENDORMANNAME = XVendorManNameString
VENDORMANVERSION = XVendorManVersionString

#ifndef VendorManDefs
#define VendorManDefs -D__vendorversion__="$(VENDORMANVERSION) $(VENDORMANNAME)"
#endif

/*
 * X-specific things
 */
#if CrossCompiling && !defined(UseInstalledOnCrossCompile)
# if defined(UseInstalled)
#  define UseInstalledOnCrossCompile YES
# else
#  define UseInstalledOnCrossCompile NO
# endif
#endif

#ifndef HasXServer
#define HasXServer		YES
#endif
#ifndef BuildServer
#define BuildServer		HasXServer
#endif
#ifndef BuildServersOnly
#define BuildServersOnly	NO
#endif
#ifndef BuildClients
#define BuildClients		!BuildServersOnly
#endif
#ifndef BuildDocs
#define BuildDocs		!BuildServersOnly
#endif
#ifndef BuildLibraries
#define BuildLibraries		(!BuildServersOnly || BuildClients)
#endif
#ifndef BuildLibrariesForXServers
#define BuildLibrariesForXServers	BuildServer
#endif
#ifndef BuildFontServer
#define BuildFontServer		YES
#endif
#ifndef XserverStaticFontLib
#define XserverStaticFontLib	YES
#endif
#ifndef BuildSpeedo
#define BuildSpeedo		YES
#endif
#ifndef BuildType1
#define BuildType1		YES
#endif
#ifndef BuildCID
#define BuildCID		YES
#endif
#ifndef BuildFreeType
#define BuildFreeType		NO
#endif
#ifndef BuildXTrueType
#define BuildXTrueType		NO
#endif
#ifndef XTTInLibFont
#define XTTInLibFont		NO
#endif
#ifndef BuildBuiltinFonts
#define BuildBuiltinFonts	NO
#endif
#ifndef BuildFonts
#define BuildFonts		(BuildServer | BuildFontServer)
#endif
#ifndef Build75DpiFonts
#define Build75DpiFonts		YES
#endif
#ifndef Build100DpiFonts
#define Build100DpiFonts	YES
#endif
#ifndef BuildSpeedoFonts
#define BuildSpeedoFonts	YES
#endif
#ifndef BuildType1Fonts
#define BuildType1Fonts		YES
#endif
#ifndef BuildCIDFonts
#define BuildCIDFonts		YES
#endif
#ifndef BuildTrueTypeFonts
#define BuildTrueTypeFonts	YES
#endif
#ifndef BuildBethMarduthoFonts
#define BuildBethMarduthoFonts	NO
#endif
#ifndef BuildEthiopicFonts
#define BuildEthiopicFonts	NO
#endif
#ifndef BuildCyrillicFonts
#define BuildCyrillicFonts	YES
#endif
/* Some bdf font generation details.  The scripts for this require perl. */
#ifndef TruncateUCSFonts
#define TruncateUCSFonts	HasPerl5
#endif
#ifndef MaxUCSChar
#define MaxUCSChar		0x3200
#endif
#ifndef DerivedUCSFonts
#define DerivedUCSFonts		YES
#endif
/* These primarily control generation of derived 8-bit fonts. */
#ifndef BuildUCSFonts
#define BuildUCSFonts		YES
#endif
/* Setting BuildISO8859_1Fonts to NO may result in problems. */
#ifndef BuildISO8859_1Fonts
#define BuildISO8859_1Fonts	YES
#endif
#ifndef BuildISO8859_2Fonts
#define BuildISO8859_2Fonts	YES
#endif
#ifndef BuildISO8859_3Fonts
#define BuildISO8859_3Fonts	YES
#endif
#ifndef BuildISO8859_4Fonts
#define BuildISO8859_4Fonts	YES
#endif
#ifndef BuildISO8859_5Fonts
#define BuildISO8859_5Fonts	BuildCyrillicFonts
#endif
#ifndef BuildArabicFonts
#define BuildArabicFonts	YES
#endif
#ifndef BuildISO8859_6Fonts
#define BuildISO8859_6Fonts	BuildArabicFonts
#endif
#ifndef BuildGreekFonts
#define BuildGreekFonts		YES
#endif
#ifndef BuildISO8859_7Fonts
#define BuildISO8859_7Fonts	BuildGreekFonts
#endif
#ifndef BuildHebrewFonts
#define BuildHebrewFonts	YES
#endif
#ifndef BuildISO8859_8Fonts
#define BuildISO8859_8Fonts	BuildHebrewFonts
#endif
#ifndef BuildISO8859_9Fonts
#define BuildISO8859_9Fonts	YES
#endif
#ifndef BuildISO8859_10Fonts
#define BuildISO8859_10Fonts	YES
#endif
#ifndef BuildThaiFonts
#define BuildThaiFonts		YES
#endif
#ifndef BuildISO8859_11Fonts
#define BuildISO8859_11Fonts	BuildThaiFonts
#endif
#ifndef BuildISO8859_13Fonts
#define BuildISO8859_13Fonts	YES
#endif
#ifndef BuildISO8859_14Fonts
#define BuildISO8859_14Fonts	YES
#endif
#ifndef BuildISO8859_15Fonts
#define BuildISO8859_15Fonts	YES
#endif
#ifndef BuildISO8859_16Fonts
#define BuildISO8859_16Fonts	YES
#endif
#ifndef BuildKOI8_RFonts
#define BuildKOI8_RFonts	BuildCyrillicFonts
#endif
#ifndef BuildJapaneseFonts
#define BuildJapaneseFonts	YES
#endif
#ifndef BuildJISX0201Fonts
#define BuildJISX0201Fonts	BuildJapaneseFonts
#endif
#ifndef BuildKoreanFonts
#define BuildKoreanFonts	YES
#endif
#ifndef BuildChineseFonts
#define BuildChineseFonts	YES
#endif
#ifndef MakeLocalFontDir
#define MakeLocalFontDir	YES
#endif
#ifndef HasXAudio
#define HasXAudio		NO
#endif
#ifndef BuildXAudio
#define BuildXAudio		(HasXAudio & HasCplusplus)
#endif
#ifndef HasXAServer
#define HasXAServer		NO
#endif
#ifndef BuildXAServer
#define BuildXAServer		(HasXAServer & HasCplusplus)
#endif
#ifndef BuildX11Lib
#define BuildX11Lib		BuildLibraries
#endif

#ifndef BuildLoadableXlibI18n
#define BuildLoadableXlibI18n	(HasDlopen && SharedLibX11)
#endif
#ifndef InstallXcmsTxt
#define InstallXcmsTxt		YES
#endif
/*
 * This disables XLOCALEDIR.  Set it if you're using BuildLoadableXlibI18n,
 * don't have either issetugid() or getresuid(), and you need to protect
 * clients that are setgid or setuid to an id other than 0.
 */
#ifndef DisableXLocaleDirEnv
#define DisableXLocaleDirEnv	BuildLoadableXlibI18n && \
					!(HasIssetugid || HasGetresuid)
#endif
#ifndef BuildLoadableXlibXcursor
#define BuildLoadableXlibXcursor (HasDlopen && SharedLibX11)
#endif
#ifndef BuildXextLib
#define BuildXextLib		BuildLibraries
#endif
#ifndef BuildXauLib
#define BuildXauLib		(BuildLibraries || BuildLibrariesForXServers)
#endif
#define UseInstalledXauLib	(defined(UseInstalled) || !BuildXauLib)
#ifndef BuildXdmcpLib
#define BuildXdmcpLib		(BuildLibraries || BuildLibrariesForXServers)
#endif
#define UseInstalledXdmcpLib	(defined(UseInstalled) || !BuildXdmcpLib)
#ifndef BuildMITMiscExt
#define BuildMITMiscExt		YES
#endif
#ifndef BuildTestExt
#define BuildTestExt		YES
#endif
#ifndef BuildSyncExt
#define BuildSyncExt		YES
#endif
#ifndef BuildXCMiscExt
#define BuildXCMiscExt		YES
#endif
#ifndef BuildShapeExt
#define BuildShapeExt		YES
#endif
#ifndef BuildBigReqsExt
#define BuildBigReqsExt		YES
#endif
#ifndef BuildXInputExt
#define BuildXInputExt		NO
#endif
#ifndef BuildXInputLib
#define BuildXInputLib		(BuildXInputExt && !BuildServersOnly)
#endif
#ifndef BuildEVI
#define BuildEVI		YES
#endif
#ifndef BuildDBE
#define BuildDBE		YES
#endif
#ifndef BuildDBElib
#define BuildDBElib		BuildDBE
#endif
#ifndef BuildDIS
#define BuildDIS		NO
#endif
#ifndef BuildDPMS
#define BuildDPMS		YES
#endif
#ifndef BuildFontLib
#if !defined(XF86Server) || !XF86Server
#define BuildFontLib		(BuildLibraries || BuildServer)
#else
#define BuildFontLib		(BuildLibraries || \
				 (BuildServer && !DoLoadableServer) || \
				 XnestServer || XVirtualFramebufferServer || \
				 XprtServer || KDriveXServer)
#endif
#endif
#ifndef BuildFontCache
#define BuildFontCache		YES
#endif
#ifndef BuildFontCacheLib
#define BuildFontCacheLib	(BuildFontCache && !BuildServersOnly)
#endif
#ifndef BuildFontEncLib
#define BuildFontEncLib		BuildLibraries
#endif
/*
 * This enables binary compatibility with the older (XFree86 <= 4.1) fontenc
 * entry points in the Xfont library (and X server).  If this is turned off,
 * then SharedFontRev should have it's major revision bumped, and the
 * XFree86 font module ABI (in xfree86/common/xf86Module.h) should have it's
 * major revision bumped.
 *
 * Note: this does not enable those older functions in the separate libfontenc
 * library (which didn't exist previously).
 */
#ifndef FontencCompatibility
#define FontencCompatibility	YES
#endif
#ifndef BuildLowMem
#define BuildLowMem		NO
#endif
#ifndef BuildLBX
#define BuildLBX		YES
#endif
#ifndef BuildXKB
#define BuildXKB		YES
#endif
#ifndef BuildXKBlib
#define BuildXKBlib		(BuildXKB && !BuildServersOnly)
#endif
#ifndef BuildXKBuilib
#define BuildXKBuilib		(BuildXKB && !BuildServersOnly)
#endif
#ifndef BuildXKBfilelib
#define BuildXKBfilelib		(BuildXKB && !BuildServersOnly)
#endif
#ifndef BuildXTrap
#define BuildXTrap		YES
#endif
#ifndef BuildXTrapLibrary
#define BuildXTrapLibrary	(BuildXTrap && !BuildServersOnly)
#endif

	/*
	 * WARNING: Setting UseXKBInClients to YES cause incompatibilities
	 *          between many clients (such as xterm) and pre-XKB shared
	 *          libraries.
	 */
#ifndef UseXKBInClients
#define	UseXKBInClients		NO	/* use XKB in "normal" clients? */
#endif
#ifndef BuildMultibuffer
#define BuildMultibuffer	NO
#endif
#ifndef BuildRECORD
#define BuildRECORD		YES
#endif
#ifndef BuildRECORDlib
#define BuildRECORDlib		BuildRECORD
#endif
#ifndef BuildXinerama
#define BuildXinerama		NO
#endif
#ifndef BuildXineramaLibrary
#define BuildXineramaLibrary	(BuildXinerama && !BuildServersOnly)
#endif
#ifndef BuildXCSecurity
#define BuildXCSecurity		YES
#endif
#ifndef BuildAppgroup
#define BuildAppgroup		YES
#endif
#ifndef BuildCup
#define BuildCup		YES
#endif
#ifndef HasPlugin
#define HasPlugin		NO
#endif
#ifndef BuildPlugin
#define BuildPlugin		HasPlugin
#endif
#ifndef XprtServer
#define XprtServer		BuildServer
#endif
#ifndef BuildXprint
#if XprtServer
#define BuildXprint		YES
#else
#define BuildXprint		NO
#endif
#endif
#ifndef BuildXprintLib
#define BuildXprintLib		(BuildXprint && !BuildServersOnly)
#endif
#ifndef BuildScreenSaverExt
#define BuildScreenSaverExt	NO
#endif
#ifndef BuildScreenSaverLibrary
#define BuildScreenSaverLibrary	(BuildScreenSaverExt && !BuildServersOnly)
#endif
#ifndef BuildXF86VidModeExt
#define BuildXF86VidModeExt	NO
#endif
#ifndef BuildXF86VidModeLibrary
#define BuildXF86VidModeLibrary (BuildXF86VidModeExt && !BuildServersOnly)
#endif
#ifndef BuildXF86MiscExt
#define BuildXF86MiscExt	NO
#endif
#ifndef BuildXF86MiscLibrary
#define BuildXF86MiscLibrary	(BuildXF86MiscExt && !BuildServersOnly)
#endif
#ifndef BuildXF86BigfontExt
#define BuildXF86BigfontExt	NO
#endif
#ifndef BuildXF86DGA
#define BuildXF86DGA		NO
#endif
#ifndef BuildXF86DGALibrary
#define BuildXF86DGALibrary	(BuildXF86DGA && !BuildServersOnly)
#endif
#ifndef BuildXResExt
#define BuildXResExt            NO
#endif
#ifndef BuildXResLibrary
#define BuildXResLibrary        (BuildXResExt && !BuildServersOnly)
#endif
#ifndef BuildXvExt
#define BuildXvExt		NO
#endif
#ifndef BuildXvLibrary
#define BuildXvLibrary		(BuildXvExt && !BuildServersOnly)
#endif
#ifndef BuildXvMCExt
#define BuildXvMCExt		NO
#endif
#ifndef BuildXvMCLibrary
#define BuildXvMCLibrary	(BuildXvMCExt && !BuildServersOnly)
#endif
#ifndef BuildGlxExt
#define BuildGlxExt		NO
#else
#if     BuildGlxExt && !defined(XFree86Version)
#undef  BuildXF86DRI
#undef  BuildXF86DRM
#undef  BuildXF86DRIDriverSupport
#define BuildXF86DRI			NO
#define BuildXF86DRM			NO
#define BuildXF86DRIDriverSupport	NO
#endif
#endif
#ifndef BuildGLXLibrary
#define BuildGLXLibrary		(BuildGlxExt && !BuildServersOnly)
#endif
#ifndef BuildOSMesaLib
#define BuildOSMesaLib		BuildGlxExt
#endif
#ifndef BuildGLULibrary
#define BuildGLULibrary		(BuildGLXLibrary && BuildLibraries && \
				 HasCplusplus)
#endif
#ifndef BuildGLwLibrary
#define BuildGLwLibrary		(BuildGLXLibrary && BuildLibraries)
#endif
#ifndef BuildXF86RushExt
#define BuildXF86RushExt	NO
#endif
#ifndef BuildXF86RushLibrary
#define BuildXF86RushLibrary	(BuildXF86RushExt && !BuildServersOnly)
#endif
#ifndef BuildDPSLibraries
#define BuildDPSLibraries	!BuildServersOnly
#endif
#ifndef BuildDPSLibrary
#define BuildDPSLibrary		BuildDPSLibraries
#endif
#ifndef BuildDPSTkLibrary
#define BuildDPSTkLibrary	BuildDPSLibraries
#endif
#ifndef BuildPSResLibrary
#define BuildPSResLibrary	BuildDPSLibraries
#endif
#ifndef BuildDPSClients
#define BuildDPSClients         BuildDPSLibraries
#endif
#ifndef BuildRender
#define BuildRender		YES
#endif
#ifndef BuildRenderLibrary
#define BuildRenderLibrary	!BuildServersOnly
#endif
#ifndef BuildXftLibrary
#define BuildXftLibrary		BuildRenderLibrary
#endif
#ifndef BuildXft1Library
#define BuildXft1Library	BuildRenderLibrary
#endif
#ifndef UseFontconfig
#define UseFontconfig		BuildXftLibrary
#endif
#ifndef BuildFontconfigLibrary
#define BuildFontconfigLibrary	(UseFontconfig && !HasFontconfig)
#endif
#ifndef UseFreetype2
#define UseFreetype2		(BuildXftLibrary || BuildXft1Library || \
				 UseFontconfig || BuildFreeType)
#endif
#ifndef HasExpat
#define HasExpat		NO
#endif
#ifndef UseExpat
#define UseExpat		(UseFontconfig)
#endif
#ifndef BuildExpatLibrary
#define BuildExpatLibrary	(UseExpat && !HasExpat)
#endif
#ifndef BuildFreetype2Library
#define BuildFreetype2Library	(UseFreetype2 && !HasFreetype2)
#endif
#ifndef Freetype2BuildDefines
#define Freetype2BuildDefines	/**/
#endif
/* For FreeType 1.x */
#ifndef Freetype1BuildDefines
#define Freetype1BuildDefines	Freetype2BuildDefines
#endif

#ifndef BuildRandR
#define BuildRandR		YES
#endif
#ifndef BuildRandRLibrary
#define BuildRandRLibrary	!BuildServersOnly
#endif

#ifndef BuildXcursorLibrary
#define BuildXcursorLibrary	BuildRenderLibrary
#endif

#ifndef BuildXcursorgen
#define BuildXcursorgen		HasLibpng
#endif

#ifndef DefaultCursorTheme
#define DefaultCursorTheme	core
#endif

#ifndef BuildAppleWMLibrary
#define BuildAppleWMLibrary	NO
#endif

#ifndef BuildWindowsWMLibrary
#define BuildWindowsWMLibrary	NO
#endif

#ifndef BuildMiscDocs
#define BuildMiscDocs		NO
#endif
#ifndef BuildSpecsDocs
#define BuildSpecsDocs		NO
#endif
#ifndef BuildAllSpecsDocs
#define BuildAllSpecsDocs	NO
#endif

#ifndef InstallHardcopyDocs
#define InstallHardcopyDocs	NO
#endif

#ifndef InstallMiscManPages
#define InstallMiscManPages	NO
#endif

#ifndef FSUseSyslog
#define FSUseSyslog		NO
#endif

#ifndef InstallLibManPages
#define InstallLibManPages	YES
#endif
#ifndef InstallXtermSetUID
#define InstallXtermSetUID	YES	/* xterm needs to be set uid */
#endif
#ifndef InstallXloadSetGID
#define InstallXloadSetGID	YES	/* xload often needs set gid kmem */
#endif
#ifndef InstallXinitConfig
#define InstallXinitConfig	NO	/* install sample xinit config */
#endif
#ifndef InstallXdmConfig
#define InstallXdmConfig	NO	/* install sample xdm config */
#endif
#ifndef XdmServersType			/* what Xservers files to use */
#if BuildServer
#define XdmServersType ws
#else
#define XdmServersType fs
#endif
#endif
#ifndef InstallFSConfig
#define InstallFSConfig		NO	/* install sample fs config */
#endif
#ifndef InstallAppDefFiles
#define InstallAppDefFiles	YES	/* install application defaults */
#endif
#ifndef UseConfDirForAppDefaults
#define UseConfDirForAppDefaults YES
#endif
#ifndef UseConfDirForXkb
#define UseConfDirForXkb	YES
#endif
#ifndef CompressAllFonts
#define CompressAllFonts	NO
#endif
#ifndef ThreadedX
#if HasPosixThreads || HasCThreads
#define ThreadedX		YES	/* multi-threaded libraries */
#else
#define ThreadedX		NO
#endif
#endif
#ifndef ThreadedProject
#define ThreadedProject ThreadedX
#endif
#ifndef BuildThreadStubLibrary
#define BuildThreadStubLibrary	NO
#endif
#ifndef NeedUIThrStubs
#define NeedUIThrStubs		NO
#endif
#ifndef HasWChar32
#define HasWChar32		SystemV4
#endif
#ifndef HasXdmAuth
#define HasXdmAuth		NO	/* if you can not use XDM-AUTH* */
#endif
#ifndef PrimaryScreenResolution
#define PrimaryScreenResolution 72		/* a common resolution */
#endif
#ifndef DefaultFontPath
	/*
	 * Turn off building Speedo, Type1 and CID fonts if you are building
	 * for low memory footprint
	 */
#if BuildLowMem
#define DefaultFontPath $(FONTDIR)/misc/,$(FONTDIR)/75dpi/,$(FONTDIR)/100dpi/
#else
#if PrimaryScreenResolution < 88		/* (75 + 100) / 2 */
#define DefaultFontPath $(FONTDIR)/misc/,$(FONTDIR)/TTF/,$(FONTDIR)/Speedo/,$(FONTDIR)/Type1/,$(FONTDIR)/CID/,$(FONTDIR)/75dpi/,$(FONTDIR)/100dpi/
#else
#define DefaultFontPath $(FONTDIR)/misc/,$(FONTDIR)/TTF/,$(FONTDIR)/Speedo/,$(FONTDIR)/Type1/,$(FONTDIR)/CID/,$(FONTDIR)/100dpi/,$(FONTDIR)/75dpi/
#endif
#endif
#endif
#ifndef DefaultFSFontPath
	/*
	 * Define a default fontpath for Font Server independent of that
         * for X server if building the X server for low memory footprint
         */
#if BuildLowMem
#if PrimaryScreenResolution < 88                /* (75 + 100) / 2 */
#define DefaultFSFontPath $(FONTDIR)/misc/,$(FONTDIR)/Speedo/,$(FONTDIR)/Type1/,$(FONTDIR)/CID/,$(FONTDIR)/75dpi/,$(FONTDIR)/100dpi/
#else
#define DefaultFSFontPath $(FONTDIR)/misc/,$(FONTDIR)/Speedo/,$(FONTDIR)/Type1/,$(FONTDIR)/CID/,$(FONTDIR)/100dpi/,$(FONTDIR)/75dpi/
#endif
#else
#define DefaultFSFontPath DefaultFontPath
#endif
#endif
#ifndef DefaultRGBDatabase
#define DefaultRGBDatabase $(LIBDIR)/rgb
#endif
#ifndef UseRgbTxt
#define UseRgbTxt		NO	/* default is to compile with dbm */
#endif
#ifndef UseMemLeak
#define UseMemLeak		NO
#endif
#ifndef SpecialMalloc
#define SpecialMalloc		NO
#endif
#ifndef UseInternalMalloc
#define UseInternalMalloc	NO
#endif
#ifndef XallocDefines
#define XallocDefines		/**/
#endif
#ifndef ServerErrorDefines
#define ServerErrorDefines	/**/
#endif
#ifndef FontCompilerFlags
#define FontCompilerFlags -t
#endif
/*
 * NOTE:  IPv6Flags could be tacked on to either ConnectionFlags or
 *        ExtraConnectionDefs.  Here, we choose the later in order to
 *        maximise exposure of the IPv6 code (a number of <OS>.def files
 *        contain ConnectionFlags overrides).  Mind you, this might not
 *        the right thing to do when HasStreams is asserted.
 */
#ifndef BuildIPv6		/* If the OS also #define's AF_INET6 */
#define BuildIPv6		YES
#endif
#ifndef IPv6Flags
#if BuildIPv6
#define IPv6Flags -DIPv6
#else
#define IPv6Flags /**/
#endif
#endif
/*
 * Assume by default that IPv6 sockets also listen for IPv4 connections.
 * XDMCP support currently only works for both IPv4 and IPv6 when this is
 * true.
 */
#ifndef IPv6SocketsAlsoIPv4
#define IPv6SocketsAlsoIPv4	YES
#endif
#ifndef DECnetFlags
#if HasDECnet
#define DECnetFlags -DDNETCONN
#else
#define DECnetFlags
#endif
#endif
#ifndef ConnectionFlags
#if HasStreams
#define ConnectionFlags -DSTREAMSCONN
#else
#define ConnectionFlags -DTCPCONN -DUNIXCONN DECnetFlags
#endif
#endif
#if HasStickyDirBit
STICKY_DEFINES = -DHAS_STICKY_DIR_BIT
#endif
#if HasFchown
FCHOWN_DEFINES = -DHAS_FCHOWN
#endif
#ifndef ExtraConnectionDefs
#define ExtraConnectionDefs $(STICKY_DEFINES) $(FCHOWN_DEFINES) IPv6Flags
#endif
#ifndef ProjectThreadsDefines
#define ProjectThreadsDefines -DXTHREADS
#endif
#ifndef FontOSDefines
#define FontOSDefines /**/
#endif
#ifndef FontDefines
#define FontDefines -DFONT_SNF -DFONT_BDF -DFONT_PCF -DCOMPRESSED_FONTS FontOSDefines
#endif
#ifndef XawI18nDefines
#if SystemV4
#define XawI18nDefines -DHAS_WCTYPE_H
#else
#define XawI18nDefines -DUSE_XWCHAR_STRING
#endif
#endif
#if Malloc0ReturnsNull
#ifndef XMalloc0ReturnsNullDefines
#define XMalloc0ReturnsNullDefines Malloc0ReturnsNullDefines
#endif
#ifndef XtMalloc0ReturnsNullDefines
#define XtMalloc0ReturnsNullDefines Malloc0ReturnsNullDefines -DXTMALLOC_BC
#endif
#endif
#ifndef ExtensionOSDefines
#define ExtensionOSDefines /**/
#endif

#ifndef ExtensionDefines
#ifndef MITMiscDefines
#if BuildMITMiscExt
#define MITMiscDefines -DMITMISC
#else
#define MITMiscDefines /**/
#endif
#endif
#ifndef XTestDefines
#if BuildTestExt
#define XTestDefines -DXTEST
#else
#define XTestDefines /**/
#endif
#endif
#ifndef XTrapDefines
#if BuildXTrap
#define XTrapDefines -DXTRAP
#else
#define XTrapDefines /**/
#endif
#endif
#ifndef XSyncDefines
#if BuildSyncExt
#define XSyncDefines -DXSYNC
#else
#define XSyncDefines /**/
#endif
#endif
#ifndef XCMiscDefines
#if BuildXCMiscExt
#define XCMiscDefines -DXCMISC
#else
#define XCMiscDefines /**/
#endif
#endif
#ifndef ShapeDefines
#if BuildShapeExt
#define ShapeDefines -DSHAPE
#else
#define ShapeDefines /**/
#endif
#endif
#ifndef GlxDefines
#if BuildGlxExt
#ifdef GlxExtraDefines
#define GlxDefines -DGLXEXT GlxExtraDefines
#else
#define GlxDefines -DGLXEXT
#endif
#else
#define GlxDefines /**/
#endif
#endif
#ifndef MesaSrcDir
#define MesaSrcDir $(TOP)/extras/Mesa
#endif
#ifndef OglSampleSrcDir
#define OglSampleSrcDir $(TOP)/extras/ogl-sample
#endif
#ifndef ShmDefines
#if HasShm
#define ShmDefines -DMITSHM
#else
#define ShmDefines /**/
#endif
#endif
#ifndef XInputDefines
#if BuildXInputExt
#define XInputDefines -DXINPUT
#else
#define XInputDefines /**/
#endif
#endif
#ifndef XineramaDefines
#if BuildXinerama
#define XineramaDefines -DPANORAMIX
#else
#define XineramaDefines /**/
#endif
#endif
#ifndef PrintOnlyServer
#define PrintOnlyServer YES
#endif
#ifndef XprintDefines
#if BuildXprint
#if PrintOnlyServer
#define XprintDefines -DPIXPRIV
#else
#define XprintDefines -DXPRINT -DPIXPRIV
#endif
#else
#define XprintDefines /**/
#endif
#endif
#ifndef XkbDefines
#if BuildXKB
#define XkbDefines -DXKB
#else
#define XkbDefines /**/
#endif
#endif
#ifndef XkbClientDefines
#if UseXKBInClients
#define XkbClientDefines -DXKB
#else
#define XkbClientDefines /**/
#endif
#endif
#ifndef XkbServerDefines
#define XkbServerDefines /**/
#endif
#ifndef LbxDefines
#if BuildLBX
#define LbxDefines -DLBX
#else
#define LbxDefines /**/
#endif
#endif
#ifndef BigReqDefines
#if BuildBigReqsExt
#define BigReqDefines -DBIGREQS
#else
#define BigReqDefines /**/
#endif
#endif

#ifndef EVIDefines
#if BuildEVI
#define EVIDefines -DEVI
#else
#define EVIDefines /**/
#endif
#endif

#ifndef DBEDefines
#if BuildDBE
#define DBEDefines -DDBE
#else
#define DBEDefines /**/
#endif
#endif

#ifndef PervasiveDBEDefines
#define PervasiveDBEDefines /* -DNEED_DBE_BUF_BITS -DNEED_DBE_BUF_VALIDATE */
#endif

#ifndef MultibufferDefines
#if BuildMultibuffer
#define MultibufferDefines -DMULTIBUFFER
#else
#define MultibufferDefines /**/
#endif
#endif

#ifndef ScreenSaverExtensionDefines
#if BuildScreenSaverExt
#define ScreenSaverExtensionDefines -DSCREENSAVER
#else
#define ScreenSaverExtensionDefines /**/
#endif
#endif
#ifndef VidModeExtensionDefines
#if BuildXF86VidModeExt
#define VidModeExtensionDefines -DXF86VIDMODE
#else
#define VidModeExtensionDefines /**/
#endif
#endif
#ifndef XF86MiscExtensionDefines
#if BuildXF86MiscExt
#define XF86MiscExtensionDefines -DXF86MISC
#else
#define XF86MiscExtensionDefines /**/
#endif
#endif

#ifndef XF86BigfontExtensionDefines
#if BuildXF86BigfontExt
#define XF86BigfontExtensionDefines -DXF86BIGFONT
#else
#define XF86BigfontExtensionDefines /**/
#endif
#endif

#ifndef XvExtensionDefines
#if BuildXvExt
#define XvExtensionDefines -DXV
#else
#define XvExtensionDefines /**/
#endif
#endif

#ifndef XvMCExtensionDefines
#if BuildXvMCExt
#define XvMCExtensionDefines -DXVMC
#else
#define XvMCExtensionDefines /**/
#endif
#endif

#ifndef XResExtensionDefines
#if BuildXResExt
#define XResExtensionDefines -DRES
#else
#define XResExtensionDefines /**/
#endif
#endif

#ifndef RECORDDefines
#if BuildRECORD
#define RECORDDefines -DXRECORD
#else
#define RECORDDefines /**/
#endif
#endif

#ifndef AppgroupDefines
#if BuildAppgroup
#define AppgroupDefines -DXAPPGROUP
#else
#define AppgroupDefines /**/
#endif
#endif

#ifndef XCSecurityDefines
#if BuildXCSecurity
#define XCSecurityDefines -DXCSECURITY
#else
#define XCSecurityDefines /**/
#endif
#endif

#ifndef CupDefines
#if BuildCup
#define CupDefines -DTOGCUP
#else
#define CupDefines /**/
#endif
#endif

#ifndef LowMemDefines
#if BuildLowMem
#define LowMemDefines -DLOWMEMFTPT
#else
#define LowMemDefines /**/
#endif
#endif

#ifndef DPMSDefines
#if BuildDPMS
#define DPMSDefines -DDPMSExtension
#else
#define DPMSDefines /**/
#endif
#endif

#ifndef RenderDefines
#if BuildRender
#define RenderDefines -DRENDER
#else
#define RenderDefines /**/
#endif
#endif

#ifndef RandRDefines
#if BuildRandR
#define RandRDefines -DRANDR
#else
#define RandRDefines /**/
#endif
#endif

#ifndef FontCacheExtentionDefines
#if BuildFontCache
#define FontCacheExtensionDefines	-DFONTCACHE
#else
#define FontCacheExtensionDefines	/**/
#endif
#endif

#ifndef SitePervasiveExtensionDefines
#define SitePervasiveExtensionDefines /**/
#endif
#ifndef PervasiveExtensionDefines
#define PervasiveExtensionDefines \
	ShapeDefines XInputDefines XkbDefines LbxDefines AppgroupDefines \
	XCSecurityDefines CupDefines PervasiveDBEDefines \
	XF86BigfontExtensionDefines DPMSDefines \
	LowMemDefines XprintDefines XineramaDefines \
	SitePervasiveExtensionDefines RenderDefines RandRDefines
#endif
#ifndef SiteExtensionDefines
#define SiteExtensionDefines /**/
#endif
#ifndef BaseExtensionDefines
#define BaseExtensionDefines \
	MultibufferDefines MITMiscDefines XTestDefines XTrapDefines \
	XSyncDefines XCMiscDefines RECORDDefines \
	ShmDefines BigReqDefines VidModeExtensionDefines \
	XF86MiscExtensionDefines DBEDefines DPMSDefines EVIDefines \
	ScreenSaverExtensionDefines XvExtensionDefines XvMCExtensionDefines \
	GlxDefines FontCacheExtensionDefines SiteExtensionDefines \
        XResExtensionDefines
#endif
#define ExtensionDefines BaseExtensionDefines ExtensionOSDefines
#endif /* ExtensionDefines */

#ifndef HasStrcasecmp
#define HasStrcasecmp YES
#endif

#ifndef StrcasecmpDefines
# if HasStrcasecmp
#  define StrcasecmpDefines /**/
# else
#  define StrcasecmpDefines -DNEED_STRCASECMP
# endif
#endif

#ifndef HasDevRandom
#define HasDevRandom NO
#endif

#ifndef HasArc4Random
#define HasArc4Random NO
#endif

#ifndef RandomDefines
# if HasDevRandom
#  ifndef RandomDeviceFile
#   define RandomDeviceFile /dev/random
#  endif
#  ifndef ExtraRandomDefines
#   ifdef PollDevRandom /* Set if can poll() /dev/random to avoid blocking */
#    define ExtraRandomDefines -DPOLL_DEV_RANDOM
#   else
#    define ExtraRandomDefines /**/
#   endif
#  endif
#  define RandomDefines -DDEV_RANDOM=\"RandomDeviceFile\" ExtraRandomDefines
# elif HasArc4Random
#  define RandomDefines -DARC4_RANDOM
# else
#  define RandomDefines /**/
# endif
#endif

#ifndef PreferXdmcpIPv6
#define PreferXdmcpIPv6 NO
#endif
#ifndef ServerXdmcpIPv6Defines
#if BuildIPv6 && !IPv6SocketsAlsoIPv4 && !PreferXdmcpIPv6
#define ServerXdmcpIPv6Defines -DXDMCP_NO_IPV6
#else
#define ServerXdmcpIPv6Defines /**/
#endif
#endif

#ifndef ServerXdmcpDefines
#define ServerXdmcpDefines -DXDMCP ServerXdmcpIPv6Defines
#endif
#ifndef ServerOSDefines
#define ServerOSDefines /**/
#endif
#if HasKrbIV
#ifndef KrbIVDefines
#define KrbIVDefines -DKERBEROS
#endif
#else
#define KrbIVDefines /**/
#endif
#if HasKrb5
#ifndef Krb5Defines
#define Krb5Defines -DK5AUTH
#endif
#else
#define Krb5Defines /**/
#endif
#ifndef ServerExtraDefines
#define ServerExtraDefines /* -DPIXPRIV */
#endif
#ifndef ServerAssertDefines
#define ServerAssertDefines -DNDEBUG
#endif
#ifndef ServerSnprintfDefines
#if !HasSnprintf
#define ServerSnprintfDefines -DNEED_SNPRINTF
#else
#define ServerSnprintfDefines /**/
#endif
#endif
#ifndef ServerDefines
#define ServerDefines StandardDefines PervasiveExtensionDefines ServerExtraDefines ServerAssertDefines ServerSnprintfDefines
#endif

#ifndef MesaUseX86Asm
/* The current Mesa X86 ASM code doesn't work well with SVR4 shared libs. */
# if HasX86Support && !SystemV4
#  define MesaUseX86Asm YES
# else
#  define MesaUseX86Asm NO
# endif
#endif

#ifndef MesaUseMMX
#ifdef HasMMXSupport
#define MesaUseMMX HasMMXSupport
#else
#define MesaUseMMX NO
#endif
#endif

#ifndef MesaUse3DNow
#ifdef Has3DNowSupport
#define MesaUse3DNow Has3DNowSupport
#else
#define MesaUse3DNow NO
#endif
#endif

#ifndef MesaUseSSE
#ifdef HasSSESupport
#define MesaUseSSE HasSSESupport
#else
#define MesaUseSSE NO
#endif
#endif

/* For compatibility */
#ifdef HasSSESupport
#undef HasKatmaiSupport
#define HasKatmaiSupport HasSSESupport
#endif
#undef MesaUseKatmai
#define MesaUseKatmai MesaUseSSE

#ifndef UsbMouseSupport
# define UsbMouseSupport NO
#endif

#ifndef DefaultFSConfigFile
#define DefaultFSConfigFile $(LIBDIR)/fs/config
#endif

/* X-TrueType settings */
#ifndef HasBlindFaithInUnicode
#define HasBlindFaithInUnicode YES
#endif
#ifndef XTrueTypeCConvModule
#if DoLoadableServer
#define XTrueTypeCConvModule YES
#else
#define XTrueTypeCConvModule NO
#endif
#endif
#ifndef XTrueTypeUseOptEncodings
#define XTrueTypeUseOptEncodings YES
#endif
#ifndef XTrueTypeCConvIncDir
#define XTrueTypeCConvIncDir $(INCROOT)/X11/fonts/codeconv
#endif
#ifndef XTrueTypeInstallCConvHeaders
#define XTrueTypeInstallCConvHeaders BuildLibraries
#endif
#ifndef XTrueTypeCConvModuleDir
#define XTrueTypeCConvModuleDir $(USRLIBDIR)/modules
#endif
#ifndef XTrueTypeCConvModuleSubDir
#define XTrueTypeCConvModuleSubDir codeconv
#endif
#ifndef XTrueTypeDebugXTT
#define XTrueTypeDebugXTT NO
#endif
#ifndef XTrueTypeStandAloneCConv
#define XTrueTypeStandAloneCConv NO
#endif
#ifndef XTrueTypeSrcDir
#define XTrueTypeSrcDir $(TOP)/extras/X-TrueType
#endif
#ifndef FreeTypeSrcDir
#define FreeTypeSrcDir $(TOP)/extras/FreeType
#endif

#ifndef BinDir
#ifdef ProjectRoot
#define BinDir Concat(ProjectRoot,/bin)
#else
#define BinDir /usr/bin/X11
#endif
#endif
#ifndef BuildIncRoot
#define BuildIncRoot $(TOP)/exports
#endif
#ifndef BuildIncDir
#define BuildIncDir $(BUILDINCROOT)/include
#endif
#ifndef BuildIncTop
#define BuildIncTop ../..	/* relative to BuildIncDir */
#endif
#ifndef XTop
# if ImportX11
#  define XTop $(TOP)/imports/x11
# else
#  define XTop $(TOP)
# endif
#endif
#ifndef XBuildIncRoot
# if ImportX11
#  define XBuildIncRoot	$(XTOP)
# else
#  define XBuildIncRoot	$(XTOP)/exports
# endif
#endif
#ifndef XBuildIncDir
# define XBuildIncDir	$(XBUILDINCROOT)/include/X11
#endif
#ifndef XBuildIncTop
# define XBuildIncTop	../../..
#endif
#ifndef XBuildBinDir
# define XBuildBinDir	$(XBUILDINCROOT)/bin
#endif
#ifndef BuildBinDir
#define BuildBinDir $(TOP)/exports/bin
#endif
#ifndef BuildBinTop
#define BuildBinTop ../..	/* relative to BuildBinDir */
#endif
#ifndef BuildLibDir
#define BuildLibDir $(TOP)/exports/lib
#endif
#ifndef BuildLibTop
#define BuildLibTop ../..	/* relative to BuildLibDir */
#endif
#ifndef BuildModuleDir
#define BuildModuleDir $(BUILDLIBDIR)/modules
#endif
#ifndef BuildModuleTop
#define BuildModuleTop $(BUILDLIBTOP)/..
#endif
#ifndef LibDir
# ifdef ProjectRoot
#  define LibDir Concat(ProjectRoot,/lib/X11)
# else
#  define LibDir /usr/lib/X11
# endif
#endif
#ifndef ModuleDir
#define ModuleDir $(USRLIBDIR)/modules
#endif
#ifndef InstSrcDir
#define InstSrcDir Concat(ProjectRoot,/src)
#endif
#ifndef LibexecDir
#ifdef ProjectRoot
#define LibexecDir Concat(ProjectRoot,/libexec)
#else
#define LibexecDir /usr/X11/libexec
#endif
#endif
#ifndef ConfigDir
#define ConfigDir $(LIBDIR)/config
#endif
#ifndef DocDir
#define DocDir $(LIBDIR)/doc
#endif
#ifndef DocHtmlDir
#define DocHtmlDir $(DOCDIR)/html
#endif
#ifndef DocPsDir
#define DocPsDir $(DOCDIR)/PostScript
#endif
#ifndef DocPdfDir
#define DocPdfDir $(DOCDIR)/PDF
#endif
#ifndef FontDir
#define FontDir $(LIBDIR)/fonts
#endif
#ifndef AdmDir
#define AdmDir /usr/adm
#endif
#ifndef XinitDir
#define XinitDir $(LIBDIR)/xinit
#endif
#ifndef XdmDir
#define XdmDir $(LIBDIR)/xdm
#endif
#ifndef XdmVarDir
#define XdmVarDir $(VARLIBDIR)/xdm
#endif
#ifndef XdmAuthDir
#define XdmAuthDir $(LIBDIR)/xdm
#endif
#ifndef XdmConfigurationSubdirectory		/* under xdm sources */
#define XdmConfigurationSubdirectory config
#endif
#ifndef TwmDir
#define TwmDir $(LIBDIR)/twm
#endif
#ifndef XsmDir
#define XsmDir $(LIBDIR)/xsm
#endif
#ifndef NlsDir
#define NlsDir $(LIBDIR)/nls
#endif
#ifndef XLocaleDir
#define XLocaleDir $(LIBDIR)/locale
#endif
#ifndef LbxproxyDir
#define LbxproxyDir $(LIBDIR)/lbxproxy
#endif
#ifndef LbxproxyConfigSubdir		/* under lbxproxy sources */
#define LbxproxyConfigSubdir config
#endif
#ifndef ProxyManagerDir
#define ProxyManagerDir $(LIBDIR)/proxymngr
#endif
#ifndef ServerConfigDir
#define ServerConfigDir $(LIBDIR)/xserver
#endif
#ifndef XPrintDir
#define XPrintDir ServerConfigDir
#endif
#ifndef EtcX11Directory
#define EtcX11Directory /etc/X11
#endif
#ifndef InstallSecurityConfig
#define InstallSecurityConfig YES	/* Install sample security policy */
#endif
#ifndef XFileSearchPathBase
/* avoid SCCS keyword */
#define XFileSearchPathBase Concat4($(LIBDIR)/%L/%T/%N%C,%S:$(LIBDIR)/%l/%T/%N%C,%S:$(LIBDIR)/%T/%N%C,%S:$(LIBDIR)/%L/%T/%N%S:$(LIBDIR)/%l/%T/%N%S:$(LIBDIR)/%T/%N%S)
#endif
#ifndef XFileSearchPathDefault
#ifdef XAppLoadDir
/* avoid SCCS keyword */
#define XFileSearchPathDefault XAppLoadDir/Concat(%N%C,%S):XAppLoadDir/%N%S:XFileSearchPathBase
#else
#define XFileSearchPathDefault XFileSearchPathBase
#endif
#endif
#ifndef XAppLoadDir
#define XAppLoadDir $(LIBDIR)/app-defaults
#endif
#ifndef XtErrorPrefix
#define XtErrorPrefix /* as empty string */
#endif
#ifndef XtExtraDefines
#define XtExtraDefines /* as empty string */
#endif
#ifndef XtWarningPrefix
#define XtWarningPrefix /* as empty string */
#endif
#ifndef OsNameDefines
#define OsNameDefines /* as nothing */
#endif
#ifndef DefaultUserPath			/* for xdm */
#define DefaultUserPath :/bin:/usr/bin:$(BINDIR):/usr/ucb
#endif
#ifndef DefaultSystemPath		/* for xdm */
#define DefaultSystemPath /etc:/bin:/usr/bin:$(BINDIR):/usr/ucb
#endif
#ifndef DefaultSystemShell		/* for xdm to set in SHELL */
#define DefaultSystemShell BourneShell
#endif
#ifndef ContribDir
#define ContribDir $(XTOP)/../contrib	/* contrib is outside core tree */
#endif
#ifndef UnsupportedDir
#define UnsupportedDir $(XTOP)/unsupported
#endif
#ifndef AllocateLocalDefines
#define AllocateLocalDefines /**/
#endif

#ifndef ForceNormalLib
#define ForceNormalLib (HasGcc && !HasGcc2)
#endif

#ifndef XkbComp
#define XkbComp xkbcomp
#endif

#ifndef PsWrap
#define PsWrap $(PSWRAPSRC)/pswrap
#endif

#ifndef ResourceConfigurationManagement
#define ResourceConfigurationManagement YES
#endif

#ifndef XtPopdownConformance
#define XtPopdownConformance YES
#endif

XCOMM -----------------------------------------------------------------------
XCOMM X Window System make variables; these need to be coordinated with rules

/*
 * This list must be reflected in the DIRS_TO_BUILD list in the top-level
 * Makefile.
 */
             XTOP = XTop
           BINDIR = BinDir		/* programs */
     BUILDINCROOT = BuildIncRoot	/* base of build loc */
      BUILDINCDIR = BuildIncDir		/* built headers */
      BUILDINCTOP = BuildIncTop		/* top relative to BUILDINCDIR */
      BUILDLIBDIR = BuildLibDir		/* built libraries */
      BUILDLIBTOP = BuildLibTop		/* top relative to BUILDLIBDIR */
      BUILDBINDIR = BuildBinDir		/* built binaries */
      BUILDBINTOP = BuildBinTop		/* top relative to BUILDBINDIR */
   BUILDMODULEDIR = BuildModuleDir	/* built server modules */
   BUILDMODULETOP = BuildModuleTop	/* top relative to BUILDMODULEDIR */
    XBUILDINCROOT = XBuildIncRoot	/* base of X build loc */
     XBUILDINCDIR = XBuildIncDir
     XBUILDINCTOP = XBuildIncTop
     XBUILDBINDIR = XBuildBinDir
           INCDIR = $(INCROOT)		/* header files */
           ADMDIR = AdmDir		/* server log files */
           LIBDIR = LibDir		/* rgb, XErrorDB, etc. */
       LIBEXECDIR = LibexecDir
        MODULEDIR = ModuleDir
   TOP_X_INCLUDES = TopXInclude

       INSTSRCDIR = InstSrcDir		/* Installed source (kernel modules). */

#ifdef EtcX11Directory
        ETCX11DIR = EtcX11Directory
#endif
#if UseEtcX11
          CONFDIR = $(ETCX11DIR)
#elif HasVarDirectory
          CONFDIR = $(VARDIR)
#endif
           DOCDIR = DocDir
       DOCHTMLDIR = DocHtmlDir
         DOCPSDIR = DocPsDir
        DOCPDFDIR = DocPdfDir
          FONTDIR = FontDir		/* font directories */
     ENCODINGSDIR = $(FONTDIR)/encodings /* font encodings directory */
         XINITDIR = XinitDir		/* xinit config files */
           XDMDIR = XdmDir		/* xdm config files */
        XDMVARDIR = XdmVarDir		/* xdm config files */
           TWMDIR = TwmDir		/* twm config files */
           XSMDIR = XsmDir		/* xsm config files */
           NLSDIR = NlsDir		/* nls files */
       XLOCALEDIR = XLocaleDir		/* locale files */
      LBXPROXYDIR = LbxproxyDir		/* lbxproxy files */
  PROXYMANAGERDIR = ProxyManagerDir	/* proxy manager config files */
        XPRINTDIR = XPrintDir		/* print config file root */
      XAPPLOADDIR = XAppLoadDir		/* application default resource dir */
       FONTCFLAGS = FontCompilerFlags

     INSTAPPFLAGS = $(INSTDATFLAGS)	/* XXX - this should go away - XXX */

#if UseInstalledX11
          XBINDIR = Concat(ProjectRoot,/bin)
              RGB = $(XBINDIR)/rgb
            FONTC = $(XBINDIR)/bdftopcf
      MKFONTSCALE = $(XBINDIR)/mkfontscale
        MKFONTDIR = $(XBINDIR)/mkfontdir
      MKHTMLINDEX = $(XBINDIR)/mkhtmlindex
          UCS2ANY = $(XBINDIR)/ucs2any
      BDFTRUNCATE = $(XBINDIR)/bdftruncate
     UCSMAPPREFIX = $(XFONTDIR)/util/map-
       XCURSORGEN = $(XBINDIR)/xcursorgen
#else
              RGB = $(CLIENTENVSETUP) $(XBUILDBINDIR)/rgb
# if !CrossCompiling
            FONTC = $(CLIENTENVSETUP) $(PRELOADFONTSETUP) $(XBUILDBINDIR)/bdftopcf
      MKFONTSCALE = $(CLIENTENVSETUP) $(PRELOADFREETYPESETUP) $(XBUILDBINDIR)/mkfontscale
        MKFONTDIR = $(MKFONTSCALE) -b -s -l
       XCURSORGEN = $(CLIENTENVSETUP) $(PRELOADSETUP) $(XBUILDBINDIR)/xcursorgen
# elif UseInstalledOnCrossCompile
        MKFONTDIR = $(BINDIR)/mkfontdir
      MKFONTSCALE = $(BINDIR)/mkfontscale
            FONTC = $(BINDIR)/bdftopcf
       XCURSORGEN = $(BINDIR)/xcursorgen
# endif
# if HasPerl
      MKHTMLINDEX = RunPerlScript($(CONFIGSRC)/util/mkhtmlindex.pl,)
# else
      MKHTMLINDEX = $(SHELL) $(CONFIGSRC)/util/mkhtmlindex.sh
# endif
          UCS2ANY = $(XBUILDBINDIR)/ProgramTargetName(ucs2any)
      BDFTRUNCATE = $(FONTSRC)/util/bdftruncate.pl
     UCSMAPPREFIX = $(FONTSRC)/util/map-
#endif

     HTMLINDEXCMD = HtmlIndexCmd

       DOCUTILSRC = $(XTOP)/doc/util
        CLIENTSRC = $(TOP)/clients
          DEMOSRC = $(TOP)/demos
       XDOCMACROS = $(DOCUTILSRC)/macros.t
       XIDXMACROS = $(DOCUTILSRC)/indexmacros.t
       PROGRAMSRC = $(TOP)/programs
           LIBSRC = $(XTOP)/lib
          FONTSRC = $(XTOP)/fonts
     ENCODINGSSRC = $(FONTSRC)/encodings
       INCLUDESRC = BuildIncDir
      XINCLUDESRC = $(INCLUDESRC)/X11
        SERVERSRC = $(XTOP)/programs/Xserver
       CONTRIBSRC = ContribDir
   UNSUPPORTEDSRC = UnsupportedDir
           DOCSRC = $(XTOP)/doc
           RGBSRC = $(XTOP)/programs/rgb
      BDFTOPCFSRC = $(PROGRAMSRC)/bdftopcf
     MKFONTDIRSRC = $(PROGRAMSRC)/mkfontdir
    FONTSERVERSRC = $(PROGRAMSRC)/xfs
       FONTINCSRC = $(XTOP)/include/fonts
        EXTINCSRC = $(XTOP)/include/extensions
      FTSOURCEDIR = FreeTypeSrcDir
     XTTSOURCEDIR = XTrueTypeSrcDir
       MESASRCDIR = MesaSrcDir
  OGLSAMPLESRCDIR = OglSampleSrcDir
        PSWRAPSRC = $(XTOP)/config/pswrap
     TRANSCOMMSRC = $(LIBSRC)/xtrans
   TRANS_INCLUDES = -I$(TRANSCOMMSRC)
 CONNECTION_FLAGS = ConnectionFlags ExtraConnectionDefs
#ifdef X11ProjectRoot
     XPROJECTROOT = X11ProjectRoot
#endif

      XORGMANDEFS = XOrgManDefs
    VENDORMANDEFS = VendorManDefs

#if HasSharedLibraries
#ifndef DontUseLibPathVar
#ifndef BuildLibPathVar
#define BuildLibPathVar LD_LIBRARY_PATH
#endif
#endif
#endif
#ifdef BuildLibPathVar
# ifdef SystemBuildLibPath
  SYSTEMENVLIBDIR = SystemBuildLibPath
# endif
       XENVLIBDIR = X11BuildLibPath
   CLIENTENVSETUP = Concat3(BuildLibPathVar,=,BuildLibPath)
#else
   CLIENTENVSETUP =
#endif

#ifdef PreloadSetup
     PRELOADSETUP = PreloadSetup
#endif
#ifdef PreloadFontSetup
 PRELOADFONTSETUP = PreloadFontSetup
#endif
#ifdef PreloadFreetypeSetup
 PRELOADFREETYPESETUP = PreloadFreetypeSetup
#endif
#ifdef PreloadXFTSetup
     PRELOADXFTSETUP = PreloadXFTSetup
#endif

#ifndef ShLibIncludeFile
/* need this to make ANSI-style preprocessors happy */
#define ShLibIncludeFile <noop.rules>
#endif

#include ShLibIncludeFile

#ifndef XBuildLibDir
# define XBuildLibDir	BuildLibDir
#endif

#ifndef NeedLibInsideFlag
#define NeedLibInsideFlag	NO
#endif

#ifndef SharedLibX11
#define SharedLibX11 HasSharedLibraries
#endif
#ifndef NormalLibX11
#define NormalLibX11 (!SharedLibX11 | ForceNormalLib)
#endif
#ifndef DebugLibX11
#define DebugLibX11		NO	/* debugged X library */
#endif
#ifndef ProfileLibX11
#define ProfileLibX11		NO	/* profiled X library */
#endif
          XLIBSRC = $(LIBSRC)/X11
#if SharedLibX11
#ifndef SharedX11Rev
#define SharedX11Rev 6.2
#endif
SharedLibReferences(XONLY,X11,$(XLIBSRC),SOXLIBREV,SharedX11Rev)
#else
ProjectUnsharedLibReferences(XONLY,X11,$(XLIBSRC),XBuildLibDir)
#endif
      /* Common alternate spellings */
      DEPXLIBONLY = $(DEPXONLYLIB)
         XLIBONLY = $(XONLYLIB)

#if BuildThreadStubLibrary
#ifndef SharedLibXThrStub
#define SharedLibXThrStub	YES
#endif
#ifndef NormalLibXThrStub
#define NormalLibXThrStub	NO
#endif
#ifndef DebugLibXThrStub
#define DebugLibXThrStub	NO
#endif
#ifndef ProfileLibXThrStub
#define ProfileLibXThrStub	NO
#endif
   XTHRSTUBLIBSRC = $(LIBSRC)/XThrStub
#if SharedLibXThrStub
#ifndef SharedXThrStubRev
#define SharedXThrStubRev 6.1
#endif
SharedLibReferences(XTHRSTUB,XThrStub,$(XTHRSTUBLIBSRC),SOXTHRSTUBREV,SharedXThrStubRev)
#else
ProjectUnsharedLibReferences(XTHRSTUB,XThrStub,$(XTHRSTUBSRC),XBuildLibDir)
#endif
#else
#undef  SharedLibXThrStub
#define SharedLibXThrStub	NO
#undef  NormalLibXThrStub
#define NormalLibXThrStub	NO
#undef  DebugLibXThrStub
#define DebugLibXThrStub	NO
#undef  ProfileLibXThrStub
#define ProfileLibXThrStub	NO
#endif

#if BuildScreenSaverLibrary
#ifndef SharedLibXss
#define SharedLibXss	HasSharedLibraries
#endif
#ifndef NormalLibXss
#define NormalLibXss	(!SharedLibXss || ForceNormalLib)
#endif
#ifndef DebugLibXss
#define DebugLibXss	NO
#endif
#ifndef ProfileLibXss
#define ProfileLibXss	NO
#endif
#else
#undef  SharedLibXss
#define SharedLibXss	NO
#undef  NormalLibXss
#define NormalLibXss	NO
#undef  DebugLibXss
#define DebugLibXss	NO
#undef  ProfileLibXss
#define ProfileLibXss	NO
#endif

#if BuildXF86MiscLibrary
#ifndef SharedLibXxf86misc
#define SharedLibXxf86misc	HasSharedLibraries
#endif
#ifndef NormalLibXxf86misc
#define NormalLibXxf86misc	(!SharedLibXxf86misc || ForceNormalLib)
#endif
#ifndef DebugLibXxf86misc
#define DebugLibXxf86misc	NO
#endif
#ifndef ProfileLibXxf86misc
#define ProfileLibXxf86misc	NO
#endif
#else
#undef  SharedLibXxf86misc
#define SharedLibXxf86misc	NO
#undef  NormalLibXxf86misc
#define NormalLibXxf86misc	NO
#undef  DebugLibXxf86misc
#define DebugLibXxf86misc	NO
#undef  ProfileLibXxf86misc
#define ProfileLibXxf86misc	NO
#endif

#if BuildXF86VidModeLibrary
#ifndef SharedLibXxf86vm
#define SharedLibXxf86vm	HasSharedLibraries
#endif
#ifndef NormalLibXxf86vm
#define NormalLibXxf86vm	(!SharedLibXxf86vm || ForceNormalLib)
#endif
#ifndef DebugLibXxf86vm
#define DebugLibXxf86vm		NO
#endif
#ifndef ProfileLibXxf86vm
#define ProfileLibXxf86vm	NO
#endif
#else
#undef  SharedLibXxf86vm
#define SharedLibXxf86vm	NO
#undef  NormalLibXxf86vm
#define NormalLibXxf86vm	NO
#undef  DebugLibXxf86vm
#define DebugLibXxf86vm		NO
#undef  ProfileLibXxf86vm
#define ProfileLibXxf86vm	NO
#endif

#if BuildXF86DGALibrary
#ifndef SharedLibXxf86dga
#define SharedLibXxf86dga	HasSharedLibraries
#endif
#ifndef NormalLibXxf86dga
#define NormalLibXxf86dga	(!SharedLibXxf86dga || ForceNormalLib)
#endif
#ifndef DebugLibXxf86dga
#define DebugLibXxf86dga	NO
#endif
#ifndef ProfileLibXxf86dga
#define ProfileLibXxf86dga	NO
#endif
#else
#undef  SharedLibXxf86dga
#define SharedLibXxf86dga	NO
#undef  NormalLibXxf86dga
#define NormalLibXxf86dga	NO
#undef  DebugLibXxf86dga
#define DebugLibXxf86dga	NO
#undef  ProfileLibXxf86dga
#define ProfileLibXxf86dga	NO
#endif

#if BuildXF86RushLibrary
#ifndef SharedLibXxf86rush
#define SharedLibXxf86rush	HasSharedLibraries
#endif
#ifndef NormalLibXxf86rush
#define NormalLibXxf86rush	(!SharedLibXxf86rush || ForceNormalLib)
#endif
#ifndef DebugLibXxf86rush
#define DebugLibXxf86rush	NO
#endif
#ifndef ProfileLibXxf86rush
#define ProfileLibXxf86rush	NO
#endif
#else
#undef  SharedLibXxf86rush
#define SharedLibXxf86rush	NO
#undef  NormalLibXxf86rush
#define NormalLibXxf86rush	NO
#undef  DebugLibXxf86rush
#define DebugLibXxf86rush	NO
#undef  ProfileLibXxf86rush
#define ProfileLibXxf86rush	NO
#endif

#if BuildXvLibrary
#ifndef SharedLibXv
#define SharedLibXv		HasSharedLibraries
#endif
#ifndef NormalLibXv
#define NormalLibXv		(!SharedLibXv || ForceNormalLib)
#endif
#ifndef DebugLibXv
#define DebugLibXv		NO
#endif
#ifndef ProfileLibXv
#define ProfileLibXv		NO
#endif
#else
#undef  SharedLibXv
#define SharedLibXv		NO
#undef  NormalLibXv
#define NormalLibXv		NO
#undef  DebugLibXv
#define DebugLibXv		NO
#undef  ProfileLibXv
#define ProfileLibXv		NO
#endif

#if BuildXvMCLibrary
#ifndef SharedLibXvMC
#define SharedLibXvMC		HasSharedLibraries
#endif
#ifndef NormalLibXvMC
#define NormalLibXvMC		(!SharedLibXvMC || ForceNormalLib)
#endif
#ifndef DebugLibXvMC
#define DebugLibXvMC		NO
#endif
#ifndef ProfileLibXvMC
#define ProfileLibXvMC		NO
#endif
#else
#undef  SharedLibXvMC
#define SharedLibXvMC		NO
#undef  NormalLibXvMC
#define NormalLibXvMC		NO
#undef  DebugLibXvMC
#define DebugLibXvMC		NO
#undef  ProfileLibXvMC
#define ProfileLibXvMC		NO
#endif

#if BuildXineramaLibrary
#ifndef SharedLibXinerama
#define SharedLibXinerama	HasSharedLibraries
#endif
#ifndef NormalLibXinerama
#define NormalLibXinerama	(!SharedLibXinerama || ForceNormalLib)
#endif
#ifndef DebugLibXinerama
#define DebugLibXinerama	NO
#endif
#ifndef ProfileLibXinerama
#define ProfileLibXinerama	NO
#endif
#else
#undef  SharedLibXinerama
#define SharedLibXinerama	NO
#undef  NormalLibXinerama
#define NormalLibXinerama	NO
#undef  DebugLibXinerama
#define DebugLibXinerama	NO
#undef  ProfileLibXinerama
#define ProfileLibXinerama	NO
#endif

#if BuildXResLibrary
#ifndef SharedLibXRes
#define SharedLibXRes           HasSharedLibraries
#endif
#ifndef NormalLibXRes
#define NormalLibXRes           (!SharedLibXRes || ForceNormalLib)
#endif
#ifndef DebugLibXRes
#define DebugLibXRes            NO
#endif
#ifndef ProfileLibXRes
#define ProfileLibXRes          NO
#endif
#else
#undef  SharedLibXRes
#define SharedLibXRes		NO
#undef  NormalLibXRes
#define NormalLibXRes		NO
#undef  DebugLibXRes
#define DebugLibXRes		NO
#undef  ProfileLibXRes
#define ProfileLibXRes		NO
#endif

#if BuildDPSLibrary
#ifndef SharedLibDps
#define SharedLibDps		HasSharedLibraries
#endif
#ifndef NormalLibDps
#define NormalLibDps		(!SharedLibDps || ForceNormalLib)
#endif
#ifndef DebugLibDps
#define DebugLibDps		NO
#endif
#ifndef ProfileLibDps
#define ProfileLibDps		NO
#endif
#else
#undef  SharedLibDps
#define SharedLibDps		NO
#undef  NormalLibDps
#define NormalLibDps		NO
#undef  DebugLibDps
#define DebugLibDps		NO
#undef  ProfileLibDps
#define ProfileLibDps		NO
#endif

#if BuildDPSTkLibrary
#ifndef SharedLibDpsTk
#define SharedLibDpsTk		HasSharedLibraries
#endif
#ifndef NormalLibDpsTk
#define NormalLibDpsTk		(!SharedLibDpsTk || ForceNormalLib)
#endif
#ifndef DebugLibDpsTk
#define DebugLibDpsTk		NO
#endif
#ifndef ProfileLibDpsTk
#define ProfileLibDpsTk		NO
#endif
#else
#undef  SharedLibDpsTk
#define SharedLibDpsTk		NO
#undef  NormalLibDpsTk
#define NormalLibDpsTk		NO
#undef  DebugLibDpsTk
#define DebugLibDpsTk		NO
#undef  ProfileLibDpsTk
#define ProfileLibDpsTk		NO
#endif

#if BuildPSResLibrary
#ifndef SharedLibPSRes
#define SharedLibPSRes		HasSharedLibraries
#endif
#ifndef NormalLibPSRes
#define NormalLibPSRes		(!SharedLibPSRes || ForceNormalLib)
#endif
#ifndef DebugLibPSRes
#define DebugLibPSRes		NO
#endif
#ifndef ProfileLibPSRes
#define ProfileLibPSRes		NO
#endif
#else
#undef  SharedLibPSRes
#define SharedLibPSRes		NO
#undef  NormalLibPSRes
#define NormalLibPSRes		NO
#undef  DebugLibPSRes
#define DebugLibPSRes		NO
#undef  ProfileLibPSRes
#define ProfileLibPSRes		NO
#endif

#if BuildRenderLibrary
#ifndef SharedLibXrender
#define SharedLibXrender	HasSharedLibraries
#endif
#ifndef NormalLibXrender
#define NormalLibXrender	(!SharedLibXrender || ForceNormalLib)
#endif
#ifndef DebugLibXrender
#define DebugLibXrender		NO
#endif
#ifndef ProfileLibXrender
#define ProfileLibXrender	NO
#endif
#else
#undef  SharedLibXrender
#define SharedLibXrender	NO
#undef  NormalLibXrender
#define NormalLibXrender	NO
#undef  DebugLibXrender
#define DebugLibXrender		NO
#undef  ProfileLibXrender
#define ProfileLibXrender	NO
#endif

#if BuildRandRLibrary
#ifndef SharedLibXrandr
#define SharedLibXrandr		HasSharedLibraries
#endif
#ifndef NormalLibXrandr
#define NormalLibXrandr		(!SharedLibXrandr || ForceNormalLib)
#endif
#ifndef DebugLibXrandr
#define DebugLibXrandr		NO
#endif
#ifndef ProfileLibXrandr
#define ProfileLibXrandr	NO
#endif
#else
#undef  SharedLibXrandr
#define SharedLibXrandr		NO
#undef  NormalLibXrandr
#define NormalLibXrandr		NO
#undef  DebugLibXrandr
#define DebugLibXrandr		NO
#undef  ProfileLibXrandr
#define ProfileLibXrandr	NO
#endif

#if BuildXcursorLibrary
#ifndef SharedLibXcursor
#define SharedLibXcursor	HasSharedLibraries
#endif
#ifndef NormalLibXcursor
#define NormalLibXcursor	(!SharedLibXcursor || ForceNormalLib)
#endif
#ifndef DebugLibXcursor
#define DebugLibXcursor		NO
#endif
#ifndef ProfileLibXcursor
#define ProfileLibXcursor	NO
#endif
#else
#undef  SharedLibXcursor
#define SharedLibXcursor	NO
#undef  NormalLibXcursor
#define NormalLibXcursor	NO
#undef  DebugLibXcursor
#define DebugLibXcursor		NO
#undef  ProfileLibXcursor
#define ProfileLibXcursor	NO
#endif

#if BuildAppleWMLibrary
#ifndef SharedLibAppleWM
#define SharedLibAppleWM	HasSharedLibraries
#endif
#ifndef NormalLibAppleWM
#define NormalLibAppleWM	(!SharedLibAppleWM || ForceNormalLib)
#endif
#ifndef DebugLibAppleWM
#define DebugLibAppleWM		NO
#endif
#ifndef ProfileLibAppleWM
#define ProfileLibAppleWM	NO
#endif
#else
#undef  SharedLibAppleWM
#define SharedLibAppleWM	NO
#undef  NormalLibAppleWM
#define NormalLibAppleWM	NO
#undef  DebugLibAppleWM
#define DebugLibAppleWM		NO
#undef  ProfileLibAppleWM
#define ProfileLibAppleWM	NO
#endif

#if BuildWindowsWMLibrary
#ifndef SharedLibWindowsWM
#define SharedLibWindowsWM	HasSharedLibraries
#endif
#ifndef NormalLibWindowsWM
#define NormalLibWindowsWM	(!SharedLibWindowsWM || ForceNormalLib)
#endif
#ifndef DebugLibWindowsWM
#define DebugLibWindowsWM	NO
#endif
#ifndef ProfileLibWindowsWM
#define ProfileLibWindowsWM	NO
#endif
#else
#undef  SharedLibWindowsWM
#define SharedLibWindowsWM	NO
#undef  NormalLibWindowsWM
#define NormalLibWindowsWM	NO
#undef  DebugLibWindowsWM
#define DebugLibWindowsWM	NO
#undef  ProfileLibWindowsWM
#define ProfileLibWindowsWM	NO
#endif

#if BuildGLULibrary
#ifndef SharedLibGlu
#define SharedLibGlu		HasSharedLibraries
#endif
#ifndef NormalLibGlu
#define NormalLibGlu		(!SharedLibX11 | ForceNormalLib)
#endif
#ifndef DebugLibGlu
#define DebugLibGlu		NO
#endif
#ifndef ProfileLibGlu
#define ProfileLibGlu		NO
#endif
#else
#undef  SharedLibGlu
#define SharedLibGlu		NO
#undef  NormalLibGlu
#define NormalLibGlu		NO
#undef  DebugLibGlu
#define DebugLibGlu		NO
#undef  ProfileLibGlu
#define ProfileLibGlu		NO
#endif

#if BuildGLXLibrary
#ifndef SharedLibGlx
#define SharedLibGlx		HasSharedLibraries
#endif
#ifndef NormalLibGlx
#define NormalLibGlx		(!SharedLibX11 | ForceNormalLib)
#endif
#ifndef DebugLibGlx
#define DebugLibGlx		NO
#endif
#ifndef ProfileLibGlx
#define ProfileLibGlx		NO
#endif
#ifndef BuildLibGlxWithoutPIC
#define BuildLibGlxWithoutPIC	NO
#endif
#if BuildLibGlxWithoutPIC && SharedLibGlx
#define SharedLibGlxWithoutPIC	YES
#else
#define SharedLibGlxWithoutPIC	NO
#endif
#ifndef LinkGLToUsrLib
#define LinkGLToUsrLib		NO
#endif
#if NothingOutsideProjectRoot
#undef LinkGLToUsrLib
#define LinkGLToUsrLib		NO
#endif
#ifndef LinkGLToUsrInclude
#define LinkGLToUsrInclude	NO
#endif
#if NothingOutsideProjectRoot
#undef LinkGLToUsrInclude
#define LinkGLToUsrInclude	NO
#endif
#else
#undef  SharedLibGlx
#define SharedLibGlx		NO
#undef  NormalLibGlx
#define NormalLibGlx		NO
#undef  DebugLibGlx
#define DebugLibGlx		NO
#undef  ProfileLibGlx
#define ProfileLibGlx		NO
#endif
/*
 * Only make a shared GLw library on systems with Weak symbols 
 * because it depends on Motif. See xc/lib/GLw/README.txt for details
 */
#if BuildGLwLibrary
#ifndef SharedLibGLw
#define SharedLibGLw		HasSharedLibraries && HasWeakSymbols
#endif
#ifndef NormalLibGLw
#define NormalLibGLw		(!SharedLibGLw || ForceNormalLib)
#endif
#ifndef DebugLibGLw
#define DebugLibGLw		NO	/* debugged widget library */
#endif
#ifndef ProfileLibGLw
#define ProfileLibGLw		NO	/* profiled widget library */
#endif
#ifndef GLwUseXmStubs
	/* create stub (weak) Motif symbols */
#define GLwUseXmStubs		SharedLibGLw && HasWeakSymbols
#endif
#else
#undef  SharedLibGLw
#define SharedLibGLw		NO
#undef  NormalLibGLw
#define NormalLibGLw		NO
#undef  DebugLibGLw
#define DebugLibGLw		NO
#undef  ProfileLibGLw
#define ProfileLibGLw		NO
#endif

#ifndef SharedLibXext
#define SharedLibXext HasSharedLibraries
#endif
#ifndef NormalLibXext
#define NormalLibXext (!SharedLibXext | ForceNormalLib)
#endif
#ifndef DebugLibXext
#define DebugLibXext		NO	/* debugged Xext library */
#endif
#ifndef ProfileLibXext
#define ProfileLibXext		NO	/* profiled Xext library */
#endif
      XEXTLIBSRC = $(LIBSRC)/Xext
#if SharedLibXext
#ifndef SharedXextRev
#define SharedXextRev 6.4
#endif
SharedLibReferences(EXTENSION,Xext,$(XEXTLIBSRC),SOXEXTREV,SharedXextRev)
#else
ProjectUnsharedLibReferences(EXTENSION,Xext,$(XEXTLIBSRC),XBuildLibDir)
#endif
LINTEXTENSIONLIB = $(LINTEXTENSION)
          DEPXLIB = $(DEPEXTENSIONLIB) $(DEPXONLYLIB)
             XLIB = $(EXTENSIONLIB) $(XONLYLIB)
         LINTXLIB = $(LINTXONLYLIB)

    XSSLIBSRC = $(LIBSRC)/Xss
#if SharedLibXss
#ifndef SharedXssRev
#define SharedXssRev 1.0
#endif
SharedLibReferences(XSS,Xss,$(XSSLIBSRC),SOXSSREV,SharedXssRev)
#else
ProjectUnsharedLibReferences(XSS,Xss,$(XSSLIBSRC),XBuildLibDir)
#endif

    XXF86MISCLIBSRC = $(LIBSRC)/Xxf86misc
#if SharedLibXxf86misc
#ifndef SharedXxf86miscRev
#define SharedXxf86miscRev 1.1
#endif
SharedLibReferences(XXF86MISC,Xxf86misc,$(XXF86MISCLIBSRC),SOXXF86MISCREV,SharedXxf86miscRev)
#else
ProjectUnsharedLibReferences(XXF86MISC,Xxf86misc,$(XXF86MISCLIBSRC),XBuildLibDir)
#endif

    XXF86VMLIBSRC = $(LIBSRC)/Xxf86vm
#if SharedLibXxf86vm
#ifndef SharedXxf86vmRev
#define SharedXxf86vmRev 1.0
#endif
SharedLibReferences(XXF86VM,Xxf86vm,$(XXF86VMLIBSRC),SOXXF86VMREV,SharedXxf86vmRev)
#else
ProjectUnsharedLibReferences(XXF86VM,Xxf86vm,$(XXF86VMLIBSRC),XBuildLibDir)
#endif

    XXF86DGALIBSRC = $(LIBSRC)/Xxf86dga
#if SharedLibXxf86dga
#ifndef SharedXxf86dgaRev
#define SharedXxf86dgaRev 1.0
#endif
SharedLibReferences(XXF86DGA,Xxf86dga,$(XXF86DGALIBSRC),SOXXF86DGAREV,SharedXxf86dgaRev)
#else
ProjectUnsharedLibReferences(XXF86DGA,Xxf86dga,$(XXF86DGALIBSRC),XBuildLibDir)
#endif


    XXF86RUSHLIBSRC = $(LIBSRC)/Xxf86rush
#if SharedLibXxf86rush
#ifndef SharedXxf86rushRev
#define SharedXxf86rushRev 1.0
#endif
SharedLibReferences(XXF86RUSH,Xxf86rush,$(XXF86RUSHLIBSRC),SOXXF86RUSHREV,SharedXxf86rushRev)
#else
ProjectUnsharedLibReferences(XXF86RUSH,Xxf86rush,$(XXF86RUSHLIBSRC),XBuildLibDir)
#endif


    XVLIBSRC = $(LIBSRC)/Xv
#if SharedLibXv
#ifndef SharedXvRev
#define SharedXvRev 1.0
#endif
SharedLibReferences(XV,Xv,$(XVLIBSRC),SOXVREV,SharedXvRev)
#else
ProjectUnsharedLibReferences(XV,Xv,$(XVLIBSRC),XBuildLibDir)
#endif


    XVMCLIBSRC = $(LIBSRC)/XvMC
#if SharedLibXvMC
#ifndef SharedXvMCRev
#define SharedXvMCRev 1.0
#endif
SharedLibReferences(XVMC,XvMC,$(XVMCLIBSRC),SOXVMCREV,SharedXvMCRev)
#else
ProjectUnsharedLibReferences(XVMC,XvMC,$(XVMCLIBSRC),XBuildLibDir)
#endif

    XINERAMALIBSRC = $(LIBSRC)/Xinerama
#if SharedLibXinerama
#ifndef SharedXineramaRev
#define SharedXineramaRev 1.0
#endif
SharedLibReferences(XINERAMA,Xinerama,$(XINERAMALIBSRC),SOXINERAMAREV,SharedXineramaRev)
#else
ProjectUnsharedLibReferences(XINERAMA,Xinerama,$(XINERAMALIBSRC),XBuildLibDir)
#endif

    XRESLIBSRC = $(LIBSRC)/XRes
#if SharedLibXRes
#ifndef SharedXResRev
#define SharedXResRev 1.0
#endif
SharedLibReferences(XRES,XRes,$(XRESLIBSRC),SOXRESREV,SharedXResRev)
#else
ProjectUnsharedLibReferences(XRES,XRes,$(XRESLIBSRC),XBuildLibDir)
#endif


    DPSLIBSRC = $(LIBSRC)/dps
#if SharedLibDps
#ifndef SharedDpsRev
#define SharedDpsRev 1.0
#endif
SharedLibReferences(DPS,dps,$(DPSLIBSRC),SODPSREV,SharedDpsRev)
#else
ProjectUnsharedLibReferences(DPS,dps,$(DPSLIBSRC),XBuildLibDir)
#endif

    DPSTKLIBSRC = $(LIBSRC)/dpstk
#if SharedLibDpsTk
#ifndef SharedDpsTkRev
#define SharedDpsTkRev 1.0
#endif
SharedLibReferences(DPSTK,dpstk,$(DPSTKLIBSRC),SODPSTKREV,SharedDpsTkRev)
#else
ProjectUnsharedLibReferences(DPSTK,dpstk,$(DPSTKLIBSRC),XBuildLibDir)
#endif

    PSRESLIBSRC = $(LIBSRC)/psres
#if SharedLibPSRes
#ifndef SharedPSResRev
#define SharedPSResRev 1.0
#endif
SharedLibReferences(PSRES,psres,$(PSRESLIBSRC),SOPSRESREV,SharedPSResRev)
#else
ProjectUnsharedLibReferences(PSRES,psres,$(PSRESLIBSRC),XBuildLibDir)
#endif

    GLULIBSRC = $(LIBSRC)/GLU
#if SharedLibGlu
#ifndef SharedGluRev
#define SharedGluRev 1.3
#endif
SharedLibReferences(GLU,GLU,$(GLULIBSRC),SOGLUREV,SharedGluRev)
#else
ProjectUnsharedLibReferences(GLU,GLU,$(GLULIBSRC),XBuildLibDir)
#endif

    GLXLIBSRC = $(LIBSRC)/GL
#if SharedLibGlx
#ifndef SharedGlxRev
#define SharedGlxRev 1.2
#endif
SharedLibReferences(GLX,GL,$(GLXLIBSRC),SOGLREV,SharedGlxRev)
#else
ProjectUnsharedLibReferences(GLX,GL,$(GLXLIBSRC),XBuildLibDir)
#endif
#ifndef SharedOSMesaRev
#define SharedOSMesaRev 4.0
#endif

    GLWIDGETSRC = $(LIBSRC)/GLw
#if SharedLibGLw
#ifndef SharedGLwRev
#define SharedGLwRev 1.0		/* used to name the shared library */
#endif
SharedDSLibReferences(GLW,GLw,$(GLWIDGETSRC),SOGLWREV,SharedGLwRev)
#else
ProjectUnsharedLibReferences(GLW,GLw,$(GLWIDGETSRC),XBuildLibDir)
#endif

    XRENDERLIBSRC = $(LIBSRC)/Xrender
#if SharedLibXrender
#ifndef SharedXrenderRev
#define SharedXrenderRev 1.2
#endif
SharedLibReferences(XRENDER,Xrender,$(XRENDERLIBSRC),SOXRENDERREV,SharedXrenderRev)
#else
ProjectUnsharedLibReferences(XRENDER,Xrender,$(XRENDERLIBSRC),XBuildLibDir)
#endif

    XRANDRRLIBSRC = $(LIBSRC)/Xrandr
#if SharedLibXrandr
#ifndef SharedXrandrRev
#define SharedXrandrRev 2.0
#endif
SharedLibReferences(XRANDR,Xrandr,$(XRANDRLIBSRC),SOXRANDRREV,SharedXrandrRev)
#else
ProjectUnsharedLibReferences(XRANDR,Xrandr,$(XRANDRLIBSRC),XBuildLibDir)
#endif

   XCURSORRLIBSRC = $(LIBSRC)/Xcursor
#if SharedLibXcursor
#ifndef SharedXcursorRev
#define SharedXcursorRev 1.0
#endif
SharedLibReferences(XCURSOR,Xcursor,$(XCURSORLIBSRC),SOXCURSORREV,SharedXcursorRev)
#else
ProjectUnsharedLibReferences(XCURSOR,Xcursor,$(XCURSORLIBSRC),XBuildLibDir)
#endif

   APPLEWMLIBSRC = $(LIBSRC)/apple
#if SharedLibAppleWM
#ifndef SharedAppleWMRev
#define SharedAppleWMRev 1.0
#endif
SharedLibReferences(APPLEWM,AppleWM,$(APPLEWMLIBSRC),SOAPPLEWMREV,SharedAppleWMRev)
#else
ProjectUnsharedLibReferences(APPLEWM,AppleWM,$(APPLEWMLIBSRC),XBuildLibDir)
#endif

   WINDOWSWMLIBSRC = $(LIBSRC)/windows
#if SharedLibWindowsWM
#ifndef SharedWindowsWMRev
#define SharedWindowsWMRev 1.0
#endif
SharedLibReferences(WINDOWSWM,WindowsWM,$(WINDOWSWMLIBSRC),SOWINDOWSWMREV,SharedWindowsWMRev)
#else
ProjectUnsharedLibReferences(WINDOWSWM,WindowsWM,$(WINDOWSWMLIBSRC),XBuildLibDir)
#endif

# ifndef SharedLibXfontcache
#  define SharedLibXfontcache	HasSharedLibraries
# endif
# ifndef NormalLibXfontcache
#  define NormalLibXfontcache	(!SharedLibXfontcache || ForceNormalLib)
# endif
# ifndef DebugLibXfontcache
#  define DebugLibXfontcache	NO
# endif
# ifndef ProfileLibXfontcache
#  define ProfileLibXfontcache	NO
# endif

    XFONTCACHELIBSRC = $(LIBSRC)/Xfontcache
#if SharedLibXfontcache
#ifndef SharedXfontcacheRev
#define SharedXfontcacheRev 1.2
#endif
SharedLibReferences(XFONTCACHE,Xfontcache,$(XFONTCACHELIBSRC),SOXFONTCACHEREV,SharedXfontcacheRev)
#else
ProjectUnsharedLibReferences(XFONTCACHE,Xfontcache,$(XFONTCACHELIBSRC),XBuildLibDir)
#endif

#ifndef SharedLibXau
#define SharedLibXau		NO
#endif
#ifndef NormalLibXau
#define NormalLibXau (!SharedLibXau | ForceNormalLib)
#endif
#ifndef DebugLibXau
#define DebugLibXau		NO	/* debugged auth library */
#endif
#ifndef ProfileLibXau
#define ProfileLibXau		NO	/* profiled auth library */
#endif
         XAUTHSRC = $(LIBSRC)/Xau
#if SharedLibXau
#ifndef SharedXauRev
#define SharedXauRev 6.0
#endif
SharedLibReferences(XAUTH,Xau,$(XAUTHSRC),SOXAUTHREV,SharedXauRev)
#else
#if !UseInstalledXauLib
ProjectUnsharedLibReferences(XAUTH,Xau,$(XAUTHSRC),XBuildLibDir)
#else
ProjectUnsharedLibReferences(XAUTH,Xau,$(XAUTHSRC),$(USRLIBDIR))
#endif
#endif

#ifndef SharedLibXdmcp
#define SharedLibXdmcp		NO
#endif
#ifndef NormalLibXdmcp
#define NormalLibXdmcp (!SharedLibXdmcp | ForceNormalLib)
#endif
#ifndef DebugLibXdmcp
#define DebugLibXdmcp		NO	/* debugged XDMCP library */
#endif
#ifndef ProfileLibXdmcp
#define ProfileLibXdmcp		NO	/* profiled XDMCP library */
#endif
      XDMCPLIBSRC = $(LIBSRC)/Xdmcp
#if SharedLibXdmcp
#ifndef SharedXdmcpRev
#define SharedXdmcpRev 6.0
#endif
SharedLibReferences(XDMCP,Xdmcp,$(XDMCPLIBSRC),SOXDMCPREV,SharedXdmcpRev)
#else
#if !UseInstalledXdmcpLib
ProjectUnsharedLibReferences(XDMCP,Xdmcp,$(XDMCPLIBSRC),XBuildLibDir)
#else
ProjectUnsharedLibReferences(XDMCP,Xdmcp,$(XDMCPLIBSRC),$(USRLIBDIR))
#endif
#endif

#ifndef SharedLibXmu
#define SharedLibXmu HasSharedLibraries
#endif
#ifndef NormalLibXmu
#define NormalLibXmu (!SharedLibXmu | ForceNormalLib)
#endif
#ifndef DebugLibXmu
#define DebugLibXmu		NO	/* debugged Xmu library */
#endif
#ifndef ProfileLibXmu
#define ProfileLibXmu		NO	/* profiled Xmu library */
#endif
           XMUSRC = $(LIBSRC)/Xmu
#if SharedLibXmu
#ifndef SharedXmuRev
#define SharedXmuRev 6.2
#endif
SharedDSLibReferences(XMU,Xmu,$(XMUSRC),SOXMUREV,SharedXmuRev)
#else
ProjectUnsharedLibReferences(XMU,Xmu,$(XMUSRC),XBuildLibDir)
#endif

#ifndef SharedLibXmuu
#define SharedLibXmuu HasSharedLibraries
#endif
#ifndef NormalLibXmuu
#define NormalLibXmuu		(!SharedLibXmuu | ForceNormalLib)
#endif
#ifndef DebugLibXmuu
#define DebugLibXmuu		NO	/* debugged Xmuu library */
#endif
#ifndef ProfileLibXmuu
#define ProfileLibXmuu		NO	/* profiled Xmuu library */
#endif
           XMUUSRC = $(LIBSRC)/Xmuu
#if SharedLibXmuu
#ifndef SharedXmuuRev
#define SharedXmuuRev 1.0
#endif
SharedLibReferences(XMUU,Xmuu,$(XMUUSRC),SOXMUUREV,SharedXmuuRev)
#else
ProjectUnsharedLibReferences(XMUU,Xmuu,$(XMUUSRC),XBuildLibDir)
#endif

#ifndef SharedOldX
#define SharedOldX HasSharedLibraries
#endif
#ifndef NormalOldX
#define NormalOldX (!SharedOldX | ForceNormalLib)
#endif
#ifndef DebugOldX
#define DebugOldX		NO	/* debugged old X library */
#endif
#ifndef ProfileOldX
#define ProfileOldX		NO	/* profiled old X library */
#endif
       OLDXLIBSRC = $(LIBSRC)/oldX
#if SharedOldX
#ifndef SharedOldXRev
#define SharedOldXRev 6.0
#endif
SharedLibReferences(OLDX,oldX,$(OLDXLIBSRC),SOOLDXREV,SharedOldXRev)
#else
ProjectUnsharedLibReferences(OLDX,oldX,$(OLDXLIBSRC),XBuildLibDir)
#endif

#ifndef SharedLibXp
#define SharedLibXp HasSharedLibraries
#endif
#ifndef NormalLibXp
#define NormalLibXp (!SharedLibXp | ForceNormalLib)
#endif
#ifndef DebugLibXp
#define DebugLibXp              NO      /* debugged Xp library */
#endif
#ifndef ProfileLibXp
#define ProfileLibXp            NO      /* profiled Xp library */
#endif
         XPLIBSRC = $(LIBSRC)/Xp
#if SharedLibXp
#ifndef SharedXpRev
#define SharedXpRev 6.2
#endif
SharedLibReferences(XP,Xp,$(XPLIBSRC),SOXPREV,SharedXpRev)
#else
ProjectUnsharedLibReferences(XP,Xp,$(XPLIBSRC),XBuildLibDir)
#endif

#ifndef SharedLibXt
#define SharedLibXt HasSharedLibraries
#endif
#ifndef NormalLibXt
#define NormalLibXt (!SharedLibXt | ForceNormalLib)
#endif
#ifndef DebugLibXt
#define DebugLibXt		NO	/* debugged toolkit library */
#endif
#ifndef ProfileLibXt
#define ProfileLibXt		NO	/* profiled toolkit library */
#endif
       TOOLKITSRC = $(LIBSRC)/Xt
#if SharedLibXt
#ifndef SharedXtRev
#define SharedXtRev 6.0
#endif
SharedDSLibReferences(XTOOLONLY,Xt,$(TOOLKITSRC),SOXTREV,SharedXtRev)
#else
ProjectUnsharedLibReferences(XTOOLONLY,Xt,$(TOOLKITSRC),XBuildLibDir)
#endif
      DEPXTOOLLIB = $(DEPXTOOLONLYLIB) $(DEPSMLIB) $(DEPICELIB)
         XTOOLLIB = $(XTOOLONLYLIB) $(SMLIB) $(ICELIB)
     LINTXTOOLLIB = $(LINTXTOOLONLYLIB)

#ifndef SharedLibXa
#define SharedLibXa	(HasSharedLibraries & HasCplusplus)
#endif
#ifndef NormalLibXa
/* #define NormalLibXa	((!SharedLibXa | ForceNormalLib) & HasCplusplus) */
#define NormalLibXa	YES /* needed for current tests, will correct later */
#endif
#ifndef DebugLibXa
#define DebugLibXa	NO	/* debugged audio library */
#endif
#ifndef ProfileLibXa
#define ProfileLibXa	NO	/* profiled audio library */
#endif
       XALIBSRC = $(LIBSRC)/Xa
#if SharedLibXa
#ifndef SharedXaRev
#define SharedXaRev 1.0
#endif
SharedLibReferences(XA,Xa,$(XALIBSRC),SOXAREV,SharedXaRev)
#else
UnsharedLibReferences(XA,Xa,$(XALIBSRC))
#endif

#ifndef SharedLibXaw
#define SharedLibXaw HasSharedLibraries
#endif
#ifndef NormalLibXaw
#define NormalLibXaw (!SharedLibXaw | ForceNormalLib)
#endif
#ifndef DebugLibXaw
#define DebugLibXaw		NO	/* debugged widget library */
#endif
#ifndef ProfileLibXaw
#define ProfileLibXaw		NO	/* profiled widget library */
#endif
       AWIDGETSRC = $(LIBSRC)/Xaw
#if SharedLibXaw
#ifndef SharedXawRev
#define SharedXawRev 7.0
#endif
SharedDSLibReferences(XAW,Xaw,$(AWIDGETSRC),SOXAWREV,SharedXawRev)
#else
ProjectUnsharedLibReferences(XAW,Xaw,$(AWIDGETSRC),XBuildLibDir)
#endif

#ifndef BuildXaw6
#define BuildXaw6 HasSharedLibraries
#endif

#if BuildXaw6
#ifndef SharedLibXaw6
#define SharedLibXaw6 HasSharedLibraries
#endif
#ifndef NormalLibXaw6
#define NormalLibXaw6		NO
#endif
#ifndef DebugLibXaw6
#define DebugLibXaw6		NO	/* debugged widget library */
#endif
#ifndef ProfileLibXaw6
#define ProfileLibXaw6		NO	/* profiled widget library */
#endif
       AWIDGET6SRC = $(LIBSRC)/Xaw6
#if SharedLibXaw6
#ifndef SharedXaw6Rev
#define SharedXaw6Rev 6.1
#endif
SharedDSLibReferences(XAW6,Xaw,$(AWIDGET6SRC),SOXAW6REV,SharedXaw6Rev)
#else
ProjectUnsharedLibReferences(XAW6,Xaw,$(AWIDGET6SRC),XBuildLibDir)
#endif
#endif

#ifndef SharedLibXi
#define SharedLibXi HasSharedLibraries
#endif
#ifndef NormalLibXi
#define NormalLibXi (!SharedLibXi | ForceNormalLib)
#endif
#ifndef DebugLibXi
#define DebugLibXi		NO	/* debugged Xi library */
#endif
#ifndef ProfileLibXi
#define ProfileLibXi		NO	/* profiled Xi library */
#endif
         XILIBSRC = $(LIBSRC)/Xi
#if SharedLibXi
#ifndef SharedXiRev
#define SharedXiRev 6.0
#endif
SharedLibReferences(XI,Xi,$(XILIBSRC),SOXINPUTREV,SharedXiRev)
#else
ProjectUnsharedLibReferences(XI,Xi,$(XILIBSRC),XBuildLibDir)
#endif

#ifndef SharedLibXtst
#define SharedLibXtst HasSharedLibraries
#endif
#ifndef NormalLibXtst
#define NormalLibXtst (!SharedLibXtst | ForceNormalLib)
#endif
#ifndef DebugLibXtst
#define DebugLibXtst		NO	/* debugged Xtst library */
#endif
#ifndef ProfileLibXtst
#define ProfileLibXtst		NO	/* profiled Xtst library */
#endif
      XTESTLIBSRC = $(LIBSRC)/Xtst
#if SharedLibXtst
#ifndef SharedXtstRev
#define SharedXtstRev 6.1
#endif
SharedLibReferences(XTEST,Xtst,$(XTESTLIBSRC),SOXTESTREV,SharedXtstRev)
#else
ProjectUnsharedLibReferences(XTEST,Xtst,$(XTESTLIBSRC),XBuildLibDir)
#endif

ProjectUnsharedLibReferences(XBSD,Xbsd,$(LIBSRC)/Xbsd,XBuildLibDir)

#ifndef SharedLibICE
#define SharedLibICE HasSharedLibraries
#endif
#ifndef NormalLibICE
#define NormalLibICE (!SharedLibICE | ForceNormalLib)
#endif
#ifndef DebugLibICE
#define DebugLibICE		NO	/* debugged ICE library */
#endif
#ifndef ProfileLibICE
#define ProfileLibICE		NO	/* profiled ICE library */
#endif
           ICESRC = $(LIBSRC)/ICE
#if SharedLibICE
#ifndef SharedICERev
#define SharedICERev 6.3
#endif
SharedLibReferences(ICE,ICE,$(ICESRC),SOICEREV,SharedICERev)
#else
ProjectUnsharedLibReferences(ICE,ICE,$(ICESRC),XBuildLibDir)
#endif

#ifndef SharedLibSM
#define SharedLibSM HasSharedLibraries
#endif
#ifndef NormalLibSM
#define NormalLibSM (!SharedLibSM | ForceNormalLib)
#endif
#ifndef DebugLibSM
#define DebugLibSM		NO	/* debugged SM library */
#endif
#ifndef ProfileLibSM
#define ProfileLibSM		NO	/* profiled SM library */
#endif
            SMSRC = $(LIBSRC)/SM
#if SharedLibSM
#ifndef SharedSMRev
#define SharedSMRev 6.0
#endif
SharedLibReferences(SM,SM,$(SMSRC),SOSMREV,SharedSMRev)
#else
ProjectUnsharedLibReferences(SM,SM,$(SMSRC),XBuildLibDir)
#endif

#ifndef SharedLibXkey
#define SharedLibXkey HasSharedLibraries
#endif
#ifndef NormalLibXkey
#define NormalLibXkey (!SharedLibXkey | ForceNormalLib)
#endif
#ifndef DebugLibXkey
#define DebugLibXkey		NO	/* debugged Xkey library */
#endif
#ifndef ProfileLibXkey
#define ProfileLibXkey		NO	/* profiled Xkey library */
#endif
           XKEYSRC = $(LIBSRC)/Xkey
#if SharedLibXkey
#ifndef SharedXkeyRev
#define SharedXkeyRev 6.0
#endif
SharedLibReferences(XKEY,Xkey,$(XKEYSRC),SOXKEYREV,SharedXkeyRev)
#else
ProjectUnsharedLibReferences(XKEY,Xkey,$(XKEYSRC),XBuildLibDir)
#endif

#ifndef SharedLibFS
#define SharedLibFS		HasSharedLibraries
#endif
#ifndef NormalLibFS
#define NormalLibFS (!SharedLibFS | ForceNormalLib)
#endif
#ifndef DebugLibFS
#define DebugLibFS		NO	/* debugged FS library */
#endif
#ifndef ProfileLibFS
#define ProfileLibFS		NO	/* profiled FS library */
#endif
         FSLIBSRC = $(LIBSRC)/FS
#if SharedLibFS
#ifndef SharedFSRev
#define SharedFSRev 6.0
#endif
SharedLibReferences(FS,FS,$(FSLIBSRC),SOFSREV,SharedFSRev)
#else
ProjectUnsharedLibReferences(FS,FS,$(FSLIBSRC),XBuildLibDir)
#endif

#ifndef SharedLibFont
#define SharedLibFont HasSharedLibraries
#endif
#ifndef NormalLibFont
#define NormalLibFont (!SharedLibFont | ForceNormalLib | XserverStaticFontLib)
#endif
#ifndef DebugLibFont
#define DebugLibFont		NO	/* debugged Font library */
#endif
#ifndef ProfileLibFont
#define ProfileLibFont		NO	/* profiled Font library */
#endif
         FONTLIBSRC = $(LIBSRC)/font
#if SharedLibFont
#ifndef SharedFontRev
#define SharedFontRev 1.5
#endif
SharedFontLibReferences()
XCOMM SharedLibReferences(XFONT,Xfont,$(FONTLIBSRC),SOFONTREV,SharedFontRev)
#else
ProjectUnsharedFontLibReferences()
XCOMM ProjectUnsharedLibReferences(XFONT,Xfont,$(FONTLIBSRC),XBuildLibDir)
#endif

     FONTSTUBLIBSRC = $(FONTLIBSRC)/stubs
ProjectUnsharedLibReferences(FONTSTUB,fntstubs,$(FONTSUBLIBSRC),XBuildLibDir)
         DEPFONTLIB = $(DEPXFONTLIB) $(DEPFONTSTUBLIB)
            FONTLIB = $(XFONTLIB) $(FONTSTUBLIB) $(FREETYPE2LIB)


#ifndef SharedLibFontEnc
#define SharedLibFontEnc	HasSharedLibraries
#endif
#ifndef NormalLibFontEnc
#define NormalLibFontEnc (!SharedLibFontEnc | ForceNormalLib)
#endif
#ifndef DebugLibFontEnc
#define DebugLibFontEnc		NO	/* debugged fontenc library */
#endif
#ifndef ProfileLibFontEnc
#define ProfileLibFontEnc	NO	/* profiled fontenc library */
#endif
         FONTENCLIBSRC = $(LIBSRC)/fontenc
#if SharedLibFontEnc
#ifndef SharedFontEncRev
#define SharedFontEncRev 1.0
#endif
SharedLibReferences(XFONTENC,fontenc,$(FONTENCLIBSRC),SOFONTENCREV,SharedFontEncRev)
#else
ProjectUnsharedLibReferences(XFONTENC,fontenc,$(FONTENCLIBSRC),XBuildLibDir)
#endif

#ifndef SharedLibXpm
#define SharedLibXpm HasSharedLibraries
#endif
#ifndef NormalLibXpm
#define NormalLibXpm (!SharedLibXpm | ForceNormalLib)
#endif
#ifndef DebugLibXpm
#define DebugLibXpm		NO
#endif
#ifndef ProfileLibXpm
#define ProfileLibXpm		NO
#endif
          XPMLIBSRC = $(LIBSRC)/Xpm
#if SharedLibXpm
#ifndef SharedXpmRev
#define SharedXpmRev 4.11
#endif
SharedLibReferences(XPM,Xpm,$(XPMLIBSRC),SOXPMREV,SharedXpmRev)
#else
ProjectUnsharedLibReferences(XPM,Xpm,$(XPMLIBSRC),XBuildLibDir)
#endif

#if UseFreetype2

#if BuildFreetype2Library

#ifndef SharedLibFreetype2
#define SharedLibFreetype2 HasSharedLibraries
#endif
#ifndef NormalLibFreetype2
#define NormalLibFreetype2 (!SharedLibFreetype2 | ForceNormalLib)
#endif
#ifndef DebugLibFreetype2
#define DebugLibFreetype2		NO
#endif
#ifndef ProfileLibFreetype2
#define ProfileLibFreetype2		NO
#endif
          FREETYPE2LIBSRC = $(LIBSRC)/freetype2

/*
 * FreeType 2.1.4
 *
 * Get the library version information from version_info in
 * in xc/extras/freetype2/builds/unix/configure.ac.
 *
 * current:revision:age = 9:3:3
 *
 * The LibtoolMinorVersions revision is "(current - age).age".
 * The !LibtoolMinorVersions revision is "current.0".
 * Freetype2Version should be set to "current.revision.age"
 */
#ifndef Freetype2Version
#define Freetype2Version 9.3.3
#endif

#if SharedLibFreetype2
#ifndef SharedLibtoolFreetype2Rev
#define SharedLibtoolFreetype2Rev	9:3:3
#endif
#ifndef SharedFreetype2Rev
#if LibtoolMinorVersions
#define SharedFreetype2Rev 6.3
#else
/* was 9.0, but libz dependency has grow it by one */
#define SharedFreetype2Rev 10.0
#endif
#endif
SharedLibTwoReferences(FREETYPE2,freetype,$(FREETYPE2LIBSRC),SOFREETYPE2REV,SharedFreetype2Rev,-lz)
#else
ProjectUnsharedLibReferences(FREETYPE2,freetype,$(FREETYPE2LIBSRC),XBuildLibDir)
#endif

#ifdef UseInstalled
FREETYPE2INCDIR=$(INCDIR)
#else
FREETYPE2INCDIR=$(BUILDINCDIR)
#endif

#else /* BuildFreetype2Library */

#if HasFreetype2

#ifndef Freetype2Dir
#define Freetype2Dir /usr
#ifndef Freetype2DirStandard
# define Freetype2DirStandard YES
#endif
#endif
#ifndef Freetype2DirStandard
#define Freetype2DirStandard NO
#endif

#ifndef Freetype2LibDir
#define Freetype2LibDir Freetype2Dir/LibDirName
# if Freetype2DirStandard
#  define Freetype2LibDirStandard YES
# endif
#endif
#ifndef Freetype2LibDirStandard
# define Freetype2LibDirStandard NO
#endif

#ifndef Freetype2IncDir
#define Freetype2IncDir Freetype2Dir/include
# if Freetype2DirStandard
#  define Freetype2IncDirStandard YES
# endif
#endif

FREETYPE2DIR = Freetype2Dir
FREETYPE2LIBDIR = Freetype2LibDir
FREETYPE2INCDIR = Freetype2IncDir
#if Freetype2LibDirStandard
FREETYPE2LIB = -lfreetype
#else
FREETYPE2LIB = -L$(FREETYPE2LIBDIR) -lfreetype
#endif

#endif /* HasFreetype2 */

#endif /* else BuildFreetype2Library */

#ifndef Freetype2IncDirStandard
# define Freetype2IncDirStandard NO
#endif

#if BuildFreetype2Library || HasFreetype2
#if Freetype2IncDirStandard
FREETYPE2INCLUDES = -I$(FREETYPE2INCDIR)/freetype2
#else
FREETYPE2INCLUDES = -I$(FREETYPE2INCDIR) -I$(FREETYPE2INCDIR)/freetype2
#endif
FREETYPE2DEFINES = -DFREETYPE2
#endif

#endif /* UseFreetype2 */

#ifndef SharedLibExpat
#define SharedLibExpat HasSharedLibraries
#endif
#ifndef NormalLibExpat
#define NormalLibExpat (!SharedLibExpat | ForceNormalLib)
#endif
#ifndef DebugLibExpat
#define DebugLibExpat		NO
#endif
#ifndef ProfileLibExpat
#define ProfileLibExpat		NO
#endif
          EXPATLIBSRC = $(LIBSRC)/expat

/*
 * Expat 1.95.6.
 *
 * Get the library version information from LIBCURRENT, LIBREVISION and LIBAGE
 * in xc/extras/expat/configure.
 *
 * LIBCURRENT:LIBREVISION:LIBAGE = 4:0:4
 *
 * The LibtoolMinorVersions revision is "(LIBCURRENT - LIBAGE).LIBAGE".
 * The !LibtoolMinorVersions revision is "LIBCURRENT.0".
 */
#ifndef ExpatVersion
#define ExpatVersion 1.95.6
#endif

#if SharedLibExpat
#ifndef SharedLibtoolExpatRev
#define SharedLibtoolExpatRev	4:0:4
#endif
#ifndef SharedExpatRev
#if LibtoolMinorVersions
#define SharedExpatRev 0.4
#else
#define SharedExpatRev 4.0
#endif
#endif
SharedLibReferences(EXPAT,expat,$(EXPATLIBSRC),SOEXPATREV,SharedExpatRev)
#else
ProjectUnsharedLibReferences(EXPAT,expat,$(EXPATLIBSRC),XBuildLibDir)
#endif

#if UseExpat

#if BuildExpatLibrary
EXPATINCLUDES=$(TOP_X_INCLUDES)
EXPATDEFINES=-DEXPAT
#else	/* BuildExpatLibrary */

#if HasExpat

#ifndef ExpatDir
#define ExpatDir /usr
#define ExpatDirStandard YES
#endif
#ifndef ExpatDirStandard
#define ExpatDirStandard NO
#endif

#ifndef ExpatLibDir
#define ExpatLibDir ExpatDir/LibDirName
# if ExpatDirStandard
#  define ExpatLibDirStandard YES
# endif
#endif
#ifndef ExpatLibDirStandard
#define ExpatLibDirStandard NO
#endif

#ifndef ExpatIncDir
#define ExpatIncDir ExpatDir/include
# if ExpatDirStandard
#  define ExpatIncDirStandard YES
# endif
#endif
#ifndef ExpatIncDirStandard
#define ExpatIncDirStandard NO
#endif

EXPATDIR = ExpatDir
EXPATLIBDIR = ExpatLibDir
EXPATINCDIR = ExpatIncDir
#if ExpatIncDirStandard
EXPATINCLUDES =
#else
EXPATINCLUDES = -I$(EXPATINCDIR)
#endif
#if ExpatLibDirStandard
EXPATLIB = -lexpat
#else
EXPATLIB = -L$(EXPATLIBDIR) -lexpat
#endif
EXPATDEFINES = -DEXPAT
#endif /* HasExpat */

#endif /* else BuildExpatLibrary */

#define ExpatClientLibs $(EXPATLIB)
#define ExpatClientDepLibs $(DEPEXPATLIB)

#endif /* UseExpat */

#ifndef SharedLibXft1
#define SharedLibXft1 HasSharedLibraries
#endif
#ifndef NormalLibXft1
#define NormalLibXft1		NO
#endif
#ifndef DebugLibXft1
#define DebugLibXft1		NO
#endif
#ifndef ProfileLibXft1
#define ProfileLibXft1		NO
#endif
          XFT1LIBSRC = $(LIBSRC)/Xft1
#if SharedLibXft1
#ifndef SharedXft1Rev
#define SharedXft1Rev 1.1
#endif
SharedLibReferences(XFT1,Xft,$(XFT1LIBSRC),SOXFT1REV,SharedXft1Rev)
#else
ProjectUnsharedLibReferences(XFT1,Xft,$(XFT1LIBSRC),XBuildLibDir)
#endif

#ifndef Xft1ClientDepLibs
#if UseFreetype2
#define Xft1ClientDepLibs $(DEPXFT1LIB) $(DEPFREETYPE2LIB) $(DEPXRENDERLIB)
#else
#define Xft1ClientDepLibs $(DEPXFT1LIB) $(DEPXRENDERLIB)
#endif
#endif
#ifndef Xft1ClientLibs
#if UseFreetype2
#define Xft1ClientLibs $(XFT1LIB) $(FREETYPE2LIB) $(XRENDERLIB)
#else
#define Xft1ClientLibs $(XFT1LIB) $(XRENDERLIB)
#endif
#endif

#ifndef SharedLibXft
#define SharedLibXft HasSharedLibraries
#endif
#ifndef NormalLibXft
#define NormalLibXft (!SharedLibXft | ForceNormalLib)
#endif
#ifndef DebugLibXft
#define DebugLibXft		NO
#endif
#ifndef ProfileLibXft
#define ProfileLibXft		NO
#endif
          XFTLIBSRC = $(LIBSRC)/Xft
#if SharedLibXft
#ifndef SharedXftRev
#define SharedXftRev 2.1
#endif
SharedLibReferences(XFT,Xft,$(XFTLIBSRC),SOXFTREV,SharedXftRev)
#else
ProjectUnsharedLibReferences(XFT,Xft,$(XFTLIBSRC),XBuildLibDir)
#endif

#ifndef XftClientDepLibs
#define XftClientDepLibs $(DEPXFTLIB) FontconfigClientDepLibs $(DEPXRENDERLIB)
#endif
#ifndef XftClientLibs
#define XftClientLibs $(XFTLIB) FontconfigClientLibs $(XRENDERLIB)
#endif

#if UseFontconfig

#if BuildFontconfigLibrary

#ifndef SharedLibFontconfig
#define SharedLibFontconfig HasSharedLibraries
#endif
#ifndef NormalLibFontconfig
#define NormalLibFontconfig (!SharedLibFontconfig | ForceNormalLib)
#endif
#ifndef DebugLibFontconfig
#define DebugLibFontconfig		NO
#endif
#ifndef ProfileLibFontconfig
#define ProfileLibFontconfig		NO
#endif
          FONTCONFIGLIBSRC = $(LIBSRC)/fontconfig
#if SharedLibFontconfig
#ifndef SharedFontconfigRev
#define SharedFontconfigRev 1.4
#endif
SharedLibReferences(FONTCONFIG,fontconfig,$(FONTCONFIGLIBSRC),SOFONTCONFIGREV,SharedFontconfigRev)
#else
ProjectUnsharedLibReferences(FONTCONFIG,fontconfig,$(FONTCONFIGLIBSRC),XBuildLibDir)
#endif

#ifdef UseInstalled
FONTCONFIGINCDIR=$(INCDIR)
#else
FONTCONFIGINCDIR=$(BUILDINCDIR)
#endif

FONTCONFIGINCLUDES = -I$(FONTCONFIGINCDIR)

#if UseInstalledX11
FCCACHE = $(BINDIR)/fc-cache
#else
FCCACHE = set -x; $(CLIENTENVSETUP) $(PRELOADXFTSETUP) FONTCONFIG_PATH=$(FONTCONFIGLIBSRC) $(XBUILDBINDIR)/fc-cache
#endif

#else /* BuildFontconfigLibrary */

#if HasFontconfig

#ifndef FontconfigDir
# define FontconfigDir /usr
# ifndef FontconfigDirStandard
#  define FontconfigDirStandard YES
# endif
#endif

#ifndef FontconfigDirStandard
# define FontconfigDirStandard NO
#endif

#ifndef FontconfigLibDir
# define FontconfigLibDir FontconfigDir/LibDirName
# if FontconfigDirStandard
#  define FontconfigLibDirStandard YES
# endif
#endif
#ifndef FontconfigLibDirStandard
# define FontconfigLibDirStandard NO
#endif

#ifndef FontconfigBinDir
# define FontconfigBinDir FontconfigDir/bin
#endif

#ifndef FontconfigIncDir
# define FontconfigIncDir FontconfigDir/include
# if FontconfigDirStandard
#  define FontconfigIncDirStandard YES
# endif
#endif

#ifndef FontconfigIncDirStandard
# define FontconfigIncDirStandard NO
#endif

FONTCONFIGDIR = FontconfigDir
FONTCONFIGLIBDIR = FontconfigLibDir
FONTCONFIGINCDIR = FontconfigIncDir
FONTCONFIGBINDIR = FontconfigBinDir
#if FontconfigLibDirStandard
FONTCONFIGLIB = -lfontconfig
#else
FONTCONFIGLIB = -L$(FONTCONFIGLIBDIR) -lfontconfig
#endif

#if FontconfigIncDirStandard
FONTCONFIGINCLUDES =
#else
FONTCONFIGINCLUDES = -I$(FONTCONFIGINCDIR)
#endif

FCCACHE = $(FONTCONFIGBINDIR)/fc-cache

#endif /* HasFontconfig */

#endif /* else BuildFontconfigLibrary */

#if BuildFontconfigLibrary || HasFontconfig
FONTCONFIGDEFINES = -DFONTCONFIG
#endif

#ifndef FontconfigClientDepLibs
#define FontconfigClientDepLibs $(DEPFONTCONFIGLIB) $(DEPFREETYPE2LIB) ExpatClientDepLibs
#endif
#ifndef FontconfigClientLibs
#define FontconfigClientLibs $(FONTCONFIGLIB) $(FREETYPE2LIB) ExpatClientLibs
#endif

#endif /* UseFontconfig */

XFTINCLUDES=$(FONTCONFIGINCLUDES) $(FREETYPE2INCLUDES)

#ifdef HasLibpng

/*
 * Libpng controls:
 *
 *	LibpngDir		prefix for all libpng files
 *	LibpngDirStandard	Boolean - whether png headers/libs are
 *				in default compile/link paths
 *	LibpngLibDir		Directory holding png library
 *	LibpngLibDirStandard	Boolean - whether png libs are
 *				in default link path
 *	LibpngIncDir		Directory holding png includes
 *	LibpngIncDirStandard	Boolean - whether png includes are
 *				in default compile path
 *
 * Make sure that *Standard is set correctly, if not, the
 * standard compile/link paths will be added *before* the
 * local X directorys and installed versions of the standard
 * X headers will end up getting used.
 */

#ifndef LibpngDir
#define LibpngDir /usr
#define LibpngDirStandard YES
#endif
#ifndef LibpngDirStandard
#define LibpngDirStandard NO
#endif

#ifndef LibpngLibDir
#define LibpngLibDir LibpngDir/LibDirName
#if LibpngDirStandard
#define LibpngLibDirStandard YES
#endif
#endif
#ifndef LibpngLibDirStandard
#define LibpngLibDirStandard NO
#endif

#ifndef LibpngIncDir
#define LibpngIncDir LibpngDir/include
#if LibpngDirStandard
#define LibpngIncDirStandard YES
#endif
#endif
#ifndef LibpngIncDirStandard
#define LibpngIncDirStandard NO
#endif

LIBPNGINCDIR = LibpngIncDir
#if LibpngIncDirStandard
LIBPNGINC=
#else
LIBPNGINC = -I$(LIBPNGINCDIR)
#endif
LIBPNGDIR = LibpngDir
LIBPNGLIBDIR = LibpngLibDir
LIBPNGINCDIR = LibpngIncDir
#if LibpngLibDirStandard
LIBPNGLIB = -lpng
#else
LIBPNGLIB = -L$(LIBPNGLIBDIR) -lpng
#endif

#endif

#ifndef XmuuClientDepLibs
#define XmuuClientDepLibs $(DEPXMUULIB) $(DEPXLIB)
#endif
#ifndef XmuuClientLibs
#define XmuuClientLibs $(XMUULIB) $(XLIB)
#endif

#ifndef LdLibraryPath
#define LdLibraryPath LD_LIBRARY_PATH
#endif

#if BuildXKBlib
# ifndef SharedLibxkbfile
#  define SharedLibxkbfile	HasSharedLibraries
# endif
# ifndef NormalLibxkbfile
#  define NormalLibxkbfile	(!SharedLibxkbfile | ForceNormalLib)
# endif
# ifndef DebugLibxkbfile
#  define DebugLibxkbfile	NO
# endif
# ifndef ProfileLibxkbfile
#  define ProfileLibxkbfile	NO
# endif
#else
# ifndef SharedLibxkbfile
#  define SharedLibxkbfile	NO
# endif
# ifndef NormalLibxkbfile
#  define NormalLibxkbfile	NO
# endif
# ifndef DebugLibxkbfile
#  define DebugLibxkbfile	NO
# endif
# ifndef ProfileLibxkbfile
#  define ProfileLibxkbfile	NO
# endif
#endif
    XKBFILELIBSRC = $(LIBSRC)/xkbfile
#if SharedLibxkbfile
# ifndef SharedxkbfileRev
#  define SharedxkbfileRev	1.0
# endif
SharedLibReferences(XKBFILE,xkbfile,$(XKBFILESRC),SOXKBFILEREV, SharedxkbfileRev)
#else
ProjectUnsharedLibReferences(XKBFILE,xkbfile,$(XKBFILELIBSRC),XBuildLibDir)
#endif

#if BuildXKBlib
# ifndef XkbClientDepLibs
#  if UseXKBInClients
#   define XkbClientDepLibs	$(DEPXKBFILELIB)
#  else
#   define XkbClientDepLibs	/**/
#  endif
# endif
# ifndef XkbClientLibs
#  if UseXKBInClients
#   define XkbClientLibs	$(XKBFILELIB)
#  else
#   define XkbClientLibs	/**/
#  endif
# endif

# if defined(UseInstalled) || (CrossCompiling &&  UseInstalledOnCrossCompile)
     XKBCOMPCMD = $(BINDIR)/XkbComp
# else
     XKBCOMPSRC = $(PROGRAMSRC)/XkbComp
#  if CrossCompiling
     XKBCOMPCMD = $(PROGRAMSRC)/XkbComp/cross/XkbComp
#  else
     XKBCOMPCMD = $(CLIENTENVSETUP) $(PRELOADSETUP) $(XBUILDBINDIR)/XkbComp
#  endif
# endif
#else /* !BuildXKBlib */
# ifndef XkbClientDepLibs
#  define XkbClientDepLibs
# endif
# ifndef XkbClientLibs
#  define XkbClientLibs
# endif
#endif /* BuildXKBlib */

#if BuildXKBlib
# ifndef SharedLibxkbui
#  define SharedLibxkbui	HasSharedLibraries
# endif
# ifndef NormalLibxkbui
#  define NormalLibxkbui	(!SharedLibxkbui || ForceNormalLib)
# endif
# ifndef DebugLibxkbui
#  define DebugLibxkbui		NO
# endif
# ifndef ProfileLibxkbui
#  define ProfileLibxkbui	NO
# endif
#else
# ifndef SharedLibxkbui
#  define SharedLibxkbui	NO
# endif
# ifndef NormalLibxkbui
#  define NormalLibxkbui	NO
# endif
# ifndef DebugLibxkbui
#  define DebugLibxkbui		NO
# endif
# ifndef ProfileLibxkbui
#  define ProfileLibxkbui	NO
# endif
#endif
    XKBUILIBSRC = $(LIBSRC)/xkbui
#if SharedLibxkbui
# ifndef SharedxkbuiRev
#  define SharedxkbuiRev	1.0
# endif
SharedLibReferences(XKBUI,xkbui,$(XKBUISRC),SOXKBUIREV, SharedxkbuiRev)
#else
ProjectUnsharedLibReferences(XKBUI,xkbui,$(XKBUILIBSRC),XBuildLibDir)
#endif

#ifndef XkbuiLibs
# define	XkbuiLibs $(XKBUILIB)
#endif
#ifndef XkbuiDepLibs
# define	XkbuiDepLibs $(DEPXKBFILELIB)
#endif

#ifndef XawClientDepLibs
#define XawClientDepLibs $(DEPXAWLIB) $(DEPXMULIB) $(DEPXTOOLLIB) $(DEPXPMLIB) $(DEPXLIB)
#endif
#ifndef XawClientLibs
#define XawClientLibs $(XAWLIB) $(XMULIB) $(XTOOLLIB) $(XPMLIB) $(XLIB)
#endif

#ifndef SharedLibXTrap
#define SharedLibXTrap HasSharedLibraries
#endif
#ifndef NormalLibXTrap
#define NormalLibXTrap (!SharedLibXTrap | ForceNormalLib)
#endif
#ifndef DebugLibXTrap
#define DebugLibXTrap		NO	/* debugged XTrap library */
#endif
#ifndef ProfileLibXTrap
#define ProfileLibXTrap		NO	/* profiled XTrap library */
#endif
        XTRAPLIBSRC = $(LIBSRC)/XTrap
#if SharedLibXTrap
#ifndef SharedXTrapRev
#define SharedXTrapRev 6.4
#endif
SharedLibReferences(XTRAP,XTrap,$(XTRAPLIBSRC),SOXTRAPREV,SharedXTrapRev)
#else
ProjectUnsharedLibReferences(XTRAP,XTrap,$(XTRAPLIBSRC),XBuildLibDir)
#endif

#ifndef NeedDefaultDepLibs
#define NeedDefaultDepLibs YES
#endif

#if NeedDefaultDepLibs
/*
 * Individual libraries should override this
 */
#if HasSharedLibraries || defined(UseInstalled)
          DEPLIBS = $(DEPXAWLIB) $(DEPXMULIB) $(DEPXTOOLLIB) $(DEPXLIB)
#else
          DEPLIBS = $(LOCAL_LIBRARIES)
#endif
         DEPLIBS1 = $(DEPLIBS)
         DEPLIBS2 = $(DEPLIBS)
         DEPLIBS3 = $(DEPLIBS)
         DEPLIBS4 = $(DEPLIBS)
         DEPLIBS5 = $(DEPLIBS)
         DEPLIBS6 = $(DEPLIBS)
         DEPLIBS7 = $(DEPLIBS)
         DEPLIBS8 = $(DEPLIBS)
         DEPLIBS9 = $(DEPLIBS)
         DEPLIBS10 = $(DEPLIBS)
#endif /* NeedDefaultDepLibs */


/*
 * InstallAppDefaults - simple rules to install application default file
 */
#ifndef InstallAppDefaults
#define InstallAppDefaults(class) InstallAppDefaultsLong(class,class)
#endif /* InstallAppDefaults */

/*
 * InstallAppDefaultsLong - general rule to install application default file
 * if the InstallAppDefFiles configuration parameter is set.
 */
#ifndef InstallAppDefaultsLong
#if UseConfDirForAppDefaults
#if InstallAppDefFiles
#define InstallAppDefaultsLong(file,class)				@@@@\
LinkConfDirectory(app-defaults,.,app-defaults,.)			@@@@\
InstallNamedTarget(install,file.ad,$(INSTAPPFLAGS),$(XAPPLOADDIR),class)
#else
#define InstallAppDefaultsLong(file,class)				@@@@\
LinkConfDirectory(app-defaults,.,app-defaults,.)			@@@@\
InstallNamedTargetNoClobber(install,file.ad,$(INSTAPPFLAGS),$(XAPPLOADDIR),class)
#endif /* InstallAppDefFiles */
#else /* UseConfDirForAppDefaults */
#if InstallAppDefFiles
#define InstallAppDefaultsLong(file,class)				@@@@\
InstallNamedTarget(install,file.ad,$(INSTAPPFLAGS),$(XAPPLOADDIR),class)
#else
#define InstallAppDefaultsLong(file,class)				@@@@\
InstallNamedTargetNoClobber(install,file.ad,$(INSTAPPFLAGS),$(XAPPLOADDIR),class)
#endif /* InstallAppDefFiles */
#endif /* UseConfDirForAppDefaults */
#endif /* InstallAppDefaultsLong */

/*
 * MakeFcCache - generate rules to build fontconfig cache database
 */

#if defined UseFreetype2 && !CrossCompiling

# ifndef MakeFcCache
#  define MakeFcCache(deplist)						@@@@\
all:: fonts.cache							@@@@\
									@@@@\
fonts.cache: deplist							@@@@\
	RunProgram(FCCACHE, $(FCCACHEOPTS) .)				@@@@\
									@@@@\
clean::									@@@@\
	RemoveFiles(fonts.cache*)
# endif /* MakeFcCache */

# ifndef InstallFcCache
#  define InstallFcCache(dest)						@@@@\
install::								@@@@\
	RunProgram(FCCACHE, $(FCCACHEOPTS) $(DESTDIR)dest)
# endif /* InstallFcCache */

#else

#ifndef MakeFcCache
#define MakeFcCache(deplist)
#endif

#ifndef InstallFcCache
#define InstallFcCache(dest)
#endif

#endif

/*
 * MakeFontsScale - generate rules to build fonts.scale database.
 */
#ifndef MakeFontsScale
# if !CrossCompiling ||  UseInstalledOnCrossCompile
#  define MakeFontsScale(deplist)					@@@@\
all:: fonts.scale							@@@@\
									@@@@\
fonts.scale:  deplist							@@@@\
	RemoveFile(fonts.scale)						@@@@\
	RunProgram(MKFONTSCALE, .)					@@@@\
									@@@@\
clean::									@@@@\
	RemoveFile(fonts.scale)
# else
#  define MakeFontsScale(deplist)					@@@@\
clean::									@@@@\
	RemoveFile(fonts.scale)
# endif
#endif /* MakeFontsScale */

/*
 * MakeFontsDir - generate rules to build fonts.dir database.
 */
#ifndef MakeFontsDir
# if !CrossCompiling ||  UseInstalledOnCrossCompile
#  define MakeFontsDir(deplist)						@@@@\
all:: fonts.dir								@@@@\
									@@@@\
fonts.dir:  deplist							@@@@\
	RemoveFile(fonts.dir)						@@@@\
	RunProgram(MKFONTDIR, $(MKFONTDIROPTS) .)			@@@@\
									@@@@\
clean::									@@@@\
	RemoveFile(fonts.dir)
# else
#  define MakeFontsDir(deplist)						@@@@\
clean::									@@@@\
	RemoveFile(fonts.dir)
# endif
#endif /* MakeFontsDir */


/*
 * MakeFonts - generate rules to build font database.
 */
#ifndef MakeFonts
# if !CrossCompiling || UseInstalledOnCrossCompile
#  define MakeFonts()							@@@@\
all::  $(OBJS)								@@@@\
									@@@@\
MakeFontsDir($(OBJS))							@@@@\
									@@@@\
clean::									@@@@\
	RemoveFiles(*.pcf *.pcf.Z *.pcf.gz)
# else
#  define MakeFonts()							@@@@\
MakeFontsDir($(OBJS))							@@@@\
									@@@@\
clean::									@@@@\
	RemoveFiles(*.pcf *.pcf.Z *.pcf.gz)
# endif
#endif /* MakeFonts */

#ifndef InstallFontsDir
# if !CrossCompiling ||  UseInstalledOnCrossCompile
#  define InstallFontsDir(dest)						@@@@\
install::								@@@@\
	MakeDir($(DESTDIR)dest)						@@@@\
	@@if [ X$(STATIC_FONTS_SCALE) = X ]; then (set -x; \		@@@@\
	  RemoveFile($(DESTDIR)dest/fonts.scale); \			@@@@\
	  RunProgram(MKFONTSCALE, $(DESTDIR)dest)); \			@@@@\
	else (set -x; \							@@@@\
	  InstallInline(fonts.scale,$(INSTDATFLAGS),dest)); \		@@@@\
	fi								@@@@\
	RemoveFile($(DESTDIR)dest/fonts.dir)				@@@@\
	RunProgram(MKFONTDIR, $(MKFONTDIROPTS) $(DESTDIR)dest)
# else
#  define InstallFontsDir(dest)
# endif
#endif

/*
 * InstallFontObjs - generate rules to install font files
 */
#ifndef InstallFontObjs
# if !CrossCompiling || UseInstalledOnCrossCompile
#  define InstallFontObjs(objs,dest)					@@@@\
InstallMultipleFlags(objs,dest,$(INSTDATFLAGS))				@@@@\
									@@@@\
InstallFontsDir(dest)
# else
#  define InstallFontObjs(objs,dest)
# endif
#endif /* InstallFontObjs */


/*
 * InstallFonts - generate rules to install font files
 */
#ifndef InstallFonts
#define InstallFonts(dest)						@@@@\
InstallFontObjs($(OBJS),dest)
#endif /* InstallFonts */


/*
 * InstallFontAliases - generate rules to install font aliases databases.
 */
#ifndef InstallFontAliases
#define InstallFontAliases(dest)					@@@@\
InstallTarget(install,fonts.alias,$(INSTDATFLAGS),dest)
#endif /* InstallFontAliases */

#ifndef InstallNamedFontAliases
#define InstallNamedFontAliases(src,dest)				@@@@\
InstallNamedTarget(install,src,$(INSTDATFLAGS),dest,fonts.alias)
#endif /* InstallNamedFontAliases */

#ifndef FontSrc
#define FontSrc(basename) basename.bdf
#endif

#ifndef FontBaseObj
#define FontBaseObj(basename)basename.pcf
#endif

/*
 * InstallFontScale - generate rules to install font scale database.
 */
#ifndef InstallFontScale
#define InstallFontScale(dest)						@@@@\
InstallTarget(install,fonts.scale,$(INSTDATFLAGS),dest)
#endif /* InstallFontScale */

/*
 * UncompressedFontTargetLong
 */
#if ! CrossCompiling || UseInstalledOnCrossCompile
# ifndef UncompressedFontTargetLong
#  define UncompressedFontTargetLong(sname,tname)			@@@@\
FontBaseObj(tname):  FontSrc(sname)					@@@@\
	RunProgram(FONTC,$(FONTCFLAGS) $? -o $@@)
# endif /* UncompressedFontTargetLong */
#else
# ifndef UncompressedFontTargetLong
#  define UncompressedFontTargetLong(sname,tname)
# endif
#endif

/*
 * CompressedFontTarget
 */
#ifndef GzipFontCompression
#define GzipFontCompression NO
#endif

#if ! CrossCompiling || UseInstalledOnCrossCompile
# ifndef CompressedFontTargetLong
#  if GzipFontCompression
#   define CompressedFontTargetLong(sname,tname)			@@@@\
FontBaseObj(tname).gz:  FontSrc(sname)					@@@@\
	RunProgram(FONTC,$(FONTCFLAGS) $?) | $(GZIPCMD) > $@@
#  else
#   define CompressedFontTargetLong(sname,tname)			@@@@\
FontBaseObj(tname).Z:  FontSrc(sname)					@@@@\
	RunProgram(FONTC,$(FONTCFLAGS) $?) | $(COMPRESS) > $@@
#  endif
# endif /* CompressedFontTargetLong */
#else
#   define CompressedFontTargetLong(sname,tname)
#endif

/*
 * UncompressedFontTarget
 */
#ifndef UncompressedFontTarget
#define UncompressedFontTarget(basename) UncompressedFontTargetLong(basename,basename)
#endif /* UncompressedFontTarget */

#ifndef CompressedFontTarget
#define CompressedFontTarget(basename) CompressedFontTargetLong(basename,basename)
#endif /* CompressedFontTarget */

#if !defined(FontTarget) && !defined(FontObj)
#if CompressAllFonts
#define FontTargetLong(sname,tname) CompressedFontTargetLong(sname,tname)
#define FontTarget(basename) CompressedFontTarget(basename)
#if GzipFontCompression
#define FontObj(basename) FontBaseObj(basename).gz
#else
#define FontObj(basename) FontBaseObj(basename).Z
#endif
#else
#define FontTargetLong(sname,tname) UncompressedFontTargetLong(sname,tname)
#define FontTarget(basename) UncompressedFontTarget(basename)
#define FontObj(basename) FontBaseObj(basename)
#endif /* CompressAllFonts */
#endif


#ifndef EncObj
#define EncObj(basename) basename.enc
#endif
#ifndef EncObjComp
#if GzipFontCompression
#define EncObjComp(basename) basename.enc.gz
#else
#define EncObjComp(basename) basename.enc.Z
#endif
#endif

#ifndef EncodingTarget
#define EncodingTarget(basename) /**/
#endif

#ifndef CompEncodingTarget
#if GzipFontCompression
#define CompEncodingTarget(basename)					@@@@\
EncObjComp(basename): EncObj(basename)					@@@@\
	cat $? | $(GZIPCMD) > $@@
#else
#define CompEncodingTarget(basename)					@@@@\
EncObjComp(basename): EncObj(basename)					@@@@\
	cat $? | $(COMPRESS) > $@@
#endif
#endif

#ifndef MakeEncDir
# if !CrossCompiling || UseInstalledOnCrossCompile
#  define MakeEncDir(deplist,inst,dirlist )				@@@@\
AllTarget(encodings.dir)						@@@@\
									@@@@\
encodings.dir: deplist							@@@@\
	RemoveFiles(encodings.dir fonts.dir)				@@@@\
	@@(E=; for i in dirlist; do \					@@@@\
	   E="$$E -e $$i"; done; \					@@@@\
	 set -x; \							@@@@\
	 RunProgram(MKFONTDIR, -n -r -p inst/ $$E .))			@@@@\
									@@@@\
clean::									@@@@\
	RemoveFiles(fonts.dir encodings.dir)
# else
#  define MakeEncDir(deplist,inst,dirlist )				@@@@\
clean::									@@@@\
	RemoveFiles(fonts.dir encodings.dir)
# endif
#endif

#ifndef MakeEncodings
#define MakeEncodings(deplist,inst,dirlist)				@@@@\
									@@@@\
MakeEncDir(deplist $(OBJS),inst,dirlist)				@@@@\
									@@@@\
clean::									@@@@\
	RemoveFiles(*.enc.Z *.enc.gz)
#endif /* MakeEncodings */

#ifndef InstallEncObjs
# if !CrossCompiling || UseInstalledOnCrossCompile
#  define InstallEncObjs(objs,dest)					@@@@\
InstallMultipleFlags(objs,dest,$(INSTDATFLAGS))				@@@@\
									@@@@\
InstallTarget(install,encodings.dir,$(INSTDATFLAGS),dest)
# else
#  define InstallEncObjs(objs,dest)
# endif
#endif /* InstallEncObjs */

#ifndef InstallEncodings
#define InstallEncodings(dest)						@@@@\
InstallEncObjs($(OBJS),dest)
#endif /* InstallEncodings */

#ifndef InstallEncodingsDir
# if !CrossCompiling || UseInstalledOnCrossCompile
#  define InstallEncodingsDir(edir,fdir)				@@@@\
InstallNamedTarget(install,edir/encodings.dir,$(INSTDATFLAGS),fdir,encodings.dir)
# else
#  define InstallEncodingsDir(edir,fdir)
# endif
#endif


#ifndef MakeBdfFontFromUCSMaster
#define MakeBdfFontFromUCSMaster(font,enc)				@@@@\
font-enc.bdf: font.bdf $(UCS2ANY)					@@@@\
	RemoveFile($@@)							@@@@\
	$(UCS2ANY) font.bdf $(UCSMAPPREFIX)enc enc			@@@@\
									@@@@\
clean::									@@@@\
	RemoveFile(font-enc.bdf)
#endif

#ifndef MakeTruncatedUCSBdfFont
#if HasPerl5
#define MakeTruncatedUCSBdfFont(font,trunc,name)			@@@@\
name.bdf: font.bdf $(BDFTRUNCATE)					@@@@\
	RemoveFile($@@)							@@@@\
	RunPerlScript($(BDFTRUNCATE),trunc < font.bdf > name.bdf)	@@@@\
									@@@@\
clean::									@@@@\
	RemoveFile(name.bdf)
#endif
#endif


/*
 * MakeXkbDir
 */
#ifndef MakeXkbDir
# if !CrossCompiling || UseInstalledOnCrossCompile
#  define MakeXkbDir(basedir,subdir)					@@@@\
all::   Concat(subdir,.dir)						@@@@\
									@@@@\
Concat(subdir,.dir):							@@@@\
	RemoveFile(Concat(subdir,.dir))					@@@@\
	$(XKBCOMPCMD) -lfhlpR -o Concat(subdir,.dir) '*'		@@@@\
									@@@@\
InstallTarget(install,Concat(subdir,.dir),$(INSTDATFLAGS),basedir)	@@@@\
									@@@@\
clean::									@@@@\
	RemoveFile(Concat(subdir,.dir))
# else
#  define MakeXkbDir(basedir,subdir)					@@@@\
clean::									@@@@\
	RemoveFile(Concat(subdir,.dir))
# endif
#endif

/*
 * PostProcessTroffPS - by default moves the working output into place,
 * but can be a hook for more complicated post-processing.
 */
#ifndef PostProcessTroffPS
#define PostProcessTroffPS(temp,real) $(MV) temp real
#endif

/*
 * PostProcessTroffHTML - by default moves the working output into place,
 * but can be a hook for more complicated post-processing.
 */
#ifndef PostProcessTroffHTML
#define PostProcessTroffHTML(temp,real) $(MV) temp real
#endif

#ifdef HTMLroffCmd
#define HtmlTarget(file) file.html
#define HtmlClean(file) file.nhtml file.html file*.png
#else
#define HtmlTarget(file) /**/
#define HtmlClean(file) /**/
#endif

#ifdef PsToPdfCmd
#define PdfTarget(file) file.pdf
#define PdfClean(file) file.pdf
#else
#define PdfTarget(file) /**/
#define PdfClean(file) /**/
#endif

#ifndef ConvertPsToPdf
#ifdef PsToPdfCmd
#define ConvertPsToPdf(file)						@@@@\
file.pdf: file.ps							@@@@\
	RemoveFile(file.pdf)						@@@@\
	$(PSTOPDFCMD) < file.ps > file.pdf
#else
#define ConvertPsToPdf(file) /**/
#endif
#endif

#if HasPdfLatex
#define PdfLatexTarget(file) file.pdf
#define PdfLatexClean(file) file.pdf
#else
#define PdfLatexTarget(file) /**/
#define PdfLatexClean(file) /**/
#endif

#ifndef LatexToPdf
#if HasPdfLatex && defined(PdfLatexCmd)
#define LatexToPdf(file)						@@@@\
file.pdf: file.tex							@@@@\
	RemoveFile(file.pdf)						@@@@\
	$(PDFLATEXCMD) file.tex
#else
#define LatexToPdf(file) /**/
#endif
#endif


#ifndef MakeDepSimpleHtmlDoc
#ifdef HTMLroffCmd
#define MakeDepSimpleHtmlDoc(file,deps,srcs)				@@@@\
HtmlTarget(file): deps							@@@@\
	$(HTMLROFF) $(MSMACROS) $(XDOCMACROS) Concat(-P-I,file) srcs \		@@@@\
		2> index.raw > file.nhtml \				@@@@\
	  && PostProcessTroffHTML(file.nhtml,$@@)
#else
#define MakeDepSimpleHtmlDoc(file,deps,srcs) /**/
#endif
#endif

#ifndef MakeTblHtmlDoc
#ifdef HTMLroffCmd
#define MakeTblHtmlDoc(file,srcs)					@@@@\
file.html: srcs								@@@@\
	$(TBL) $(XDOCMACROS) srcs | $(HTMLROFF) $(MSMACROS) Concat(-P-I,file) \	@@@@\
		2> index.raw > file.nhtml \				@@@@\
	  && PostProcessTroffHTML(file.nhtml,$@@)
#else
#define MakeTblHtmlDoc(file,srcs) /**/
#endif
#endif

#ifndef MakeEqnHtmlDoc
#ifdef HTMLroffCmd
#define MakeEqnHtmlDoc(file,srcs)					@@@@\
file.html: srcs								@@@@\
	$(TBL) $(XDOCMACROS) srcs | $(EQN) | $(HTMLROFF) $(MSMACROS) Concat(-P-I,file) \ @@@@\
		2> index.raw > file.nhtml \				@@@@\
	  && PostProcessTroffHTML(file.nhtml,$@@)
#else
#define MakeEqnHtmlDoc(file,srcs) /**/
#endif
#endif


#ifndef MakeDepSimpleDoc
#define MakeDepSimpleDoc(file,deps,srcs)				@@@@\
all:: file.ps file.txt HtmlTarget(file) PdfTarget(file)			@@@@\
.PRECIOUS: file.ps							@@@@\
									@@@@\
file.ps: deps								@@@@\
	-$(TROFF) $(MSMACROS) $(XDOCMACROS) srcs \			@@@@\
		2> index.raw > file.nps \				@@@@\
	&& PostProcessTroffPS(file.nps,$@@)				@@@@\
	@@if grep '^[^1-9.]' index.raw | grep -v warning; then exit 1; \	@@@@\
		else test $$? -le 1; fi					@@@@\
									@@@@\
file.txt: deps								@@@@\
	$(NROFF) $(MSMACROS) $(XDOCMACROS) srcs 2> index.raw | \	@@@@\
		 $(COL) $(COLFLAGS) > $@@				@@@@\
									@@@@\
MakeDepSimpleHtmlDoc(file,deps,srcs)					@@@@\
									@@@@\
ConvertPsToPdf(file)							@@@@\
									@@@@\
clean::									@@@@\
	$(RM) index.raw file.nps file.ps file.txt HtmlClean(file) PdfClean(file)
#endif

#ifndef MakeSimpleDoc
#define MakeSimpleDoc(file,srcs) MakeDepSimpleDoc(file,srcs,srcs)
#endif

#ifndef MakeTblDoc
#define MakeTblDoc(file,srcs)						@@@@\
all:: file.ps file.txt HtmlTarget(file) PdfTarget(file)			@@@@\
.PRECIOUS: file.ps							@@@@\
									@@@@\
file.ps: srcs								@@@@\
	-$(TBL) $(XDOCMACROS) srcs | $(TROFF) $(MSMACROS) \		@@@@\
		2> index.raw > file.nps \				@@@@\
	&& PostProcessTroffPS(file.nps,$@@)				@@@@\
	@@if grep '^[^1-9.]' index.raw | grep -v warning; then exit 1; \	@@@@\
		else test $$? -le 1; fi					@@@@\
									@@@@\
file.txt: srcs								@@@@\
	$(TBL) $(XDOCMACROS) srcs | $(NROFF) $(MSMACROS) 2> index.raw \	@@@@\
		| $(COL) $(COLFLAGS) > $@@				@@@@\
									@@@@\
MakeTblHtmlDoc(file,srcs)						@@@@\
									@@@@\
ConvertPsToPdf(file)							@@@@\
									@@@@\
clean::									@@@@\
	$(RM) index.raw file.nps file.ps file.txt HtmlClean(file) PdfClean(file)
#endif

#ifndef MakeEqnDoc
#define MakeEqnDoc(file,srcs)						@@@@\
all:: file.ps file.txt HtmlTarget(file) PdfTarget(file)			@@@@\
.PRECIOUS: file.ps							@@@@\
									@@@@\
file.ps: srcs								@@@@\
	-$(TBL) $(XDOCMACROS) srcs | $(EQN) | $(TROFF) $(MSMACROS) \	@@@@\
		2> index.raw > file.nps \				@@@@\
	&& PostProcessTroffPS(file.nps,$@@)				@@@@\
	@@if grep '^[^1-9.]' index.raw | grep -v warning; then exit 1; \	@@@@\
		else test $$? -le 1; fi					@@@@\
									@@@@\
file.txt: srcs								@@@@\
	$(TBL) $(XDOCMACROS) srcs | $(NEQN) | $(NROFF) $(MSMACROS) \	@@@@\
		2> index.raw | $(COL) $(COLFLAGS) > $@@			@@@@\
									@@@@\
MakeEqnHtmlDoc(file,srcs)						@@@@\
									@@@@\
ConvertPsToPdf(file)							@@@@\
									@@@@\
clean::									@@@@\
	$(RM) index.raw file.nps file.ps file.txt HtmlClean(file) PdfClean(file)
#endif

#ifndef MakeDocIndex
#define MakeDocIndex(file,srcs)						@@@@\
all:: file.idx.ps							@@@@\
									@@@@\
file.idx.ps: srcs index.raw						@@@@\
	sed -n '$$p' index.raw > index.pageno				@@@@\
	grep '^[1-9]' index.raw | \					@@@@\
		(sort -f '-t:' -k2,2 -k1,1n 2>/dev/null || \		@@@@\
		 sort -f '-t:' +1 -3 +0n -1n) | \			@@@@\
		awk -f $(DOCUTILSRC)/fixindex.awk | \			@@@@\
		awk -f $(DOCUTILSRC)/block.awk > index.troff		@@@@\
	cat srcs $(XIDXMACROS) index.troff | \				@@@@\
		$(TROFF) -me > file.idx.nps && \			@@@@\
		$(MV) file.idx.nps $@@					@@@@\
	$(RM) index.troff index.pageno					@@@@\
									@@@@\
clean::									@@@@\
	$(RM) index.troff index.pageno file.idx.nps file.idx.ps
#endif

#ifndef MakeLatexDoc
#if HasLatex
#define MakeLatexDoc(file,src)						@@@@\
all:: file.ps PdfLatexTarget(file)					@@@@\
									@@@@\
file.dvi: src								@@@@\
	$(LATEX) src							@@@@\
									@@@@\
file.ps: file.dvi							@@@@\
	$(DVIPS) -o file.nps file && $(MV) file.nps $@@			@@@@\
									@@@@\
LatexToPdf(file)							@@@@\
									@@@@\
clean::									@@@@\
	RemoveFiles(file.nps file.ps file.dvi file.log)			@@@@\
	RemoveFiles(file.aux file.toc file.lof file.lot)		@@@@\
	$(RM) PdfLatexClean(file)
#else /* HasLatex */
#define MakeLatexDoc(file,src)						@@@@\
all::									@@@@\
file.ps: src								@@@@\
	@@echo "cannot make file.ps: no latex on this system"; exit 1
#endif /* HasLatex (else) */
#endif /* MakeLatexDoc */

#ifndef InstallDoc
#define InstallDoc(name,deps)						@@@@\
install:: deps								@@@@\
	MakeDir($(DESTDIR)$(DOCPSDIR))					@@@@\
	@@if [ -f name.ps -a X$(NOPS) = X ]; then set -x; \		@@@@\
	  $(INSTALL) $(INSTALLFLAGS) $(INSTDATFLAGS) name.ps \		@@@@\
		$(DESTDIR)$(DOCPSDIR); \				@@@@\
	fi								@@@@\
	RemoveOldFile(name.ps,name.PS,$(DOCPSDIR))			@@@@\
	MakeDir($(DESTDIR)$(DOCDIR))					@@@@\
	@@if [ -f name.txt -a X$(NOTXT) = X ]; then set -x; \		@@@@\
	  $(INSTALL) $(INSTALLFLAGS) $(INSTDATFLAGS) name.txt \		@@@@\
		$(DESTDIR)$(DOCDIR); \					@@@@\
	fi								@@@@\
	RemoveOldFile(name.txt,name.TXT,$(DOCDIR))			@@@@\
	MakeDir($(DESTDIR)$(DOCHTMLDIR))				@@@@\
	@@if [ -f name.html -a X$(NOHTML) = X ]; then (set -x; \		@@@@\
	  $(INSTALL) $(INSTALLFLAGS) $(INSTDATFLAGS) name.html \	@@@@\
		$(DESTDIR)$(DOCHTMLDIR)); \				@@@@\
	  for i in name*.png; do \					@@@@\
	    if [ -f $$i ]; then (set -x; \				@@@@\
	      $(INSTALL) $(INSTALLFLAGS) $(INSTDATFLAGS) $$i \		@@@@\
		$(DESTDIR)$(DOCHTMLDIR)); \				@@@@\
	    fi; \							@@@@\
	  done; \							@@@@\
	fi								@@@@\
	MakeDir($(DESTDIR)$(DOCPDFDIR))					@@@@\
	@@if [ -f name.pdf -a X$(NOPDF) = X ]; then set -x; \		@@@@\
	  $(INSTALL) $(INSTALLFLAGS) $(INSTDATFLAGS) name.pdf \		@@@@\
		$(DESTDIR)$(DOCPDFDIR); \				@@@@\
	fi
#endif

#ifndef InstallRoffDoc
#define InstallRoffDoc(name) InstallDoc(name,name.ps name.txt)
#endif

#ifndef InstallLatexDoc
#if HasLatex
#define InstallLatexDoc(name) InstallDoc(name,name.ps)
#else
#define InstallLatexDoc(name)
#endif
#endif

#ifndef InstallHardcopyDoc
#define InstallHardcopyDoc(name,deps)					@@@@\
all:: name.ps PdfTarget(name)						@@@@\
									@@@@\
name.ps: deps								@@@@\
	@@if [ -f name.PS.gz ]; then set -x; \				@@@@\
	  RemoveFile(name.ps); \					@@@@\
	  gzip -d < name.PS.gz > name.ps; \				@@@@\
	fi								@@@@\
	@@if [ -f name.PS ]; then set -x; \				@@@@\
	  RemoveFile(name.ps); \					@@@@\
	  $(LN) name.PS name.ps; \					@@@@\
	fi								@@@@\
									@@@@\
ConvertPsToPdf(name)							@@@@\
									@@@@\
clean::									@@@@\
	$(RM) name.ps PdfClean(name)					@@@@\
									@@@@\
InstallDoc(name,deps)
#endif

/*
 * Rule for maintainers to use to updated generated copies of fonts in the
 * source tree.  Use with care.
 */

#ifndef UpdateDerivedFont
#define UpdateDerivedFont(src,dst)					@@@@\
update.fonts:: src							@@@@\
	-@@if [ -f dst ]; then \						@@@@\
	    if [ "$(FORCEUPDATE)" = yes ]; then \			@@@@\
		if [ "$(FOLLOWLINK)" = no ]; then \			@@@@\
			(set -x; $(RM) dst); \				@@@@\
		fi; \							@@@@\
		set -x; cp src dst; \					@@@@\
	    else \							@@@@\
		grep -v "XFree86:" src > __tmp1__; \			@@@@\
		grep -v "XFree86:" dst > __tmp2__; \			@@@@\
		if diff __tmp1__ __tmp2__ > /dev/null 2>&1; then :; \	@@@@\
		else \							@@@@\
			if [ "$(FOLLOWLINK)" = no ]; then \		@@@@\
				(set -x; $(RM) dst); \			@@@@\
			fi; \						@@@@\
			set -x; cp src dst; \					@@@@\
		fi; \							@@@@\
	    fi; \							@@@@\
	fi								@@@@\
	@@$(RM) __tmp1__ __tmp2__
#endif

#if !HasFreetype2
      FT2PRELOADPATTERN = libfreetype.so.?
#endif
#if !HasFontconfig
       FCPRELOADPATTERN = libfontconfig.so.?
#endif
      XFTPRELOADPATTERN = libXft.so.?
  XRENDERPRELOADPATTERN = libXrender.so.?
    XFONTPRELOADPATTERN = libXfont*.so.?

@


1.6
log
@merge
@
text
@d2426 4
@


1.5
log
@increase non-propolice major for libfreetype.so too
@
text
@d3261 1
a3261 1
#define SharedFontconfigRev 1.0
@


1.4
log
@libfreetype (ft2) depends on libz. why, now, do I have to invent
a new imake rule for that? damn imake.
(no i won't use freedesktop.org benz, you need not try)

also, why the heck didn't this thing use COPTS again?

and: since libfreetype changed, we got a different major now.
@
text
@d2997 2
a2998 1
#define SharedFreetype2Rev 9.0
@


1.3
log
@pretty much merge these two directories. i have read the diffs.
@
text
@d3000 1
a3000 1
SharedLibReferences(FREETYPE2,freetype,$(FREETYPE2LIBSRC),SOFREETYPE2REV,SharedFreetype2Rev)
@


1.2
log
@Merge OpenBSD-current XF4 changes again...
@
text
@d8 1
a8 1
XCOMM $XFree86: xc/config/cf/X11.tmpl,v 1.196 2003/02/25 21:57:52 dawes Exp $
d75 2
a76 2
#if CrossCompiling
# if defined UseInstalled && !defined UseInstalledOnCrossCompile
d78 2
a160 3
#ifndef UseKoi8RForCyrillic
#define UseKoi8RForCyrillic	YES
#endif
d169 1
a169 1
#define DerivedUCSFonts		HasPerl5
a313 9
#ifndef BuildPhigs
#define BuildPhigs		NO
#endif
#ifndef BuildPexExt
#define BuildPexExt		NO
#endif
#ifndef BuildPexLib
#define BuildPexLib		(BuildPexExt && !BuildServersOnly)
#endif
a372 14
#ifndef BuildXIE
	/*
	 * Turn off building XIE if you are building for low memory
	 * footprint
	 */
#if BuildLowMem
#define BuildXIE		NO
#else
#define BuildXIE		YES
#endif
#endif
#ifndef BuildXIElib
#define BuildXIElib		(BuildXIE && !BuildServersOnly)
#endif
a423 7
	/*
	 * Turn off building PEX if you are building for low memory
	 * footprint
	 */
#if BuildLowMem
#define BuildPexExt		NO
#endif
d471 1
a471 1
#define BuildXResExt            NO 
d504 1
a504 1
#define BuildOSMesaLib		(BuildGlxExt && defined(XFree86Version))
d553 2
a554 1
#define UseFreetype2		(BuildXftLibrary || BuildXft1Library || UseFontconfig)
d568 7
d577 1
a577 1
#define BuildRandR		BuildRender
d595 8
d696 1
a696 5
#if BuildCIDFonts
#define DefaultFontPath $(FONTDIR)/misc/,$(FONTDIR)/Speedo/,$(FONTDIR)/Type1/,$(FONTDIR)/CID/,$(FONTDIR)/75dpi/,$(FONTDIR)/100dpi/
#else
#define DefaultFontPath $(FONTDIR)/misc/,$(FONTDIR)/Speedo/,$(FONTDIR)/Type1/,$(FONTDIR)/75dpi/,$(FONTDIR)/100dpi/
#endif
d698 1
a698 5
#if BuildCIDFonts
#define DefaultFontPath $(FONTDIR)/misc/,$(FONTDIR)/Speedo/,$(FONTDIR)/Type1/,$(FONTDIR)/CID/,$(FONTDIR)/100dpi/,$(FONTDIR)/75dpi/
#else
#define DefaultFontPath $(FONTDIR)/misc/,$(FONTDIR)/Speedo/,$(FONTDIR)/Type1/,$(FONTDIR)/100dpi/,$(FONTDIR)/75dpi/
#endif
d741 32
d777 1
a777 5
#if HasDECnet
#define ConnectionFlags -DTCPCONN -DUNIXCONN -DDNETCONN
#else
#define ConnectionFlags -DTCPCONN -DUNIXCONN
#endif
d787 1
a787 1
#define ExtraConnectionDefs $(STICKY_DEFINES) $(FCHOWN_DEFINES)
a859 7
#ifndef PexDefines
#if BuildPexExt
#define PexDefines -DPEXEXT
#else
#define PexDefines /**/
#endif
#endif
a897 7
#ifndef XieDefines
#if BuildXIE
#define XieDefines -DXIE
#else
#define XieDefines /**/
#endif
#endif
d1116 1
a1116 1
	PexDefines ShmDefines XieDefines BigReqDefines VidModeExtensionDefines \
d1137 39
d1177 1
a1177 1
#define ServerXdmcpDefines -DXDMCP
d1202 3
a1204 15
#ifndef ServerDefines
#define ServerDefines StandardDefines PervasiveExtensionDefines ServerExtraDefines ServerAssertDefines
#endif
#ifndef PexDipexDefines
#define PexDipexDefines /**/
#endif
#ifndef PexDdpexDefines
#define PexDdpexDefines /**/
#endif
#ifndef PexPhigsDefines
#ifndef PexShmIPC
#define PexShmIPC HasShm
#endif
#if PexShmIPC
#define PexPhigsDefines /**/
d1206 1
a1206 1
#define PexPhigsDefines -DPEX_API_SOCKET_IPC
d1209 2
a1210 19
#ifndef PexClientDefines
#define PexClientDefines -DPEX_SI_PHIGS
#endif
#ifndef PhigsInclude
#ifdef UseInstalled
#define PhigsInclude -I$(INCDIR)/X11
#else
#define PhigsInclude -I$(BUILDINCDIR)
#endif
#endif
#ifndef PexCDebugFlags
#define PexCDebugFlags DebuggableCDebugFlags
#endif
#ifndef PexCCOptions
#ifdef LibraryCCOptions
#define PexCCOptions LibraryCCOptions
#else
#define PexCCOptions DefaultCCOptions
#endif
d1214 2
a1215 1
# if HasX86Support
d1266 1
a1266 1
#ifndef XTrueTypeCConvModule  
d1273 1
a1273 1
#ifndef XTrueTypeUseOptEncodings  
a1293 3
#ifndef XTTInLibXFont
#define XTTInLibXFont NO
#endif
d1368 3
d1390 3
a1425 3
#ifndef PexApiDir
#define PexApiDir $(LIBDIR)/PEX
#endif
d1505 1
a1505 1
#ifndef ResourceConfigurationManagement 
d1509 1
a1509 1
#ifndef XtPopdownConformance 
d1542 2
d1555 1
d1565 1
a1565 2
        PEXAPIDIR = PexApiDir		/* PEX support files */
      LBXPROXYDIR = LbxproxyDir	        /* lbxproxy files */
d1577 1
d1588 2
a1589 1
        MKFONTDIR = $(CLIENTENVSETUP) $(PRELOADFONTSETUP) $(XBUILDBINDIR)/mkfontdir
d1593 1
d1602 1
a1602 1
          UCS2ANY = $(FONTSRC)/util/ucs2any.pl
d1657 1
a1657 1
   CLIENTENVSETUP = BuildLibPathVar=BuildLibPath
d1659 1
a1659 1
   CLIENTENVSETUP = 
d1668 3
d1711 2
d1750 1
a1750 1
#define SharedLibXss	NO
d1753 1
a1753 1
#define NormalLibXss	YES
d1774 1
a1774 1
#define SharedLibXxf86misc	NO
d1777 1
a1777 1
#define NormalLibXxf86misc	YES
d1798 1
a1798 1
#define SharedLibXxf86vm	NO
d1801 1
a1801 1
#define NormalLibXxf86vm	YES
d1822 1
a1822 1
#define SharedLibXxf86dga	NO
d1825 1
a1825 1
#define NormalLibXxf86dga	YES
d1846 1
a1846 1
#define SharedLibXxf86rush	NO
d1849 1
a1849 1
#define NormalLibXxf86rush	YES
d1873 1
a1873 1
#define NormalLibXv		YES
d1894 1
a1894 1
#define SharedLibXvMC		NO
d1897 1
a1897 1
#define NormalLibXvMC		YES
d1918 1
a1918 1
#define SharedLibXinerama	NO
d1921 1
a1921 1
#define NormalLibXinerama	YES
d1942 1
a1942 1
#define SharedLibXRes           NO
d1945 1
a1945 1
#define NormalLibXRes           YES
d1969 1
a1969 1
#define NormalLibDps		YES
d1993 1
a1993 1
#define NormalLibDpsTk		YES
d2017 1
a2017 1
#define NormalLibPSRes		YES
d2041 1
a2041 1
#define NormalLibXrender	YES
d2065 1
a2065 1
#define NormalLibXrandr		YES
d2089 1
a2089 1
#define NormalLibXcursor	YES
d2108 48
d2226 2
a2227 1
 * Don't make a shared GLw library because is would depend on Motif.
d2231 1
a2231 1
#define SharedLibGLw		NO	/* HasSharedLibraries */
d2234 1
a2234 1
#define NormalLibGLw		YES	/* (!SharedLibGLw | ForceNormalLib) */
d2243 2
a2244 1
#define GLwUseXmStubs		NO	/* create stub (weak) Motif symbols */
d2247 8
a2254 8
#undef  SharedLibGlw
#define SharedLibGlw		NO
#undef  NormalLibGlw
#define NormalLibGlw		NO
#undef  DebugLibGlw
#define DebugLibGlw		NO
#undef  ProfileLibGlw
#define ProfileLibGlw		NO
d2296 1
a2296 1
#define SharedXxf86miscRev 1.0
d2427 1
a2427 1
#if BuildGLwLibrary && SharedLibGLw
d2466 20
d2487 1
a2487 1
#  define SharedLibXfontcache	NO
d2490 1
a2490 1
#  define NormalLibXfontcache	YES
d2510 1
a2510 1
#define SharedLibXau NO		/* don't need shared form */
d2536 1
a2536 1
#define SharedLibXdmcp NO	/* don't need shared form */
d2587 1
a2587 1
#define NormalLibXmuu 		(!SharedLibXmuu | ForceNormalLib)
a2790 60
#ifndef SharedLibPex
#define SharedLibPex HasSharedLibraries
#endif
#ifndef NormalLibPex
#define NormalLibPex (!SharedLibPex | ForceNormalLib)
#endif
#ifndef DebugLibPex
#define DebugLibPex		NO	/* debugged PEX5 library */
#endif
#ifndef ProfileLibPex
#define ProfileLibPex		NO	/* profiled PEX5 library */
#endif
        PEXLIBSRC = $(LIBSRC)/PEX5
#if SharedLibPex
#ifndef SharedPexRev
#define SharedPexRev 6.0
#endif
SharedLibReferences(PEX,PEX5,$(PEXLIBSRC),SOPEXREV,SharedPexRev)
#else
ProjectUnsharedLibReferences(PEX,PEX5,$(PEXLIBSRC),XBuildLibDir)
#endif

#ifndef SharedLibXie
#define SharedLibXie HasSharedLibraries
#endif
#ifndef NormalLibXie
#define NormalLibXie (!SharedLibXie | ForceNormalLib)
#endif
#ifndef DebugLibXie
#define DebugLibXie		NO	/* debugged XIE library */
#endif
#ifndef ProfileLibXie
#define ProfileLibXie		NO	/* profiled XIE library */
#endif
        XIELIBSRC = $(LIBSRC)/XIE
#if SharedLibXie
#ifndef SharedXieRev
#define SharedXieRev 6.0
#endif
SharedLibReferences(XIE,XIE,$(XIELIBSRC),SOXIEREV,SharedXieRev)
#else
ProjectUnsharedLibReferences(XIE,XIE,$(XIELIBSRC),XBuildLibDir)
#endif

#ifndef SharedLibPhigs
#define SharedLibPhigs NO	/* XXX - haven't made it sharable yet */
#endif
#ifndef NormalLibPhigs
#define NormalLibPhigs (!SharedLibPhigs | ForceNormalLib)
#endif
      PHIGSLIBSRC = $(LIBSRC)/PHIGS
#if SharedLibPhigs
#ifndef SharedPhigsRev
#define SharedPhigsRev 6.0
#endif
SharedLibReferences(PHIGS,phigs,$(PHIGSLIBSRC),SOPHIGSREV,SharedPhigsRev)
#else
ProjectUnsharedLibReferences(PHIGS,phigs,$(PHIGSLIBSRC),XBuildLibDir)
#endif

d2860 1
a2860 1
#define SharedLibFS		NO	/* for now */
d2896 1
a2896 1
#define SharedFontRev 1.4
a2904 16
/*
 * There's no reason to use the statically built FreeType unless
 * you're using a loadable server.
 */
 
#ifndef FontLibSharedFreeType
#if BuildFreeType && UseFreetype2 && !DoLoadableServer 
#define FontLibSharedFreeType YES
#else
#define FontLibSharedFreeType NO
#endif
#endif

#if FontLibSharedFreeType
         FONTFT2LIB = $(FREETYPE2LIB)
#endif
d2908 1
a2908 1
            FONTLIB = $(XFONTLIB) $(FONTSTUBLIB) $(FONTFT2LIB)
d2912 1
a2912 1
#define SharedLibFontEnc	NO
d2973 12
a2984 1
/* FreeType 2.0.9, version_info 9:0:3 */
d2986 1
a2986 1
#define Freetype2Version 9.0.3
d2990 3
d3006 1
a3006 1
FREETYPE2INCDIR=$(INCDIR)/freetype2
d3008 1
a3008 1
FREETYPE2INCDIR=$(BUILDINCDIR)/freetype2
d3036 4
a3039 1
#define Freetype2IncDir Freetype2Dir/include/freetype2
d3055 4
d3060 5
a3064 1
FREETYPE2INCLUDES = -I$(FREETYPE2INCDIR)
d3084 11
a3094 1
/* Expat 1.95.4 */
d3096 1
a3096 1
#define ExpatVersion 1.95.4
d3100 3
d3104 5
a3108 1
#define SharedExpatRev 3.0
d3179 1
a3179 1
#define NormalLibXft1 		NO
a3240 2
XFTINCLUDES=$(FONTCONFIGINCLUDES) $(FREETYPE2INCLUDES)

d3280 1
a3280 1
	  
d3356 2
d3436 12
a3447 5
    XKBFILELIBSRC = $(LIBSRC)/xkbfile
ProjectUnsharedLibReferences(XKBFILE,xkbfile,$(XKBFILELIBSRC),XBuildLibDir)
#ifndef XkbClientDepLibs
#if UseXKBInClients
#define XkbClientDepLibs $(DEPXKBFILELIB)
d3449 12
a3460 1
#define XkbClientDepLibs /**/
d3462 6
a3467 4
#endif
#ifndef XkbClientLibs
#if UseXKBInClients
#define XkbClientLibs $(XKBFILELIB)
d3469 1
a3469 1
#define XkbClientLibs /**/
d3471 18
a3488 2
#endif
#if defined(UseInstalled) || (CrossCompiling &&  UseInstalledOnCrossCompile)
d3490 1
a3490 1
#else
d3492 1
a3492 1
#if CrossCompiling
d3494 1
a3494 1
#else
d3496 2
a3497 2
#endif
#endif
d3499 6
a3504 6
#ifndef XkbClientDepLibs
#define XkbClientDepLibs
#endif
#ifndef XkbClientLibs
#define XkbClientLibs
#endif
d3507 27
d3535 6
d3542 2
d3545 1
a3545 1
#define	XkbuiLibs $(XKBUILIB)
d3548 1
a3548 1
#define	XkbuiDepLibs $(DEPXKBFILELIB)
d3675 21
d3704 1
d3738 17
d3764 1
a3764 1
InstallTarget(install,fonts.dir,$(INSTDATFLAGS),dest)
d3781 1
a3781 1
 * InstallFontAliases - generate rules to install font aliases databases. 
a3958 1
#if HasPerl5
a3959 2
includes:: font-enc.bdf							@@@@\
									@@@@\
d3962 1
a3962 1
	RunPerlScript($(UCS2ANY),font.bdf $(UCSMAPPREFIX)enc enc)	@@@@\
a3966 1
#endif
a3970 2
includes:: name.bdf							@@@@\
									@@@@\
d4012 92
d4106 2
a4107 2
all:: file.PS file.txt							@@@@\
.PRECIOUS: file.PS							@@@@\
d4109 6
a4114 4
file.PS: deps								@@@@\
	-$(TROFF) $(MSMACROS) $(XDOCMACROS) srcs 2> index.raw > file.nPS \@@@@\
	&& PostProcessTroffPS(file.nPS,$@@)				@@@@\
	@@if grep '^[^1-9.]' index.raw; then exit 1; else test $$? -le 1; fi @@@@\
d4117 6
a4122 1
	$(NROFF) $(MSMACROS) $(XDOCMACROS) srcs 2> index.raw | $(COL) $(COLFLAGS) > $@@ @@@@\
d4125 1
a4125 1
	$(RM) index.raw file.nPS file.PS file.txt
d4134 2
a4135 2
all:: file.PS file.txt							@@@@\
.PRECIOUS: file.PS							@@@@\
d4137 6
a4142 4
file.PS: srcs								@@@@\
	-$(TBL) $(XDOCMACROS) srcs | $(TROFF) $(MSMACROS) 2> index.raw > file.nPS \@@@@\
	&& PostProcessTroffPS(file.nPS,$@@)				@@@@\
	@@if grep '^[^1-9.]' index.raw; then exit 1; else test $$? -le 1; fi @@@@\
d4145 6
a4150 1
	$(TBL) $(XDOCMACROS) srcs | $(NROFF) $(MSMACROS) 2> index.raw | $(COL) $(COLFLAGS) > $@@	@@@@\
d4153 1
a4153 1
	$(RM) index.raw file.nPS file.PS file.txt
d4158 2
a4159 2
all:: file.PS file.txt							@@@@\
.PRECIOUS: file.PS							@@@@\
d4161 6
a4166 4
file.PS: srcs								@@@@\
	-$(TBL) $(XDOCMACROS) srcs | $(EQN) | $(TROFF) $(MSMACROS) 2> index.raw > file.nPS \@@@@\
	&& PostProcessTroffPS(file.nPS,$@@)				@@@@\
	@@if grep '^[^1-9.]' index.raw; then exit 1; else test $$? -le 1; fi @@@@\
d4169 6
a4174 1
	$(TBL) $(XDOCMACROS) srcs | $(NEQN) | $(NROFF) $(MSMACROS) 2> index.raw | $(COL) $(COLFLAGS) > $@@ @@@@\
d4177 1
a4177 1
	$(RM) index.raw file.nPS file.PS file.txt
d4182 1
a4182 1
all:: file.idx.PS							@@@@\
d4184 1
a4184 1
file.idx.PS: srcs index.raw						@@@@\
d4186 8
a4193 3
	grep '^[1-9]' index.raw | (sort -f '-t:' -k1,1n 2>/dev/null || sort -f '-t:' +1 -3 +0n -1n) | awk -f $(DOCUTILSRC)/fixindex.awk | awk -f $(DOCUTILSRC)/block.awk > index.troff @@@@\
	cat srcs $(XIDXMACROS) index.troff | $(TROFF) -me > file.idx.nPS \@@@@\
	&& $(MV) file.idx.nPS $@@					@@@@\
d4197 1
a4197 1
	$(RM) index.troff index.pageno file.idx.nPS file.idx.PS
d4202 2
a4203 2
#define MakeLatexDoc(file,src)	 					@@@@\
all:: file.PS								@@@@\
d4205 1
a4205 1
file.dvi: src	  							@@@@\
d4208 4
a4211 2
file.PS: file.dvi							@@@@\
	$(DVIPS) -o file.nPS file && $(MV) file.nPS $@@			@@@@\
d4213 4
a4216 3
clean:: 								@@@@\
	RemoveFiles(file.nPS file.PS file.dvi file.log)			@@@@\
	RemoveFiles(file.aux file.toc file.lof file.lot)
d4218 1
a4218 1
#define MakeLatexDoc(file,src)	 					@@@@\
d4220 2
a4221 2
file.PS: src								@@@@\
	@@echo "cannot make file.PS: no latex on this system"; exit 1
d4229 3
a4231 2
	@@if [ -f name.PS ]; then set -x; \				@@@@\
	  $(INSTALL) $(INSTALLFLAGS) $(INSTDATFLAGS) name.PS $(DESTDIR)$(DOCPSDIR); \ @@@@\
d4233 1
d4235 20
a4254 2
	@@if [ -f name.txt ]; then set -x; \				@@@@\
	  $(INSTALL) $(INSTALLFLAGS) $(INSTDATFLAGS) name.txt $(DESTDIR)$(DOCDIR)/name.TXT; \ @@@@\
d4259 1
a4259 1
#define InstallRoffDoc(name) InstallDoc(name,name.PS name.txt)
d4264 1
a4264 1
#define InstallLatexDoc(name) InstallDoc(name,name.PS)
d4272 3
a4274 1
all:: deps								@@@@\
d4276 2
a4277 2
	  RemoveFile(name.PS); \					@@@@\
	  gzip -d < name.PS.gz > name.PS; \				@@@@\
d4279 6
d4287 1
a4287 3
	@@if [ -f name.PS.gz ]; then set -x; \				@@@@\
	  RemoveFile(name.PS); \					@@@@\
	fi								@@@@\
a4291 1

d4320 10
@


1.1
log
@Initial revision
@
text
@d8 1
a8 1
XCOMM $XFree86: xc/config/cf/X11.tmpl,v 1.141.2.1 2002/09/04 02:38:08 dawes Exp $
d26 1
a26 1
 * MakeXftCache			(deplist)
d31 1
a31 1
 * InstallXftCache		(dest)
d75 6
d123 3
d150 5
a154 3
/* Not used now */
#ifndef BuildLatin2Fonts
#define BuildLatin2Fonts	NO
d216 6
d231 3
d249 3
d265 1
a265 1
#define BuildX11Lib		(BuildLibraries || (BuildLibrariesForXServers && XnestServer))
d267 1
d271 3
d283 3
d287 1
a287 1
#define BuildXextLib		(BuildLibraries || (BuildLibrariesForXServers && XnestServer))
d292 1
d296 1
d501 6
d534 3
d538 2
a539 1
#define BuildGLULibrary		(BuildGLXLibrary && HasCplusplus)
d542 1
a542 1
#define BuildGLwLibrary		(BuildGlxExt || BuildGLXLibrary)
d566 1
a566 1
#define BuildRender		NO
d574 9
d584 10
a593 1
#define UseFreetype2		BuildXftLibrary
d600 1
a600 1
#define BuildRandR		NO
d606 12
d690 3
d1027 8
d1128 2
a1129 1
	GlxDefines FontCacheExtensionDefines SiteExtensionDefines
d1212 8
d1236 3
a1238 3
#ifndef MesaUseKatmai
#ifdef HasKatmaiSupport
#define MesaUseKatmai HasKatmaiSupport
d1240 8
a1247 1
#define MesaUseKatmai NO
d1249 5
d1360 5
a1364 1
#define LibDir $(USRLIBDIR)/X11
a1573 1
         XFTCACHE = $(XBINDIR)/xftcache
d1575 4
a1578 3
          UCS2ANY = $(XBINDIR)/ucs2any.pl
      BDFTRUNCATE = $(XBINDIR)/bdftruncate.pl
     UCSMAPPREFIX = $(FONTDIR)/util/map-
d1581 1
d1584 7
a1590 2
         XFTCACHE = $(CLIENTENVSETUP) $(PRELOADSETUP) XFT_CONFIG=$(XFTLIBSRC)/XftConfig $(XBUILDBINDIR)/xftcache
#if HasPerl
d1592 1
a1592 1
#else
d1594 1
a1594 1
#endif
d1661 3
d1676 4
d1705 1
a1705 1
#define SharedLibXThrStub YES
d1708 1
a1708 1
#define NormalLibXThrStub NO
d1711 1
a1711 1
#define DebugLibXThrStub NO
d1714 1
a1714 1
#define ProfileLibXThrStub NO
d1725 9
d1749 9
d1773 9
d1797 9
d1821 9
d1845 9
d1858 1
a1858 1
#define SharedLibXv		NO
d1869 9
d1893 9
d1917 9
d1928 23
d1965 9
d1989 9
d2013 9
d2037 9
d2061 33
d2109 9
d2138 2
d2155 10
d2168 1
d2184 10
a2193 1
#endif /* BuildGLXLibrary */
d2304 11
d2365 1
a2365 1
#if SharedLibGLw
d2377 1
a2377 1
#define SharedXrenderRev 1.1
d2387 1
a2387 1
#define SharedXrandrRev 1.0
d2394 10
d2446 1
d2448 3
d2472 1
d2474 3
d2883 16
d2902 1
a2902 1
            FONTLIB = $(XFONTLIB) $(FONTSTUBLIB)
d2949 4
d2967 1
a2967 1
/* FreeType 2.0.6, version_info 8:0:2 */
d2969 1
a2969 1
#define Freetype2Version 8.0.2
d2975 1
a2975 1
#define SharedFreetype2Rev 6.2
d2977 1
a2977 1
#define SharedFreetype2Rev 8.0
d2985 5
a2989 1
#if UseFreetype2
d2991 1
a2991 4
#if BuildFreetype2Library
FREETYPE2INCLUDES=$(TOP_X_INCLUDES)/freetype2
FREETYPE2DEFINES=-DFREETYPE2
#else
d2997 6
d3006 7
a3012 1
#define Freetype2LibDir Freetype2Dir/lib
d3022 11
a3033 1
FREETYPE2LIB = -L$(FREETYPE2LIBDIR) -lfreetype
d3037 124
d3179 1
a3179 1
#define SharedXftRev 1.1
d3187 100
a3286 2
#if UseFreetype2
#define XftClientDepLibs $(DEPXFTLIB) $(DEPFREETYPE2LIB) $(DEPXRENDERLIB)
d3288 65
a3352 1
#define XftClientDepLibs $(DEPXFTLIB) $(DEPXRENDERLIB)
d3355 15
a3369 3
#ifndef XftClientLibs
#if UseFreetype2
#define XftClientLibs $(XFTLIB) $(FREETYPE2LIB) $(XRENDERLIB)
d3371 1
a3371 1
#define XftClientLibs $(XFTLIB) $(XRENDERLIB)
d3373 1
d3404 1
a3404 1
#if defined(UseInstalled) || defined(OS2Architecture)
d3521 1
a3521 1
 * MakeXftCache - generate rules to build XftCache database
d3524 1
a3524 1
#ifdef UseFreetype2
d3526 3
a3528 3
#ifndef MakeXftCache
#define MakeXftCache(deplist)						@@@@\
all:: XftCache								@@@@\
d3530 2
a3531 2
XftCache: deplist							@@@@\
	RunProgram(XFTCACHE, $(XFTCACHEOPTS) .)				@@@@\
d3534 2
a3535 2
	RemoveFile(XftCache)
#endif /* MakeXftCache */
d3537 5
a3541 4
#ifndef InstallXftCache
#define InstallXftCache(dest)						@@@@\
InstallTarget(install,XftCache,$(INSTDATFLAGS),dest)
#endif /* InstallXftCache */
d3545 2
a3546 2
#ifndef MakeXftCache
#define MakeXftCache(deplist)
d3549 2
a3550 2
#ifndef InstallXftCache
#define InstallXftCache(dest)
a3554 1

d3559 2
a3560 1
#define MakeFontsDir(deplist)						@@@@\
d3568 5
d3580 2
a3581 1
#define MakeFonts()							@@@@\
d3588 7
d3602 2
a3603 1
#define InstallFontObjs(objs,dest)					@@@@\
d3607 3
d3654 3
a3656 2
#ifndef UncompressedFontTargetLong
#define UncompressedFontTargetLong(sname,tname)				@@@@\
d3659 6
a3664 1
#endif /* UncompressedFontTargetLong */
d3673 4
a3676 3
#ifndef CompressedFontTargetLong
#if GzipFontCompression
#define CompressedFontTargetLong(sname,tname)				@@@@\
d3679 2
a3680 2
#else
#define CompressedFontTargetLong(sname,tname)				@@@@\
d3683 4
a3687 1
#endif /* CompressedFontTargetLong */
d3745 2
a3746 1
#define MakeEncDir(deplist,inst,dirlist )				@@@@\
d3758 5
d3775 2
a3776 1
#define InstallEncObjs(objs,dest)					@@@@\
d3780 3
d3791 2
a3792 1
#define InstallEncodingsDir(edir,fdir)					@@@@\
d3794 3
d3833 2
a3834 1
#define MakeXkbDir(basedir,subdir)					@@@@\
d3845 5
d3920 2
a3921 2
	tail -1 index.raw > index.pageno				@@@@\
	grep '^[1-9]' index.raw | sort -f '-t:' +1 -3 +0n -1n | awk -f $(DOCUTILSRC)/fixindex.awk | awk -f $(DOCUTILSRC)/block.awk > index.troff @@@@\
@


1.1.9.1
log
@OpenBSD just has imported exactly this tree into their vendor branch,
called the same tag, in XF4/xc
This is, apparently, the last XFree86 snapshot before the licence change
(ie, addition of the advertising clause)

Since the developers don't see any problems with that, and we would like
to integrate improvements done by the remaining one or two (or so) XFree86
developers (j/k), this prepares enabling us to update X-Window in the future.
@
text
@d8 1
a8 1
XCOMM $XFree86: xc/config/cf/X11.tmpl,v 1.247 2004/02/10 10:38:56 alanh Exp $
d26 1
a26 1
 * MakeFcCache			(deplist)
d31 1
a31 1
 * InstallFcCache		(dest)
a74 8
#if CrossCompiling && !defined(UseInstalledOnCrossCompile)
# if defined(UseInstalled)
#  define UseInstalledOnCrossCompile YES
# else
#  define UseInstalledOnCrossCompile NO
# endif
#endif

a116 3
#ifndef XTTInLibFont
#define XTTInLibFont		NO
#endif
d141 3
a143 5
#ifndef BuildBethMarduthoFonts
#define BuildBethMarduthoFonts	NO
#endif
#ifndef BuildEthiopicFonts
#define BuildEthiopicFonts	NO
d148 3
d159 1
a159 1
#define DerivedUCSFonts		YES
a204 6
#ifndef BuildThaiFonts
#define BuildThaiFonts		YES
#endif
#ifndef BuildISO8859_11Fonts
#define BuildISO8859_11Fonts	BuildThaiFonts
#endif
a213 3
#ifndef BuildISO8859_16Fonts
#define BuildISO8859_16Fonts	YES
#endif
a228 3
#ifndef MakeLocalFontDir
#define MakeLocalFontDir	YES
#endif
d242 1
a242 1
#define BuildX11Lib		BuildLibraries
a243 1

a246 3
#ifndef InstallXcmsTxt
#define InstallXcmsTxt		YES
#endif
a255 3
#ifndef BuildLoadableXlibXcursor
#define BuildLoadableXlibXcursor (HasDlopen && SharedLibX11)
#endif
d257 1
a257 1
#define BuildXextLib		BuildLibraries
a261 1
#define UseInstalledXauLib	(defined(UseInstalled) || !BuildXauLib)
a264 1
#define UseInstalledXdmcpLib	(defined(UseInstalled) || !BuildXdmcpLib)
d283 9
d351 14
d416 7
a468 6
#ifndef BuildXResExt
#define BuildXResExt            NO
#endif
#ifndef BuildXResLibrary
#define BuildXResLibrary        (BuildXResExt && !BuildServersOnly)
#endif
a495 3
#ifndef BuildOSMesaLib
#define BuildOSMesaLib		BuildGlxExt
#endif
d497 1
a497 2
#define BuildGLULibrary		(BuildGLXLibrary && BuildLibraries && \
				 HasCplusplus)
d500 1
a500 1
#define BuildGLwLibrary		(BuildGLXLibrary && BuildLibraries)
d524 1
a524 1
#define BuildRender		YES
a531 9
#ifndef BuildXft1Library
#define BuildXft1Library	BuildRenderLibrary
#endif
#ifndef UseFontconfig
#define UseFontconfig		BuildXftLibrary
#endif
#ifndef BuildFontconfigLibrary
#define BuildFontconfigLibrary	(UseFontconfig && !HasFontconfig)
#endif
d533 1
a533 11
#define UseFreetype2		(BuildXftLibrary || BuildXft1Library || \
				 UseFontconfig || BuildFreeType)
#endif
#ifndef HasExpat
#define HasExpat		NO
#endif
#ifndef UseExpat
#define UseExpat		(UseFontconfig)
#endif
#ifndef BuildExpatLibrary
#define BuildExpatLibrary	(UseExpat && !HasExpat)
a537 7
#ifndef Freetype2BuildDefines
#define Freetype2BuildDefines	/**/
#endif
/* For FreeType 1.x */
#ifndef Freetype1BuildDefines
#define Freetype1BuildDefines	Freetype2BuildDefines
#endif
d540 1
a540 1
#define BuildRandR		YES
a545 20
#ifndef BuildXcursorLibrary
#define BuildXcursorLibrary	BuildRenderLibrary
#endif

#ifndef BuildXcursorgen
#define BuildXcursorgen		HasLibpng
#endif

#ifndef DefaultCursorTheme
#define DefaultCursorTheme	core
#endif

#ifndef BuildAppleWMLibrary
#define BuildAppleWMLibrary	NO
#endif

#ifndef BuildWindowsWMLibrary
#define BuildWindowsWMLibrary	NO
#endif

a617 3
#ifndef NeedUIThrStubs
#define NeedUIThrStubs		NO
#endif
d636 5
a640 1
#define DefaultFontPath $(FONTDIR)/misc/,$(FONTDIR)/TTF/,$(FONTDIR)/Speedo/,$(FONTDIR)/Type1/,$(FONTDIR)/CID/,$(FONTDIR)/75dpi/,$(FONTDIR)/100dpi/
d642 5
a646 1
#define DefaultFontPath $(FONTDIR)/misc/,$(FONTDIR)/TTF/,$(FONTDIR)/Speedo/,$(FONTDIR)/Type1/,$(FONTDIR)/CID/,$(FONTDIR)/100dpi/,$(FONTDIR)/75dpi/
d689 3
a691 13
/*
 * NOTE:  IPv6Flags could be tacked on to either ConnectionFlags or
 *        ExtraConnectionDefs.  Here, we choose the later in order to
 *        maximise exposure of the IPv6 code (a number of <OS>.def files
 *        contain ConnectionFlags overrides).  Mind you, this might not
 *        the right thing to do when HasStreams is asserted.
 */
#ifndef BuildIPv6		/* If the OS also #define's AF_INET6 */
#define BuildIPv6		YES
#endif
#ifndef IPv6Flags
#if BuildIPv6
#define IPv6Flags -DIPv6
a692 12
#define IPv6Flags /**/
#endif
#endif
/*
 * Assume by default that IPv6 sockets also listen for IPv4 connections.
 * XDMCP support currently only works for both IPv4 and IPv6 when this is
 * true.
 */
#ifndef IPv6SocketsAlsoIPv4
#define IPv6SocketsAlsoIPv4	YES
#endif
#ifndef DECnetFlags
d694 1
a694 1
#define DECnetFlags -DDNETCONN
d696 1
a696 2
#define DECnetFlags
#endif
a697 5
#ifndef ConnectionFlags
#if HasStreams
#define ConnectionFlags -DSTREAMSCONN
#else
#define ConnectionFlags -DTCPCONN -DUNIXCONN DECnetFlags
d707 1
a707 1
#define ExtraConnectionDefs $(STICKY_DEFINES) $(FCHOWN_DEFINES) IPv6Flags
d780 7
d825 7
a951 8
#ifndef XResExtensionDefines
#if BuildXResExt
#define XResExtensionDefines -DRES
#else
#define XResExtensionDefines /**/
#endif
#endif

d1042 1
a1042 1
	ShmDefines BigReqDefines VidModeExtensionDefines \
d1045 1
a1045 2
	GlxDefines FontCacheExtensionDefines SiteExtensionDefines \
        XResExtensionDefines
a1061 39
#ifndef HasDevRandom
#define HasDevRandom NO
#endif

#ifndef HasArc4Random
#define HasArc4Random NO
#endif

#ifndef RandomDefines
# if HasDevRandom
#  ifndef RandomDeviceFile
#   define RandomDeviceFile /dev/random
#  endif
#  ifndef ExtraRandomDefines
#   ifdef PollDevRandom /* Set if can poll() /dev/random to avoid blocking */
#    define ExtraRandomDefines -DPOLL_DEV_RANDOM
#   else
#    define ExtraRandomDefines /**/
#   endif
#  endif
#  define RandomDefines -DDEV_RANDOM=\"RandomDeviceFile\" ExtraRandomDefines
# elif HasArc4Random
#  define RandomDefines -DARC4_RANDOM
# else
#  define RandomDefines /**/
# endif
#endif

#ifndef PreferXdmcpIPv6
#define PreferXdmcpIPv6 NO
#endif
#ifndef ServerXdmcpIPv6Defines
#if BuildIPv6 && !IPv6SocketsAlsoIPv4 && !PreferXdmcpIPv6
#define ServerXdmcpIPv6Defines -DXDMCP_NO_IPV6
#else
#define ServerXdmcpIPv6Defines /**/
#endif
#endif

d1063 1
a1063 1
#define ServerXdmcpDefines -DXDMCP ServerXdmcpIPv6Defines
d1088 25
a1112 3
#ifndef ServerSnprintfDefines
#if !HasSnprintf
#define ServerSnprintfDefines -DNEED_SNPRINTF
d1114 2
a1115 1
#define ServerSnprintfDefines /**/
d1117 2
d1120 5
a1124 2
#ifndef ServerDefines
#define ServerDefines StandardDefines PervasiveExtensionDefines ServerExtraDefines ServerAssertDefines ServerSnprintfDefines
a1125 8

#ifndef MesaUseX86Asm
/* The current Mesa X86 ASM code doesn't work well with SVR4 shared libs. */
# if HasX86Support && !SystemV4
#  define MesaUseX86Asm YES
# else
#  define MesaUseX86Asm NO
# endif
d1144 3
a1146 3
#ifndef MesaUseSSE
#ifdef HasSSESupport
#define MesaUseSSE HasSSESupport
d1148 1
a1148 8
#define MesaUseSSE NO
#endif
#endif

/* For compatibility */
#ifdef HasSSESupport
#undef HasKatmaiSupport
#define HasKatmaiSupport HasSSESupport
a1149 5
#undef MesaUseKatmai
#define MesaUseKatmai MesaUseSSE

#ifndef UsbMouseSupport
# define UsbMouseSupport NO
d1160 1
a1160 1
#ifndef XTrueTypeCConvModule
d1167 1
a1167 1
#ifndef XTrueTypeUseOptEncodings
d1188 3
d1256 1
a1256 5
# ifdef ProjectRoot
#  define LibDir Concat(ProjectRoot,/lib/X11)
# else
#  define LibDir /usr/lib/X11
# endif
a1260 3
#ifndef InstSrcDir
#define InstSrcDir Concat(ProjectRoot,/src)
#endif
a1279 3
#ifndef DocPdfDir
#define DocPdfDir $(DOCDIR)/PDF
#endif
d1313 3
d1395 1
a1395 1
#ifndef ResourceConfigurationManagement
d1399 1
a1399 1
#ifndef XtPopdownConformance
a1431 2
       INSTSRCDIR = InstSrcDir		/* Installed source (kernel modules). */

a1442 1
        DOCPDFDIR = DocPdfDir
d1452 2
a1453 1
      LBXPROXYDIR = LbxproxyDir		/* lbxproxy files */
d1462 8
a1469 7
              RGB = $(BINDIR)/rgb
            FONTC = $(BINDIR)/bdftopcf
      MKFONTSCALE = $(BINDIR)/mkfontscale
        MKFONTDIR = $(BINDIR)/mkfontdir
      MKHTMLINDEX = $(BINDIR)/mkhtmlindex
          UCS2ANY = $(BINDIR)/ProgramTargetName(ucs2any)
      BDFTRUNCATE = $(BINDIR)/bdftruncate
a1470 1
       XCURSORGEN = $(BINDIR)/xcursorgen
a1472 1
# if !CrossCompiling
d1474 3
a1476 10
      MKFONTSCALE = $(CLIENTENVSETUP) $(PRELOADFREETYPESETUP) $(XBUILDBINDIR)/mkfontscale
        MKFONTDIR = $(MKFONTSCALE) -b -s -l
       XCURSORGEN = $(CLIENTENVSETUP) $(PRELOADSETUP) $(XBUILDBINDIR)/xcursorgen
# elif UseInstalledOnCrossCompile
        MKFONTDIR = $(BINDIR)/mkfontdir
      MKFONTSCALE = $(BINDIR)/mkfontscale
            FONTC = $(BINDIR)/bdftopcf
       XCURSORGEN = $(BINDIR)/xcursorgen
# endif
# if HasPerl
d1478 1
a1478 1
# else
d1480 2
a1481 2
# endif
          UCS2ANY = $(XBUILDBINDIR)/ProgramTargetName(ucs2any)
d1536 1
a1536 1
   CLIENTENVSETUP = Concat3(BuildLibPathVar,=,BuildLibPath)
d1538 1
a1538 1
   CLIENTENVSETUP =
a1546 6
#ifdef PreloadFreetypeSetup
 PRELOADFREETYPESETUP = PreloadFreetypeSetup
#endif
#ifdef PreloadXFTSetup
     PRELOADXFTSETUP = PreloadXFTSetup
#endif
a1558 4
#ifndef NeedLibInsideFlag
#define NeedLibInsideFlag	NO
#endif

a1579 2
      /* Common alternate spellings */
      DEPXLIBONLY = $(DEPXONLYLIB)
d1584 1
a1584 1
#define SharedLibXThrStub	YES
d1587 1
a1587 1
#define NormalLibXThrStub	NO
d1590 1
a1590 1
#define DebugLibXThrStub	NO
d1593 1
a1593 1
#define ProfileLibXThrStub	NO
a1603 9
#else
#undef  SharedLibXThrStub
#define SharedLibXThrStub	NO
#undef  NormalLibXThrStub
#define NormalLibXThrStub	NO
#undef  DebugLibXThrStub
#define DebugLibXThrStub	NO
#undef  ProfileLibXThrStub
#define ProfileLibXThrStub	NO
d1608 1
a1608 1
#define SharedLibXss	HasSharedLibraries
d1611 1
a1611 1
#define NormalLibXss	(!SharedLibXss || ForceNormalLib)
a1618 9
#else
#undef  SharedLibXss
#define SharedLibXss	NO
#undef  NormalLibXss
#define NormalLibXss	NO
#undef  DebugLibXss
#define DebugLibXss	NO
#undef  ProfileLibXss
#define ProfileLibXss	NO
d1623 1
a1623 1
#define SharedLibXxf86misc	HasSharedLibraries
d1626 1
a1626 1
#define NormalLibXxf86misc	(!SharedLibXxf86misc || ForceNormalLib)
a1633 9
#else
#undef  SharedLibXxf86misc
#define SharedLibXxf86misc	NO
#undef  NormalLibXxf86misc
#define NormalLibXxf86misc	NO
#undef  DebugLibXxf86misc
#define DebugLibXxf86misc	NO
#undef  ProfileLibXxf86misc
#define ProfileLibXxf86misc	NO
d1638 1
a1638 1
#define SharedLibXxf86vm	HasSharedLibraries
d1641 1
a1641 1
#define NormalLibXxf86vm	(!SharedLibXxf86vm || ForceNormalLib)
a1648 9
#else
#undef  SharedLibXxf86vm
#define SharedLibXxf86vm	NO
#undef  NormalLibXxf86vm
#define NormalLibXxf86vm	NO
#undef  DebugLibXxf86vm
#define DebugLibXxf86vm		NO
#undef  ProfileLibXxf86vm
#define ProfileLibXxf86vm	NO
d1653 1
a1653 1
#define SharedLibXxf86dga	HasSharedLibraries
d1656 1
a1656 1
#define NormalLibXxf86dga	(!SharedLibXxf86dga || ForceNormalLib)
a1663 9
#else
#undef  SharedLibXxf86dga
#define SharedLibXxf86dga	NO
#undef  NormalLibXxf86dga
#define NormalLibXxf86dga	NO
#undef  DebugLibXxf86dga
#define DebugLibXxf86dga	NO
#undef  ProfileLibXxf86dga
#define ProfileLibXxf86dga	NO
d1668 1
a1668 1
#define SharedLibXxf86rush	HasSharedLibraries
d1671 1
a1671 1
#define NormalLibXxf86rush	(!SharedLibXxf86rush || ForceNormalLib)
a1678 9
#else
#undef  SharedLibXxf86rush
#define SharedLibXxf86rush	NO
#undef  NormalLibXxf86rush
#define NormalLibXxf86rush	NO
#undef  DebugLibXxf86rush
#define DebugLibXxf86rush	NO
#undef  ProfileLibXxf86rush
#define ProfileLibXxf86rush	NO
d1683 1
a1683 1
#define SharedLibXv		HasSharedLibraries
d1686 1
a1686 1
#define NormalLibXv		(!SharedLibXv || ForceNormalLib)
a1693 9
#else
#undef  SharedLibXv
#define SharedLibXv		NO
#undef  NormalLibXv
#define NormalLibXv		NO
#undef  DebugLibXv
#define DebugLibXv		NO
#undef  ProfileLibXv
#define ProfileLibXv		NO
d1698 1
a1698 1
#define SharedLibXvMC		HasSharedLibraries
d1701 1
a1701 1
#define NormalLibXvMC		(!SharedLibXvMC || ForceNormalLib)
a1708 9
#else
#undef  SharedLibXvMC
#define SharedLibXvMC		NO
#undef  NormalLibXvMC
#define NormalLibXvMC		NO
#undef  DebugLibXvMC
#define DebugLibXvMC		NO
#undef  ProfileLibXvMC
#define ProfileLibXvMC		NO
d1713 1
a1713 1
#define SharedLibXinerama	HasSharedLibraries
d1716 1
a1716 1
#define NormalLibXinerama	(!SharedLibXinerama || ForceNormalLib)
a1723 9
#else
#undef  SharedLibXinerama
#define SharedLibXinerama	NO
#undef  NormalLibXinerama
#define NormalLibXinerama	NO
#undef  DebugLibXinerama
#define DebugLibXinerama	NO
#undef  ProfileLibXinerama
#define ProfileLibXinerama	NO
a1725 23
#if BuildXResLibrary
#ifndef SharedLibXRes
#define SharedLibXRes           HasSharedLibraries
#endif
#ifndef NormalLibXRes
#define NormalLibXRes           (!SharedLibXRes || ForceNormalLib)
#endif
#ifndef DebugLibXRes
#define DebugLibXRes            NO
#endif
#ifndef ProfileLibXRes
#define ProfileLibXRes          NO
#endif
#else
#undef  SharedLibXRes
#define SharedLibXRes		NO
#undef  NormalLibXRes
#define NormalLibXRes		NO
#undef  DebugLibXRes
#define DebugLibXRes		NO
#undef  ProfileLibXRes
#define ProfileLibXRes		NO
#endif
d1732 1
a1732 1
#define NormalLibDps		(!SharedLibDps || ForceNormalLib)
a1739 9
#else
#undef  SharedLibDps
#define SharedLibDps		NO
#undef  NormalLibDps
#define NormalLibDps		NO
#undef  DebugLibDps
#define DebugLibDps		NO
#undef  ProfileLibDps
#define ProfileLibDps		NO
d1747 1
a1747 1
#define NormalLibDpsTk		(!SharedLibDpsTk || ForceNormalLib)
a1754 9
#else
#undef  SharedLibDpsTk
#define SharedLibDpsTk		NO
#undef  NormalLibDpsTk
#define NormalLibDpsTk		NO
#undef  DebugLibDpsTk
#define DebugLibDpsTk		NO
#undef  ProfileLibDpsTk
#define ProfileLibDpsTk		NO
d1762 1
a1762 1
#define NormalLibPSRes		(!SharedLibPSRes || ForceNormalLib)
a1769 9
#else
#undef  SharedLibPSRes
#define SharedLibPSRes		NO
#undef  NormalLibPSRes
#define NormalLibPSRes		NO
#undef  DebugLibPSRes
#define DebugLibPSRes		NO
#undef  ProfileLibPSRes
#define ProfileLibPSRes		NO
d1777 1
a1777 1
#define NormalLibXrender	(!SharedLibXrender || ForceNormalLib)
a1784 9
#else
#undef  SharedLibXrender
#define SharedLibXrender	NO
#undef  NormalLibXrender
#define NormalLibXrender	NO
#undef  DebugLibXrender
#define DebugLibXrender		NO
#undef  ProfileLibXrender
#define ProfileLibXrender	NO
d1792 1
a1792 1
#define NormalLibXrandr		(!SharedLibXrandr || ForceNormalLib)
a1799 81
#else
#undef  SharedLibXrandr
#define SharedLibXrandr		NO
#undef  NormalLibXrandr
#define NormalLibXrandr		NO
#undef  DebugLibXrandr
#define DebugLibXrandr		NO
#undef  ProfileLibXrandr
#define ProfileLibXrandr	NO
#endif

#if BuildXcursorLibrary
#ifndef SharedLibXcursor
#define SharedLibXcursor	HasSharedLibraries
#endif
#ifndef NormalLibXcursor
#define NormalLibXcursor	(!SharedLibXcursor || ForceNormalLib)
#endif
#ifndef DebugLibXcursor
#define DebugLibXcursor		NO
#endif
#ifndef ProfileLibXcursor
#define ProfileLibXcursor	NO
#endif
#else
#undef  SharedLibXcursor
#define SharedLibXcursor	NO
#undef  NormalLibXcursor
#define NormalLibXcursor	NO
#undef  DebugLibXcursor
#define DebugLibXcursor		NO
#undef  ProfileLibXcursor
#define ProfileLibXcursor	NO
#endif

#if BuildAppleWMLibrary
#ifndef SharedLibAppleWM
#define SharedLibAppleWM	HasSharedLibraries
#endif
#ifndef NormalLibAppleWM
#define NormalLibAppleWM	(!SharedLibAppleWM || ForceNormalLib)
#endif
#ifndef DebugLibAppleWM
#define DebugLibAppleWM		NO
#endif
#ifndef ProfileLibAppleWM
#define ProfileLibAppleWM	NO
#endif
#else
#undef  SharedLibAppleWM
#define SharedLibAppleWM	NO
#undef  NormalLibAppleWM
#define NormalLibAppleWM	NO
#undef  DebugLibAppleWM
#define DebugLibAppleWM		NO
#undef  ProfileLibAppleWM
#define ProfileLibAppleWM	NO
#endif

#if BuildWindowsWMLibrary
#ifndef SharedLibWindowsWM
#define SharedLibWindowsWM	HasSharedLibraries
#endif
#ifndef NormalLibWindowsWM
#define NormalLibWindowsWM	(!SharedLibWindowsWM || ForceNormalLib)
#endif
#ifndef DebugLibWindowsWM
#define DebugLibWindowsWM	NO
#endif
#ifndef ProfileLibWindowsWM
#define ProfileLibWindowsWM	NO
#endif
#else
#undef  SharedLibWindowsWM
#define SharedLibWindowsWM	NO
#undef  NormalLibWindowsWM
#define NormalLibWindowsWM	NO
#undef  DebugLibWindowsWM
#define DebugLibWindowsWM	NO
#undef  ProfileLibWindowsWM
#define ProfileLibWindowsWM	NO
a1814 9
#else
#undef  SharedLibGlu
#define SharedLibGlu		NO
#undef  NormalLibGlu
#define NormalLibGlu		NO
#undef  DebugLibGlu
#define DebugLibGlu		NO
#undef  ProfileLibGlu
#define ProfileLibGlu		NO
a1834 2
#else
#define SharedLibGlxWithoutPIC	NO
a1849 10
#else
#undef  SharedLibGlx
#define SharedLibGlx		NO
#undef  NormalLibGlx
#define NormalLibGlx		NO
#undef  DebugLibGlx
#define DebugLibGlx		NO
#undef  ProfileLibGlx
#define ProfileLibGlx		NO
#endif
d1851 1
a1851 2
 * Only make a shared GLw library on systems with Weak symbols 
 * because it depends on Motif. See xc/lib/GLw/README.txt for details
a1852 1
#if BuildGLwLibrary
d1854 1
a1854 1
#define SharedLibGLw		HasSharedLibraries && HasWeakSymbols
d1857 1
a1857 1
#define NormalLibGLw		(!SharedLibGLw || ForceNormalLib)
d1866 1
a1866 12
	/* create stub (weak) Motif symbols */
#define GLwUseXmStubs		SharedLibGLw && HasWeakSymbols
#endif
#else
#undef  SharedLibGLw
#define SharedLibGLw		NO
#undef  NormalLibGLw
#define NormalLibGLw		NO
#undef  DebugLibGLw
#define DebugLibGLw		NO
#undef  ProfileLibGLw
#define ProfileLibGLw		NO
d1868 1
d1909 1
a1909 1
#define SharedXxf86miscRev 1.1
a1978 11
    XRESLIBSRC = $(LIBSRC)/XRes
#if SharedLibXRes
#ifndef SharedXResRev
#define SharedXResRev 1.0
#endif
SharedLibReferences(XRES,XRes,$(XRESLIBSRC),SOXRESREV,SharedXResRev)
#else
ProjectUnsharedLibReferences(XRES,XRes,$(XRESLIBSRC),XBuildLibDir)
#endif


d2041 1
a2041 1
#define SharedXrenderRev 1.2
d2051 1
a2051 1
#define SharedXrandrRev 2.0
a2057 30
   XCURSORRLIBSRC = $(LIBSRC)/Xcursor
#if SharedLibXcursor
#ifndef SharedXcursorRev
#define SharedXcursorRev 1.0
#endif
SharedLibReferences(XCURSOR,Xcursor,$(XCURSORLIBSRC),SOXCURSORREV,SharedXcursorRev)
#else
ProjectUnsharedLibReferences(XCURSOR,Xcursor,$(XCURSORLIBSRC),XBuildLibDir)
#endif

   APPLEWMLIBSRC = $(LIBSRC)/apple
#if SharedLibAppleWM
#ifndef SharedAppleWMRev
#define SharedAppleWMRev 1.0
#endif
SharedLibReferences(APPLEWM,AppleWM,$(APPLEWMLIBSRC),SOAPPLEWMREV,SharedAppleWMRev)
#else
ProjectUnsharedLibReferences(APPLEWM,AppleWM,$(APPLEWMLIBSRC),XBuildLibDir)
#endif

   WINDOWSWMLIBSRC = $(LIBSRC)/windows
#if SharedLibWindowsWM
#ifndef SharedWindowsWMRev
#define SharedWindowsWMRev 1.0
#endif
SharedLibReferences(WINDOWSWM,WindowsWM,$(WINDOWSWMLIBSRC),SOWINDOWSWMREV,SharedWindowsWMRev)
#else
ProjectUnsharedLibReferences(WINDOWSWM,WindowsWM,$(WINDOWSWMLIBSRC),XBuildLibDir)
#endif

d2059 1
a2059 1
#  define SharedLibXfontcache	HasSharedLibraries
d2062 1
a2062 1
#  define NormalLibXfontcache	(!SharedLibXfontcache || ForceNormalLib)
d2082 1
a2082 1
#define SharedLibXau		NO
a2099 1
#if !UseInstalledXauLib
a2100 3
#else
ProjectUnsharedLibReferences(XAUTH,Xau,$(XAUTHSRC),$(USRLIBDIR))
#endif
d2104 1
a2104 1
#define SharedLibXdmcp		NO
a2121 1
#if !UseInstalledXdmcpLib
a2122 3
#else
ProjectUnsharedLibReferences(XDMCP,Xdmcp,$(XDMCPLIBSRC),$(USRLIBDIR))
#endif
d2151 1
a2151 1
#define NormalLibXmuu		(!SharedLibXmuu | ForceNormalLib)
d2355 2
a2356 4
ProjectUnsharedLibReferences(XBSD,Xbsd,$(LIBSRC)/Xbsd,XBuildLibDir)

#ifndef SharedLibICE
#define SharedLibICE HasSharedLibraries
d2358 2
a2359 2
#ifndef NormalLibICE
#define NormalLibICE (!SharedLibICE | ForceNormalLib)
d2361 2
a2362 2
#ifndef DebugLibICE
#define DebugLibICE		NO	/* debugged ICE library */
d2364 2
a2365 2
#ifndef ProfileLibICE
#define ProfileLibICE		NO	/* profiled ICE library */
d2367 4
a2370 4
           ICESRC = $(LIBSRC)/ICE
#if SharedLibICE
#ifndef SharedICERev
#define SharedICERev 6.3
d2372 1
a2372 1
SharedLibReferences(ICE,ICE,$(ICESRC),SOICEREV,SharedICERev)
d2374 1
a2374 1
ProjectUnsharedLibReferences(ICE,ICE,$(ICESRC),XBuildLibDir)
d2377 64
a2440 2
#ifndef SharedLibSM
#define SharedLibSM HasSharedLibraries
d2484 1
a2484 1
#define SharedLibFS		HasSharedLibraries
d2520 1
a2520 1
#define SharedFontRev 1.5
d2532 1
a2532 1
            FONTLIB = $(XFONTLIB) $(FONTSTUBLIB) $(FREETYPE2LIB)
d2536 1
a2536 1
#define SharedLibFontEnc	HasSharedLibraries
a2578 4
#if UseFreetype2

#if BuildFreetype2Library

d2593 1
a2593 12
/*
 * FreeType 2.1.4
 *
 * Get the library version information from version_info in
 * in xc/extras/freetype2/builds/unix/configure.ac.
 *
 * current:revision:age = 9:3:3
 *
 * The LibtoolMinorVersions revision is "(current - age).age".
 * The !LibtoolMinorVersions revision is "current.0".
 * Freetype2Version should be set to "current.revision.age"
 */
d2595 1
a2595 1
#define Freetype2Version 9.3.3
a2598 3
#ifndef SharedLibtoolFreetype2Rev
#define SharedLibtoolFreetype2Rev	9:3:3
#endif
d2601 1
a2601 1
#define SharedFreetype2Rev 6.3
d2603 1
a2603 1
#define SharedFreetype2Rev 9.0
d2611 5
a2615 2
#ifdef UseInstalled
FREETYPE2INCDIR=$(INCDIR)
a2616 4
FREETYPE2INCDIR=$(BUILDINCDIR)
#endif

#else /* BuildFreetype2Library */
a2621 6
#ifndef Freetype2DirStandard
# define Freetype2DirStandard YES
#endif
#endif
#ifndef Freetype2DirStandard
#define Freetype2DirStandard NO
d2625 1
a2625 7
#define Freetype2LibDir Freetype2Dir/LibDirName
# if Freetype2DirStandard
#  define Freetype2LibDirStandard YES
# endif
#endif
#ifndef Freetype2LibDirStandard
# define Freetype2LibDirStandard NO
d2629 1
a2629 4
#define Freetype2IncDir Freetype2Dir/include
# if Freetype2DirStandard
#  define Freetype2IncDirStandard YES
# endif
d2635 1
a2635 3
#if Freetype2LibDirStandard
FREETYPE2LIB = -lfreetype
#else
a2636 16
#endif

#endif /* HasFreetype2 */

#endif /* else BuildFreetype2Library */

#ifndef Freetype2IncDirStandard
# define Freetype2IncDirStandard NO
#endif

#if BuildFreetype2Library || HasFreetype2
#if Freetype2IncDirStandard
FREETYPE2INCLUDES = -I$(FREETYPE2INCDIR)/freetype2
#else
FREETYPE2INCLUDES = -I$(FREETYPE2INCDIR) -I$(FREETYPE2INCDIR)/freetype2
#endif
a2639 141
#endif /* UseFreetype2 */

#ifndef SharedLibExpat
#define SharedLibExpat HasSharedLibraries
#endif
#ifndef NormalLibExpat
#define NormalLibExpat (!SharedLibExpat | ForceNormalLib)
#endif
#ifndef DebugLibExpat
#define DebugLibExpat		NO
#endif
#ifndef ProfileLibExpat
#define ProfileLibExpat		NO
#endif
          EXPATLIBSRC = $(LIBSRC)/expat

/*
 * Expat 1.95.6.
 *
 * Get the library version information from LIBCURRENT, LIBREVISION and LIBAGE
 * in xc/extras/expat/configure.
 *
 * LIBCURRENT:LIBREVISION:LIBAGE = 4:0:4
 *
 * The LibtoolMinorVersions revision is "(LIBCURRENT - LIBAGE).LIBAGE".
 * The !LibtoolMinorVersions revision is "LIBCURRENT.0".
 */
#ifndef ExpatVersion
#define ExpatVersion 1.95.6
#endif

#if SharedLibExpat
#ifndef SharedLibtoolExpatRev
#define SharedLibtoolExpatRev	4:0:4
#endif
#ifndef SharedExpatRev
#if LibtoolMinorVersions
#define SharedExpatRev 0.4
#else
#define SharedExpatRev 4.0
#endif
#endif
SharedLibReferences(EXPAT,expat,$(EXPATLIBSRC),SOEXPATREV,SharedExpatRev)
#else
ProjectUnsharedLibReferences(EXPAT,expat,$(EXPATLIBSRC),XBuildLibDir)
#endif

#if UseExpat

#if BuildExpatLibrary
EXPATINCLUDES=$(TOP_X_INCLUDES)
EXPATDEFINES=-DEXPAT
#else	/* BuildExpatLibrary */

#if HasExpat

#ifndef ExpatDir
#define ExpatDir /usr
#define ExpatDirStandard YES
#endif
#ifndef ExpatDirStandard
#define ExpatDirStandard NO
#endif

#ifndef ExpatLibDir
#define ExpatLibDir ExpatDir/LibDirName
# if ExpatDirStandard
#  define ExpatLibDirStandard YES
# endif
#endif
#ifndef ExpatLibDirStandard
#define ExpatLibDirStandard NO
#endif

#ifndef ExpatIncDir
#define ExpatIncDir ExpatDir/include
# if ExpatDirStandard
#  define ExpatIncDirStandard YES
# endif
#endif
#ifndef ExpatIncDirStandard
#define ExpatIncDirStandard NO
#endif

EXPATDIR = ExpatDir
EXPATLIBDIR = ExpatLibDir
EXPATINCDIR = ExpatIncDir
#if ExpatIncDirStandard
EXPATINCLUDES =
#else
EXPATINCLUDES = -I$(EXPATINCDIR)
#endif
#if ExpatLibDirStandard
EXPATLIB = -lexpat
#else
EXPATLIB = -L$(EXPATLIBDIR) -lexpat
#endif
EXPATDEFINES = -DEXPAT
#endif /* HasExpat */

#endif /* else BuildExpatLibrary */

#define ExpatClientLibs $(EXPATLIB)
#define ExpatClientDepLibs $(DEPEXPATLIB)

#endif /* UseExpat */

#ifndef SharedLibXft1
#define SharedLibXft1 HasSharedLibraries
#endif
#ifndef NormalLibXft1
#define NormalLibXft1		NO
#endif
#ifndef DebugLibXft1
#define DebugLibXft1		NO
#endif
#ifndef ProfileLibXft1
#define ProfileLibXft1		NO
#endif
          XFT1LIBSRC = $(LIBSRC)/Xft1
#if SharedLibXft1
#ifndef SharedXft1Rev
#define SharedXft1Rev 1.1
#endif
SharedLibReferences(XFT1,Xft,$(XFT1LIBSRC),SOXFT1REV,SharedXft1Rev)
#else
ProjectUnsharedLibReferences(XFT1,Xft,$(XFT1LIBSRC),XBuildLibDir)
#endif

#ifndef Xft1ClientDepLibs
#if UseFreetype2
#define Xft1ClientDepLibs $(DEPXFT1LIB) $(DEPFREETYPE2LIB) $(DEPXRENDERLIB)
#else
#define Xft1ClientDepLibs $(DEPXFT1LIB) $(DEPXRENDERLIB)
#endif
#endif
#ifndef Xft1ClientLibs
#if UseFreetype2
#define Xft1ClientLibs $(XFT1LIB) $(FREETYPE2LIB) $(XRENDERLIB)
#else
#define Xft1ClientLibs $(XFT1LIB) $(XRENDERLIB)
d2658 1
a2658 1
#define SharedXftRev 2.1
d2666 2
a2667 28
#define XftClientDepLibs $(DEPXFTLIB) FontconfigClientDepLibs $(DEPXRENDERLIB)
#endif
#ifndef XftClientLibs
#define XftClientLibs $(XFTLIB) FontconfigClientLibs $(XRENDERLIB)
#endif

#if UseFontconfig

#if BuildFontconfigLibrary

#ifndef SharedLibFontconfig
#define SharedLibFontconfig HasSharedLibraries
#endif
#ifndef NormalLibFontconfig
#define NormalLibFontconfig (!SharedLibFontconfig | ForceNormalLib)
#endif
#ifndef DebugLibFontconfig
#define DebugLibFontconfig		NO
#endif
#ifndef ProfileLibFontconfig
#define ProfileLibFontconfig		NO
#endif
          FONTCONFIGLIBSRC = $(LIBSRC)/fontconfig
#if SharedLibFontconfig
#ifndef SharedFontconfigRev
#define SharedFontconfigRev 1.0
#endif
SharedLibReferences(FONTCONFIG,fontconfig,$(FONTCONFIGLIBSRC),SOFONTCONFIGREV,SharedFontconfigRev)
d2669 1
a2669 1
ProjectUnsharedLibReferences(FONTCONFIG,fontconfig,$(FONTCONFIGLIBSRC),XBuildLibDir)
a2670 5

#ifdef UseInstalled
FONTCONFIGINCDIR=$(INCDIR)
#else
FONTCONFIGINCDIR=$(BUILDINCDIR)
d2672 3
a2674 146

FONTCONFIGINCLUDES = -I$(FONTCONFIGINCDIR)

#if UseInstalledX11
FCCACHE = $(BINDIR)/fc-cache
#else
FCCACHE = set -x; $(CLIENTENVSETUP) $(PRELOADXFTSETUP) FONTCONFIG_PATH=$(FONTCONFIGLIBSRC) $(XBUILDBINDIR)/fc-cache
#endif

#else /* BuildFontconfigLibrary */

#if HasFontconfig

#ifndef FontconfigDir
# define FontconfigDir /usr
# ifndef FontconfigDirStandard
#  define FontconfigDirStandard YES
# endif
#endif

#ifndef FontconfigDirStandard
# define FontconfigDirStandard NO
#endif

#ifndef FontconfigLibDir
# define FontconfigLibDir FontconfigDir/LibDirName
# if FontconfigDirStandard
#  define FontconfigLibDirStandard YES
# endif
#endif
#ifndef FontconfigLibDirStandard
# define FontconfigLibDirStandard NO
#endif

#ifndef FontconfigBinDir
# define FontconfigBinDir FontconfigDir/bin
#endif

#ifndef FontconfigIncDir
# define FontconfigIncDir FontconfigDir/include
# if FontconfigDirStandard
#  define FontconfigIncDirStandard YES
# endif
#endif

#ifndef FontconfigIncDirStandard
# define FontconfigIncDirStandard NO
#endif

FONTCONFIGDIR = FontconfigDir
FONTCONFIGLIBDIR = FontconfigLibDir
FONTCONFIGINCDIR = FontconfigIncDir
FONTCONFIGBINDIR = FontconfigBinDir
#if FontconfigLibDirStandard
FONTCONFIGLIB = -lfontconfig
#else
FONTCONFIGLIB = -L$(FONTCONFIGLIBDIR) -lfontconfig
#endif

#if FontconfigIncDirStandard
FONTCONFIGINCLUDES =
#else
FONTCONFIGINCLUDES = -I$(FONTCONFIGINCDIR)
#endif

FCCACHE = $(FONTCONFIGBINDIR)/fc-cache

#endif /* HasFontconfig */

#endif /* else BuildFontconfigLibrary */

#if BuildFontconfigLibrary || HasFontconfig
FONTCONFIGDEFINES = -DFONTCONFIG
#endif

#ifndef FontconfigClientDepLibs
#define FontconfigClientDepLibs $(DEPFONTCONFIGLIB) $(DEPFREETYPE2LIB) ExpatClientDepLibs
#endif
#ifndef FontconfigClientLibs
#define FontconfigClientLibs $(FONTCONFIGLIB) $(FREETYPE2LIB) ExpatClientLibs
#endif

#endif /* UseFontconfig */

XFTINCLUDES=$(FONTCONFIGINCLUDES) $(FREETYPE2INCLUDES)

#ifdef HasLibpng

/*
 * Libpng controls:
 *
 *	LibpngDir		prefix for all libpng files
 *	LibpngDirStandard	Boolean - whether png headers/libs are
 *				in default compile/link paths
 *	LibpngLibDir		Directory holding png library
 *	LibpngLibDirStandard	Boolean - whether png libs are
 *				in default link path
 *	LibpngIncDir		Directory holding png includes
 *	LibpngIncDirStandard	Boolean - whether png includes are
 *				in default compile path
 *
 * Make sure that *Standard is set correctly, if not, the
 * standard compile/link paths will be added *before* the
 * local X directorys and installed versions of the standard
 * X headers will end up getting used.
 */

#ifndef LibpngDir
#define LibpngDir /usr
#define LibpngDirStandard YES
#endif
#ifndef LibpngDirStandard
#define LibpngDirStandard NO
#endif

#ifndef LibpngLibDir
#define LibpngLibDir LibpngDir/LibDirName
#if LibpngDirStandard
#define LibpngLibDirStandard YES
#endif
#endif
#ifndef LibpngLibDirStandard
#define LibpngLibDirStandard NO
#endif

#ifndef LibpngIncDir
#define LibpngIncDir LibpngDir/include
#if LibpngDirStandard
#define LibpngIncDirStandard YES
#endif
#endif
#ifndef LibpngIncDirStandard
#define LibpngIncDirStandard NO
#endif

LIBPNGINCDIR = LibpngIncDir
#if LibpngIncDirStandard
LIBPNGINC=
#else
LIBPNGINC = -I$(LIBPNGINCDIR)
#endif
LIBPNGDIR = LibpngDir
LIBPNGLIBDIR = LibpngLibDir
LIBPNGINCDIR = LibpngIncDir
#if LibpngLibDirStandard
LIBPNGLIB = -lpng
d2676 1
a2676 1
LIBPNGLIB = -L$(LIBPNGLIBDIR) -lpng
a2677 1

d2692 5
a2696 12
# ifndef SharedLibxkbfile
#  define SharedLibxkbfile	HasSharedLibraries
# endif
# ifndef NormalLibxkbfile
#  define NormalLibxkbfile	(!SharedLibxkbfile | ForceNormalLib)
# endif
# ifndef DebugLibxkbfile
#  define DebugLibxkbfile	NO
# endif
# ifndef ProfileLibxkbfile
#  define ProfileLibxkbfile	NO
# endif
d2698 2
a2699 12
# ifndef SharedLibxkbfile
#  define SharedLibxkbfile	NO
# endif
# ifndef NormalLibxkbfile
#  define NormalLibxkbfile	NO
# endif
# ifndef DebugLibxkbfile
#  define DebugLibxkbfile	NO
# endif
# ifndef ProfileLibxkbfile
#  define ProfileLibxkbfile	NO
# endif
d2701 3
a2703 6
    XKBFILELIBSRC = $(LIBSRC)/xkbfile
#if SharedLibxkbfile
# ifndef SharedxkbfileRev
#  define SharedxkbfileRev	1.0
# endif
SharedLibReferences(XKBFILE,xkbfile,$(XKBFILESRC),SOXKBFILEREV, SharedxkbfileRev)
d2705 2
a2706 1
ProjectUnsharedLibReferences(XKBFILE,xkbfile,$(XKBFILELIBSRC),XBuildLibDir)
d2708 1
a2708 18

#if BuildXKBlib
# ifndef XkbClientDepLibs
#  if UseXKBInClients
#   define XkbClientDepLibs	$(DEPXKBFILELIB)
#  else
#   define XkbClientDepLibs	/**/
#  endif
# endif
# ifndef XkbClientLibs
#  if UseXKBInClients
#   define XkbClientLibs	$(XKBFILELIB)
#  else
#   define XkbClientLibs	/**/
#  endif
# endif

# if defined(UseInstalled) || (CrossCompiling &&  UseInstalledOnCrossCompile)
d2710 1
a2710 1
# else
d2712 1
a2712 1
#  if CrossCompiling
d2714 1
a2714 1
#  else
d2716 2
a2717 2
#  endif
# endif
d2719 6
a2724 6
# ifndef XkbClientDepLibs
#  define XkbClientDepLibs
# endif
# ifndef XkbClientLibs
#  define XkbClientLibs
# endif
a2726 27
#if BuildXKBlib
# ifndef SharedLibxkbui
#  define SharedLibxkbui	HasSharedLibraries
# endif
# ifndef NormalLibxkbui
#  define NormalLibxkbui	(!SharedLibxkbui || ForceNormalLib)
# endif
# ifndef DebugLibxkbui
#  define DebugLibxkbui		NO
# endif
# ifndef ProfileLibxkbui
#  define ProfileLibxkbui	NO
# endif
#else
# ifndef SharedLibxkbui
#  define SharedLibxkbui	NO
# endif
# ifndef NormalLibxkbui
#  define NormalLibxkbui	NO
# endif
# ifndef DebugLibxkbui
#  define DebugLibxkbui		NO
# endif
# ifndef ProfileLibxkbui
#  define ProfileLibxkbui	NO
# endif
#endif
a2727 6
#if SharedLibxkbui
# ifndef SharedxkbuiRev
#  define SharedxkbuiRev	1.0
# endif
SharedLibReferences(XKBUI,xkbui,$(XKBUISRC),SOXKBUIREV, SharedxkbuiRev)
#else
a2728 2
#endif

d2730 1
a2730 1
# define	XkbuiLibs $(XKBUILIB)
d2733 1
a2733 1
# define	XkbuiDepLibs $(DEPXKBFILELIB)
d2825 1
a2825 1
 * MakeFcCache - generate rules to build fontconfig cache database
d2828 1
a2828 1
#if defined UseFreetype2 && !CrossCompiling
d2830 3
a2832 3
# ifndef MakeFcCache
#  define MakeFcCache(deplist)						@@@@\
all:: fonts.cache							@@@@\
d2834 2
a2835 2
fonts.cache: deplist							@@@@\
	RunProgram(FCCACHE, $(FCCACHEOPTS) .)				@@@@\
d2838 2
a2839 2
	RemoveFiles(fonts.cache*)
# endif /* MakeFcCache */
d2841 4
a2844 5
# ifndef InstallFcCache
#  define InstallFcCache(dest)						@@@@\
install::								@@@@\
	RunProgram(FCCACHE, $(FCCACHEOPTS) $(DESTDIR)dest)
# endif /* InstallFcCache */
d2848 2
a2849 2
#ifndef MakeFcCache
#define MakeFcCache(deplist)
d2852 2
a2853 2
#ifndef InstallFcCache
#define InstallFcCache(dest)
a2857 20
/*
 * MakeFontsScale - generate rules to build fonts.scale database.
 */
#ifndef MakeFontsScale
# if !CrossCompiling ||  UseInstalledOnCrossCompile
#  define MakeFontsScale(deplist)					@@@@\
all:: fonts.scale							@@@@\
									@@@@\
fonts.scale:  deplist							@@@@\
	RemoveFile(fonts.scale)						@@@@\
	RunProgram(MKFONTSCALE, .)					@@@@\
									@@@@\
clean::									@@@@\
	RemoveFile(fonts.scale)
# else
#  define MakeFontsScale(deplist)					@@@@\
clean::									@@@@\
	RemoveFile(fonts.scale)
# endif
#endif /* MakeFontsScale */
d2863 1
a2863 2
# if !CrossCompiling ||  UseInstalledOnCrossCompile
#  define MakeFontsDir(deplist)						@@@@\
a2866 1
	RemoveFile(fonts.dir)						@@@@\
a2870 5
# else
#  define MakeFontsDir(deplist)						@@@@\
clean::									@@@@\
	RemoveFile(fonts.dir)
# endif
d2878 1
a2878 2
# if !CrossCompiling || UseInstalledOnCrossCompile
#  define MakeFonts()							@@@@\
a2884 7
# else
#  define MakeFonts()							@@@@\
MakeFontsDir($(OBJS))							@@@@\
									@@@@\
clean::									@@@@\
	RemoveFiles(*.pcf *.pcf.Z *.pcf.gz)
# endif
a2886 12
#ifndef InstallFontsDir
# if !CrossCompiling ||  UseInstalledOnCrossCompile
#  define InstallFontsDir(dest)						@@@@\
install::								@@@@\
	RemoveFile($(DESTDIR)dest/fonts.scale)				@@@@\
	RunProgram(MKFONTSCALE, $(DESTDIR)dest)				@@@@\
	RemoveFile($(DESTDIR)dest/fonts.dir)				@@@@\
	RunProgram(MKFONTDIR, $(MKFONTDIROPTS) $(DESTDIR)dest)
# else
#  define InstallFontsDir(dest)
# endif
#endif
d2892 1
a2892 2
# if !CrossCompiling || UseInstalledOnCrossCompile
#  define InstallFontObjs(objs,dest)					@@@@\
d2895 1
a2895 4
InstallFontsDir(dest)
# else
#  define InstallFontObjs(objs,dest)
# endif
d2909 1
a2909 1
 * InstallFontAliases - generate rules to install font aliases databases.
d2940 2
a2941 3
#if ! CrossCompiling || UseInstalledOnCrossCompile
# ifndef UncompressedFontTargetLong
#  define UncompressedFontTargetLong(sname,tname)			@@@@\
d2944 1
a2944 6
# endif /* UncompressedFontTargetLong */
#else
# ifndef UncompressedFontTargetLong
#  define UncompressedFontTargetLong(sname,tname)
# endif
#endif
d2953 3
a2955 4
#if ! CrossCompiling || UseInstalledOnCrossCompile
# ifndef CompressedFontTargetLong
#  if GzipFontCompression
#   define CompressedFontTargetLong(sname,tname)			@@@@\
d2958 2
a2959 2
#  else
#   define CompressedFontTargetLong(sname,tname)			@@@@\
a2961 4
#  endif
# endif /* CompressedFontTargetLong */
#else
#   define CompressedFontTargetLong(sname,tname)
d2963 1
d3021 1
a3021 2
# if !CrossCompiling || UseInstalledOnCrossCompile
#  define MakeEncDir(deplist,inst,dirlist )				@@@@\
a3032 5
# else
#  define MakeEncDir(deplist,inst,dirlist )				@@@@\
clean::									@@@@\
	RemoveFiles(fonts.dir encodings.dir)
# endif
d3045 1
a3045 2
# if !CrossCompiling || UseInstalledOnCrossCompile
#  define InstallEncObjs(objs,dest)					@@@@\
a3048 3
# else
#  define InstallEncObjs(objs,dest)
# endif
d3057 1
a3057 2
# if !CrossCompiling || UseInstalledOnCrossCompile
#  define InstallEncodingsDir(edir,fdir)				@@@@\
a3058 3
# else
#  define InstallEncodingsDir(edir,fdir)
# endif
d3063 1
d3065 2
d3069 1
a3069 1
	$(UCS2ANY) font.bdf $(UCSMAPPREFIX)enc enc			@@@@\
d3074 1
d3079 2
d3095 1
a3095 2
# if !CrossCompiling || UseInstalledOnCrossCompile
#  define MakeXkbDir(basedir,subdir)					@@@@\
a3105 5
# else
#  define MakeXkbDir(basedir,subdir)					@@@@\
clean::									@@@@\
	RemoveFile(Concat(subdir,.dir))
# endif
a3115 92
/*
 * PostProcessTroffHTML - by default moves the working output into place,
 * but can be a hook for more complicated post-processing.
 */
#ifndef PostProcessTroffHTML
#define PostProcessTroffHTML(temp,real) $(MV) temp real
#endif

#ifdef HTMLroffCmd
#define HtmlTarget(file) file.html
#define HtmlClean(file) file.nhtml file.html file*.png
#else
#define HtmlTarget(file) /**/
#define HtmlClean(file) /**/
#endif

#ifdef PsToPdfCmd
#define PdfTarget(file) file.pdf
#define PdfClean(file) file.pdf
#else
#define PdfTarget(file) /**/
#define PdfClean(file) /**/
#endif

#ifndef ConvertPsToPdf
#ifdef PsToPdfCmd
#define ConvertPsToPdf(file)						@@@@\
file.pdf: file.ps							@@@@\
	RemoveFile(file.pdf)						@@@@\
	$(PSTOPDFCMD) < file.ps > file.pdf
#else
#define ConvertPsToPdf(file) /**/
#endif
#endif

#if HasPdfLatex
#define PdfLatexTarget(file) file.pdf
#define PdfLatexClean(file) file.pdf
#else
#define PdfLatexTarget(file) /**/
#define PdfLatexClean(file) /**/
#endif

#ifndef LatexToPdf
#if HasPdfLatex && defined(PdfLatexCmd)
#define LatexToPdf(file)						@@@@\
file.pdf: file.tex							@@@@\
	RemoveFile(file.pdf)						@@@@\
	$(PDFLATEXCMD) file.tex
#else
#define LatexToPdf(file) /**/
#endif
#endif


#ifndef MakeDepSimpleHtmlDoc
#ifdef HTMLroffCmd
#define MakeDepSimpleHtmlDoc(file,deps,srcs)				@@@@\
HtmlTarget(file): deps							@@@@\
	$(HTMLROFF) $(MSMACROS) $(XDOCMACROS) Concat(-P-I,file) srcs \		@@@@\
		2> index.raw > file.nhtml \				@@@@\
	  && PostProcessTroffHTML(file.nhtml,$@@)
#else
#define MakeDepSimpleHtmlDoc(file,deps,srcs) /**/
#endif
#endif

#ifndef MakeTblHtmlDoc
#ifdef HTMLroffCmd
#define MakeTblHtmlDoc(file,srcs)					@@@@\
file.html: srcs								@@@@\
	$(TBL) $(XDOCMACROS) srcs | $(HTMLROFF) $(MSMACROS) Concat(-P-I,file) \	@@@@\
		2> index.raw > file.nhtml \				@@@@\
	  && PostProcessTroffHTML(file.nhtml,$@@)
#else
#define MakeTblHtmlDoc(file,srcs) /**/
#endif
#endif

#ifndef MakeEqnHtmlDoc
#ifdef HTMLroffCmd
#define MakeEqnHtmlDoc(file,srcs)					@@@@\
file.html: srcs								@@@@\
	$(TBL) $(XDOCMACROS) srcs | $(EQN) | $(HTMLROFF) $(MSMACROS) Concat(-P-I,file) \ @@@@\
		2> index.raw > file.nhtml \				@@@@\
	  && PostProcessTroffHTML(file.nhtml,$@@)
#else
#define MakeEqnHtmlDoc(file,srcs) /**/
#endif
#endif


d3118 2
a3119 2
all:: file.ps file.txt HtmlTarget(file) PdfTarget(file)			@@@@\
.PRECIOUS: file.ps							@@@@\
d3121 4
a3124 6
file.ps: deps								@@@@\
	-$(TROFF) $(MSMACROS) $(XDOCMACROS) srcs \			@@@@\
		2> index.raw > file.nps \				@@@@\
	&& PostProcessTroffPS(file.nps,$@@)				@@@@\
	@@if grep '^[^1-9.]' index.raw | grep -v warning; then exit 1; \	@@@@\
		else test $$? -le 1; fi					@@@@\
d3127 1
a3127 6
	$(NROFF) $(MSMACROS) $(XDOCMACROS) srcs 2> index.raw | \	@@@@\
		 $(COL) $(COLFLAGS) > $@@				@@@@\
									@@@@\
MakeDepSimpleHtmlDoc(file,deps,srcs)					@@@@\
									@@@@\
ConvertPsToPdf(file)							@@@@\
d3130 1
a3130 1
	$(RM) index.raw file.nps file.ps file.txt HtmlClean(file) PdfClean(file)
d3139 2
a3140 2
all:: file.ps file.txt HtmlTarget(file) PdfTarget(file)			@@@@\
.PRECIOUS: file.ps							@@@@\
d3142 4
a3145 6
file.ps: srcs								@@@@\
	-$(TBL) $(XDOCMACROS) srcs | $(TROFF) $(MSMACROS) \		@@@@\
		2> index.raw > file.nps \				@@@@\
	&& PostProcessTroffPS(file.nps,$@@)				@@@@\
	@@if grep '^[^1-9.]' index.raw | grep -v warning; then exit 1; \	@@@@\
		else test $$? -le 1; fi					@@@@\
d3148 1
a3148 6
	$(TBL) $(XDOCMACROS) srcs | $(NROFF) $(MSMACROS) 2> index.raw \	@@@@\
		| $(COL) $(COLFLAGS) > $@@				@@@@\
									@@@@\
MakeTblHtmlDoc(file,srcs)						@@@@\
									@@@@\
ConvertPsToPdf(file)							@@@@\
d3151 1
a3151 1
	$(RM) index.raw file.nps file.ps file.txt HtmlClean(file) PdfClean(file)
d3156 2
a3157 2
all:: file.ps file.txt HtmlTarget(file) PdfTarget(file)			@@@@\
.PRECIOUS: file.ps							@@@@\
d3159 4
a3162 6
file.ps: srcs								@@@@\
	-$(TBL) $(XDOCMACROS) srcs | $(EQN) | $(TROFF) $(MSMACROS) \	@@@@\
		2> index.raw > file.nps \				@@@@\
	&& PostProcessTroffPS(file.nps,$@@)				@@@@\
	@@if grep '^[^1-9.]' index.raw | grep -v warning; then exit 1; \	@@@@\
		else test $$? -le 1; fi					@@@@\
d3165 1
a3165 6
	$(TBL) $(XDOCMACROS) srcs | $(NEQN) | $(NROFF) $(MSMACROS) \	@@@@\
		2> index.raw | $(COL) $(COLFLAGS) > $@@			@@@@\
									@@@@\
MakeEqnHtmlDoc(file,srcs)						@@@@\
									@@@@\
ConvertPsToPdf(file)							@@@@\
d3168 1
a3168 1
	$(RM) index.raw file.nps file.ps file.txt HtmlClean(file) PdfClean(file)
d3173 1
a3173 1
all:: file.idx.ps							@@@@\
d3175 5
a3179 10
file.idx.ps: srcs index.raw						@@@@\
	sed -n '$$p' index.raw > index.pageno				@@@@\
	grep '^[1-9]' index.raw | \					@@@@\
		(sort -f '-t:' -k2,2 -k1,1n 2>/dev/null || \		@@@@\
		 sort -f '-t:' +1 -3 +0n -1n) | \			@@@@\
		awk -f $(DOCUTILSRC)/fixindex.awk | \			@@@@\
		awk -f $(DOCUTILSRC)/block.awk > index.troff		@@@@\
	cat srcs $(XIDXMACROS) index.troff | \				@@@@\
		$(TROFF) -me > file.idx.nps && \			@@@@\
		$(MV) file.idx.nps $@@					@@@@\
d3183 1
a3183 1
	$(RM) index.troff index.pageno file.idx.nps file.idx.ps
d3188 2
a3189 2
#define MakeLatexDoc(file,src)						@@@@\
all:: file.ps PdfLatexTarget(file)					@@@@\
d3191 1
a3191 1
file.dvi: src								@@@@\
d3194 2
a3195 2
file.ps: file.dvi							@@@@\
	$(DVIPS) -o file.nps file && $(MV) file.nps $@@			@@@@\
d3197 3
a3199 6
LatexToPdf(file)							@@@@\
									@@@@\
clean::									@@@@\
	RemoveFiles(file.nps file.ps file.dvi file.log)			@@@@\
	RemoveFiles(file.aux file.toc file.lof file.lot)		@@@@\
	$(RM) PdfLatexClean(file)
d3201 1
a3201 1
#define MakeLatexDoc(file,src)						@@@@\
d3203 2
a3204 2
file.ps: src								@@@@\
	@@echo "cannot make file.ps: no latex on this system"; exit 1
d3212 2
a3213 3
	@@if [ -f name.ps -a X$(NOPS) = X ]; then set -x; \		@@@@\
	  $(INSTALL) $(INSTALLFLAGS) $(INSTDATFLAGS) name.ps \		@@@@\
		$(DESTDIR)$(DOCPSDIR); \				@@@@\
a3214 1
	RemoveOldFile(name.ps,name.PS,$(DOCPSDIR))			@@@@\
d3216 2
a3217 20
	@@if [ -f name.txt -a X$(NOTXT) = X ]; then set -x; \		@@@@\
	  $(INSTALL) $(INSTALLFLAGS) $(INSTDATFLAGS) name.txt \		@@@@\
		$(DESTDIR)$(DOCDIR); \					@@@@\
	fi								@@@@\
	RemoveOldFile(name.txt,name.TXT,$(DOCDIR))			@@@@\
	MakeDir($(DESTDIR)$(DOCHTMLDIR))				@@@@\
	@@if [ -f name.html -a X$(NOHTML) = X ]; then (set -x; \		@@@@\
	  $(INSTALL) $(INSTALLFLAGS) $(INSTDATFLAGS) name.html \	@@@@\
		$(DESTDIR)$(DOCHTMLDIR)); \				@@@@\
	  for i in name*.png; do \					@@@@\
	    if [ -f $$i ]; then (set -x; \				@@@@\
	      $(INSTALL) $(INSTALLFLAGS) $(INSTDATFLAGS) $$i \		@@@@\
		$(DESTDIR)$(DOCHTMLDIR)); \				@@@@\
	    fi; \							@@@@\
	  done; \							@@@@\
	fi								@@@@\
	MakeDir($(DESTDIR)$(DOCPDFDIR))					@@@@\
	@@if [ -f name.pdf -a X$(NOPDF) = X ]; then set -x; \		@@@@\
	  $(INSTALL) $(INSTALLFLAGS) $(INSTDATFLAGS) name.pdf \		@@@@\
		$(DESTDIR)$(DOCPDFDIR); \				@@@@\
d3222 1
a3222 1
#define InstallRoffDoc(name) InstallDoc(name,name.ps name.txt)
d3227 1
a3227 1
#define InstallLatexDoc(name) InstallDoc(name,name.ps)
d3235 1
a3235 3
all:: name.ps PdfTarget(name)						@@@@\
									@@@@\
name.ps: deps								@@@@\
d3237 2
a3238 6
	  RemoveFile(name.ps); \					@@@@\
	  gzip -d < name.PS.gz > name.ps; \				@@@@\
	fi								@@@@\
	@@if [ -f name.PS ]; then set -x; \				@@@@\
	  RemoveFile(name.ps); \					@@@@\
	  $(LN) name.PS name.ps; \					@@@@\
a3240 2
ConvertPsToPdf(name)							@@@@\
									@@@@\
d3242 3
a3244 1
	$(RM) name.ps PdfClean(name)					@@@@\
d3249 1
a3277 10

#if !HasFreetype2
      FT2PRELOADPATTERN = libfreetype.so.?
#endif
#if !HasFontconfig
       FCPRELOADPATTERN = libfontconfig.so.?
#endif
      XFTPRELOADPATTERN = libXft.so.?
  XRENDERPRELOADPATTERN = libXrender.so.?
    XFONTPRELOADPATTERN = libXfont*.so.?
@


1.1.9.2
log
@Import XFree86 4.4 from The XFree86(TM) Project, Inc.
(integrity cannot be checked)

got via cvs -qd anoncvs@@anoncvs.xfree86.org:/cvs co -Prxf-4_4_0 xc
@
text
@d8 1
a8 1
XCOMM $XFree86: xc/config/cf/X11.tmpl,v 1.249 2004/02/16 18:14:33 dawes Exp $
d3741 2
a3742 7
	MakeDir($(DESTDIR)dest)						@@@@\
	@@if [ X$(STATIC_FONTS_SCALE) = X ]; then (set -x; \		@@@@\
	  RemoveFile($(DESTDIR)dest/fonts.scale); \			@@@@\
	  RunProgram(MKFONTSCALE, $(DESTDIR)dest)); \			@@@@\
	else (set -x; \							@@@@\
	  InstallInline(fonts.scale,$(INSTDATFLAGS),dest)); \		@@@@\
	fi								@@@@\
@


1.1.1.1
log
@Import OpenBSD 3.3 XF4 repository from CTM 3132 the first time
This finalizes starting an OpenBSD-mirabile (aka MirBSD) repository.

### MirBSD is:
# Copyright (c) 1982-2003 by Thorsten "mirabile" Glaser <x86@@ePost.de>
# Copyright  1968-2003  The authors of And contributors to UNIX, the
#       C Language, BSD/Berkeley Unix; 386BSD, NetBSD 1.1 and OpenBSD.
#
# Anyone who obtained a copy of this work is hereby permitted to freely use,
# distribute, modify, merge, sublicence, give away or sell it as long as the
# authors are given due credit and the following notice is retained:
#
# This work is provided "as is", with no explicit or implicit warranty what-
# soever. Use it only at your own risk. In no event may an author or contri-
# butor be held liable for any damage, directly or indirectly, that origina-
# ted through or is caused by creation or modification of this work.

MirBSD is my private tree. MirBSD does not differ very much from OpenBSD
and intentionally tracks OpenBSD. That's why it _is_ OpenBSD, just not the
official one. It's like with DarrenBSD.

At time of this writing, no advertising for MirBSD must be done,
because the advertising clause has not yet been sorted out.

http://templeofhate.com/tglaser/MirBSD/index.php
@
text
@@


1.1.1.2
log
@The X-Windowing System

Import XFree86 4.3 from OpenBSD by CTM, in the hope it's stable
@
text
@d8 1
a8 1
XCOMM $XFree86: xc/config/cf/X11.tmpl,v 1.196 2003/02/25 21:57:52 dawes Exp $
d26 1
a26 1
 * MakeFcCache			(deplist)
d31 1
a31 1
 * InstallFcCache		(dest)
a74 6
#if CrossCompiling
# if defined UseInstalled && !defined UseInstalledOnCrossCompile
#  define UseInstalledOnCrossCompile YES
# endif
#endif

a116 3
#ifndef XTTInLibFont
#define XTTInLibFont		NO
#endif
d141 3
a143 5
#ifndef BuildBethMarduthoFonts
#define BuildBethMarduthoFonts	NO
#endif
#ifndef BuildEthiopicFonts
#define BuildEthiopicFonts	NO
a204 6
#ifndef BuildThaiFonts
#define BuildThaiFonts		YES
#endif
#ifndef BuildISO8859_11Fonts
#define BuildISO8859_11Fonts	BuildThaiFonts
#endif
a213 3
#ifndef BuildISO8859_16Fonts
#define BuildISO8859_16Fonts	YES
#endif
a228 3
#ifndef MakeLocalFontDir
#define MakeLocalFontDir	YES
#endif
d242 1
a242 1
#define BuildX11Lib		BuildLibraries
a243 1

a246 3
#ifndef InstallXcmsTxt
#define InstallXcmsTxt		YES
#endif
a255 3
#ifndef BuildLoadableXlibXcursor
#define BuildLoadableXlibXcursor (HasDlopen && SharedLibX11)
#endif
d257 1
a257 1
#define BuildXextLib		BuildLibraries
a261 1
#define UseInstalledXauLib	(defined(UseInstalled) || !BuildXauLib)
a264 1
#define UseInstalledXdmcpLib	(defined(UseInstalled) || !BuildXdmcpLib)
a468 6
#ifndef BuildXResExt
#define BuildXResExt            NO 
#endif
#ifndef BuildXResLibrary
#define BuildXResLibrary        (BuildXResExt && !BuildServersOnly)
#endif
a495 3
#ifndef BuildOSMesaLib
#define BuildOSMesaLib		(BuildGlxExt && defined(XFree86Version))
#endif
d497 1
a497 2
#define BuildGLULibrary		(BuildGLXLibrary && BuildLibraries && \
				 HasCplusplus)
d500 1
a500 1
#define BuildGLwLibrary		(BuildGLXLibrary && BuildLibraries)
d524 1
a524 1
#define BuildRender		YES
a531 9
#ifndef BuildXft1Library
#define BuildXft1Library	BuildRenderLibrary
#endif
#ifndef UseFontconfig
#define UseFontconfig		BuildXftLibrary
#endif
#ifndef BuildFontconfigLibrary
#define BuildFontconfigLibrary	(UseFontconfig && !HasFontconfig)
#endif
d533 1
a533 10
#define UseFreetype2		(BuildXftLibrary || BuildXft1Library || UseFontconfig)
#endif
#ifndef HasExpat
#define HasExpat		NO
#endif
#ifndef UseExpat
#define UseExpat		(UseFontconfig)
#endif
#ifndef BuildExpatLibrary
#define BuildExpatLibrary	(UseExpat && !HasExpat)
d540 1
a540 1
#define BuildRandR		BuildRender
a545 12
#ifndef BuildXcursorLibrary
#define BuildXcursorLibrary	BuildRenderLibrary
#endif

#ifndef BuildXcursorgen
#define BuildXcursorgen		HasLibpng
#endif

#ifndef DefaultCursorTheme
#define DefaultCursorTheme	core
#endif

a617 3
#ifndef NeedUIThrStubs
#define NeedUIThrStubs		NO
#endif
a951 8
#ifndef XResExtensionDefines
#if BuildXResExt
#define XResExtensionDefines -DRES
#else
#define XResExtensionDefines /**/
#endif
#endif

d1045 1
a1045 2
	GlxDefines FontCacheExtensionDefines SiteExtensionDefines \
        XResExtensionDefines
a1127 8
#ifndef MesaUseX86Asm
# if HasX86Support
#  define MesaUseX86Asm YES
# else
#  define MesaUseX86Asm NO
# endif
#endif

d1144 3
a1146 3
#ifndef MesaUseSSE
#ifdef HasSSESupport
#define MesaUseSSE HasSSESupport
d1148 1
a1148 8
#define MesaUseSSE NO
#endif
#endif

/* For compatibility */
#ifdef HasSSESupport
#undef HasKatmaiSupport
#define HasKatmaiSupport HasSSESupport
a1149 5
#undef MesaUseKatmai
#define MesaUseKatmai MesaUseSSE

#ifndef UsbMouseSupport
# define UsbMouseSupport NO
d1256 1
a1256 5
# ifdef ProjectRoot
#  define LibDir Concat(ProjectRoot,/lib/X11)
# else
#  define LibDir /usr/lib/X11
# endif
d1466 1
d1468 3
a1470 4
          UCS2ANY = $(XBINDIR)/ucs2any
      BDFTRUNCATE = $(XBINDIR)/bdftruncate
     UCSMAPPREFIX = $(XFONTDIR)/util/map-
       XCURSORGEN = $(XBINDIR)/xcursorgen
a1472 1
# if !CrossCompiling
d1475 2
a1476 7
       XCURSORGEN = $(CLIENTENVSETUP) $(PRELOADSETUP) $(XBUILDBINDIR)/xcursorgen
# elif UseInstalledOnCrossCompile
        MKFONTDIR = $(BINDIR)/mkfontdir
            FONTC = $(BINDIR)/bdftopcf
       XCURSORGEN = $(BINDIR)/xcursorgen
# endif
# if HasPerl
d1478 1
a1478 1
# else
d1480 1
a1480 1
# endif
a1546 3
#ifdef PreloadXFTSetup
     PRELOADXFTSETUP = PreloadXFTSetup
#endif
a1558 4
#ifndef NeedLibInsideFlag
#define NeedLibInsideFlag	NO
#endif

d1584 1
a1584 1
#define SharedLibXThrStub	YES
d1587 1
a1587 1
#define NormalLibXThrStub	NO
d1590 1
a1590 1
#define DebugLibXThrStub	NO
d1593 1
a1593 1
#define ProfileLibXThrStub	NO
a1603 9
#else
#undef  SharedLibXThrStub
#define SharedLibXThrStub	NO
#undef  NormalLibXThrStub
#define NormalLibXThrStub	NO
#undef  DebugLibXThrStub
#define DebugLibXThrStub	NO
#undef  ProfileLibXThrStub
#define ProfileLibXThrStub	NO
a1618 9
#else
#undef  SharedLibXss
#define SharedLibXss	NO
#undef  NormalLibXss
#define NormalLibXss	NO
#undef  DebugLibXss
#define DebugLibXss	NO
#undef  ProfileLibXss
#define ProfileLibXss	NO
a1633 9
#else
#undef  SharedLibXxf86misc
#define SharedLibXxf86misc	NO
#undef  NormalLibXxf86misc
#define NormalLibXxf86misc	NO
#undef  DebugLibXxf86misc
#define DebugLibXxf86misc	NO
#undef  ProfileLibXxf86misc
#define ProfileLibXxf86misc	NO
a1648 9
#else
#undef  SharedLibXxf86vm
#define SharedLibXxf86vm	NO
#undef  NormalLibXxf86vm
#define NormalLibXxf86vm	NO
#undef  DebugLibXxf86vm
#define DebugLibXxf86vm		NO
#undef  ProfileLibXxf86vm
#define ProfileLibXxf86vm	NO
a1663 9
#else
#undef  SharedLibXxf86dga
#define SharedLibXxf86dga	NO
#undef  NormalLibXxf86dga
#define NormalLibXxf86dga	NO
#undef  DebugLibXxf86dga
#define DebugLibXxf86dga	NO
#undef  ProfileLibXxf86dga
#define ProfileLibXxf86dga	NO
a1678 9
#else
#undef  SharedLibXxf86rush
#define SharedLibXxf86rush	NO
#undef  NormalLibXxf86rush
#define NormalLibXxf86rush	NO
#undef  DebugLibXxf86rush
#define DebugLibXxf86rush	NO
#undef  ProfileLibXxf86rush
#define ProfileLibXxf86rush	NO
d1683 1
a1683 1
#define SharedLibXv		YES
a1693 9
#else
#undef  SharedLibXv
#define SharedLibXv		NO
#undef  NormalLibXv
#define NormalLibXv		NO
#undef  DebugLibXv
#define DebugLibXv		NO
#undef  ProfileLibXv
#define ProfileLibXv		NO
a1708 9
#else
#undef  SharedLibXvMC
#define SharedLibXvMC		NO
#undef  NormalLibXvMC
#define NormalLibXvMC		NO
#undef  DebugLibXvMC
#define DebugLibXvMC		NO
#undef  ProfileLibXvMC
#define ProfileLibXvMC		NO
a1723 9
#else
#undef  SharedLibXinerama
#define SharedLibXinerama	NO
#undef  NormalLibXinerama
#define NormalLibXinerama	NO
#undef  DebugLibXinerama
#define DebugLibXinerama	NO
#undef  ProfileLibXinerama
#define ProfileLibXinerama	NO
a1725 23
#if BuildXResLibrary
#ifndef SharedLibXRes
#define SharedLibXRes           NO
#endif
#ifndef NormalLibXRes
#define NormalLibXRes           YES
#endif
#ifndef DebugLibXRes
#define DebugLibXRes            NO
#endif
#ifndef ProfileLibXRes
#define ProfileLibXRes          NO
#endif
#else
#undef  SharedLibXRes
#define SharedLibXRes		NO
#undef  NormalLibXRes
#define NormalLibXRes		NO
#undef  DebugLibXRes
#define DebugLibXRes		NO
#undef  ProfileLibXRes
#define ProfileLibXRes		NO
#endif
a1739 9
#else
#undef  SharedLibDps
#define SharedLibDps		NO
#undef  NormalLibDps
#define NormalLibDps		NO
#undef  DebugLibDps
#define DebugLibDps		NO
#undef  ProfileLibDps
#define ProfileLibDps		NO
a1754 9
#else
#undef  SharedLibDpsTk
#define SharedLibDpsTk		NO
#undef  NormalLibDpsTk
#define NormalLibDpsTk		NO
#undef  DebugLibDpsTk
#define DebugLibDpsTk		NO
#undef  ProfileLibDpsTk
#define ProfileLibDpsTk		NO
a1769 9
#else
#undef  SharedLibPSRes
#define SharedLibPSRes		NO
#undef  NormalLibPSRes
#define NormalLibPSRes		NO
#undef  DebugLibPSRes
#define DebugLibPSRes		NO
#undef  ProfileLibPSRes
#define ProfileLibPSRes		NO
a1784 9
#else
#undef  SharedLibXrender
#define SharedLibXrender	NO
#undef  NormalLibXrender
#define NormalLibXrender	NO
#undef  DebugLibXrender
#define DebugLibXrender		NO
#undef  ProfileLibXrender
#define ProfileLibXrender	NO
a1799 33
#else
#undef  SharedLibXrandr
#define SharedLibXrandr		NO
#undef  NormalLibXrandr
#define NormalLibXrandr		NO
#undef  DebugLibXrandr
#define DebugLibXrandr		NO
#undef  ProfileLibXrandr
#define ProfileLibXrandr	NO
#endif

#if BuildXcursorLibrary
#ifndef SharedLibXcursor
#define SharedLibXcursor	HasSharedLibraries
#endif
#ifndef NormalLibXcursor
#define NormalLibXcursor	YES
#endif
#ifndef DebugLibXcursor
#define DebugLibXcursor		NO
#endif
#ifndef ProfileLibXcursor
#define ProfileLibXcursor	NO
#endif
#else
#undef  SharedLibXcursor
#define SharedLibXcursor	NO
#undef  NormalLibXcursor
#define NormalLibXcursor	NO
#undef  DebugLibXcursor
#define DebugLibXcursor		NO
#undef  ProfileLibXcursor
#define ProfileLibXcursor	NO
a1814 9
#else
#undef  SharedLibGlu
#define SharedLibGlu		NO
#undef  NormalLibGlu
#define NormalLibGlu		NO
#undef  DebugLibGlu
#define DebugLibGlu		NO
#undef  ProfileLibGlu
#define ProfileLibGlu		NO
a1834 2
#else
#define SharedLibGlxWithoutPIC	NO
a1849 10
#else
#undef  SharedLibGlx
#define SharedLibGlx		NO
#undef  NormalLibGlx
#define NormalLibGlx		NO
#undef  DebugLibGlx
#define DebugLibGlx		NO
#undef  ProfileLibGlx
#define ProfileLibGlx		NO
#endif
a1852 1
#if BuildGLwLibrary
d1868 1
a1868 10
#else
#undef  SharedLibGlw
#define SharedLibGlw		NO
#undef  NormalLibGlw
#define NormalLibGlw		NO
#undef  DebugLibGlw
#define DebugLibGlw		NO
#undef  ProfileLibGlw
#define ProfileLibGlw		NO
#endif
a1978 11
    XRESLIBSRC = $(LIBSRC)/XRes
#if SharedLibXRes
#ifndef SharedXResRev
#define SharedXResRev 1.0
#endif
SharedLibReferences(XRES,XRes,$(XRESLIBSRC),SOXRESREV,SharedXResRev)
#else
ProjectUnsharedLibReferences(XRES,XRes,$(XRESLIBSRC),XBuildLibDir)
#endif


d2029 1
a2029 1
#if BuildGLwLibrary && SharedLibGLw
d2041 1
a2041 1
#define SharedXrenderRev 1.2
d2051 1
a2051 1
#define SharedXrandrRev 2.0
a2057 10
   XCURSORRLIBSRC = $(LIBSRC)/Xcursor
#if SharedLibXcursor
#ifndef SharedXcursorRev
#define SharedXcursorRev 1.0
#endif
SharedLibReferences(XCURSOR,Xcursor,$(XCURSORLIBSRC),SOXCURSORREV,SharedXcursorRev)
#else
ProjectUnsharedLibReferences(XCURSOR,Xcursor,$(XCURSORLIBSRC),XBuildLibDir)
#endif

a2099 1
#if !UseInstalledXauLib
a2100 3
#else
ProjectUnsharedLibReferences(XAUTH,Xau,$(XAUTHSRC),$(USRLIBDIR))
#endif
a2121 1
#if !UseInstalledXdmcpLib
a2122 3
#else
ProjectUnsharedLibReferences(XDMCP,Xdmcp,$(XDMCPLIBSRC),$(USRLIBDIR))
#endif
a2528 16
/*
 * There's no reason to use the statically built FreeType unless
 * you're using a loadable server.
 */
 
#ifndef FontLibSharedFreeType
#if BuildFreeType && UseFreetype2 && !DoLoadableServer 
#define FontLibSharedFreeType YES
#else
#define FontLibSharedFreeType NO
#endif
#endif

#if FontLibSharedFreeType
         FONTFT2LIB = $(FREETYPE2LIB)
#endif
d2532 1
a2532 1
            FONTLIB = $(XFONTLIB) $(FONTSTUBLIB) $(FONTFT2LIB)
a2578 4
#if UseFreetype2

#if BuildFreetype2Library

d2593 1
a2593 1
/* FreeType 2.0.9, version_info 9:0:3 */
d2595 1
a2595 1
#define Freetype2Version 9.0.3
d2601 1
a2601 1
#define SharedFreetype2Rev 6.3
d2603 1
a2603 1
#define SharedFreetype2Rev 9.0
d2611 5
a2615 2
#ifdef UseInstalled
FREETYPE2INCDIR=$(INCDIR)/freetype2
a2616 4
FREETYPE2INCDIR=$(BUILDINCDIR)/freetype2
#endif

#else /* BuildFreetype2Library */
a2621 6
#ifndef Freetype2DirStandard
# define Freetype2DirStandard YES
#endif
#endif
#ifndef Freetype2DirStandard
#define Freetype2DirStandard NO
d2625 1
a2625 7
#define Freetype2LibDir Freetype2Dir/LibDirName
# if Freetype2DirStandard
#  define Freetype2LibDirStandard YES
# endif
#endif
#ifndef Freetype2LibDirStandard
# define Freetype2LibDirStandard NO
d2635 1
a2635 3
#if Freetype2LibDirStandard
FREETYPE2LIB = -lfreetype
#else
a2636 8
#endif

#endif /* HasFreetype2 */

#endif /* else BuildFreetype2Library */

#if BuildFreetype2Library || HasFreetype2
FREETYPE2INCLUDES = -I$(FREETYPE2INCDIR)
a2639 124
#endif /* UseFreetype2 */

#ifndef SharedLibExpat
#define SharedLibExpat HasSharedLibraries
#endif
#ifndef NormalLibExpat
#define NormalLibExpat (!SharedLibExpat | ForceNormalLib)
#endif
#ifndef DebugLibExpat
#define DebugLibExpat		NO
#endif
#ifndef ProfileLibExpat
#define ProfileLibExpat		NO
#endif
          EXPATLIBSRC = $(LIBSRC)/expat

/* Expat 1.95.2 */
#ifndef ExpatVersion
#define ExpatVersion 1.95.2
#endif

#if SharedLibExpat
#ifndef SharedExpatRev
#define SharedExpatRev 1.0
#endif
SharedLibReferences(EXPAT,expat,$(EXPATLIBSRC),SOEXPATREV,SharedExpatRev)
#else
ProjectUnsharedLibReferences(EXPAT,expat,$(EXPATLIBSRC),XBuildLibDir)
#endif

#if UseExpat

#if BuildExpatLibrary
EXPATINCLUDES=$(TOP_X_INCLUDES)
EXPATDEFINES=-DEXPAT
#else	/* BuildExpatLibrary */

#if HasExpat

#ifndef ExpatDir
#define ExpatDir /usr
#define ExpatDirStandard YES
#endif
#ifndef ExpatDirStandard
#define ExpatDirStandard NO
#endif

#ifndef ExpatLibDir
#define ExpatLibDir ExpatDir/LibDirName
# if ExpatDirStandard
#  define ExpatLibDirStandard YES
# endif
#endif
#ifndef ExpatLibDirStandard
#define ExpatLibDirStandard NO
#endif

#ifndef ExpatIncDir
#define ExpatIncDir ExpatDir/include
# if ExpatDirStandard
#  define ExpatIncDirStandard YES
# endif
#endif
#ifndef ExpatIncDirStandard
#define ExpatIncDirStandard NO
#endif

EXPATDIR = ExpatDir
EXPATLIBDIR = ExpatLibDir
EXPATINCDIR = ExpatIncDir
#if ExpatIncDirStandard
EXPATINCLUDES =
#else
EXPATINCLUDES = -I$(EXPATINCDIR)
#endif
#if ExpatLibDirStandard
EXPATLIB = -lexpat
#else
EXPATLIB = -L$(EXPATLIBDIR) -lexpat
#endif
EXPATDEFINES = -DEXPAT
#endif /* HasExpat */

#endif /* else BuildExpatLibrary */

#define ExpatClientLibs $(EXPATLIB)
#define ExpatClientDepLibs $(DEPEXPATLIB)

#endif /* UseExpat */

#ifndef SharedLibXft1
#define SharedLibXft1 HasSharedLibraries
#endif
#ifndef NormalLibXft1
#define NormalLibXft1 		NO
#endif
#ifndef DebugLibXft1
#define DebugLibXft1		NO
#endif
#ifndef ProfileLibXft1
#define ProfileLibXft1		NO
#endif
          XFT1LIBSRC = $(LIBSRC)/Xft1
#if SharedLibXft1
#ifndef SharedXft1Rev
#define SharedXft1Rev 1.1
#endif
SharedLibReferences(XFT1,Xft,$(XFT1LIBSRC),SOXFT1REV,SharedXft1Rev)
#else
ProjectUnsharedLibReferences(XFT1,Xft,$(XFT1LIBSRC),XBuildLibDir)
#endif

#ifndef Xft1ClientDepLibs
#if UseFreetype2
#define Xft1ClientDepLibs $(DEPXFT1LIB) $(DEPFREETYPE2LIB) $(DEPXRENDERLIB)
#else
#define Xft1ClientDepLibs $(DEPXFT1LIB) $(DEPXRENDERLIB)
#endif
#endif
#ifndef Xft1ClientLibs
#if UseFreetype2
#define Xft1ClientLibs $(XFT1LIB) $(FREETYPE2LIB) $(XRENDERLIB)
#else
#define Xft1ClientLibs $(XFT1LIB) $(XRENDERLIB)
d2658 1
a2658 1
#define SharedXftRev 2.1
d2666 2
a2667 30
#define XftClientDepLibs $(DEPXFTLIB) FontconfigClientDepLibs $(DEPXRENDERLIB)
#endif
#ifndef XftClientLibs
#define XftClientLibs $(XFTLIB) FontconfigClientLibs $(XRENDERLIB)
#endif

XFTINCLUDES=$(FONTCONFIGINCLUDES) $(FREETYPE2INCLUDES)

#if UseFontconfig

#if BuildFontconfigLibrary

#ifndef SharedLibFontconfig
#define SharedLibFontconfig HasSharedLibraries
#endif
#ifndef NormalLibFontconfig
#define NormalLibFontconfig (!SharedLibFontconfig | ForceNormalLib)
#endif
#ifndef DebugLibFontconfig
#define DebugLibFontconfig		NO
#endif
#ifndef ProfileLibFontconfig
#define ProfileLibFontconfig		NO
#endif
          FONTCONFIGLIBSRC = $(LIBSRC)/fontconfig
#if SharedLibFontconfig
#ifndef SharedFontconfigRev
#define SharedFontconfigRev 1.0
#endif
SharedLibReferences(FONTCONFIG,fontconfig,$(FONTCONFIGLIBSRC),SOFONTCONFIGREV,SharedFontconfigRev)
d2669 1
a2669 1
ProjectUnsharedLibReferences(FONTCONFIG,fontconfig,$(FONTCONFIGLIBSRC),XBuildLibDir)
a2670 5

#ifdef UseInstalled
FONTCONFIGINCDIR=$(INCDIR)
#else
FONTCONFIGINCDIR=$(BUILDINCDIR)
d2672 3
a2674 55

FONTCONFIGINCLUDES = -I$(FONTCONFIGINCDIR)

#if UseInstalledX11
FCCACHE = $(BINDIR)/fc-cache
#else
FCCACHE = set -x; $(CLIENTENVSETUP) $(PRELOADXFTSETUP) FONTCONFIG_PATH=$(FONTCONFIGLIBSRC) $(XBUILDBINDIR)/fc-cache
#endif
	  
#else /* BuildFontconfigLibrary */

#if HasFontconfig

#ifndef FontconfigDir
# define FontconfigDir /usr
# ifndef FontconfigDirStandard
#  define FontconfigDirStandard YES
# endif
#endif

#ifndef FontconfigDirStandard
# define FontconfigDirStandard NO
#endif

#ifndef FontconfigLibDir
# define FontconfigLibDir FontconfigDir/LibDirName
# if FontconfigDirStandard
#  define FontconfigLibDirStandard YES
# endif
#endif
#ifndef FontconfigLibDirStandard
# define FontconfigLibDirStandard NO
#endif

#ifndef FontconfigBinDir
# define FontconfigBinDir FontconfigDir/bin
#endif

#ifndef FontconfigIncDir
# define FontconfigIncDir FontconfigDir/include
# if FontconfigDirStandard
#  define FontconfigIncDirStandard YES
# endif
#endif

#ifndef FontconfigIncDirStandard
# define FontconfigIncDirStandard NO
#endif

FONTCONFIGDIR = FontconfigDir
FONTCONFIGLIBDIR = FontconfigLibDir
FONTCONFIGINCDIR = FontconfigIncDir
FONTCONFIGBINDIR = FontconfigBinDir
#if FontconfigLibDirStandard
FONTCONFIGLIB = -lfontconfig
d2676 1
a2676 72
FONTCONFIGLIB = -L$(FONTCONFIGLIBDIR) -lfontconfig
#endif

#if FontconfigIncDirStandard
FONTCONFIGINCLUDES =
#else
FONTCONFIGINCLUDES = -I$(FONTCONFIGINCDIR)
#endif

FCCACHE = $(FONTCONFIGBINDIR)/fc-cache

#endif /* HasFontconfig */

#endif /* else BuildFontconfigLibrary */

#if BuildFontconfigLibrary || HasFontconfig
FONTCONFIGDEFINES = -DFONTCONFIG
#endif

#ifndef FontconfigClientDepLibs
#define FontconfigClientDepLibs $(DEPFONTCONFIGLIB) $(DEPFREETYPE2LIB) ExpatClientDepLibs
#endif
#ifndef FontconfigClientLibs
#define FontconfigClientLibs $(FONTCONFIGLIB) $(FREETYPE2LIB) ExpatClientLibs
#endif

#endif /* UseFontconfig */

#ifdef HasLibpng

/*
 * Libpng controls:
 *
 *	LibpngDir		prefix for all libpng files
 *	LibpngDirStandard	Boolean - whether png headers/libs are
 *				in default compile/link paths
 *	LibpngLibDir		Directory holding png library
 *	LibpngLibDirStandard	Boolean - whether png libs are
 *				in default link path
 *	LibpngIncDir		Directory holding png includes
 *	LibpngIncDirStandard	Boolean - whether png includes are
 *				in default compile path
 *
 * Make sure that *Standard is set correctly, if not, the
 * standard compile/link paths will be added *before* the
 * local X directorys and installed versions of the standard
 * X headers will end up getting used.
 */

#ifndef LibpngDir
#define LibpngDir /usr
#define LibpngDirStandard YES
#endif
#ifndef LibpngDirStandard
#define LibpngDirStandard NO
#endif

#ifndef LibpngLibDir
#define LibpngLibDir LibpngDir/LibDirName
#if LibpngDirStandard
#define LibpngLibDirStandard YES
#endif
#endif
#ifndef LibpngLibDirStandard
#define LibpngLibDirStandard NO
#endif

#ifndef LibpngIncDir
#define LibpngIncDir LibpngDir/include
#if LibpngDirStandard
#define LibpngIncDirStandard YES
#endif
a2677 19
#ifndef LibpngIncDirStandard
#define LibpngIncDirStandard NO
#endif

LIBPNGINCDIR = LibpngIncDir
#if LibpngIncDirStandard
LIBPNGINC=
#else
LIBPNGINC = -I$(LIBPNGINCDIR)
#endif
LIBPNGDIR = LibpngDir
LIBPNGLIBDIR = LibpngLibDir
LIBPNGINCDIR = LibpngIncDir
#if LibpngLibDirStandard
LIBPNGLIB = -lpng
#else
LIBPNGLIB = -L$(LIBPNGLIBDIR) -lpng
#endif

d2708 1
a2708 1
#if defined(UseInstalled) || (CrossCompiling &&  UseInstalledOnCrossCompile)
d2825 1
a2825 1
 * MakeFcCache - generate rules to build fontconfig cache database
d2828 1
a2828 1
#if defined UseFreetype2 && !CrossCompiling
d2830 3
a2832 3
# ifndef MakeFcCache
#  define MakeFcCache(deplist)						@@@@\
all:: fonts.cache							@@@@\
d2834 2
a2835 2
fonts.cache: deplist							@@@@\
	RunProgram(FCCACHE, $(FCCACHEOPTS) .)				@@@@\
d2838 2
a2839 2
	RemoveFiles(fonts.cache*)
# endif /* MakeFcCache */
d2841 4
a2844 5
# ifndef InstallFcCache
#  define InstallFcCache(dest)						@@@@\
install::								@@@@\
	RunProgram(FCCACHE, $(FCCACHEOPTS) $(DESTDIR)dest)
# endif /* InstallFcCache */
d2848 2
a2849 2
#ifndef MakeFcCache
#define MakeFcCache(deplist)
d2852 2
a2853 2
#ifndef InstallFcCache
#define InstallFcCache(dest)
d2858 1
d2863 1
a2863 2
# if !CrossCompiling ||  UseInstalledOnCrossCompile
#  define MakeFontsDir(deplist)						@@@@\
a2870 5
# else
#  define MakeFontsDir(deplist)						@@@@\
clean::									@@@@\
	RemoveFile(fonts.dir)
# endif
d2878 1
a2878 2
# if !CrossCompiling || UseInstalledOnCrossCompile
#  define MakeFonts()							@@@@\
a2884 7
# else
#  define MakeFonts()							@@@@\
MakeFontsDir($(OBJS))							@@@@\
									@@@@\
clean::									@@@@\
	RemoveFiles(*.pcf *.pcf.Z *.pcf.gz)
# endif
d2892 1
a2892 2
# if !CrossCompiling || UseInstalledOnCrossCompile
#  define InstallFontObjs(objs,dest)					@@@@\
a2895 3
# else
#  define InstallFontObjs(objs,dest)
# endif
d2940 2
a2941 3
#if ! CrossCompiling || UseInstalledOnCrossCompile
# ifndef UncompressedFontTargetLong
#  define UncompressedFontTargetLong(sname,tname)			@@@@\
d2944 1
a2944 6
# endif /* UncompressedFontTargetLong */
#else
# ifndef UncompressedFontTargetLong
#  define UncompressedFontTargetLong(sname,tname)
# endif
#endif
d2953 3
a2955 4
#if ! CrossCompiling || UseInstalledOnCrossCompile
# ifndef CompressedFontTargetLong
#  if GzipFontCompression
#   define CompressedFontTargetLong(sname,tname)			@@@@\
d2958 2
a2959 2
#  else
#   define CompressedFontTargetLong(sname,tname)			@@@@\
a2961 4
#  endif
# endif /* CompressedFontTargetLong */
#else
#   define CompressedFontTargetLong(sname,tname)
d2963 1
d3021 1
a3021 2
# if !CrossCompiling || UseInstalledOnCrossCompile
#  define MakeEncDir(deplist,inst,dirlist )				@@@@\
a3032 5
# else
#  define MakeEncDir(deplist,inst,dirlist )				@@@@\
clean::									@@@@\
	RemoveFiles(fonts.dir encodings.dir)
# endif
d3045 1
a3045 2
# if !CrossCompiling || UseInstalledOnCrossCompile
#  define InstallEncObjs(objs,dest)					@@@@\
a3048 3
# else
#  define InstallEncObjs(objs,dest)
# endif
d3057 1
a3057 2
# if !CrossCompiling || UseInstalledOnCrossCompile
#  define InstallEncodingsDir(edir,fdir)				@@@@\
a3058 3
# else
#  define InstallEncodingsDir(edir,fdir)
# endif
d3095 1
a3095 2
# if !CrossCompiling || UseInstalledOnCrossCompile
#  define MakeXkbDir(basedir,subdir)					@@@@\
a3105 5
# else
#  define MakeXkbDir(basedir,subdir)					@@@@\
clean::									@@@@\
	RemoveFile(Concat(subdir,.dir))
# endif
d3176 2
a3177 2
	sed -n '$$p' index.raw > index.pageno				@@@@\
	grep '^[1-9]' index.raw | (sort -f '-t:' -k1,1n 2>/dev/null || sort -f '-t:' +1 -3 +0n -1n) | awk -f $(DOCUTILSRC)/fixindex.awk | awk -f $(DOCUTILSRC)/block.awk > index.troff @@@@\
@


1.1.1.3
log
@Import OpenBSD tree again due to CVS bugs
@
text
@d3053 1
a3053 1
/* Expat 1.95.4 */
d3055 1
a3055 1
#define ExpatVersion 1.95.4
d3060 1
a3060 1
#define SharedExpatRev 3.0
@


1.1.1.4
log
@Import OpenBSD XF4 as of CTM delta 370 to prepare sync of the entire base system _before_ the hackathon
@
text
@d1858 1
a1858 1
#define SharedLibXv		HasSharedLibraries
@


1.1.1.5
log
@sync with OpenBSD's idea of X-Window as of now();
@
text
@d3052 2
a3053 11
/*
 * Expat 1.95.6.
 *
 * Get the library version information from LIBCURRENT, LIBREVISION and LIBAGE
 * in xc/extras/expat/configure.
 *
 * LIBCURRENT:LIBREVISION:LIBAGE = 4:0:4
 *
 * The LibtoolMinorVersions revision is "(LIBCURRENT - LIBAGE).LIBAGE".
 * The !LibtoolMinorVersions revision is "LIBCURRENT.0".
 */
d3055 1
a3055 1
#define ExpatVersion 1.95.6
d3060 1
a3060 1
#define SharedExpatRev 4.0
@


1.1.1.6
log
@That's what OpenBSD will, probably, ship as XF4 in 3.5
their last sync against XFree86 4.3-current has been
imported into our vendor branch, too
@
text
@d8 1
a8 1
XCOMM $XFree86: xc/config/cf/X11.tmpl,v 1.247 2004/02/10 10:38:56 alanh Exp $
d75 2
a76 2
#if CrossCompiling && !defined(UseInstalledOnCrossCompile)
# if defined(UseInstalled)
a77 2
# else
#  define UseInstalledOnCrossCompile NO
d159 3
d170 1
a170 1
#define DerivedUCSFonts		YES
d315 9
d383 14
d448 7
d502 1
a502 1
#define BuildXResExt            NO
d535 1
a535 1
#define BuildOSMesaLib		BuildGlxExt
d584 1
a584 2
#define UseFreetype2		(BuildXftLibrary || BuildXft1Library || \
				 UseFontconfig || BuildFreeType)
a597 7
#ifndef Freetype2BuildDefines
#define Freetype2BuildDefines	/**/
#endif
/* For FreeType 1.x */
#ifndef Freetype1BuildDefines
#define Freetype1BuildDefines	Freetype2BuildDefines
#endif
d600 1
a600 1
#define BuildRandR		YES
a617 8
#ifndef BuildAppleWMLibrary
#define BuildAppleWMLibrary	NO
#endif

#ifndef BuildWindowsWMLibrary
#define BuildWindowsWMLibrary	NO
#endif

d711 2
a712 1
#define DefaultFontPath $(FONTDIR)/misc/,$(FONTDIR)/TTF/,$(FONTDIR)/Speedo/,$(FONTDIR)/Type1/,$(FONTDIR)/CID/,$(FONTDIR)/75dpi/,$(FONTDIR)/100dpi/
d714 8
a721 1
#define DefaultFontPath $(FONTDIR)/misc/,$(FONTDIR)/TTF/,$(FONTDIR)/Speedo/,$(FONTDIR)/Type1/,$(FONTDIR)/CID/,$(FONTDIR)/100dpi/,$(FONTDIR)/75dpi/
d764 3
a766 13
/*
 * NOTE:  IPv6Flags could be tacked on to either ConnectionFlags or
 *        ExtraConnectionDefs.  Here, we choose the later in order to
 *        maximise exposure of the IPv6 code (a number of <OS>.def files
 *        contain ConnectionFlags overrides).  Mind you, this might not
 *        the right thing to do when HasStreams is asserted.
 */
#ifndef BuildIPv6		/* If the OS also #define's AF_INET6 */
#define BuildIPv6		YES
#endif
#ifndef IPv6Flags
#if BuildIPv6
#define IPv6Flags -DIPv6
a767 12
#define IPv6Flags /**/
#endif
#endif
/*
 * Assume by default that IPv6 sockets also listen for IPv4 connections.
 * XDMCP support currently only works for both IPv4 and IPv6 when this is
 * true.
 */
#ifndef IPv6SocketsAlsoIPv4
#define IPv6SocketsAlsoIPv4	YES
#endif
#ifndef DECnetFlags
d769 1
a769 1
#define DECnetFlags -DDNETCONN
d771 1
a771 1
#define DECnetFlags
a773 6
#ifndef ConnectionFlags
#if HasStreams
#define ConnectionFlags -DSTREAMSCONN
#else
#define ConnectionFlags -DTCPCONN -DUNIXCONN DECnetFlags
#endif
d782 1
a782 1
#define ExtraConnectionDefs $(STICKY_DEFINES) $(FCHOWN_DEFINES) IPv6Flags
d855 7
d900 7
d1125 1
a1125 1
	ShmDefines BigReqDefines VidModeExtensionDefines \
a1145 39
#ifndef HasDevRandom
#define HasDevRandom NO
#endif

#ifndef HasArc4Random
#define HasArc4Random NO
#endif

#ifndef RandomDefines
# if HasDevRandom
#  ifndef RandomDeviceFile
#   define RandomDeviceFile /dev/random
#  endif
#  ifndef ExtraRandomDefines
#   ifdef PollDevRandom /* Set if can poll() /dev/random to avoid blocking */
#    define ExtraRandomDefines -DPOLL_DEV_RANDOM
#   else
#    define ExtraRandomDefines /**/
#   endif
#  endif
#  define RandomDefines -DDEV_RANDOM=\"RandomDeviceFile\" ExtraRandomDefines
# elif HasArc4Random
#  define RandomDefines -DARC4_RANDOM
# else
#  define RandomDefines /**/
# endif
#endif

#ifndef PreferXdmcpIPv6
#define PreferXdmcpIPv6 NO
#endif
#ifndef ServerXdmcpIPv6Defines
#if BuildIPv6 && !IPv6SocketsAlsoIPv4 && !PreferXdmcpIPv6
#define ServerXdmcpIPv6Defines -DXDMCP_NO_IPV6
#else
#define ServerXdmcpIPv6Defines /**/
#endif
#endif

d1147 1
a1147 1
#define ServerXdmcpDefines -DXDMCP ServerXdmcpIPv6Defines
d1172 15
a1186 3
#ifndef ServerSnprintfDefines
#if !HasSnprintf
#define ServerSnprintfDefines -DNEED_SNPRINTF
d1188 12
a1199 1
#define ServerSnprintfDefines /**/
d1201 8
a1209 2
#ifndef ServerDefines
#define ServerDefines StandardDefines PervasiveExtensionDefines ServerExtraDefines ServerAssertDefines ServerSnprintfDefines
d1213 1
a1213 2
/* The current Mesa X86 ASM code doesn't work well with SVR4 shared libs. */
# if HasX86Support && !SystemV4
d1264 1
a1264 1
#ifndef XTrueTypeCConvModule
d1271 1
a1271 1
#ifndef XTrueTypeUseOptEncodings
d1292 3
a1368 3
#ifndef InstSrcDir
#define InstSrcDir Concat(ProjectRoot,/src)
#endif
a1387 3
#ifndef DocPdfDir
#define DocPdfDir $(DOCDIR)/PDF
#endif
d1421 3
d1503 1
a1503 1
#ifndef ResourceConfigurationManagement
d1507 1
a1507 1
#ifndef XtPopdownConformance
a1539 2
       INSTSRCDIR = InstSrcDir		/* Installed source (kernel modules). */

a1550 1
        DOCPDFDIR = DocPdfDir
d1560 2
a1561 1
      LBXPROXYDIR = LbxproxyDir		/* lbxproxy files */
a1572 1
      MKFONTSCALE = $(XBINDIR)/mkfontscale
d1583 1
a1583 2
      MKFONTSCALE = $(CLIENTENVSETUP) $(PRELOADFREETYPESETUP) $(XBUILDBINDIR)/mkfontscale
        MKFONTDIR = $(MKFONTSCALE) -b -s -l
a1586 1
      MKFONTSCALE = $(BINDIR)/mkfontscale
d1595 1
a1595 1
          UCS2ANY = $(XBUILDBINDIR)/ProgramTargetName(ucs2any)
d1650 1
a1650 1
   CLIENTENVSETUP = Concat3(BuildLibPathVar,=,BuildLibPath)
d1652 1
a1652 1
   CLIENTENVSETUP =
a1660 3
#ifdef PreloadFreetypeSetup
 PRELOADFREETYPESETUP = PreloadFreetypeSetup
#endif
a1700 2
      /* Common alternate spellings */
      DEPXLIBONLY = $(DEPXONLYLIB)
d1738 1
a1738 1
#define SharedLibXss	HasSharedLibraries
d1741 1
a1741 1
#define NormalLibXss	(!SharedLibXss || ForceNormalLib)
d1762 1
a1762 1
#define SharedLibXxf86misc	HasSharedLibraries
d1765 1
a1765 1
#define NormalLibXxf86misc	(!SharedLibXxf86misc || ForceNormalLib)
d1786 1
a1786 1
#define SharedLibXxf86vm	HasSharedLibraries
d1789 1
a1789 1
#define NormalLibXxf86vm	(!SharedLibXxf86vm || ForceNormalLib)
d1810 1
a1810 1
#define SharedLibXxf86dga	HasSharedLibraries
d1813 1
a1813 1
#define NormalLibXxf86dga	(!SharedLibXxf86dga || ForceNormalLib)
d1834 1
a1834 1
#define SharedLibXxf86rush	HasSharedLibraries
d1837 1
a1837 1
#define NormalLibXxf86rush	(!SharedLibXxf86rush || ForceNormalLib)
d1861 1
a1861 1
#define NormalLibXv		(!SharedLibXv || ForceNormalLib)
d1882 1
a1882 1
#define SharedLibXvMC		HasSharedLibraries
d1885 1
a1885 1
#define NormalLibXvMC		(!SharedLibXvMC || ForceNormalLib)
d1906 1
a1906 1
#define SharedLibXinerama	HasSharedLibraries
d1909 1
a1909 1
#define NormalLibXinerama	(!SharedLibXinerama || ForceNormalLib)
d1930 1
a1930 1
#define SharedLibXRes           HasSharedLibraries
d1933 1
a1933 1
#define NormalLibXRes           (!SharedLibXRes || ForceNormalLib)
d1957 1
a1957 1
#define NormalLibDps		(!SharedLibDps || ForceNormalLib)
d1981 1
a1981 1
#define NormalLibDpsTk		(!SharedLibDpsTk || ForceNormalLib)
d2005 1
a2005 1
#define NormalLibPSRes		(!SharedLibPSRes || ForceNormalLib)
d2029 1
a2029 1
#define NormalLibXrender	(!SharedLibXrender || ForceNormalLib)
d2053 1
a2053 1
#define NormalLibXrandr		(!SharedLibXrandr || ForceNormalLib)
d2077 1
a2077 1
#define NormalLibXcursor	(!SharedLibXcursor || ForceNormalLib)
a2095 48
#if BuildAppleWMLibrary
#ifndef SharedLibAppleWM
#define SharedLibAppleWM	HasSharedLibraries
#endif
#ifndef NormalLibAppleWM
#define NormalLibAppleWM	(!SharedLibAppleWM || ForceNormalLib)
#endif
#ifndef DebugLibAppleWM
#define DebugLibAppleWM		NO
#endif
#ifndef ProfileLibAppleWM
#define ProfileLibAppleWM	NO
#endif
#else
#undef  SharedLibAppleWM
#define SharedLibAppleWM	NO
#undef  NormalLibAppleWM
#define NormalLibAppleWM	NO
#undef  DebugLibAppleWM
#define DebugLibAppleWM		NO
#undef  ProfileLibAppleWM
#define ProfileLibAppleWM	NO
#endif

#if BuildWindowsWMLibrary
#ifndef SharedLibWindowsWM
#define SharedLibWindowsWM	HasSharedLibraries
#endif
#ifndef NormalLibWindowsWM
#define NormalLibWindowsWM	(!SharedLibWindowsWM || ForceNormalLib)
#endif
#ifndef DebugLibWindowsWM
#define DebugLibWindowsWM	NO
#endif
#ifndef ProfileLibWindowsWM
#define ProfileLibWindowsWM	NO
#endif
#else
#undef  SharedLibWindowsWM
#define SharedLibWindowsWM	NO
#undef  NormalLibWindowsWM
#define NormalLibWindowsWM	NO
#undef  DebugLibWindowsWM
#define DebugLibWindowsWM	NO
#undef  ProfileLibWindowsWM
#define ProfileLibWindowsWM	NO
#endif

d2166 1
a2166 2
 * Only make a shared GLw library on systems with Weak symbols 
 * because it depends on Motif. See xc/lib/GLw/README.txt for details
d2170 1
a2170 1
#define SharedLibGLw		HasSharedLibraries && HasWeakSymbols
d2173 1
a2173 1
#define NormalLibGLw		(!SharedLibGLw || ForceNormalLib)
d2182 1
a2182 2
	/* create stub (weak) Motif symbols */
#define GLwUseXmStubs		SharedLibGLw && HasWeakSymbols
d2185 8
a2192 8
#undef  SharedLibGLw
#define SharedLibGLw		NO
#undef  NormalLibGLw
#define NormalLibGLw		NO
#undef  DebugLibGLw
#define DebugLibGLw		NO
#undef  ProfileLibGLw
#define ProfileLibGLw		NO
d2234 1
a2234 1
#define SharedXxf86miscRev 1.1
d2365 1
a2365 1
#if SharedLibGLw
a2403 20
   APPLEWMLIBSRC = $(LIBSRC)/apple
#if SharedLibAppleWM
#ifndef SharedAppleWMRev
#define SharedAppleWMRev 1.0
#endif
SharedLibReferences(APPLEWM,AppleWM,$(APPLEWMLIBSRC),SOAPPLEWMREV,SharedAppleWMRev)
#else
ProjectUnsharedLibReferences(APPLEWM,AppleWM,$(APPLEWMLIBSRC),XBuildLibDir)
#endif

   WINDOWSWMLIBSRC = $(LIBSRC)/windows
#if SharedLibWindowsWM
#ifndef SharedWindowsWMRev
#define SharedWindowsWMRev 1.0
#endif
SharedLibReferences(WINDOWSWM,WindowsWM,$(WINDOWSWMLIBSRC),SOWINDOWSWMREV,SharedWindowsWMRev)
#else
ProjectUnsharedLibReferences(WINDOWSWM,WindowsWM,$(WINDOWSWMLIBSRC),XBuildLibDir)
#endif

d2405 1
a2405 1
#  define SharedLibXfontcache	HasSharedLibraries
d2408 1
a2408 1
#  define NormalLibXfontcache	(!SharedLibXfontcache || ForceNormalLib)
d2428 1
a2428 1
#define SharedLibXau		NO
d2454 1
a2454 1
#define SharedLibXdmcp		NO
d2505 1
a2505 1
#define NormalLibXmuu		(!SharedLibXmuu | ForceNormalLib)
d2709 60
d2838 1
a2838 1
#define SharedLibFS		HasSharedLibraries
d2874 1
a2874 1
#define SharedFontRev 1.5
d2883 16
d2902 1
a2902 1
            FONTLIB = $(XFONTLIB) $(FONTSTUBLIB) $(FREETYPE2LIB)
d2906 1
a2906 1
#define SharedLibFontEnc	HasSharedLibraries
d2967 1
a2967 12
/*
 * FreeType 2.1.4
 *
 * Get the library version information from version_info in
 * in xc/extras/freetype2/builds/unix/configure.ac.
 *
 * current:revision:age = 9:3:3
 *
 * The LibtoolMinorVersions revision is "(current - age).age".
 * The !LibtoolMinorVersions revision is "current.0".
 * Freetype2Version should be set to "current.revision.age"
 */
d2969 1
a2969 1
#define Freetype2Version 9.3.3
a2972 3
#ifndef SharedLibtoolFreetype2Rev
#define SharedLibtoolFreetype2Rev	9:3:3
#endif
d2986 1
a2986 1
FREETYPE2INCDIR=$(INCDIR)
d2988 1
a2988 1
FREETYPE2INCDIR=$(BUILDINCDIR)
d3016 1
a3016 4
#define Freetype2IncDir Freetype2Dir/include
# if Freetype2DirStandard
#  define Freetype2IncDirStandard YES
# endif
a3031 4
#ifndef Freetype2IncDirStandard
# define Freetype2IncDirStandard NO
#endif

d3033 1
a3033 5
#if Freetype2IncDirStandard
FREETYPE2INCLUDES = -I$(FREETYPE2INCDIR)/freetype2
#else
FREETYPE2INCLUDES = -I$(FREETYPE2INCDIR) -I$(FREETYPE2INCDIR)/freetype2
#endif
a3051 1

a3067 3
#ifndef SharedLibtoolExpatRev
#define SharedLibtoolExpatRev	4:0:4
#endif
a3068 3
#if LibtoolMinorVersions
#define SharedExpatRev 0.4
#else
a3070 1
#endif
d3140 1
a3140 1
#define NormalLibXft1		NO
d3202 2
d3243 1
a3243 1

a3318 2
XFTINCLUDES=$(FONTCONFIGINCLUDES) $(FREETYPE2INCLUDES)

d3397 5
a3401 12
# ifndef SharedLibxkbfile
#  define SharedLibxkbfile	HasSharedLibraries
# endif
# ifndef NormalLibxkbfile
#  define NormalLibxkbfile	(!SharedLibxkbfile | ForceNormalLib)
# endif
# ifndef DebugLibxkbfile
#  define DebugLibxkbfile	NO
# endif
# ifndef ProfileLibxkbfile
#  define ProfileLibxkbfile	NO
# endif
d3403 2
a3404 12
# ifndef SharedLibxkbfile
#  define SharedLibxkbfile	NO
# endif
# ifndef NormalLibxkbfile
#  define NormalLibxkbfile	NO
# endif
# ifndef DebugLibxkbfile
#  define DebugLibxkbfile	NO
# endif
# ifndef ProfileLibxkbfile
#  define ProfileLibxkbfile	NO
# endif
d3406 3
a3408 6
    XKBFILELIBSRC = $(LIBSRC)/xkbfile
#if SharedLibxkbfile
# ifndef SharedxkbfileRev
#  define SharedxkbfileRev	1.0
# endif
SharedLibReferences(XKBFILE,xkbfile,$(XKBFILESRC),SOXKBFILEREV, SharedxkbfileRev)
d3410 2
a3411 1
ProjectUnsharedLibReferences(XKBFILE,xkbfile,$(XKBFILELIBSRC),XBuildLibDir)
d3413 1
a3413 18

#if BuildXKBlib
# ifndef XkbClientDepLibs
#  if UseXKBInClients
#   define XkbClientDepLibs	$(DEPXKBFILELIB)
#  else
#   define XkbClientDepLibs	/**/
#  endif
# endif
# ifndef XkbClientLibs
#  if UseXKBInClients
#   define XkbClientLibs	$(XKBFILELIB)
#  else
#   define XkbClientLibs	/**/
#  endif
# endif

# if defined(UseInstalled) || (CrossCompiling &&  UseInstalledOnCrossCompile)
d3415 1
a3415 1
# else
d3417 1
a3417 1
#  if CrossCompiling
d3419 1
a3419 1
#  else
d3421 2
a3422 2
#  endif
# endif
d3424 6
a3429 6
# ifndef XkbClientDepLibs
#  define XkbClientDepLibs
# endif
# ifndef XkbClientLibs
#  define XkbClientLibs
# endif
a3431 27
#if BuildXKBlib
# ifndef SharedLibxkbui
#  define SharedLibxkbui	HasSharedLibraries
# endif
# ifndef NormalLibxkbui
#  define NormalLibxkbui	(!SharedLibxkbui || ForceNormalLib)
# endif
# ifndef DebugLibxkbui
#  define DebugLibxkbui		NO
# endif
# ifndef ProfileLibxkbui
#  define ProfileLibxkbui	NO
# endif
#else
# ifndef SharedLibxkbui
#  define SharedLibxkbui	NO
# endif
# ifndef NormalLibxkbui
#  define NormalLibxkbui	NO
# endif
# ifndef DebugLibxkbui
#  define DebugLibxkbui		NO
# endif
# ifndef ProfileLibxkbui
#  define ProfileLibxkbui	NO
# endif
#endif
a3432 6
#if SharedLibxkbui
# ifndef SharedxkbuiRev
#  define SharedxkbuiRev	1.0
# endif
SharedLibReferences(XKBUI,xkbui,$(XKBUISRC),SOXKBUIREV, SharedxkbuiRev)
#else
a3433 2
#endif

d3435 1
a3435 1
# define	XkbuiLibs $(XKBUILIB)
d3438 1
a3438 1
# define	XkbuiDepLibs $(DEPXKBFILELIB)
a3564 21
 * MakeFontsScale - generate rules to build fonts.scale database.
 */
#ifndef MakeFontsScale
# if !CrossCompiling ||  UseInstalledOnCrossCompile
#  define MakeFontsScale(deplist)					@@@@\
all:: fonts.scale							@@@@\
									@@@@\
fonts.scale:  deplist							@@@@\
	RemoveFile(fonts.scale)						@@@@\
	RunProgram(MKFONTSCALE, .)					@@@@\
									@@@@\
clean::									@@@@\
	RemoveFile(fonts.scale)
# else
#  define MakeFontsScale(deplist)					@@@@\
clean::									@@@@\
	RemoveFile(fonts.scale)
# endif
#endif /* MakeFontsScale */

/*
a3572 1
	RemoveFile(fonts.dir)						@@@@\
a3605 12
#ifndef InstallFontsDir
# if !CrossCompiling ||  UseInstalledOnCrossCompile
#  define InstallFontsDir(dest)						@@@@\
install::								@@@@\
	RemoveFile($(DESTDIR)dest/fonts.scale)				@@@@\
	RunProgram(MKFONTSCALE, $(DESTDIR)dest)				@@@@\
	RemoveFile($(DESTDIR)dest/fonts.dir)				@@@@\
	RunProgram(MKFONTDIR, $(MKFONTDIROPTS) $(DESTDIR)dest)
# else
#  define InstallFontsDir(dest)
# endif
#endif
d3615 1
a3615 1
InstallFontsDir(dest)
d3632 1
a3632 1
 * InstallFontAliases - generate rules to install font aliases databases.
d3810 1
d3812 2
d3816 1
a3816 1
	$(UCS2ANY) font.bdf $(UCSMAPPREFIX)enc enc			@@@@\
d3821 1
d3826 2
a3868 92
/*
 * PostProcessTroffHTML - by default moves the working output into place,
 * but can be a hook for more complicated post-processing.
 */
#ifndef PostProcessTroffHTML
#define PostProcessTroffHTML(temp,real) $(MV) temp real
#endif

#ifdef HTMLroffCmd
#define HtmlTarget(file) file.html
#define HtmlClean(file) file.nhtml file.html file*.png
#else
#define HtmlTarget(file) /**/
#define HtmlClean(file) /**/
#endif

#ifdef PsToPdfCmd
#define PdfTarget(file) file.pdf
#define PdfClean(file) file.pdf
#else
#define PdfTarget(file) /**/
#define PdfClean(file) /**/
#endif

#ifndef ConvertPsToPdf
#ifdef PsToPdfCmd
#define ConvertPsToPdf(file)						@@@@\
file.pdf: file.ps							@@@@\
	RemoveFile(file.pdf)						@@@@\
	$(PSTOPDFCMD) < file.ps > file.pdf
#else
#define ConvertPsToPdf(file) /**/
#endif
#endif

#if HasPdfLatex
#define PdfLatexTarget(file) file.pdf
#define PdfLatexClean(file) file.pdf
#else
#define PdfLatexTarget(file) /**/
#define PdfLatexClean(file) /**/
#endif

#ifndef LatexToPdf
#if HasPdfLatex && defined(PdfLatexCmd)
#define LatexToPdf(file)						@@@@\
file.pdf: file.tex							@@@@\
	RemoveFile(file.pdf)						@@@@\
	$(PDFLATEXCMD) file.tex
#else
#define LatexToPdf(file) /**/
#endif
#endif


#ifndef MakeDepSimpleHtmlDoc
#ifdef HTMLroffCmd
#define MakeDepSimpleHtmlDoc(file,deps,srcs)				@@@@\
HtmlTarget(file): deps							@@@@\
	$(HTMLROFF) $(MSMACROS) $(XDOCMACROS) Concat(-P-I,file) srcs \		@@@@\
		2> index.raw > file.nhtml \				@@@@\
	  && PostProcessTroffHTML(file.nhtml,$@@)
#else
#define MakeDepSimpleHtmlDoc(file,deps,srcs) /**/
#endif
#endif

#ifndef MakeTblHtmlDoc
#ifdef HTMLroffCmd
#define MakeTblHtmlDoc(file,srcs)					@@@@\
file.html: srcs								@@@@\
	$(TBL) $(XDOCMACROS) srcs | $(HTMLROFF) $(MSMACROS) Concat(-P-I,file) \	@@@@\
		2> index.raw > file.nhtml \				@@@@\
	  && PostProcessTroffHTML(file.nhtml,$@@)
#else
#define MakeTblHtmlDoc(file,srcs) /**/
#endif
#endif

#ifndef MakeEqnHtmlDoc
#ifdef HTMLroffCmd
#define MakeEqnHtmlDoc(file,srcs)					@@@@\
file.html: srcs								@@@@\
	$(TBL) $(XDOCMACROS) srcs | $(EQN) | $(HTMLROFF) $(MSMACROS) Concat(-P-I,file) \ @@@@\
		2> index.raw > file.nhtml \				@@@@\
	  && PostProcessTroffHTML(file.nhtml,$@@)
#else
#define MakeEqnHtmlDoc(file,srcs) /**/
#endif
#endif


d3871 2
a3872 2
all:: file.ps file.txt HtmlTarget(file) PdfTarget(file)			@@@@\
.PRECIOUS: file.ps							@@@@\
d3874 4
a3877 6
file.ps: deps								@@@@\
	-$(TROFF) $(MSMACROS) $(XDOCMACROS) srcs \			@@@@\
		2> index.raw > file.nps \				@@@@\
	&& PostProcessTroffPS(file.nps,$@@)				@@@@\
	@@if grep '^[^1-9.]' index.raw | grep -v warning; then exit 1; \	@@@@\
		else test $$? -le 1; fi					@@@@\
d3880 1
a3880 6
	$(NROFF) $(MSMACROS) $(XDOCMACROS) srcs 2> index.raw | \	@@@@\
		 $(COL) $(COLFLAGS) > $@@				@@@@\
									@@@@\
MakeDepSimpleHtmlDoc(file,deps,srcs)					@@@@\
									@@@@\
ConvertPsToPdf(file)							@@@@\
d3883 1
a3883 1
	$(RM) index.raw file.nps file.ps file.txt HtmlClean(file) PdfClean(file)
d3892 2
a3893 2
all:: file.ps file.txt HtmlTarget(file) PdfTarget(file)			@@@@\
.PRECIOUS: file.ps							@@@@\
d3895 4
a3898 6
file.ps: srcs								@@@@\
	-$(TBL) $(XDOCMACROS) srcs | $(TROFF) $(MSMACROS) \		@@@@\
		2> index.raw > file.nps \				@@@@\
	&& PostProcessTroffPS(file.nps,$@@)				@@@@\
	@@if grep '^[^1-9.]' index.raw | grep -v warning; then exit 1; \	@@@@\
		else test $$? -le 1; fi					@@@@\
d3901 1
a3901 6
	$(TBL) $(XDOCMACROS) srcs | $(NROFF) $(MSMACROS) 2> index.raw \	@@@@\
		| $(COL) $(COLFLAGS) > $@@				@@@@\
									@@@@\
MakeTblHtmlDoc(file,srcs)						@@@@\
									@@@@\
ConvertPsToPdf(file)							@@@@\
d3904 1
a3904 1
	$(RM) index.raw file.nps file.ps file.txt HtmlClean(file) PdfClean(file)
d3909 2
a3910 2
all:: file.ps file.txt HtmlTarget(file) PdfTarget(file)			@@@@\
.PRECIOUS: file.ps							@@@@\
d3912 4
a3915 6
file.ps: srcs								@@@@\
	-$(TBL) $(XDOCMACROS) srcs | $(EQN) | $(TROFF) $(MSMACROS) \	@@@@\
		2> index.raw > file.nps \				@@@@\
	&& PostProcessTroffPS(file.nps,$@@)				@@@@\
	@@if grep '^[^1-9.]' index.raw | grep -v warning; then exit 1; \	@@@@\
		else test $$? -le 1; fi					@@@@\
d3918 1
a3918 6
	$(TBL) $(XDOCMACROS) srcs | $(NEQN) | $(NROFF) $(MSMACROS) \	@@@@\
		2> index.raw | $(COL) $(COLFLAGS) > $@@			@@@@\
									@@@@\
MakeEqnHtmlDoc(file,srcs)						@@@@\
									@@@@\
ConvertPsToPdf(file)							@@@@\
d3921 1
a3921 1
	$(RM) index.raw file.nps file.ps file.txt HtmlClean(file) PdfClean(file)
d3926 1
a3926 1
all:: file.idx.ps							@@@@\
d3928 1
a3928 1
file.idx.ps: srcs index.raw						@@@@\
d3930 3
a3932 8
	grep '^[1-9]' index.raw | \					@@@@\
		(sort -f '-t:' -k2,2 -k1,1n 2>/dev/null || \		@@@@\
		 sort -f '-t:' +1 -3 +0n -1n) | \			@@@@\
		awk -f $(DOCUTILSRC)/fixindex.awk | \			@@@@\
		awk -f $(DOCUTILSRC)/block.awk > index.troff		@@@@\
	cat srcs $(XIDXMACROS) index.troff | \				@@@@\
		$(TROFF) -me > file.idx.nps && \			@@@@\
		$(MV) file.idx.nps $@@					@@@@\
d3936 1
a3936 1
	$(RM) index.troff index.pageno file.idx.nps file.idx.ps
d3941 2
a3942 2
#define MakeLatexDoc(file,src)						@@@@\
all:: file.ps PdfLatexTarget(file)					@@@@\
d3944 1
a3944 1
file.dvi: src								@@@@\
d3947 2
a3948 4
file.ps: file.dvi							@@@@\
	$(DVIPS) -o file.nps file && $(MV) file.nps $@@			@@@@\
									@@@@\
LatexToPdf(file)							@@@@\
d3950 3
a3952 4
clean::									@@@@\
	RemoveFiles(file.nps file.ps file.dvi file.log)			@@@@\
	RemoveFiles(file.aux file.toc file.lof file.lot)		@@@@\
	$(RM) PdfLatexClean(file)
d3954 1
a3954 1
#define MakeLatexDoc(file,src)						@@@@\
d3956 2
a3957 2
file.ps: src								@@@@\
	@@echo "cannot make file.ps: no latex on this system"; exit 1
d3965 2
a3966 3
	@@if [ -f name.ps -a X$(NOPS) = X ]; then set -x; \		@@@@\
	  $(INSTALL) $(INSTALLFLAGS) $(INSTDATFLAGS) name.ps \		@@@@\
		$(DESTDIR)$(DOCPSDIR); \				@@@@\
a3967 1
	RemoveOldFile(name.ps,name.PS,$(DOCPSDIR))			@@@@\
d3969 2
a3970 20
	@@if [ -f name.txt -a X$(NOTXT) = X ]; then set -x; \		@@@@\
	  $(INSTALL) $(INSTALLFLAGS) $(INSTDATFLAGS) name.txt \		@@@@\
		$(DESTDIR)$(DOCDIR); \					@@@@\
	fi								@@@@\
	RemoveOldFile(name.txt,name.TXT,$(DOCDIR))			@@@@\
	MakeDir($(DESTDIR)$(DOCHTMLDIR))				@@@@\
	@@if [ -f name.html -a X$(NOHTML) = X ]; then (set -x; \		@@@@\
	  $(INSTALL) $(INSTALLFLAGS) $(INSTDATFLAGS) name.html \	@@@@\
		$(DESTDIR)$(DOCHTMLDIR)); \				@@@@\
	  for i in name*.png; do \					@@@@\
	    if [ -f $$i ]; then (set -x; \				@@@@\
	      $(INSTALL) $(INSTALLFLAGS) $(INSTDATFLAGS) $$i \		@@@@\
		$(DESTDIR)$(DOCHTMLDIR)); \				@@@@\
	    fi; \							@@@@\
	  done; \							@@@@\
	fi								@@@@\
	MakeDir($(DESTDIR)$(DOCPDFDIR))					@@@@\
	@@if [ -f name.pdf -a X$(NOPDF) = X ]; then set -x; \		@@@@\
	  $(INSTALL) $(INSTALLFLAGS) $(INSTDATFLAGS) name.pdf \		@@@@\
		$(DESTDIR)$(DOCPDFDIR); \				@@@@\
d3975 1
a3975 1
#define InstallRoffDoc(name) InstallDoc(name,name.ps name.txt)
d3980 1
a3980 1
#define InstallLatexDoc(name) InstallDoc(name,name.ps)
d3988 1
a3988 3
all:: name.ps PdfTarget(name)						@@@@\
									@@@@\
name.ps: deps								@@@@\
d3990 2
a3991 2
	  RemoveFile(name.ps); \					@@@@\
	  gzip -d < name.PS.gz > name.ps; \				@@@@\
a3992 6
	@@if [ -f name.PS ]; then set -x; \				@@@@\
	  RemoveFile(name.ps); \					@@@@\
	  $(LN) name.PS name.ps; \					@@@@\
	fi								@@@@\
									@@@@\
ConvertPsToPdf(name)							@@@@\
d3995 3
a3997 1
	$(RM) name.ps PdfClean(name)					@@@@\
d4002 1
a4030 10

#if !HasFreetype2
      FT2PRELOADPATTERN = libfreetype.so.?
#endif
#if !HasFontconfig
       FCPRELOADPATTERN = libfontconfig.so.?
#endif
      XFTPRELOADPATTERN = libXft.so.?
  XRENDERPRELOADPATTERN = libXrender.so.?
    XFONTPRELOADPATTERN = libXfont*.so.?
@


1.1.1.7
log
@Import OpenBSD X-Window subsystem (based upon XFree86 4.4RC2)
into vendor branch
@
text
@d8 1
a8 1
XCOMM $XFree86: xc/config/cf/X11.tmpl,v 1.249 2004/02/16 18:14:33 dawes Exp $
d3742 2
a3743 7
	MakeDir($(DESTDIR)dest)						@@@@\
	@@if [ X$(STATIC_FONTS_SCALE) = X ]; then (set -x; \		@@@@\
	  RemoveFile($(DESTDIR)dest/fonts.scale); \			@@@@\
	  RunProgram(MKFONTSCALE, $(DESTDIR)dest)); \			@@@@\
	else (set -x; \							@@@@\
	  InstallInline(fonts.scale,$(INSTDATFLAGS),dest)); \		@@@@\
	fi								@@@@\
@


1.1.1.8
log
@OpenBSD updated X-Window plus fontconfig 2.2.2.
@
text
@d3260 1
a3260 1
#define SharedFontconfigRev 1.4
@


1.1.1.9
log
@OpenBSD XF4 tree (minus old and mit) as of today
-> lib and fvwm fixes
@
text
@a2425 4
#ifndef SharedOSMesaRev
#define SharedOSMesaRev 4.0
#endif

@


