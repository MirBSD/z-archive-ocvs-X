head	1.3;
access;
symbols
	tg-mergetmp-2:1.3
	cvs-200410241530:1.1.1.3
	cvs-200410012000:1.1.1.3
	cvs-200407141120:1.1.1.3
	cvs-200406231010:1.1.1.3
	MIRBSD_7quater:1.1.1.2
	cvs-200405271510:1.1.1.3
	XFree86_4_4_0:1.1.9.1
	cvs-200403021700:1.1.1.3
	XFREE86_20040213:1.1.9.1
	xc:1.1.9
	cvs-200401291925:1.1.1.2
	MIRBSD_7_ALPHA:1.1.1.2.0.4
	MIRBSD_7:1.1.1.2.0.2
	MIRBSD_7ter:1.1.1.2
	cvs-20011091815:1.1.1.2
	cvs-200309162130:1.1.1.2
	cvs-200308302005:1.1.1.2
	ctmx-0387:1.1.1.2
	ctmx-0384:1.1.1.2
	MIRBSD_5:1.1.1.2
	ctmx-0375:1.1.1.2
	ctmx-0373:1.1.1.2
	ctm-0371:1.1.1.2
	ctm-0370:1.1.1.2
	MIRBSD_4:1.1.1.2
	ctm-0363:1.1.1.2
	ctm-0359:1.1.1.2
	ctm-0349:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@ * @;


1.3
date	2004.03.02.20.10.41;	author tg;	state Stab;
branches;
next	1.2;

1.2
date	2004.01.31.02.17.24;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2003.03.22.19.59.29;	author tg;	state Exp;
branches
	1.1.1.1
	1.1.9.1;
next	;

1.1.1.1
date	2003.03.22.19.59.29;	author tg;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2003.04.08.18.17.26;	author tg;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	2004.03.02.17.21.00;	author tg;	state Exp;
branches;
next	;

1.1.9.1
date	2004.02.14.19.01.46;	author tg;	state Exp;
branches;
next	;


desc
@@


1.3
log
@semi-automatic merge and whitespace adjustment of OpenBSD XF4 subtree
@
text
@/* $MirBSD: imakemdep.h,v 1.2 2004/01/31 02:17:24 tg Exp $ */
/* $Xorg: imakemdep.h,v 1.6 2001/02/09 02:03:16 xorgcvs Exp $ */
/*

Copyright (c) 1993, 1994, 1998  The Open Group

Permission to use, copy, modify, distribute, and sell this software and its
documentation for any purpose is hereby granted without fee, provided that
the above copyright notice appear in all copies and that both that
copyright notice and this permission notice appear in supporting
documentation.

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
OPEN GROUP BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN
AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

Except as contained in this notice, the name of The Open Group shall not be
used in advertising or otherwise to promote the sale, use or other dealings
in this Software without prior written authorization from The Open Group.

*/
/* $XFree86: xc/config/imake/imakemdep.h,v 3.72 2003/12/30 01:53:52 tsi Exp $ */


/*
 * This file contains machine-dependent constants for the imake utility.
 * When porting imake, read each of the steps below and add in any necessary
 * definitions.  In general you should *not* edit ccimake.c or imake.c!
 */

#ifdef __UNIXOS2__
#define lstat stat
#endif

#ifdef CCIMAKE
/*
 * Step 1:  imake_ccflags
 *     Define any special flags that will be needed to get imake.c to compile.
 *     These will be passed to the compile along with the contents of the
 *     make variable BOOTSTRAPCFLAGS.
 */
#if defined(clipper) || defined(__clipper__)
#define imake_ccflags "-O -DSYSV -DBOOTSTRAPCFLAGS=-DSYSV"
#endif

#ifdef hpux
#ifdef hp9000s800
#define imake_ccflags "-DSYSV"
#else
#define imake_ccflags "-Wc,-Nd4000,-Ns3000 -DSYSV"
#endif
#endif

#if defined(macII) || defined(_AUX_SOURCE)
#define imake_ccflags "-DmacII -DSYSV"
#endif

#ifdef stellar
#define imake_ccflags "-DSYSV"
#endif

#if defined(USL) || defined(__USLC__) || defined(Oki) || defined(NCR)
#define imake_ccflags "-Xa -DSVR4"
#endif

/* SCO may define __USLC__ so put this after the USL check */
#if defined(M_UNIX) || defined(_SCO_DS)
#ifdef imake_ccflags
#undef imake_ccflags
#endif
#define imake_ccflags "-Dsco -DSYSV -DSCO -DSCO325"
#endif

#ifdef sony
#if defined(SYSTYPE_SYSV) || defined(_SYSTYPE_SYSV)
#define imake_ccflags "-DSVR4"
#else
#include <sys/param.h>
#if NEWSOS < 41
#define imake_ccflags "-Dbsd43 -DNOSTDHDRS"
#else
#if NEWSOS < 42
#define imake_ccflags "-Dbsd43"
#endif
#endif
#endif
#endif
#ifdef _CRAY
#define imake_ccflags "-DSYSV -DUSG"
#endif

#if defined(_IBMR2) || defined(aix)
#define imake_ccflags "-Daix -DSYSV"
#endif

#ifdef Mips
#  if defined(SYSTYPE_BSD) || defined(BSD) || defined(BSD43)
#    define imake_ccflags "-DBSD43"
#  else
#    define imake_ccflags "-DSYSV"
#  endif
#endif

#ifdef is68k
#define imake_ccflags "-Dluna -Duniosb"
#endif

#ifdef SYSV386
# ifdef SVR4
#  define imake_ccflags "-Xa -DSVR4"
# else
#  define imake_ccflags "-DSYSV"
# endif
#endif

#ifdef SVR4
# ifdef i386
#  define imake_ccflags "-Xa -DSVR4"
# endif
#endif

#ifdef SYSV
# ifdef i386
#  define imake_ccflags "-DSYSV"
# endif
#endif

#if defined(Lynx) || defined(__Lynx__)
#define imake_ccflags "-DLynx"
#endif /* Lynx */

#ifdef __convex__
#define imake_ccflags "-fn -tm c1"
#endif

#ifdef apollo
#define imake_ccflags "-DX_NOT_POSIX"
#endif

#ifdef WIN32
#if _MSC_VER < 1000
#define imake_ccflags "-nologo -batch -D__STDC__"
#else
#define imake_ccflags "-nologo -D__STDC__"
#endif
#endif

#ifdef __uxp__
#define imake_ccflags "-DSVR4 -DANSICPP"
#endif

#ifdef __sxg__
#define imake_ccflags "-DSYSV -DUSG -DNOSTDHDRS"
#endif

#ifdef _SEQUENT_
#define imake_ccflags "-Xa -DSVR4"
#endif

#if defined(SX) || defined(PC_UX)
#define imake_ccflags "-DSYSV"
#endif

#ifdef nec_ews_svr2
#define imake_ccflags "-DUSG"
#endif

#if defined(nec_ews_svr4) || defined(_nec_ews_svr4) || defined(_nec_up) || defined(_nec_ft)
#define imake_ccflags "-DSVR4"
#endif

#if defined(MACH) && !defined(__GNU__)
#define imake_ccflags "-DNOSTDHDRS"
#endif

/* this is for OS/2 under UNIXOS2. This won't work with DOS */
#if defined(__UNIXOS2__)
#define imake_ccflags "-DBSD43"
#endif

#if defined(__QNX__) && !defined(__QNXNTO__)
#define imake_ccflags "-D__QNX__ -D_i386"
#endif

#if defined(__QNXNTO__)
#define imake_ccflags "-D__QNXNTO__"
#endif

#else /* not CCIMAKE */
#ifndef MAKEDEPEND
/*
 * Step 2:  dup2
 *     If your OS doesn't have a dup2() system call to duplicate one file
 *     descriptor onto another, define such a mechanism here (if you don't
 *     already fall under the existing category(ies).
 */
#if defined(SYSV) && !defined(_CRAY) && !defined(Mips) && !defined(_SEQUENT_) && !defined(sco)
#define	dup2(fd1,fd2)	((fd1 == fd2) ? fd1 : (close(fd2), \
					       fcntl(fd1, F_DUPFD, fd2)))
#endif


/*
 * Step 3:  FIXUP_CPP_WHITESPACE
 *     If your cpp collapses tabs in macro expansions into a single space and
 *     replaces escaped newlines with a space, define this symbol.  This will
 *     cause imake to attempt to patch up the generated Makefile by looking
 *     for lines that have colons in them (this is why the rules file escapes
 *     all colons).  One way to tell if you need this is to see whether or not
 *     your Makefiles have no tabs in them and lots of @@@@ strings.
 */
#if defined(sun) || defined(SYSV) || defined(SVR4) || defined(hcx) || defined(WIN32) || defined(sco) || (defined(AMOEBA) && defined(CROSS_COMPILE)) || defined(__QNX__) || defined(__sgi) || defined(__UNIXOS2__)
#define FIXUP_CPP_WHITESPACE
#endif
#ifdef WIN32
#define REMOVE_CPP_LEADSPACE
#define INLINE_SYNTAX
#define MAGIC_MAKE_VARS
#endif
#ifdef __minix_vmd
#define FIXUP_CPP_WHITESPACE
#endif

#if defined(Lynx)
/* On LynxOS 2.4.0 imake gets built with the old "legacy"
 * /bin/cc which has a rather pedantic builtin preprocessor.
 * Using a macro which is not #defined (as in Step 5
 * below) flags an *error*
 */
#define __NetBSD_Version__ 0
#endif

/*
 * Step 4:  USE_CC_E, DEFAULT_CC, DEFAULT_CPP
 *     If you want to use cc -E instead of cpp, define USE_CC_E.
 *     If use cc -E but want a different compiler, define DEFAULT_CC.
 *     If the cpp you need is not in /lib/cpp, define DEFAULT_CPP.
 */
#if !defined (CROSSCOMPILE) || defined (CROSSCOMPILE_CPP)

#if defined(__APPLE__)
#define DEFAULT_CPP "/usr/bin/cpp"
#define DEFAULT_CC "cc"
#endif
#if defined(Lynx) || defined(__Lynx__)
#define DEFAULT_CC "gcc"
#define USE_CC_E
#endif
#ifdef hpux
#define USE_CC_E
#endif
#ifdef WIN32
#define USE_CC_E
#define DEFAULT_CC "cl"
#endif
#ifdef apollo
#define DEFAULT_CPP "/usr/lib/cpp"
#endif
#if defined(clipper) || defined(__clipper__)
#define DEFAULT_CPP "/usr/lib/cpp"
#endif
#if defined(_IBMR2) && !defined(DEFAULT_CPP)
#define DEFAULT_CPP "/usr/ccs/lib/cpp"
#endif
#if defined(sun) && (defined(SVR4) || defined(__svr4__) || defined(__SVR4) || defined(__sol__))
#define DEFAULT_CPP "/usr/ccs/lib/cpp"
#endif
#ifdef __bsdi__
#define DEFAULT_CPP "/usr/bin/cpp"
#endif
#ifdef __uxp__
#define DEFAULT_CPP "/usr/ccs/lib/cpp"
#endif
#ifdef __sxg__
#define DEFAULT_CPP "/usr/lib/cpp"
#endif
#ifdef _CRAY
#define DEFAULT_CPP "/lib/pcpp"
#endif
#if defined(__386BSD__)
#define DEFAULT_CPP "/usr/libexec/cpp"
#endif
#if defined(__FreeBSD__)  || defined(__NetBSD__) || defined(__OpenBSD__)
#define USE_CC_E
#endif
#if defined(__sgi) && defined(__ANSI_CPP__)
#define USE_CC_E
#endif
#if defined(MACH) && !defined(__GNU__)
#define USE_CC_E
#endif
#ifdef __minix_vmd
#define DEFAULT_CPP "/usr/lib/cpp"
#endif
#if defined(__UNIXOS2__)
/* expects cpp in PATH */
#define DEFAULT_CPP "cpp"
#endif
#ifdef __CYGWIN__
#define DEFAULT_CC "gcc"
#define DEFAULT_CPP "/usr/bin/cpp"
#endif
#if defined (__QNX__)
#ifdef __QNXNTO__
#define DEFAULT_CPP "/usr/bin/cpp"
#else
#define DEFAULT_CPP "/usr/X11R6/bin/cpp"
#endif
#endif
#if defined(__GNUC__) && !defined(USE_CC_E)
#define USE_CC_E
#ifndef DEFAULT_CC
#define DEFAULT_CC "gcc"
#endif
#endif

#endif /* !defined (CROSSCOMPILE) || defined (CROSSCOMPILE_CPP) */
/*
 * Step 5:  cpp_argv
 *     The following table contains the flags that should be passed
 *     whenever a Makefile is being generated.  If your preprocessor
 *     doesn't predefine any unique symbols, choose one and add it to the
 *     end of this table.  Then, do the following:
 *
 *         a.  Use this symbol in Imake.cf when setting MacroFile.
 *         b.  Put this symbol in the definition of BootstrapCFlags in your
 *             <platform>.cf file.
 *         c.  When doing a make World, always add "BOOTSTRAPCFLAGS=-Dsymbol"
 *             to the end of the command line.
 *
 *     Note that you may define more than one symbol (useful for platforms
 *     that support multiple operating systems).
 */

#define	ARGUMENTS 50	/* number of arguments in various arrays */
#if !defined (CROSSCOMPILE) || defined (CROSSCOMPILE_CPP)
char *cpp_argv[ARGUMENTS] = {
	"cc",		/* replaced by the actual program to exec */
	"-I.",		/* add current directory to include path */
#if !defined(__NetBSD_Version__) || __NetBSD_Version__ < 103080000
#ifdef unix
	"-Uunix",	/* remove unix symbol so that filename unix.c okay */
#endif
#endif
#if defined(__386BSD__) || defined(__NetBSD__) || defined(__OpenBSD__) || \
    defined(__FreeBSD__) || defined(MACH) || defined(linux) || \
    defined(__GNU__) || defined(__bsdi__) || defined(__GNUC__)
# ifdef __i386__
	"-D__i386__",
#  if defined(__GNUC__) && (__GNUC__ >= 3)
	"-m32",
#  endif
# endif
# ifdef __i486__
	"-D__i486__",
# endif
# ifdef __i586__
	"-D__i586__",
# endif
# ifdef __i686__
	"-D__i686__",
# endif
# ifdef __k6__
	"-D__k6__",
# endif
# ifdef __ia64__
	"-D__ia64__",
# endif
# ifdef __AMD64__
	"-D__AMD64__",
# endif
# ifdef __amd64__
	"-D__amd64__",
# endif
# ifdef __x86_64__
	"-D__AMD64__",
# endif
# ifdef __s390__
	"-D__s390__",
# endif
# ifdef __alpha__
	"-D__alpha__",
# endif
# ifdef __arm__
	"-D__arm__",
# endif
# ifdef __s390x__
       "-D__s390x__",
# endif
# ifdef __sparc__
	"-D__sparc__",
# endif
# ifdef __m68k__
	"-D__m68k__",
# endif
# ifdef __sh__
	"-D__sh__",
# endif
# ifdef __sh3__
	"-D__sh3__",
# endif
# ifdef __SH3__
	"-D__SH3__",
# endif
# ifdef __SH4__
	"-D__SH4__",
# endif
# ifdef __SH4NOFPU__
	"-D__SH4_NOFPU__",
# endif
# ifdef __GNUC__
	"-traditional",
# endif
#endif
#ifdef M4330
	"-DM4330",	/* Tektronix */
#endif
#ifdef M4310
	"-DM4310",	/* Tektronix */
#endif
#if defined(macII) || defined(_AUX_SOURCE)
	"-DmacII",	/* Apple A/UX */
#endif
#if defined(USL) || defined(__USLC__)
	"-DUSL",	/* USL */
#endif
#ifdef sony
	"-Dsony",	/* Sony */
#if !defined(SYSTYPE_SYSV) && !defined(_SYSTYPE_SYSV) && NEWSOS < 42
	"-Dbsd43",
#endif
#endif
#ifdef _IBMR2
	"-D_IBMR2",	/* IBM RS-6000 (we ensured that aix is defined above */
#ifndef aix
#define aix		/* allow BOOTSTRAPCFLAGS="-D_IBMR2" */
#endif
#endif /* _IBMR2 */
#ifdef aix
	"-Daix",	/* AIX instead of AOS */
#ifndef ibm
#define ibm		/* allow BOOTSTRAPCFLAGS="-Daix" */
#endif
#endif /* aix */
#ifdef ibm
	"-Dibm",	/* IBM PS/2 and RT under both AOS and AIX */
#endif
#ifdef luna
	"-Dluna",	/* OMRON luna 68K and 88K */
#ifdef luna1
	"-Dluna1",
#endif
#ifdef luna88k		/* need not on UniOS-Mach Vers. 1.13 */
	"-traditional", /* for some older version            */
#endif			/* instead of "-DXCOMM=\\#"          */
#ifdef uniosb
	"-Duniosb",
#endif
#ifdef uniosu
	"-Duniosu",
#endif
#endif /* luna */
#ifdef _CRAY		/* Cray */
	"-Ucray",
#endif
#ifdef Mips
	"-DMips",	/* Define and use Mips for Mips Co. OS/mach. */
# if defined(SYSTYPE_BSD) || defined(BSD) || defined(BSD43)
	"-DBSD43",	/* Mips RISCOS supports two environments */
# else
	"-DSYSV",	/* System V environment is the default */
# endif
#endif /* Mips */
#ifdef MOTOROLA
	"-DMOTOROLA",    /* Motorola Delta Systems */
# ifdef SYSV
	"-DSYSV",
# endif
# ifdef SVR4
	"-DSVR4",
# endif
#endif /* MOTOROLA */
#if defined(M_UNIX) || defined(sco)
	"-Dsco",
	"-DSYSV",
#endif
#ifdef i386
	"-Di386",
# ifdef SVR4
	"-DSVR4",
# endif
# ifdef SYSV
	"-DSYSV",
#  ifdef ISC
	"-DISC",
#   ifdef ISC40
	"-DISC40",       /* ISC 4.0 */
#   else
#    ifdef ISC202
	"-DISC202",      /* ISC 2.0.2 */
#    else
#     ifdef ISC30
	"-DISC30",       /* ISC 3.0 */
#     else
	"-DISC22",       /* ISC 2.2.1 */
#     endif
#    endif
#   endif
#  endif
#  ifdef SCO
	"-DSCO",
#   ifdef _SCO_DS
    "-DSCO325",
#   endif
#  endif
# endif
# ifdef ESIX
	"-DESIX",
# endif
# ifdef ATT
	"-DATT",
# endif
# ifdef DELL
	"-DDELL",
# endif
#endif
#ifdef SYSV386           /* System V/386 folks, obsolete */
	"-Di386",
# ifdef SVR4
	"-DSVR4",
# endif
# ifdef ISC
	"-DISC",
#  ifdef ISC40
	"-DISC40",       /* ISC 4.0 */
#  else
#   ifdef ISC202
	"-DISC202",      /* ISC 2.0.2 */
#   else
#    ifdef ISC30
	"-DISC30",       /* ISC 3.0 */
#    else
	"-DISC22",       /* ISC 2.2.1 */
#    endif
#   endif
#  endif
# endif
# ifdef SCO
	"-DSCO",
#  ifdef _SCO_DS
	"-DSCO325",
#  endif
# endif
# ifdef ESIX
	"-DESIX",
# endif
# ifdef ATT
	"-DATT",
# endif
# ifdef DELL
	"-DDELL",
# endif
#endif
#ifdef __osf__
	"-D__osf__",
# ifdef __mips__
	"-D__mips__",
# endif
# ifdef __alpha
	"-D__alpha",
# endif
# ifdef __amiga__
	"-D__amiga__",
# endif
# ifdef __alpha__
	"-D__alpha__",
# endif
# ifdef __i386__
	"-D__i386__",
# endif
# ifdef __GNUC__
	"-traditional",
# endif
#endif
#ifdef Oki
	"-DOki",
#endif
#ifdef sun
#if defined(SVR4) || defined(__svr4__) || defined(__SVR4) || defined(__sol__)
	"-DSVR4",
#endif
#endif
#ifdef WIN32
	"-DWIN32",
	"-nologo",
#if _MSC_VER < 1000
	"-batch",
#endif
	"-D__STDC__",
#endif
#ifdef NCR
	"-DNCR",	/* NCR */
#endif
#ifdef linux
        "-Dlinux",
#endif
#if defined(__CYGWIN__)
        "-traditional",
#endif
#if defined(Lynx) || defined(__Lynx__)
        "-traditional",
#if 0
        "-DLYNX",		/* do we really need this?? */
#endif
	"-DLynx",
# ifdef ppc
	"-Dppc",
# endif
# if defined(m68k)  || defined(M68k) || defined(m68040)
	"-Dm68k",
	"-DM68k",
# endif
# ifdef uSPARC1
	"-Dsparc",
# endif
#endif
#ifdef __uxp__
	"-D__uxp__",
#endif
#ifdef __sxg__
	"-D__sxg__",
#endif
#ifdef nec_ews_svr2
	"-Dnec_ews_svr2",
#endif
#ifdef AMOEBA
	"-DAMOEBA",
# ifdef CROSS_COMPILE
	"-DCROSS_COMPILE",
#  ifdef CROSS_i80386
	"-Di80386",
#  endif
#  ifdef CROSS_sparc
	"-Dsparc",
#  endif
#  ifdef CROSS_mc68000
	"-Dmc68000",
#  endif
# else
#  ifdef i80386
	"-Di80386",
#  endif
#  ifdef sparc
	"-Dsparc",
#  endif
#  ifdef mc68000
	"-Dmc68000",
#  endif
# endif
#endif
#if defined(__sgi) && defined(__ANSI_CPP__)
	"-cckr",
#endif
#ifdef __minix_vmd
	"-Dminix",
#endif

#if defined(__UNIXOS2__)
	"-traditional",
	"-Demxos2",
#endif
#ifdef MetroLink
	"-DMetroLink",
# ifdef SVR4
	"-DSVR4",
# endif
# ifdef __powerpc__
	"-D__powerpc__",
# endif
# ifdef PowerMAX_OS
	"-DPowerMAX_OS",
# endif
#endif
#if defined (__QNX__) && !defined(__QNXNTO__)
        "-traditional",
        "-D__QNX__",
#endif

#if defined(__QNXNTO__)
        "-traditional",
        "-D__QNXNTO__",
#if defined(i386)
        "-Di386",
#endif
#if defined(__i386__)
        "-D__i386__",
#endif
#if defined(PPC)
        "-DPPC",
#endif
#if defined(MIPS)
        "-DMIPS",
#endif
#endif

#if defined(__APPLE__)
        "-D__APPLE__",
        "-D__DARWIN__",
# ifdef __ppc__
        "-D__ppc__",
# endif
# ifdef __i386__
        "-D__i386__",
# endif
#endif
};
#endif /* CROSSCOMPILE */


/*
 * Step 6: DEFAULT_OS_MAJOR_REV, DEFAULT_OS_MINOR_REV, DEFAULT_OS_TEENY_REV,
 *	and DEFAULT_OS_NAME.
 *	If your system provides a way to generate the default major,
 *	minor, teeny, or system names at runtime add commands below.
 *	The syntax of the _REV strings is 'f fmt' where 'f' is an argument
 *	you would give to uname, and "fmt" is a scanf() format string.
 *	Supported uname arguments are "snrvm", and if you specify multiple
 *	arguments they will be separated by spaces.  No more than 5 arguments
 *	may be given.  Unlike uname() order of arguments matters.
 *
 *	DEFAULT_OS_MAJOR_REV_FROB, DEFAULT_OS_MINOR_REV_FROB,
 *	DEFAULT_OS_TEENY_REV_FROB, and DEFAULT_OS_NAME_FROB can be used to
 *	modify the results of the use of the various strings.
 */
#if !defined CROSSCOMPILE || defined CROSSCOMPILE_CPP
# if defined(aix)
/* uname -v returns "x" (e.g. "4"), and uname -r returns "y" (e.g. "1") */
#  define DEFAULT_OS_MAJOR_REV	"v %[0-9]"
#  define DEFAULT_OS_MINOR_REV	"r %[0-9]"
/* No information available to generate default OSTeenyVersion value. */
#  define DEFAULT_OS_NAME	"srvm %[^\n]"
# elif defined(sun) || defined(sgi) || defined(ultrix) || defined(__uxp__) || defined(sony)
/* uname -r returns "x.y[.z]", e.g. "5.4" or "4.1.3" */
#  define DEFAULT_OS_MAJOR_REV	"r %[0-9]"
#  define DEFAULT_OS_MINOR_REV	"r %*d.%[0-9]"
#  define DEFAULT_OS_TEENY_REV	"r %*d.%*d.%[0-9]"
#  define DEFAULT_OS_NAME	"srvm %[^\n]"
# elif defined(hpux)
/* uname -r returns "W.x.yz", e.g. "B.10.01" */
#  define DEFAULT_OS_MAJOR_REV	"r %*[^.].%[0-9]"
#  define DEFAULT_OS_MINOR_REV	"r %*[^.].%*d.%1s"
#  define DEFAULT_OS_TEENY_REV	"r %*[^.].%*d.%*c%[0-9]"
#  define DEFAULT_OS_NAME	"srvm %[^\n]"
# elif defined(USL) || defined(__USLC__)
/* uname -v returns "x.yz" or "x.y.z", e.g. "2.02" or "2.1.2". */
#  define DEFAULT_OS_MAJOR_REV	"v %[0-9]"
#  define DEFAULT_OS_MINOR_REV	"v %*d.%1s"
#  define DEFAULT_OS_TEENY_REV	"v %*d.%*c%[.0-9]"
#  define DEFAULT_OS_NAME	"srvm %[^\n]"
# elif defined(__APPLE__)
/* uname -v returns "x.yz" or "x.y.z", e.g. "2.02" or "2.1.2". */
#  define DEFAULT_OS_MAJOR_REV	"r %[0-9]"
#  define DEFAULT_OS_MINOR_REV	"r %*d.%[0-9]"
#  define DEFAULT_OS_TEENY_REV	"r %*d.%*d.%[0-9]" /* this will just get 0 */
#  define DEFAULT_OS_NAME	"s %[^\n]"
# elif defined(__osf__)
/* uname -r returns "Wx.y", e.g. "V3.2" or "T4.0" */
#  define DEFAULT_OS_MAJOR_REV	"r %*[^0-9]%[0-9]"
#  define DEFAULT_OS_MINOR_REV	"r %*[^.].%[0-9]"
#  define DEFAULT_OS_NAME	"srvm %[^\n]"
# elif defined(__uxp__)
/* NOTE: "x.y[.z]" above handles UXP/DF.  This is a sample alternative. */
/* uname -v returns "VxLy Yzzzzz ....", e.g. "V20L10 Y95021 Increment 5 ..." */
#  define DEFAULT_OS_MAJOR_REV	"v V%[0-9]"
#  define DEFAULT_OS_MINOR_REV	"v V%*dL%[0-9]"
#  define DEFAULT_OS_NAME	"srvm %[^\n]"
# elif defined(linux) || defined(__bsdi__)
#  define DEFAULT_OS_MAJOR_REV	"r %[0-9]"
#  define DEFAULT_OS_MINOR_REV	"r %*d.%[0-9]"
#  define DEFAULT_OS_TEENY_REV	"r %*d.%*d.%[0-9]"
#  define DEFAULT_OS_NAME	"srm %[^\n]"
#  if defined(linux) && defined  (CROSSCOMPILE_CPP)
#   define CROSS_UTS_SYSNAME "Linux"
#   include <linux/version.h>
#   define CROSS_UTS_RELEASE UTS_RELEASE
# endif
# elif defined(__CYGWIN__)
#  define DEFAULT_OS_MAJOR_REV	"r %[0-9]"
#  define DEFAULT_OS_MINOR_REV	"r %*d.%[0-9]"
#  define DEFAULT_OS_TEENY_REV	"r %*d.%*d.%[0-9]"
#  define DEFAULT_OS_NAME	"srm %[^\n]"
#  if defined(__CYGWIN__) && defined  (CROSSCOMPILE_CPP)
#   define CROSS_UTS_SYSNAME "Cygwin"
#   include <cygwin/version.h>
#   define CROSS_UTS_RELEASE "1.3.12"
#  endif
# elif defined(__GNU__)
#  define DEFAULT_OS_MAJOR_REV	"r %[0-9]"
#  define DEFAULT_OS_MINOR_REV	"r %*d.%[0-9]"
#  define DEFAULT_OS_NAME	"srm %[^\n]"
# elif defined(ISC)
/* ISC all Versions ? */
/* uname -r returns "x.y", e.g. "3.2" ,uname -v returns "x" e.g. "2" */
#  define DEFAULT_OS_MAJOR_REV   "r %[0-9]"
#  define DEFAULT_OS_MINOR_REV   "r %*d.%[0-9]"
#  define DEFAULT_OS_TEENY_REV   "v %[0-9]"
/* # define DEFAULT_OS_NAME        "srm %[^\n]" */ /* Not useful on ISC */
# elif defined(__FreeBSD__) || defined(__OpenBSD__)
/* BSD/OS too? */
/* uname -r returns "x.y[.z]-mumble", e.g. "2.1.5-RELEASE" or "2.2-0801SNAP" */
#  define DEFAULT_OS_MAJOR_REV   "r %[0-9]"
#  define DEFAULT_OS_MINOR_REV   "r %*d.%[0-9]"
#  ifdef __MirBSD__
#   define DEFAULT_OS_TEENY_REV  "l %*c%*[0-9]%*c%[0-9A-F]"
#   define DEFAULT_OS_TEENY_REV_FROB(buf, size)				\
	do {								\
		int v;							\
									\
		sscanf(buf, "%x", &v);					\
		snprintf(buf, size, "%d", v);				\
	} while(0)
#  else
#   define DEFAULT_OS_TEENY_REV  "r %*d.%*d.%[0-9]"
#  endif
#  define DEFAULT_OS_NAME        "srm %[^\n]"
#  if defined(__FreeBSD__)
/* Use an alternate way to find the teeny version for -STABLE, -SNAP versions */
#   ifndef CROSSCOMPILE_CPP
#    define DEFAULT_OS_TEENY_REV_FROB(buf, size)			\
      do {								\
	if (*buf == 0) {						\
		int __mib[2];						\
		size_t __len;						\
		int __osrel;						\
									\
		__mib[0] = CTL_KERN;					\
		__mib[1] = KERN_OSRELDATE;				\
		__len = sizeof(__osrel);				\
		sysctl(__mib, 2, &__osrel, &__len, NULL, 0);		\
		if (__osrel < 210000) {					\
			if (__osrel < 199607)				\
				buf[0] = '0';				\
			else if (__osrel < 199612)			\
				buf[0] = '5';				\
			else if (__osrel == 199612)			\
				buf[0] = '6';				\
			else						\
				buf[0] = '8'; /* guess */		\
		} else {						\
			buf[0] = ((__osrel / 1000) % 10) + '0';		\
		}							\
		buf[1] = 0;						\
	}								\
     } while (0)
#   endif
#  else
   /* OpenBSD - Add DEFAULT_MACHINE_ARCHITECTURE */
#   define DEFAULT_MACHINE_ARCHITECTURE "m %[^\n]"
#  endif
# elif defined(__NetBSD__)
/*
 * uname -r returns "x.y([ABCD...]|_mumble)", e.g.:
 *	1.2	1.2_BETA	1.2A	1.2B
 *
 * That means that we have to do something special to turn the
 * TEENY revision into a form that we can use (i.e., a string of
 * decimal digits).
 *
 * We also frob the name DEFAULT_OS_NAME so that it looks like the
 * 'standard' NetBSD name for the version, e.g. "NetBSD/i386 1.2B" for
 * NetBSD 1.2B on an i386.
 */
#  define DEFAULT_OS_MAJOR_REV   "r %[0-9]"
#  define DEFAULT_OS_MINOR_REV   "r %*d.%[0-9]"
#  define DEFAULT_OS_TEENY_REV   "r %*d.%*d%[A-Z]"
#  define DEFAULT_OS_TEENY_REV_FROB(buf, size)				\
    do {								\
	int	teeny = 0;						\
	char	*ptr = (buf);						\
									\
	while (*ptr >= 'A' && *ptr <= 'Z') /* sanity check */		\
	    teeny = teeny * 26 + (int)(*ptr++ - 'A');			\
									\
	snprintf((buf), (size), "%d", teeny + 1);			\
    } while (0)
#  define DEFAULT_OS_NAME        "smr %[^\n]"
#  define DEFAULT_OS_NAME_FROB(buf, size)				\
    do {								\
	char *__sp;							\
	if ((__sp = strchr((buf), ' ')) != NULL)			\
		*__sp = '/';						\
    } while (0)
# elif defined(__Lynx__) || defined(Lynx)
/* Lynx 2.4.0 /bin/cc doesn't like #elif */
#  define DEFAULT_OS_MAJOR_REV   "r %[0-9]"
#  define DEFAULT_OS_MINOR_REV   "r %*d.%[0-9]"
#  define DEFAULT_OS_TEENY_REV   "r %*d.%*d.%[0-9]"
#  define DEFAULT_OS_NAME        "srm %[^\n]"
# elif defined(_SEQUENT_)
/* uname -v returns 'Vx.y.z', e.g. 'V4.4.2' */
#  define DEFAULT_OS_MAJOR_REV	"v V%[0-9]"
#  define DEFAULT_OS_MINOR_REV	"v V%*d.%[0-9]"
#  define DEFAULT_OS_TEENY_REV	"v V%*d.%*d.%[0-9]"
#  define DEFAULT_OS_NAME	"s %[^\n]"
# endif
#endif /* !defined CROSSCOMPILE || defined CROSSCOMPILE_CPP */

# if defined (CROSSCOMPILE_CPP)
#  ifndef CROSS_UTS_SYSNAME
char *cross_uts_sysname = "";
#  else
char *cross_uts_sysname = CROSS_UTS_SYSNAME;
#  endif
#  ifndef CROSS_UTS_RELEASE
char* cross_uts_release = "";
#  else
char* cross_uts_release = CROSS_UTS_RELEASE;
#  endif
#  ifndef CROSS_UTS_MACHINE
char *cross_uts_machine = "";
#  else
char *cross_uts_machine = CROSS_UTS_MACHINE;
#  endif
#  ifndef CROSS_UTS_VERSION
char * cross_uts_version = "";
#  else
char * cross_uts_version = CROSS_UTS_VERSION;
#  endif
#  ifdef DEFAULT_OS_NAME
char *defaultOsName = DEFAULT_OS_NAME;
#  else
char *defaultOsName = NULL;
# endif
#  ifdef DEFAULT_OS_MAJOR_REV
char *defaultOsMajorRev = DEFAULT_OS_MAJOR_REV;
#  else
char *defaultOsMajorRev = NULL;
# endif
#  ifdef DEFAULT_OS_MINOR_REV
char *defaultOsMinorRev = DEFAULT_OS_MINOR_REV;
#  else
char *defaultOsMinorRev = NULL;
#  endif
#  ifdef DEFAULT_OS_TEENY_REV
char *defaultOsTeenyRev = DEFAULT_OS_TEENY_REV;
#  else
char *defaultOsTeenyRev = NULL;
#  endif
#  ifdef DEFAULT_MACHINE_ARCHITECTURE
char *defaultMachineArchitecture = DEFAULT_MACHINE_ARCHITECTURE;
#  else
char *defaultMachineArchitecture = NULL;
#  endif
# ifdef DEFAULT_OS_NAME_FROB
void defaultOsNameFrob(char *buf, int size)
{DEFAULT_OS_NAME_FROB(buf,size)}
# else
void (*defaultOsNameFrob)(char *buf, int size) = NULL;
# endif
# ifdef DEFAULT_OS_MAJOR_REV_FROB
void defaultOsMajorRevFrob(char *buf, int size)
{DEFAULT_OS_MAJOR_REV_FROB(buf,size)}
# else
void (*defaultOsMajorRevFrob)(char *buf, int size) = NULL;
# endif
# ifdef DEFAULT_OS_MINOR_REV_FROB
void defaultOsMinorRevFrob(char *buf, int size)
{DEFAULT_OS_MINOR_REV_FROB(buf,size)}
# else
void (*defaultOsMinorRevFrob)(char *buf, int size) = NULL;
# endif
# ifdef DEFAULT_OS_TEENY_REV_FROB
void defaultOsTeenyRevFrob(char *buf, int size)
{DEFAULT_OS_TEENY_REV_FROB(buf,size)}
# else
void (*defaultOsTeenyRevFrob)(char *buf, int size) = NULL;
# endif
# endif /* CROSSCOMPILE_CPP */

#else /* else MAKEDEPEND */
#if !defined (CROSSCOMPILE) || defined (CROSSCOMPILE_CPP)
/*
 * Step 7:  predefs
 *     If your compiler and/or preprocessor define any specific symbols, add
 *     them to the the following table.  The definition of struct symtab is
 *     in util/makedepend/def.h.
 */
#undef DEF_EVALUATE
#undef DEF_STRINGIFY
#define DEF_EVALUATE(__x) #__x
#define DEF_STRINGIFY(_x) DEF_EVALUATE(_x)
struct symtab	predefs[] = {
#ifdef apollo
	{"apollo", "1"},
#endif
#if defined(clipper) || defined(__clipper__)
	{"clipper", "1"},
	{"__clipper__", "1"},
	{"clix", "1"},
	{"__clix__", "1"},
#endif
#ifdef ibm032
	{"ibm032", "1"},
#endif
#ifdef ibm
	{"ibm", "1"},
#endif
#ifdef aix
	{"aix", "1"},
#endif
#ifdef sun
	{"sun", "1"},
#endif
#ifdef sun2
	{"sun2", "1"},
#endif
#ifdef sun3
	{"sun3", "1"},
#endif
#ifdef sun4
	{"sun4", "1"},
#endif
#ifdef sparc
	{"sparc", "1"},
#endif
#ifdef __sparc
	{"__sparc", "1"},
#endif
#ifdef __sparcv9
	{"__sparcv9", "1"},
#endif
#ifdef __sparc__
	{"__sparc__", "1"},
#endif
#ifdef __sparcv9__
	{"__sparcv9__", "1"},
#endif
#ifdef hpux
	{"hpux", "1"},
#endif
#ifdef __hpux
	{"__hpux", "1"},
#endif
#ifdef __hp9000s800
	{"__hp9000s800", "1"},
#endif
#ifdef __hp9000s700
	{"__hp9000s700", "1"},
#endif
#ifdef vax
	{"vax", "1"},
#endif
#ifdef VMS
	{"VMS", "1"},
#endif
#ifdef cray
	{"cray", "1"},
#endif
#ifdef CRAY
	{"CRAY", "1"},
#endif
#ifdef _CRAY
	{"_CRAY", "1"},
#endif
#ifdef att
	{"att", "1"},
#endif
#ifdef mips
	{"mips", "1"},
#endif
#ifdef __mips__
	{"__mips__", "1"},
#endif
#ifdef ultrix
	{"ultrix", "1"},
#endif
#ifdef stellar
	{"stellar", "1"},
#endif
#ifdef mc68000
	{"mc68000", "1"},
#endif
#ifdef mc68020
	{"mc68020", "1"},
#endif
#ifdef __GNUC__
	{"__GNUC__", DEF_STRINGIFY(__GNUC__)},
#endif
#ifdef __STRICT_ANSI__
	{"__STRICT_ANSI__", "1"},
#endif
#ifdef __STDC__
	{"__STDC__", DEF_STRINGIFY(__STDC__)},
#endif
#ifdef __HIGHC__
	{"__HIGHC__", "1"},
#endif
#ifdef CMU
	{"CMU", "1"},
#endif
#ifdef luna
	{"luna", "1"},
#ifdef luna1
	{"luna1", "1"},
#endif
#ifdef luna2
	{"luna2", "1"},
#endif
#ifdef luna88k
	{"luna88k", "1"},
#endif
#ifdef uniosb
	{"uniosb", "1"},
#endif
#ifdef uniosu
	{"uniosu", "1"},
#endif
#endif
#ifdef ieeep754
	{"ieeep754", "1"},
#endif
#ifdef is68k
	{"is68k", "1"},
#endif
#ifdef m68k
        {"m68k", "1"},
#endif
#ifdef M68k
        {"M68k", "1"},
#endif
#ifdef __m68k__
	{"__m68k__", "1"},
#endif
#ifdef m88k
        {"m88k", "1"},
#endif
#ifdef __m88k__
	{"__m88k__", "1"},
#endif
#ifdef bsd43
	{"bsd43", "1"},
#endif
#ifdef hcx
	{"hcx", "1"},
#endif
#ifdef sony
	{"sony", "1"},
#ifdef SYSTYPE_SYSV
	{"SYSTYPE_SYSV", "1"},
#endif
#ifdef _SYSTYPE_SYSV
	{"_SYSTYPE_SYSV", "1"},
#endif
#endif
#ifdef __OSF__
	{"__OSF__", "1"},
#endif
#ifdef __osf__
	{"__osf__", "1"},
#endif
#ifdef __amiga__
	{"__amiga__", "1"},
#endif
#ifdef __alpha
	{"__alpha", "1"},
#endif
#ifdef __alpha__
	{"__alpha__", "1"},
#endif
#ifdef __DECC
	{"__DECC",  "1"},
#endif
#ifdef __decc
	{"__decc",  "1"},
#endif
#ifdef __unix__
	{"__unix__", "1"},
#endif
#ifdef __uxp__
	{"__uxp__", "1"},
#endif
#ifdef __sxg__
	{"__sxg__", "1"},
#endif
#ifdef _SEQUENT_
	{"_SEQUENT_", "1"},
	{"__STDC__", "1"},
#endif
#ifdef __bsdi__
	{"__bsdi__", "1"},
#endif
#ifdef nec_ews_svr2
	{"nec_ews_svr2", "1"},
#endif
#ifdef nec_ews_svr4
	{"nec_ews_svr4", "1"},
#endif
#ifdef _nec_ews_svr4
	{"_nec_ews_svr4", "1"},
#endif
#ifdef _nec_up
	{"_nec_up", "1"},
#endif
#ifdef SX
	{"SX", "1"},
#endif
#ifdef nec
	{"nec", "1"},
#endif
#ifdef _nec_ft
	{"_nec_ft", "1"},
#endif
#ifdef PC_UX
	{"PC_UX", "1"},
#endif
#ifdef sgi
	{"sgi", "1"},
#endif
#ifdef __sgi
	{"__sgi", "1"},
#endif
#ifdef _MIPS_FPSET
	{"_MIPS_FPSET", DEF_STRINGIFY(_MIPS_FPSET)},
#endif
#ifdef _MIPS_ISA
	{"_MIPS_ISA", DEF_STRINGIFY(_MIPS_ISA)},
#endif
#ifdef _MIPS_SIM
	{"_MIPS_SIM", DEF_STRINGIFY(_MIPS_SIM)},
#endif
#ifdef _MIPS_SZINT
	{"_MIPS_SZINT", DEF_STRINGIFY(_MIPS_SZINT)},
#endif
#ifdef _MIPS_SZLONG
	{"_MIPS_SZLONG", DEF_STRINGIFY(_MIPS_SZLONG)},
#endif
#ifdef _MIPS_SZPTR
	{"_MIPS_SZPTR", DEF_STRINGIFY(_MIPS_SZPTR)},
#endif
#ifdef __FreeBSD__
	{"__FreeBSD__", "1"},
#endif
#ifdef __OpenBSD__
	{"__OpenBSD__", "1"},
#endif
#ifdef __NetBSD__
	{"__NetBSD__", "1"},
#endif
#ifdef __GNU__
	{"__GNU__", "1"},
#endif
#ifdef __ELF__
	{"__ELF__", "1"},
#endif
#ifdef __UNIXOS2__
	{"__UNIXOS2__", "1"},
#endif
#if defined(__QNX__)
        {"__QNX__", "1"},
#endif
#ifdef __QNXNTO__
        {"__QNXNTO__", "1"},
#endif
# ifdef __powerpc__
	{"__powerpc__", "1"},
# endif
# ifdef PowerMAX_OS
	{"PowerMAX_OS", "1"},
# endif
# ifdef ia64
	{"ia64", "1"},
# endif
# ifdef __ia64__
	{"__ia64__", "1"},
# endif
# if defined (AMD64) || defined (x86_64)
	{"AMD64", "1"},
	{"x86_64", "1"},
# endif
# if defined (__AMD64__) || defined (__x86_64__)
	{"__AMD64__", "1"},
	{"__x86_64__", "1"},
# endif
# if defined (__amd64__)
	{"__amd64__", "1"},
# endif
# ifdef __i386
	{"__i386", "1"},
# endif
# ifdef __i386__
	{"__i386__", "1"},
# endif
# ifdef __i486__
	{"__i486__", "1"},
# endif
# ifdef __i586__
	{"__i586__", "1"},
# endif
# ifdef __i686__
	{"__i686__", "1"},
# endif
# ifdef __k6__
	{"__k6__", "1"},
# endif
# ifdef i386
	{"i386", "1"},
# endif
# ifdef i486
	{"i486", "1"},
# endif
# ifdef i586
	{"i586", "1"},
# endif
# ifdef i686
	{ "i686", "1"},
# endif
# ifdef k6
	{"k6", "1"},
# endif
# ifdef sparc
	{"sparc", "1"},
# endif
# ifdef __sparc__
	{"__sparc__", "1"},
# endif
# ifdef __s390__
	{"__s390__", "1"},
# endif
# ifdef __sh__
	{"__sh__", "1"},
# endif
# ifdef __sh3_
	{"__sh3__", "1"},
# endif
# ifdef __SH3__
	{"__SH3__", "1"},
# endif
# ifdef __SH4__
	{"__SH4__", "1"},
# endif
# ifdef __SH4NOFPU__
	{"__SH4NOFPU__", "1"},
# endif
#if defined(__ppc__)
        {"__ppc__", "1"},
#endif
#if defined(__BIG_ENDIAN__)
      {"__BIG_ENDIAN__", "1"},
#endif
#if defined(__LITTLE_ENDIAN__)
      {"__LITTLE_ENDIAN__", "1"},
#endif
	/* add any additional symbols before this line */
	{NULL, NULL}
};
#undef DEF_EVALUATE
#undef DEF_STRINGIFY
#endif /* CROSSCOMPILE */
#endif /* MAKEDEPEND */

# ifndef MAKEDEPEND
#  if  defined (CROSSCOMPILE_CPP)
#   ifdef USE_CC_E
boolean crosscompile_use_cc_e = TRUE;
#    ifdef DEFAULT_CC
char* crosscompile_cpp = DEFAULT_CC;
#    else
char* crosscompile_cpp = "cc";
#    endif
#   else
boolean crosscompile_use_cc_e = FALSE;
#    ifdef DEFAULT_CPP
char* crosscompile_cpp = DEFAULT_CPP;
#    else
char* crosscompile_cpp = "cpp";
#    endif
#   endif
#   ifdef FIXUP_CPP_WHITESPACE
boolean fixup_whitespace = TRUE;
#   else
boolean fixup_whitespace = FALSE;
#   endif
#   ifdef REMOVE_CPP_LEADSPACE
boolean remove_cpp_leadspace = TRUE;
#   else
boolean remove_cpp_leadspace = FALSE;
#   endif
#   ifdef INLINE_SYNTAX
boolean inline_syntax = TRUE;
#   else
boolean inline_syntax = FALSE;
#   endif
#   ifdef MAGIC_MAKE_VARS
boolean magic_make_vars = TRUE;
#   else
boolean magic_make_vars = FALSE;
#   endif

typedef enum {
  unknown,
  freeBSD,
  netBSD,
  LinuX,
  emx,
  win32
} System;

#   ifdef linux
System sys = LinuX;
#   elif defined __FreeBSD__
System sys = freebsd;
#   elif defined __NetBSD__
System sys = netBSD;
#   elif defined __EMX__
System sys = emx;
#   elif defined WIN32
System sys = win32;
#   else
System sys = unknown;
#   endif

#   if defined __GNUC__
int gnu_c = __GNUC__;
int gnu_c_minor = __GNUC_MINOR__;
#   else
int gnu_c = 0;
int gnu_c_minor = -1;
#   endif
#   if defined linux
#    include <features.h>
int glibc_major = __GLIBC__ + 4;
int glibc_minor = __GLIBC_MINOR__;
#   else
int glibc_major = 0;
int glibc_minor = -1;
#   endif
#  endif /* !CROSSCOMPILE || CROSSCOMPILE_CPP */

# endif /* MAKEDEPEND */

#endif /* CCIMAKE */
@


1.2
log
@* this time, make b-r for real
* including X-Window
* merge evilwm import
* install all .cf etc. files, especially the MirBSD.cf one
* cope in X for MirOS changes
* refine anoncvssh: all defines in Makefile, etc.
* cope for XFree86 1.1 licence
* merge nlist.c import
* nuke unused files
* remove warnings
* fix really bogus bug in rcdb again
* offer bsd.slim for installation
* fix the default route bug
* sync distrib stuff
(...)

thanks for alpha-testing to
 * Jannis "Kabelaffe" Konrad
 * José António "T0ni" "jesus_" Matias de Jesus
@
text
@d1 1
a1 1
/* $MirBSD$ */
d28 1
a28 1
/* $XFree86: xc/config/imake/imakemdep.h,v 3.68 2002/12/24 17:42:58 tsi Exp $ */
d37 4
d375 6
d382 1
a382 1
	"-D__x86_64__",
d994 4
d1032 6
d1041 3
d1093 1
a1093 7
# if __GNUC__ == 1
	{"__GNUC__", "1"},
# elif __GNUC__ == 2
	{"__GNUC__", "2"},
# elif __GNUC__ == 3
	{"__GNUC__", "3"},
# endif
d1099 1
a1099 7
# if __STDC__ == 0
	{"__STDC__", "0"},
# elif __STDC__ == 1
	{"__STDC__", "1"},
# elif __STDC__ == 2
	{"__STDC__", "2"},
# endif
d1228 18
d1282 2
a1283 1
# ifdef x86_64
d1286 2
a1287 1
# ifdef __x86_64__
d1290 6
a1358 2


d1362 2
@


1.1
log
@Initial revision
@
text
@d1 1
d28 1
a28 1
/* $XFree86: xc/config/imake/imakemdep.h,v 3.56 2001/12/14 19:53:19 dawes Exp $ */
d31 1
a31 1
/* 
a89 1

d101 1
a101 1
#  else 
d104 1
a104 1
#endif 
d178 2
a179 2
/* this is for OS/2 under EMX. This won't work with DOS */
#if defined(__EMX__)
d207 1
a207 1
 *     If your cpp collapses tabs macro expansions into a single space and
d214 1
a214 1
#if defined(sun) || defined(SYSV) || defined(SVR4) || defined(hcx) || defined(WIN32) || defined(sco) || (defined(AMOEBA) && defined(CROSS_COMPILE)) || defined(__QNX__) || defined(__sgi)
d241 2
d245 1
d297 1
a297 1
#if defined(__EMX__)
d312 8
d323 1
a323 1
 *     whenever a Makefile is being generated.  If your preprocessor 
d326 2
a327 2
 * 
 *         a.  Use this symbol in Imake.tmpl when setting MacroFile.
d330 1
a330 1
 *         c.  When doing a make World, always add "BOOTSTRAPCFLAGS=-Dsymbol" 
d332 2
a333 2
 * 
 *     Note that you may define more than one symbol (useful for platforms 
d338 1
d347 3
a349 1
#if defined(__386BSD__) || defined(__NetBSD__) || defined(__OpenBSD__) || defined(__FreeBSD__) || defined(MACH) || defined(linux) || defined(__GNU__) || defined(__bsdi__)
d352 3
d371 3
d473 1
a473 1
	"-DSYSV", 
d664 1
a664 1
#if defined(__EMX__)
a711 1

d713 1
d719 1
a719 1
 *	If your systems provides a way to generate the default major,
d731 2
a732 1
#if defined(aix)
d734 2
a735 2
# define DEFAULT_OS_MAJOR_REV	"v %[0-9]"
# define DEFAULT_OS_MINOR_REV	"r %[0-9]"
d737 2
a738 2
# define DEFAULT_OS_NAME	"srvm %[^\n]"
#elif defined(sun) || defined(sgi) || defined(ultrix) || defined(__uxp__) || defined(sony)
d740 5
a744 5
# define DEFAULT_OS_MAJOR_REV	"r %[0-9]"
# define DEFAULT_OS_MINOR_REV	"r %*d.%[0-9]"
# define DEFAULT_OS_TEENY_REV	"r %*d.%*d.%[0-9]"
# define DEFAULT_OS_NAME	"srvm %[^\n]"
#elif defined(hpux)
d746 5
a750 5
# define DEFAULT_OS_MAJOR_REV	"r %*[^.].%[0-9]"
# define DEFAULT_OS_MINOR_REV	"r %*[^.].%*d.%1s"
# define DEFAULT_OS_TEENY_REV	"r %*[^.].%*d.%*c%[0-9]"
# define DEFAULT_OS_NAME	"srvm %[^\n]"
#elif defined(USL) || defined(__USLC__)
d752 5
a756 5
# define DEFAULT_OS_MAJOR_REV	"v %[0-9]"
# define DEFAULT_OS_MINOR_REV	"v %*d.%1s"
# define DEFAULT_OS_TEENY_REV	"v %*d.%*c%[.0-9]"
# define DEFAULT_OS_NAME	"srvm %[^\n]"
#elif defined(__APPLE__)
d758 5
a762 5
# define DEFAULT_OS_MAJOR_REV	"r %[0-9]"
# define DEFAULT_OS_MINOR_REV	"r %*d.%[0-9]"
# define DEFAULT_OS_TEENY_REV	"r %*d.%*d.%[0-9]" /* this will just get 0 */
# define DEFAULT_OS_NAME	"s %[^\n]"
#elif defined(__osf__)
d764 4
a767 4
# define DEFAULT_OS_MAJOR_REV	"r %*[^0-9]%[0-9]"
# define DEFAULT_OS_MINOR_REV	"r %*[^.].%[0-9]"
# define DEFAULT_OS_NAME	"srvm %[^\n]"
#elif defined(__uxp__)
d770 28
a797 13
# define DEFAULT_OS_MAJOR_REV	"v V%[0-9]"
# define DEFAULT_OS_MINOR_REV	"v V%*dL%[0-9]"
# define DEFAULT_OS_NAME	"srvm %[^\n]"
#elif defined(linux) || defined(__bsdi__)
# define DEFAULT_OS_MAJOR_REV	"r %[0-9]"
# define DEFAULT_OS_MINOR_REV	"r %*d.%[0-9]"
# define DEFAULT_OS_TEENY_REV	"r %*d.%*d.%[0-9]"
# define DEFAULT_OS_NAME	"srm %[^\n]"
#elif defined(__GNU__)
# define DEFAULT_OS_MAJOR_REV	"r %[0-9]"
# define DEFAULT_OS_MINOR_REV	"r %*d.%[0-9]"
# define DEFAULT_OS_NAME	"srm %[^\n]"
#elif defined(ISC)
d800 3
a802 3
# define DEFAULT_OS_MAJOR_REV   "r %[0-9]"
# define DEFAULT_OS_MINOR_REV   "r %*d.%[0-9]"
# define DEFAULT_OS_TEENY_REV   "v %[0-9]" 
d804 1
a804 1
#elif defined(__FreeBSD__) || defined(__OpenBSD__)
d807 16
a822 5
# define DEFAULT_OS_MAJOR_REV   "r %[0-9]"
# define DEFAULT_OS_MINOR_REV   "r %*d.%[0-9]"
# define DEFAULT_OS_TEENY_REV   "r %*d.%*d.%[0-9]" 
# define DEFAULT_OS_NAME        "srm %[^\n]"
# if defined(__FreeBSD__)
d824 3
a826 2
#  define DEFAULT_OS_TEENY_REV_FROB(buf, size)				\
    do {								\
d850 3
a852 2
    } while (0)
# else
d854 3
a856 3
#  define DEFAULT_MACHINE_ARCHITECTURE "m %[^\n]"
# endif
#elif defined(__NetBSD__)
d869 4
a872 4
# define DEFAULT_OS_MAJOR_REV   "r %[0-9]"
# define DEFAULT_OS_MINOR_REV   "r %*d.%[0-9]"
# define DEFAULT_OS_TEENY_REV   "r %*d.%*d%[A-Z]" 
# define DEFAULT_OS_TEENY_REV_FROB(buf, size)				\
d874 7
a880 4
	if (*(buf) >= 'A' && *(buf) <= 'Z') /* sanity check */		\
		snprintf((buf), (size), "%d", *(buf) - 'A' + 1);	\
	else								\
	    *(buf) = '\0';						\
d882 2
a883 2
# define DEFAULT_OS_NAME        "smr %[^\n]"
# define DEFAULT_OS_NAME_FROB(buf, size)				\
d889 1
a889 1
#elif defined(__Lynx__) || defined(Lynx)
d891 5
a895 5
# define DEFAULT_OS_MAJOR_REV   "r %[0-9]"
# define DEFAULT_OS_MINOR_REV   "r %*d.%[0-9]"
# define DEFAULT_OS_TEENY_REV   "r %*d.%*d.%[0-9]" 
# define DEFAULT_OS_NAME        "srm %[^\n]"
#elif defined(_SEQUENT_)
d897 78
a974 5
# define DEFAULT_OS_MAJOR_REV	"v V%[0-9]"
# define DEFAULT_OS_MINOR_REV	"v V%*d.%[0-9]"
# define DEFAULT_OS_TEENY_REV	"v V%*d.%*d.%[0-9]"
# define DEFAULT_OS_NAME	"s %[^\n]"
#endif
d977 1
d1072 1
a1072 1
# else
d1074 2
d1081 4
a1084 1
#if __STDC__
d1086 3
d1232 2
a1233 2
#ifdef __EMX__
	{"__EMX__", "1"},
d1253 6
d1289 6
d1327 82
a1409 1
#endif /* MAKEDEPEND */
@


1.1.9.1
log
@OpenBSD just has imported exactly this tree into their vendor branch,
called the same tag, in XF4/xc
This is, apparently, the last XFree86 snapshot before the licence change
(ie, addition of the advertising clause)

Since the developers don't see any problems with that, and we would like
to integrate improvements done by the remaining one or two (or so) XFree86
developers (j/k), this prepares enabling us to update X-Window in the future.
@
text
@d27 1
a27 1
/* $XFree86: xc/config/imake/imakemdep.h,v 3.72 2003/12/30 01:53:52 tsi Exp $ */
a35 4
#ifdef __UNIXOS2__
#define lstat stat
#endif

d89 1
d178 2
a179 2
/* this is for OS/2 under UNIXOS2. This won't work with DOS */
#if defined(__UNIXOS2__)
d207 1
a207 1
 *     If your cpp collapses tabs in macro expansions into a single space and
d214 1
a214 1
#if defined(sun) || defined(SYSV) || defined(SVR4) || defined(hcx) || defined(WIN32) || defined(sco) || (defined(AMOEBA) && defined(CROSS_COMPILE)) || defined(__QNX__) || defined(__sgi) || defined(__UNIXOS2__)
a240 2
#if !defined (CROSSCOMPILE) || defined (CROSSCOMPILE_CPP) 

a242 1
#define DEFAULT_CC "cc"
d294 1
a294 1
#if defined(__UNIXOS2__)
a308 8
#if defined(__GNUC__) && !defined(USE_CC_E)
#define USE_CC_E
#ifndef DEFAULT_CC
#define DEFAULT_CC "gcc"
#endif
#endif

#endif /* !defined (CROSSCOMPILE) || defined (CROSSCOMPILE_CPP) */
d316 1
a316 1
 *         a.  Use this symbol in Imake.cf when setting MacroFile.
a326 1
#if !defined (CROSSCOMPILE) || defined (CROSSCOMPILE_CPP) 
d335 1
a335 3
#if defined(__386BSD__) || defined(__NetBSD__) || defined(__OpenBSD__) || \
    defined(__FreeBSD__) || defined(MACH) || defined(linux) || \
    defined(__GNU__) || defined(__bsdi__) || defined(__GNUC__)
a337 3
#  if defined(__GNUC__) && (__GNUC__ >= 3)
	"-m32",
#  endif
a353 6
# ifdef __AMD64__
	"-D__AMD64__",
# endif
# ifdef __x86_64__
	"-D__AMD64__",
# endif
d644 1
a644 1
#if defined(__UNIXOS2__)
d692 1
a693 1
#endif /* CROSSCOMPILE */
d699 1
a699 1
 *	If your system provides a way to generate the default major,
d711 1
a711 2
#if !defined CROSSCOMPILE || defined CROSSCOMPILE_CPP
# if defined(aix)
d713 2
a714 2
#  define DEFAULT_OS_MAJOR_REV	"v %[0-9]"
#  define DEFAULT_OS_MINOR_REV	"r %[0-9]"
d716 2
a717 2
#  define DEFAULT_OS_NAME	"srvm %[^\n]"
# elif defined(sun) || defined(sgi) || defined(ultrix) || defined(__uxp__) || defined(sony)
d719 5
a723 5
#  define DEFAULT_OS_MAJOR_REV	"r %[0-9]"
#  define DEFAULT_OS_MINOR_REV	"r %*d.%[0-9]"
#  define DEFAULT_OS_TEENY_REV	"r %*d.%*d.%[0-9]"
#  define DEFAULT_OS_NAME	"srvm %[^\n]"
# elif defined(hpux)
d725 5
a729 5
#  define DEFAULT_OS_MAJOR_REV	"r %*[^.].%[0-9]"
#  define DEFAULT_OS_MINOR_REV	"r %*[^.].%*d.%1s"
#  define DEFAULT_OS_TEENY_REV	"r %*[^.].%*d.%*c%[0-9]"
#  define DEFAULT_OS_NAME	"srvm %[^\n]"
# elif defined(USL) || defined(__USLC__)
d731 5
a735 5
#  define DEFAULT_OS_MAJOR_REV	"v %[0-9]"
#  define DEFAULT_OS_MINOR_REV	"v %*d.%1s"
#  define DEFAULT_OS_TEENY_REV	"v %*d.%*c%[.0-9]"
#  define DEFAULT_OS_NAME	"srvm %[^\n]"
# elif defined(__APPLE__)
d737 5
a741 5
#  define DEFAULT_OS_MAJOR_REV	"r %[0-9]"
#  define DEFAULT_OS_MINOR_REV	"r %*d.%[0-9]"
#  define DEFAULT_OS_TEENY_REV	"r %*d.%*d.%[0-9]" /* this will just get 0 */
#  define DEFAULT_OS_NAME	"s %[^\n]"
# elif defined(__osf__)
d743 4
a746 4
#  define DEFAULT_OS_MAJOR_REV	"r %*[^0-9]%[0-9]"
#  define DEFAULT_OS_MINOR_REV	"r %*[^.].%[0-9]"
#  define DEFAULT_OS_NAME	"srvm %[^\n]"
# elif defined(__uxp__)
d749 13
a761 28
#  define DEFAULT_OS_MAJOR_REV	"v V%[0-9]"
#  define DEFAULT_OS_MINOR_REV	"v V%*dL%[0-9]"
#  define DEFAULT_OS_NAME	"srvm %[^\n]"
# elif defined(linux) || defined(__bsdi__)
#  define DEFAULT_OS_MAJOR_REV	"r %[0-9]"
#  define DEFAULT_OS_MINOR_REV	"r %*d.%[0-9]"
#  define DEFAULT_OS_TEENY_REV	"r %*d.%*d.%[0-9]"
#  define DEFAULT_OS_NAME	"srm %[^\n]"
#  if defined(linux) && defined  (CROSSCOMPILE_CPP)
#   define CROSS_UTS_SYSNAME "Linux"
#   include <linux/version.h>
#   define CROSS_UTS_RELEASE UTS_RELEASE
# endif
# elif defined(__CYGWIN__)
#  define DEFAULT_OS_MAJOR_REV	"r %[0-9]"
#  define DEFAULT_OS_MINOR_REV	"r %*d.%[0-9]"
#  define DEFAULT_OS_TEENY_REV	"r %*d.%*d.%[0-9]"
#  define DEFAULT_OS_NAME	"srm %[^\n]"
#  if defined(__CYGWIN__) && defined  (CROSSCOMPILE_CPP)
#   define CROSS_UTS_SYSNAME "Cygwin"
#   include <cygwin/version.h>
#   define CROSS_UTS_RELEASE "1.3.12"
#  endif
# elif defined(__GNU__)
#  define DEFAULT_OS_MAJOR_REV	"r %[0-9]"
#  define DEFAULT_OS_MINOR_REV	"r %*d.%[0-9]"
#  define DEFAULT_OS_NAME	"srm %[^\n]"
# elif defined(ISC)
d764 3
a766 3
#  define DEFAULT_OS_MAJOR_REV   "r %[0-9]"
#  define DEFAULT_OS_MINOR_REV   "r %*d.%[0-9]"
#  define DEFAULT_OS_TEENY_REV   "v %[0-9]" 
d768 1
a768 1
# elif defined(__FreeBSD__) || defined(__OpenBSD__)
d771 5
a775 5
#  define DEFAULT_OS_MAJOR_REV   "r %[0-9]"
#  define DEFAULT_OS_MINOR_REV   "r %*d.%[0-9]"
#  define DEFAULT_OS_TEENY_REV   "r %*d.%*d.%[0-9]" 
#  define DEFAULT_OS_NAME        "srm %[^\n]"
#  if defined(__FreeBSD__)
d777 2
a778 3
#   ifndef CROSSCOMPILE_CPP
#    define DEFAULT_OS_TEENY_REV_FROB(buf, size)			\
      do {								\
d802 2
a803 3
     } while (0)
#   endif
#  else
d805 3
a807 3
#   define DEFAULT_MACHINE_ARCHITECTURE "m %[^\n]"
#  endif
# elif defined(__NetBSD__)
d820 4
a823 4
#  define DEFAULT_OS_MAJOR_REV   "r %[0-9]"
#  define DEFAULT_OS_MINOR_REV   "r %*d.%[0-9]"
#  define DEFAULT_OS_TEENY_REV   "r %*d.%*d%[A-Z]" 
#  define DEFAULT_OS_TEENY_REV_FROB(buf, size)				\
d825 4
a828 7
	int	teeny = 0;						\
	char	*ptr = (buf);						\
									\
	while (*ptr >= 'A' && *ptr <= 'Z') /* sanity check */		\
	    teeny = teeny * 26 + (int)(*ptr++ - 'A');			\
									\
	snprintf((buf), (size), "%d", teeny + 1);			\
d830 2
a831 2
#  define DEFAULT_OS_NAME        "smr %[^\n]"
#  define DEFAULT_OS_NAME_FROB(buf, size)				\
d837 1
a837 1
# elif defined(__Lynx__) || defined(Lynx)
d839 5
a843 5
#  define DEFAULT_OS_MAJOR_REV   "r %[0-9]"
#  define DEFAULT_OS_MINOR_REV   "r %*d.%[0-9]"
#  define DEFAULT_OS_TEENY_REV   "r %*d.%*d.%[0-9]" 
#  define DEFAULT_OS_NAME        "srm %[^\n]"
# elif defined(_SEQUENT_)
d845 5
a849 78
#  define DEFAULT_OS_MAJOR_REV	"v V%[0-9]"
#  define DEFAULT_OS_MINOR_REV	"v V%*d.%[0-9]"
#  define DEFAULT_OS_TEENY_REV	"v V%*d.%*d.%[0-9]"
#  define DEFAULT_OS_NAME	"s %[^\n]"
# endif
#endif /* !defined CROSSCOMPILE || defined CROSSCOMPILE_CPP */

# if defined (CROSSCOMPILE_CPP) 
#  ifndef CROSS_UTS_SYSNAME
char *cross_uts_sysname = "";
#  else
char *cross_uts_sysname = CROSS_UTS_SYSNAME;
#  endif
#  ifndef CROSS_UTS_RELEASE
char* cross_uts_release = "";
#  else
char* cross_uts_release = CROSS_UTS_RELEASE;
#  endif
#  ifndef CROSS_UTS_MACHINE
char *cross_uts_machine = "";
#  else
char *cross_uts_machine = CROSS_UTS_MACHINE;
#  endif
#  ifndef CROSS_UTS_VERSION
char * cross_uts_version = "";
#  else
char * cross_uts_version = CROSS_UTS_VERSION;
#  endif
#  ifdef DEFAULT_OS_NAME
char *defaultOsName = DEFAULT_OS_NAME;
#  else 
char *defaultOsName = NULL;
# endif
#  ifdef DEFAULT_OS_MAJOR_REV
char *defaultOsMajorRev = DEFAULT_OS_MAJOR_REV;
#  else 
char *defaultOsMajorRev = NULL;
# endif
#  ifdef DEFAULT_OS_MINOR_REV
char *defaultOsMinorRev = DEFAULT_OS_MINOR_REV;
#  else 
char *defaultOsMinorRev = NULL;
#  endif
#  ifdef DEFAULT_OS_TEENY_REV
char *defaultOsTeenyRev = DEFAULT_OS_TEENY_REV;
#  else 
char *defaultOsTeenyRev = NULL;
#  endif
#  ifdef DEFAULT_MACHINE_ARCHITECTURE
char *defaultMachineArchitecture = DEFAULT_MACHINE_ARCHITECTURE;
#  else 
char *defaultMachineArchitecture = NULL;
#  endif
# ifdef DEFAULT_OS_NAME_FROB
void defaultOsNameFrob(char *buf, int size)
{DEFAULT_OS_NAME_FROB(buf,size)}
# else
void (*defaultOsNameFrob)(char *buf, int size) = NULL;
# endif
# ifdef DEFAULT_OS_MAJOR_REV_FROB
void defaultOsMajorRevFrob(char *buf, int size)
{DEFAULT_OS_MAJOR_REV_FROB(buf,size)}
# else
void (*defaultOsMajorRevFrob)(char *buf, int size) = NULL;
# endif
# ifdef DEFAULT_OS_MINOR_REV_FROB
void defaultOsMinorRevFrob(char *buf, int size)
{DEFAULT_OS_MINOR_REV_FROB(buf,size)}
# else
void (*defaultOsMinorRevFrob)(char *buf, int size) = NULL;
# endif
# ifdef DEFAULT_OS_TEENY_REV_FROB
void defaultOsTeenyRevFrob(char *buf, int size)
{DEFAULT_OS_TEENY_REV_FROB(buf,size)}
# else
void (*defaultOsTeenyRevFrob)(char *buf, int size) = NULL;
# endif
# endif /* CROSSCOMPILE_CPP */
a851 1
#if !defined (CROSSCOMPILE) || defined (CROSSCOMPILE_CPP) 
a857 4
#undef DEF_EVALUATE
#undef DEF_STRINGIFY
#define DEF_EVALUATE(__x) #__x
#define DEF_STRINGIFY(_x) DEF_EVALUATE(_x)
a891 6
#ifdef __sparc
	{"__sparc", "1"},
#endif
#ifdef __sparcv9
	{"__sparcv9", "1"},
#endif
a894 3
#ifdef __sparcv9__
	{"__sparcv9__", "1"},
#endif
d944 5
a948 1
	{"__GNUC__", DEF_STRINGIFY(__GNUC__)},
d953 2
a954 2
#ifdef __STDC__
	{"__STDC__", DEF_STRINGIFY(__STDC__)},
a1082 18
#ifdef _MIPS_FPSET
	{"_MIPS_FPSET", DEF_STRINGIFY(_MIPS_FPSET)},
#endif
#ifdef _MIPS_ISA
	{"_MIPS_ISA", DEF_STRINGIFY(_MIPS_ISA)},
#endif
#ifdef _MIPS_SIM
	{"_MIPS_SIM", DEF_STRINGIFY(_MIPS_SIM)},
#endif
#ifdef _MIPS_SZINT
	{"_MIPS_SZINT", DEF_STRINGIFY(_MIPS_SZINT)},
#endif
#ifdef _MIPS_SZLONG
	{"_MIPS_SZLONG", DEF_STRINGIFY(_MIPS_SZLONG)},
#endif
#ifdef _MIPS_SZPTR
	{"_MIPS_SZPTR", DEF_STRINGIFY(_MIPS_SZPTR)},
#endif
d1098 2
a1099 2
#ifdef __UNIXOS2__
	{"__UNIXOS2__", "1"},
a1118 11
# if defined (AMD64) || defined (x86_64)
	{"AMD64", "1"},
	{"x86_64", "1"},
# endif
# if defined (__AMD64__) || defined (__x86_64__)
	{"__AMD64__", "1"},
	{"__x86_64__", "1"},
# endif
# ifdef __i386
	{"__i386", "1"},
# endif
a1148 6
# ifdef sparc
	{"sparc", "1"},
# endif
# ifdef __sparc__
	{"__sparc__", "1"},
# endif
d1176 2
d1181 1
a1181 3
#undef DEF_EVALUATE
#undef DEF_STRINGIFY
#endif /* CROSSCOMPILE */
a1182 81

# ifndef MAKEDEPEND
#  if  defined (CROSSCOMPILE_CPP) 
#   ifdef USE_CC_E
boolean crosscompile_use_cc_e = TRUE;
#    ifdef DEFAULT_CC
char* crosscompile_cpp = DEFAULT_CC;
#    else
char* crosscompile_cpp = "cc";
#    endif
#   else
boolean crosscompile_use_cc_e = FALSE;
#    ifdef DEFAULT_CPP
char* crosscompile_cpp = DEFAULT_CPP;
#    else
char* crosscompile_cpp = "cpp";
#    endif
#   endif
#   ifdef FIXUP_CPP_WHITESPACE
boolean fixup_whitespace = TRUE;
#   else
boolean fixup_whitespace = FALSE;
#   endif
#   ifdef REMOVE_CPP_LEADSPACE
boolean remove_cpp_leadspace = TRUE;
#   else
boolean remove_cpp_leadspace = FALSE;
#   endif
#   ifdef INLINE_SYNTAX
boolean inline_syntax = TRUE;
#   else
boolean inline_syntax = FALSE;
#   endif
#   ifdef MAGIC_MAKE_VARS
boolean magic_make_vars = TRUE;
#   else
boolean magic_make_vars = FALSE;
#   endif

typedef enum {
  unknown,
  freeBSD,
  netBSD,
  LinuX,
  emx,
  win32
} System;

#   ifdef linux
System sys = LinuX;
#   elif defined __FreeBSD__
System sys = freebsd;
#   elif defined __NetBSD__
System sys = netBSD;
#   elif defined __EMX__
System sys = emx;
#   elif defined WIN32
System sys = win32;
#   else
System sys = unknown;
#   endif

#   if defined __GNUC__
int gnu_c = __GNUC__;
int gnu_c_minor = __GNUC_MINOR__;
#   else 
int gnu_c = 0;
int gnu_c_minor = -1;
#   endif
#   if defined linux
#    include <features.h>
int glibc_major = __GLIBC__ + 4;
int glibc_minor = __GLIBC_MINOR__;
#   else
int glibc_major = 0;
int glibc_minor = -1;
#   endif
#  endif /* !CROSSCOMPILE || CROSSCOMPILE_CPP */

# endif /* MAKEDEPEND */

@


1.1.1.1
log
@Import OpenBSD 3.3 XF4 repository from CTM 3132 the first time
This finalizes starting an OpenBSD-mirabile (aka MirBSD) repository.

### MirBSD is:
# Copyright (c) 1982-2003 by Thorsten "mirabile" Glaser <x86@@ePost.de>
# Copyright © 1968-2003  The authors of And contributors to UNIX®, the
#       C Language, BSD/Berkeley Unix; 386BSD, NetBSD 1.1 and OpenBSD.
#
# Anyone who obtained a copy of this work is hereby permitted to freely use,
# distribute, modify, merge, sublicence, give away or sell it as long as the
# authors are given due credit and the following notice is retained:
#
# This work is provided "as is", with no explicit or implicit warranty what-
# soever. Use it only at your own risk. In no event may an author or contri-
# butor be held liable for any damage, directly or indirectly, that origina-
# ted through or is caused by creation or modification of this work.

MirBSD is my private tree. MirBSD does not differ very much from OpenBSD
and intentionally tracks OpenBSD. That's why it _is_ OpenBSD, just not the
official one. It's like with DarrenBSD.

At time of this writing, no advertising for MirBSD must be done,
because the advertising clause has not yet been sorted out.

http://templeofhate.com/tglaser/MirBSD/index.php
@
text
@@


1.1.1.2
log
@The X-Windowing System

Import XFree86 4.3 from OpenBSD by CTM, in the hope it's stable
@
text
@d27 1
a27 1
/* $XFree86: xc/config/imake/imakemdep.h,v 3.68 2002/12/24 17:42:58 tsi Exp $ */
d89 1
d178 2
a179 2
/* this is for OS/2 under UNIXOS2. This won't work with DOS */
#if defined(__UNIXOS2__)
d207 1
a207 1
 *     If your cpp collapses tabs in macro expansions into a single space and
d214 1
a214 1
#if defined(sun) || defined(SYSV) || defined(SVR4) || defined(hcx) || defined(WIN32) || defined(sco) || (defined(AMOEBA) && defined(CROSS_COMPILE)) || defined(__QNX__) || defined(__sgi) || defined(__UNIXOS2__)
a240 2
#if !defined (CROSSCOMPILE) || defined (CROSSCOMPILE_CPP) 

a242 1
#define DEFAULT_CC "cc"
d294 1
a294 1
#if defined(__UNIXOS2__)
a308 8
#if defined(__GNUC__) && !defined(USE_CC_E)
#define USE_CC_E
#ifndef DEFAULT_CC
#define DEFAULT_CC "gcc"
#endif
#endif

#endif /* !defined (CROSSCOMPILE) || defined (CROSSCOMPILE_CPP) */
d316 1
a316 1
 *         a.  Use this symbol in Imake.cf when setting MacroFile.
a326 1
#if !defined (CROSSCOMPILE) || defined (CROSSCOMPILE_CPP) 
d335 1
a335 3
#if defined(__386BSD__) || defined(__NetBSD__) || defined(__OpenBSD__) || \
    defined(__FreeBSD__) || defined(MACH) || defined(linux) || \
    defined(__GNU__) || defined(__bsdi__) || defined(__GNUC__)
a337 3
#  if defined(__GNUC__) && (__GNUC__ >= 3)
	"-m32",
#  endif
a353 3
# ifdef __x86_64__
	"-D__x86_64__",
# endif
d644 1
a644 1
#if defined(__UNIXOS2__)
d692 1
a693 1
#endif /* CROSSCOMPILE */
d699 1
a699 1
 *	If your system provides a way to generate the default major,
d711 1
a711 2
#if !defined CROSSCOMPILE || defined CROSSCOMPILE_CPP
# if defined(aix)
d713 2
a714 2
#  define DEFAULT_OS_MAJOR_REV	"v %[0-9]"
#  define DEFAULT_OS_MINOR_REV	"r %[0-9]"
d716 2
a717 2
#  define DEFAULT_OS_NAME	"srvm %[^\n]"
# elif defined(sun) || defined(sgi) || defined(ultrix) || defined(__uxp__) || defined(sony)
d719 5
a723 5
#  define DEFAULT_OS_MAJOR_REV	"r %[0-9]"
#  define DEFAULT_OS_MINOR_REV	"r %*d.%[0-9]"
#  define DEFAULT_OS_TEENY_REV	"r %*d.%*d.%[0-9]"
#  define DEFAULT_OS_NAME	"srvm %[^\n]"
# elif defined(hpux)
d725 5
a729 5
#  define DEFAULT_OS_MAJOR_REV	"r %*[^.].%[0-9]"
#  define DEFAULT_OS_MINOR_REV	"r %*[^.].%*d.%1s"
#  define DEFAULT_OS_TEENY_REV	"r %*[^.].%*d.%*c%[0-9]"
#  define DEFAULT_OS_NAME	"srvm %[^\n]"
# elif defined(USL) || defined(__USLC__)
d731 5
a735 5
#  define DEFAULT_OS_MAJOR_REV	"v %[0-9]"
#  define DEFAULT_OS_MINOR_REV	"v %*d.%1s"
#  define DEFAULT_OS_TEENY_REV	"v %*d.%*c%[.0-9]"
#  define DEFAULT_OS_NAME	"srvm %[^\n]"
# elif defined(__APPLE__)
d737 5
a741 5
#  define DEFAULT_OS_MAJOR_REV	"r %[0-9]"
#  define DEFAULT_OS_MINOR_REV	"r %*d.%[0-9]"
#  define DEFAULT_OS_TEENY_REV	"r %*d.%*d.%[0-9]" /* this will just get 0 */
#  define DEFAULT_OS_NAME	"s %[^\n]"
# elif defined(__osf__)
d743 4
a746 4
#  define DEFAULT_OS_MAJOR_REV	"r %*[^0-9]%[0-9]"
#  define DEFAULT_OS_MINOR_REV	"r %*[^.].%[0-9]"
#  define DEFAULT_OS_NAME	"srvm %[^\n]"
# elif defined(__uxp__)
d749 13
a761 28
#  define DEFAULT_OS_MAJOR_REV	"v V%[0-9]"
#  define DEFAULT_OS_MINOR_REV	"v V%*dL%[0-9]"
#  define DEFAULT_OS_NAME	"srvm %[^\n]"
# elif defined(linux) || defined(__bsdi__)
#  define DEFAULT_OS_MAJOR_REV	"r %[0-9]"
#  define DEFAULT_OS_MINOR_REV	"r %*d.%[0-9]"
#  define DEFAULT_OS_TEENY_REV	"r %*d.%*d.%[0-9]"
#  define DEFAULT_OS_NAME	"srm %[^\n]"
#  if defined(linux) && defined  (CROSSCOMPILE_CPP)
#   define CROSS_UTS_SYSNAME "Linux"
#   include <linux/version.h>
#   define CROSS_UTS_RELEASE UTS_RELEASE
# endif
# elif defined(__CYGWIN__)
#  define DEFAULT_OS_MAJOR_REV	"r %[0-9]"
#  define DEFAULT_OS_MINOR_REV	"r %*d.%[0-9]"
#  define DEFAULT_OS_TEENY_REV	"r %*d.%*d.%[0-9]"
#  define DEFAULT_OS_NAME	"srm %[^\n]"
#  if defined(__CYGWIN__) && defined  (CROSSCOMPILE_CPP)
#   define CROSS_UTS_SYSNAME "Cygwin"
#   include <cygwin/version.h>
#   define CROSS_UTS_RELEASE "1.3.12"
#  endif
# elif defined(__GNU__)
#  define DEFAULT_OS_MAJOR_REV	"r %[0-9]"
#  define DEFAULT_OS_MINOR_REV	"r %*d.%[0-9]"
#  define DEFAULT_OS_NAME	"srm %[^\n]"
# elif defined(ISC)
d764 3
a766 3
#  define DEFAULT_OS_MAJOR_REV   "r %[0-9]"
#  define DEFAULT_OS_MINOR_REV   "r %*d.%[0-9]"
#  define DEFAULT_OS_TEENY_REV   "v %[0-9]" 
d768 1
a768 1
# elif defined(__FreeBSD__) || defined(__OpenBSD__)
d771 5
a775 5
#  define DEFAULT_OS_MAJOR_REV   "r %[0-9]"
#  define DEFAULT_OS_MINOR_REV   "r %*d.%[0-9]"
#  define DEFAULT_OS_TEENY_REV   "r %*d.%*d.%[0-9]" 
#  define DEFAULT_OS_NAME        "srm %[^\n]"
#  if defined(__FreeBSD__)
d777 2
a778 3
#   ifndef CROSSCOMPILE_CPP
#    define DEFAULT_OS_TEENY_REV_FROB(buf, size)			\
      do {								\
d802 2
a803 3
     } while (0)
#   endif
#  else
d805 3
a807 3
#   define DEFAULT_MACHINE_ARCHITECTURE "m %[^\n]"
#  endif
# elif defined(__NetBSD__)
d820 4
a823 4
#  define DEFAULT_OS_MAJOR_REV   "r %[0-9]"
#  define DEFAULT_OS_MINOR_REV   "r %*d.%[0-9]"
#  define DEFAULT_OS_TEENY_REV   "r %*d.%*d%[A-Z]" 
#  define DEFAULT_OS_TEENY_REV_FROB(buf, size)				\
d825 4
a828 7
	int	teeny = 0;						\
	char	*ptr = (buf);						\
									\
	while (*ptr >= 'A' && *ptr <= 'Z') /* sanity check */		\
	    teeny = teeny * 26 + (int)(*ptr++ - 'A');			\
									\
	snprintf((buf), (size), "%d", teeny + 1);			\
d830 2
a831 2
#  define DEFAULT_OS_NAME        "smr %[^\n]"
#  define DEFAULT_OS_NAME_FROB(buf, size)				\
d837 1
a837 1
# elif defined(__Lynx__) || defined(Lynx)
d839 5
a843 5
#  define DEFAULT_OS_MAJOR_REV   "r %[0-9]"
#  define DEFAULT_OS_MINOR_REV   "r %*d.%[0-9]"
#  define DEFAULT_OS_TEENY_REV   "r %*d.%*d.%[0-9]" 
#  define DEFAULT_OS_NAME        "srm %[^\n]"
# elif defined(_SEQUENT_)
d845 5
a849 78
#  define DEFAULT_OS_MAJOR_REV	"v V%[0-9]"
#  define DEFAULT_OS_MINOR_REV	"v V%*d.%[0-9]"
#  define DEFAULT_OS_TEENY_REV	"v V%*d.%*d.%[0-9]"
#  define DEFAULT_OS_NAME	"s %[^\n]"
# endif
#endif /* !defined CROSSCOMPILE || defined CROSSCOMPILE_CPP */

# if defined (CROSSCOMPILE_CPP) 
#  ifndef CROSS_UTS_SYSNAME
char *cross_uts_sysname = "";
#  else
char *cross_uts_sysname = CROSS_UTS_SYSNAME;
#  endif
#  ifndef CROSS_UTS_RELEASE
char* cross_uts_release = "";
#  else
char* cross_uts_release = CROSS_UTS_RELEASE;
#  endif
#  ifndef CROSS_UTS_MACHINE
char *cross_uts_machine = "";
#  else
char *cross_uts_machine = CROSS_UTS_MACHINE;
#  endif
#  ifndef CROSS_UTS_VERSION
char * cross_uts_version = "";
#  else
char * cross_uts_version = CROSS_UTS_VERSION;
#  endif
#  ifdef DEFAULT_OS_NAME
char *defaultOsName = DEFAULT_OS_NAME;
#  else 
char *defaultOsName = NULL;
# endif
#  ifdef DEFAULT_OS_MAJOR_REV
char *defaultOsMajorRev = DEFAULT_OS_MAJOR_REV;
#  else 
char *defaultOsMajorRev = NULL;
# endif
#  ifdef DEFAULT_OS_MINOR_REV
char *defaultOsMinorRev = DEFAULT_OS_MINOR_REV;
#  else 
char *defaultOsMinorRev = NULL;
#  endif
#  ifdef DEFAULT_OS_TEENY_REV
char *defaultOsTeenyRev = DEFAULT_OS_TEENY_REV;
#  else 
char *defaultOsTeenyRev = NULL;
#  endif
#  ifdef DEFAULT_MACHINE_ARCHITECTURE
char *defaultMachineArchitecture = DEFAULT_MACHINE_ARCHITECTURE;
#  else 
char *defaultMachineArchitecture = NULL;
#  endif
# ifdef DEFAULT_OS_NAME_FROB
void defaultOsNameFrob(char *buf, int size)
{DEFAULT_OS_NAME_FROB(buf,size)}
# else
void (*defaultOsNameFrob)(char *buf, int size) = NULL;
# endif
# ifdef DEFAULT_OS_MAJOR_REV_FROB
void defaultOsMajorRevFrob(char *buf, int size)
{DEFAULT_OS_MAJOR_REV_FROB(buf,size)}
# else
void (*defaultOsMajorRevFrob)(char *buf, int size) = NULL;
# endif
# ifdef DEFAULT_OS_MINOR_REV_FROB
void defaultOsMinorRevFrob(char *buf, int size)
{DEFAULT_OS_MINOR_REV_FROB(buf,size)}
# else
void (*defaultOsMinorRevFrob)(char *buf, int size) = NULL;
# endif
# ifdef DEFAULT_OS_TEENY_REV_FROB
void defaultOsTeenyRevFrob(char *buf, int size)
{DEFAULT_OS_TEENY_REV_FROB(buf,size)}
# else
void (*defaultOsTeenyRevFrob)(char *buf, int size) = NULL;
# endif
# endif /* CROSSCOMPILE_CPP */
a851 1
#if !defined (CROSSCOMPILE) || defined (CROSSCOMPILE_CPP) 
d946 1
a946 1
# elif __GNUC__ == 2
a947 2
# elif __GNUC__ == 3
	{"__GNUC__", "3"},
d953 1
a953 4
#ifdef __STDC__
# if __STDC__ == 0
	{"__STDC__", "0"},
# elif __STDC__ == 1
a954 3
# elif __STDC__ == 2
	{"__STDC__", "2"},
# endif
d1098 2
a1099 2
#ifdef __UNIXOS2__
	{"__UNIXOS2__", "1"},
a1118 6
# ifdef x86_64
	{"x86_64", "1"},
# endif
# ifdef __x86_64__
	{"__x86_64__", "1"},
# endif
a1148 6
# ifdef sparc
	{"sparc", "1"},
# endif
# ifdef __sparc__
	{"__sparc__", "1"},
# endif
d1181 1
a1181 1
#endif /* CROSSCOMPILE */
a1182 81

# ifndef MAKEDEPEND
#  if  defined (CROSSCOMPILE_CPP) 
#   ifdef USE_CC_E
boolean crosscompile_use_cc_e = TRUE;
#    ifdef DEFAULT_CC
char* crosscompile_cpp = DEFAULT_CC;
#    else
char* crosscompile_cpp = "cc";
#    endif
#   else
boolean crosscompile_use_cc_e = FALSE;
#    ifdef DEFAULT_CPP
char* crosscompile_cpp = DEFAULT_CPP;
#    else
char* crosscompile_cpp = "cpp";
#    endif
#   endif
#   ifdef FIXUP_CPP_WHITESPACE
boolean fixup_whitespace = TRUE;
#   else
boolean fixup_whitespace = FALSE;
#   endif
#   ifdef REMOVE_CPP_LEADSPACE
boolean remove_cpp_leadspace = TRUE;
#   else
boolean remove_cpp_leadspace = FALSE;
#   endif
#   ifdef INLINE_SYNTAX
boolean inline_syntax = TRUE;
#   else
boolean inline_syntax = FALSE;
#   endif
#   ifdef MAGIC_MAKE_VARS
boolean magic_make_vars = TRUE;
#   else
boolean magic_make_vars = FALSE;
#   endif

typedef enum {
  unknown,
  freeBSD,
  netBSD,
  LinuX,
  emx,
  win32
} System;

#   ifdef linux
System sys = LinuX;
#   elif defined __FreeBSD__
System sys = freebsd;
#   elif defined __NetBSD__
System sys = netBSD;
#   elif defined __EMX__
System sys = emx;
#   elif defined WIN32
System sys = win32;
#   else
System sys = unknown;
#   endif

#   if defined __GNUC__
int gnu_c = __GNUC__;
int gnu_c_minor = __GNUC_MINOR__;
#   else 
int gnu_c = 0;
int gnu_c_minor = -1;
#   endif
#   if defined linux
#    include <features.h>
int glibc_major = __GLIBC__ + 4;
int glibc_minor = __GLIBC_MINOR__;
#   else
int glibc_major = 0;
int glibc_minor = -1;
#   endif
#  endif /* !CROSSCOMPILE || CROSSCOMPILE_CPP */

# endif /* MAKEDEPEND */

@


1.1.1.3
log
@That's what OpenBSD will, probably, ship as XF4 in 3.5
their last sync against XFree86 4.3-current has been
imported into our vendor branch, too
@
text
@d27 1
a27 1
/* $XFree86: xc/config/imake/imakemdep.h,v 3.72 2003/12/30 01:53:52 tsi Exp $ */
a35 4
#ifdef __UNIXOS2__
#define lstat stat
#endif

a369 6
# ifdef __AMD64__
	"-D__AMD64__",
# endif
# ifdef __amd64__
	"-D__amd64__",
# endif
d371 1
a371 1
	"-D__AMD64__",
a971 4
#undef DEF_EVALUATE
#undef DEF_STRINGIFY
#define DEF_EVALUATE(__x) #__x
#define DEF_STRINGIFY(_x) DEF_EVALUATE(_x)
a1005 6
#ifdef __sparc
	{"__sparc", "1"},
#endif
#ifdef __sparcv9
	{"__sparcv9", "1"},
#endif
a1008 3
#ifdef __sparcv9__
	{"__sparcv9__", "1"},
#endif
d1058 7
a1064 1
	{"__GNUC__", DEF_STRINGIFY(__GNUC__)},
d1070 7
a1076 1
	{"__STDC__", DEF_STRINGIFY(__STDC__)},
a1204 18
#ifdef _MIPS_FPSET
	{"_MIPS_FPSET", DEF_STRINGIFY(_MIPS_FPSET)},
#endif
#ifdef _MIPS_ISA
	{"_MIPS_ISA", DEF_STRINGIFY(_MIPS_ISA)},
#endif
#ifdef _MIPS_SIM
	{"_MIPS_SIM", DEF_STRINGIFY(_MIPS_SIM)},
#endif
#ifdef _MIPS_SZINT
	{"_MIPS_SZINT", DEF_STRINGIFY(_MIPS_SZINT)},
#endif
#ifdef _MIPS_SZLONG
	{"_MIPS_SZLONG", DEF_STRINGIFY(_MIPS_SZLONG)},
#endif
#ifdef _MIPS_SZPTR
	{"_MIPS_SZPTR", DEF_STRINGIFY(_MIPS_SZPTR)},
#endif
d1241 1
a1241 2
# if defined (AMD64) || defined (x86_64)
	{"AMD64", "1"},
d1244 1
a1244 2
# if defined (__AMD64__) || defined (__x86_64__)
	{"__AMD64__", "1"},
a1246 6
# if defined (__amd64__)
	{"__amd64__", "1"},
# endif
# ifdef __i386
	{"__i386", "1"},
# endif
d1310 2
a1314 2
#undef DEF_EVALUATE
#undef DEF_STRINGIFY
@


