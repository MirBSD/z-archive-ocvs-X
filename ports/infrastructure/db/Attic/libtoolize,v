head	1.15;
access;
symbols;
locks; strict;
comment	@# @;


1.15
date	2005.02.11.02.06.18;	author tg;	state dead;
branches;
next	1.14;

1.14
date	2005.02.09.23.48.35;	author tg;	state Exp;
branches;
next	1.13;

1.13
date	2004.11.23.14.05.31;	author tg;	state Exp;
branches;
next	1.12;

1.12
date	2004.10.17.00.00.07;	author tg;	state Exp;
branches;
next	1.11;

1.11
date	2004.10.16.23.37.30;	author tg;	state Exp;
branches;
next	1.10;

1.10
date	2004.10.14.19.02.19;	author tg;	state Exp;
branches;
next	1.9;

1.9
date	2004.08.10.01.36.32;	author tg;	state Stab;
branches;
next	1.8;

1.8
date	2004.08.04.12.24.12;	author tg;	state Exp;
branches;
next	1.7;

1.7
date	2004.07.23.08.25.12;	author tg;	state Exp;
branches;
next	1.6;

1.6
date	2004.07.15.08.59.54;	author tg;	state Exp;
branches;
next	1.5;

1.5
date	2004.05.02.15.58.08;	author tg;	state Exp;
branches;
next	1.4;

1.4
date	2004.04.19.18.18.57;	author tg;	state Exp;
branches;
next	1.3;

1.3
date	2004.04.10.00.31.39;	author tg;	state Exp;
branches;
next	1.2;

1.2
date	2004.04.10.00.09.12;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2004.02.16.12.41.28;	author tg;	state Exp;
branches;
next	;


desc
@@


1.15
log
@update to MirLibtool 1.5.12

breakage not expected, but there be bugs
please test and feed back as much as possible
@
text
@#! /bin/sh
# $MirBSD: ports/infrastructure/db/libtoolize,v 1.14 2005/02/09 23:48:35 tg Exp $
# _MirOS: contrib/gnu/libtool/libtoolize,v 1.1 2005/02/05 02:27:36 tg Exp $
# _MirOS: contrib/gnu/libtool/libtoolize.in,v 1.2 2005/02/05 02:25:03 tg Exp $
# libtoolize - Prepare a package to use libtool.
# Generated automatically from libtoolize.in by configure.
# Copyright (C) 1996, 1997, 1998, 1999, 2000, 2001, 2003
# Free Software Foundation, Inc.
# Originally by Gordon Matzigkeit <gord@@gnu.ai.mit.edu>, 1996
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful, but
# WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
#
# As a special exception to the GNU General Public License, if you
# distribute this file as part of a program that contains a
# configuration script generated by Autoconf, you may include it under
# the same distribution terms that you use for the rest of that program.

# The name of this program.
progname=`echo "$0" | sed 's%^.*/%%'`

# Constants.
PROGRAM=libtoolize
PACKAGE=libtool
VERSION=1.5.10

# Not replaced by default.
pkgdatadir=${PORTSDIR:-/usr/ports}/infrastructure/db

libtool_m4="$pkgdatadir/libtool.m4"

dry_run=no
help="Try \`$progname --help' for more information."
rm="rm -f"
ln_s="ln -s"
cp="cp -f"
mkdir="mkdir"

# Global variables.
automake=
copy=
force=
configure_ac=
status=0

for arg
do
  case "$arg" in
  --help)
    cat <<EOF
Usage: $progname [OPTION]...

Prepare a package to use libtool.

    --automake        work silently, and assume that Automake is in use
-c, --copy            copy files rather than symlinking them
    --debug           enable verbose shell tracing
-n, --dry-run         print commands rather than running them
-f, --force           replace existing files
    --help            display this message and exit
    --version         print version information and exit

You must \`cd' to the top directory of your package before you run
\`$progname'.

Report bugs to <bug-libtool@@gnu.org>.
EOF
    exit 0
    ;;

  --version)
    echo "$PROGRAM (GNU $PACKAGE) $VERSION"
    echo
    echo "Copyright (C) 2003 Free Software Foundation, Inc."
    echo "This is free software; see the source for copying conditions.  There is NO"
    echo "warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
    exit 0
    ;;

  --automake)
    automake=yes
    ;;

  -c | --copy)
    ln_s=
    ;;

  --debug)
    echo "$progname: enabling shell trace mode"
    set -x
    ;;

  -n | --dry-run)
    if test "$dry_run" != yes; then
      dry_run=yes
      rm="echo $rm"
      test -n "$ln_s" && ln_s="echo $ln_s"
      cp="echo $cp"
      mkdir="echo mkdir"
    fi
    ;;

  -f | --force)
    force=yes
    ;;

  --ltdl)
    ;;

  --ltdl-tar)
    ;;

  -*)
    echo "$progname: unrecognized option \`$arg'" 1>&2
    echo "$help" 1>&2
    exit 1
    ;;

  *)
    echo "$progname: too many arguments" 1>&2
    echo "$help" 1>&2
    exit 1
    ;;
  esac
done

if test -f configure.ac; then
  configure_ac=configure.ac
elif test -f configure.in; then
  configure_ac=configure.in
else
  echo "$progname: \`configure.ac' does not exist" 1>&2
  echo "$help" 1>&2
  exit 1
fi


files=`cd $pkgdatadir && ls`
if test -z "$files"; then
  echo "$progname: cannot list files in \`$pkgdatadir'" 1>&2
  exit 1
fi
files='config.guess config.sub ltmain.sh'

auxdir=.
auxdirline=`grep '^AC_CONFIG_AUX_DIR' $configure_ac 2>/dev/null`
if test -n "$auxdirline"; then
  # Handle explicit AC_CONFIG_AUX_DIR settings.
  auxdir=`echo "$auxdirline" | sed 's/^AC_CONFIG_AUX_DIR(\([^)]*\)).*$/\1/'`

  if test "$auxdir" = "$auxdirline"; then
    echo "$progname: invalid AC_CONFIG_AUX_DIR syntax: $auxdirline" 1>&2
    exit 1
  else
    # Strip any quote brackets.
    auxdir=`echo "$auxdir" | sed 's/^\[\(.*\)\]$/\1/g'`
    case "$auxdir" in
    *\$*)
      echo "$progname: cannot handle variables in AC_CONFIG_AUX_DIR" 1>&2
      exit 1
      ;;
    *)
    ;;
    esac
  fi
else
  # Try to discover auxdir the same way it is discovered by configure.
  # Note that we default to the current directory.
  for dir in . .. ../.. ${GNUSYSTEM_AUX_DIR}; do
    if test -f $dir/install-sh; then
      auxdir=$dir
      break
    elif test -f $dir/install.sh; then
      auxdir=$dir
      break
    fi
  done
fi

if test -z "$automake"; then
  if grep '^A[MC]_PROG_LIBTOOL' $configure_ac >/dev/null 2>&1; then :
  else
    echo "Remember to add \`AC_PROG_LIBTOOL' to \`$configure_ac'."
  fi

  if grep '^AC_PROG_RANLIB' $configure_ac >/dev/null 2>&1; then
    echo "Using \`AC_PROG_RANLIB' is rendered obsolete by \`AC_PROG_LIBTOOL'"
  fi

  if grep 'generated automatically by aclocal' aclocal.m4 >/dev/null 2>&1; then
    updatemsg="update your \`aclocal.m4' by running aclocal"
  else
    updatemsg="add the contents of \`$libtool_m4' to \`aclocal.m4'"
  fi

  if grep '^AC_DEFUN(\[A[MC]_PROG_LIBTOOL' aclocal.m4 >/dev/null 2>&1; then
    # Check the version number on libtool.m4 and the one used in aclocal.m4.
    instserial=`grep '^# serial ' $libtool_m4 | grep 'A[MC]_PROG_LIBTOOL' | sed -e 's/^# serial \([0-9][0-9]*\).*$/\1/; q'`

    if test -z "$instserial"; then
      echo "$progname: warning: no serial number on \`$libtool_m4'" 1>&2
    else
      # If the local macro has no serial number, we assume it's ancient.
      localserial=`grep '^# serial ' aclocal.m4 | grep 'A[MC]_PROG_LIBTOOL' | sed -e 's/^# serial \([0-9][0-9]*\).*$/\1/; q'`

      test -z "$localserial" && localserial=0

      if test "$localserial" -lt "$instserial"; then
	echo "You should $updatemsg."
      elif test "$localserial" -gt "$instserial"; then
	echo "$progname: \`$libtool_m4' is serial $instserial, less than $localserial in \`aclocal.m4'" 1>&2
	if test -z "$force"; then
	  echo "Use \`--force' to replace newer libtool files with this version." 1>&2
	  exit 1
	fi
	echo "To remain compatible, you should $updatemsg."
      fi
    fi
  else
    echo "You should $updatemsg."
  fi
    fi


# Change to the auxiliary directory.
if test "$auxdir" != .; then
  test -z "$automake" && echo "Putting files in AC_CONFIG_AUX_DIR, \`$auxdir'."
  test "x$dry_run" = x"yes" && echo "cd $auxdir"
  cd $auxdir || exit 1
fi

for file in $files; do
  if test -f "$file" && test -z "$force"; then
    test -z "$automake" && echo "$progname: \`$file' exists: use \`--force' to overwrite" 1>&2
    continue
  fi

  $rm $file
  if test -n "$ln_s" && $ln_s $pkgdatadir/$file $file; then :
  elif $cp $pkgdatadir/$file $file; then :
  else
    echo "$progname: cannot copy \`$pkgdatadir/$file' to \`$file'" 1>&2
    status=1
  fi
done

exit $status

# Local Variables:
# mode:shell-script
# sh-indentation:2
# End:
@


1.14
log
@sync

this change might introduce some breakage; I checked carefully
but can't test every port. It also introduces lots of fixes.
@
text
@d2 1
a2 1
# $MirBSD: contrib/gnu/libtool/libtoolize,v 1.1 2005/02/05 02:27:36 tg Exp $
@


1.13
log
@full sync
@
text
@d2 3
a4 4
# $MirBSD: contrib/gnu/libtool/libtoolize,v 1.15 2004/10/16 23:42:21 tg Exp $
# _MirBSD: contrib/gnu/libtool/libtoolize,v 1.15 2004/10/16 23:42:21 tg Exp $
# _MirBSD: contrib/gnu/libtool/libtoolize.in,v 1.11 2004/10/14 18:37:23 tg Exp $
#
d233 1
a233 1
fi
@


1.12
log
@sync
@
text
@@


1.11
log
@regen
@
text
@d2 2
a3 2
# $MirBSD: contrib/gnu/libtool/libtoolize,v 1.13 2004/10/14 18:58:59 tg Exp $
# _MirBSD: contrib/gnu/libtool/libtoolize,v 1.13 2004/10/14 18:58:59 tg Exp $
d37 1
a37 1
VERSION=1.5.8
d40 1
a40 1
pkgdatadir=${PORTSDIR}/infrastructure/db
@


1.10
log
@make update
@
text
@@


1.9
log
@Update to most recent MirLibtool based upon GNU Libtool 1.5.8;
this means mirlibtool-old dies.

XXX untested, yes I know stuff might break
@
text
@d2 3
a4 3
# $MirBSD: contrib/gnu/libtool/libtoolize,v 1.12 2004/08/10 01:19:14 tg Exp $
# _MirBSD: contrib/gnu/libtool/libtoolize,v 1.12 2004/08/10 01:19:14 tg Exp $
# _MirBSD: contrib/gnu/libtool/libtoolize.in,v 1.10 2004/08/10 01:18:09 tg Exp $
d14 2
a15 1
# the Free Software Foundation; version 2 of the License.
@


1.8
log
@actualize MirLibtool and MirGNUtools
XXX _gplwarn.c isn't copied automatically; porters can do that
XXX if needed; MODGNU_EXTRA_COPIES is the preferred way to do it ;)
@
text
@d1 4
a4 4
#!/bin/sh
# $MirBSD: contrib/gnu/libtool/libtoolize,v 1.10 2004/08/04 09:40:00 tg Exp $
# _MirBSD: contrib/gnu/libtool/libtoolize,v 1.10 2004/08/04 09:40:00 tg Exp $
# _MirBSD: contrib/gnu/libtool/libtoolize.in,v 1.5 2004/02/16 12:26:19 tg Exp $
d8 2
a9 3
#
# Copyright (c) 2004 Thorsten "mirabile" Glaser
# Copyright (C) 1996-2000 Free Software Foundation, Inc.
d36 4
a39 1
VERSION=1.4.3
d41 1
a41 3
# The @@aclocaldir is not substituted in MirLibtool on purpose.
pkgdatadir="/usr/ports/infrastructure/db"
libtool_m4="/usr/ports/infrastructure/db/libtool.m4"
d76 2
d84 4
d118 6
d157 1
a157 1
auxdirline=`egrep '^AC_CONFIG_AUX_DIR' $configure_ac 2>/dev/null`
d192 1
a192 1
  if egrep '^A[MC]_PROG_LIBTOOL' $configure_ac >/dev/null 2>&1; then :
d197 1
a197 1
  if egrep '^AC_PROG_RANLIB' $configure_ac >/dev/null 2>&1; then
d207 1
a207 1
  if egrep '^AC_DEFUN\(\[A[MC]_PROG_LIBTOOL' aclocal.m4 >/dev/null 2>&1; then
a232 4

  if grep '^AC_LIB_LTDL' $configure_ac >/dev/null 2>&1; then
    echo "$progname: warning: want ltdl.m4" 1>&2
  fi
d239 1
@


1.7
log
@sync
@
text
@d2 2
a3 2
# $MirBSD: contrib/gnu/libtool/libtoolize,v 1.9 2004/07/23 08:24:20 tg Exp $
# _MirBSD: contrib/gnu/libtool/libtoolize,v 1.9 2004/07/23 08:24:20 tg Exp $
@


1.6
log
@regenerate
XXX please test!
@
text
@d2 2
a3 2
# $MirBSD: contrib/gnu/libtool/libtoolize,v 1.8 2004/07/15 08:55:51 tg Exp $
# _MirBSD: contrib/gnu/libtool/libtoolize,v 1.8 2004/07/15 08:55:51 tg Exp $
@


1.5
log
@sync
@
text
@d2 3
a4 2
# $MirBSD: libtoolize.in,v 1.5 2004/02/16 12:26:19 tg Exp $
# _MirBSD: libtoolize.in,v 1.5 2004/02/16 12:26:19 tg Exp $
@


1.4
log
@sync tools with contrib/gnu/
@
text
@@


1.3
log
@sync
@
text
@d3 1
a3 1
# _MirBSD: contrib/gnu/libtool/libtoolize,v 1.5 2004/02/16 12:26:19 tg Exp $
@


1.2
log
@mirlibtool2-1.5 comes into MirPorts
tested to succeed with bochs
@
text
@@


1.1
log
@Update from Tag: MIRLIBTOOL_I

Also, add closefrom(2) to systrace.filter (I hope I got it right...)
@
text
@@

