head	1.20;
access;
symbols
	cvs-200405281530:1.1.1.8
	cvs-200402211630:1.1.1.7
	cvs-200401261625:1.1.1.7
	cvs-200401162142:1.1.1.7
	cvs-200301141450:1.1.1.7
	cvs-200312021610:1.1.1.6
	cvs-200311151930:1.1.1.6
	cvs-200310311830:1.1.1.6
	cvs-200310021000:1.1.1.6
	cvs-200309281111:1.1.1.6
	cvs-200309171515:1.1.1.6
	cvs-200308302005:1.1.1.6
	cvs-200308171200:1.1.1.6
	ctm-3449:1.1.1.6
	cvs-200307191610:1.1.1.6
	ctm-3416:1.1.1.6
	cvs-200307091500:1.1.1.6
	ctm-3389:1.1.1.6
	cvs-200306291800:1.1.1.6
	ctm-3369:1.1.1.6
	ctm-3341:1.1.1.6
	MIRBSD_5:1.1.1.6
	cvs-200306082100:1.1.1.6
	ctm-3316:1.1.1.5
	ctm-3272:1.1.1.4
	ctm-3264:1.1.1.3
	ctm-3258:1.1.1.3
	ctm-3257:1.1.1.2
	MIRBSD_4:1.1.1.1
	ctm-3200:1.1.1.1
	ctm-3188:1.1.1.1
	ctm-3155:1.1.1.1
	ctm-3132:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.20
date	2005.03.06.21.54.36;	author tg;	state Exp;
branches;
next	1.19;

1.19
date	2005.02.27.12.25.57;	author tg;	state Exp;
branches;
next	1.18;

1.18
date	2005.02.26.12.52.41;	author tg;	state Exp;
branches;
next	1.17;

1.17
date	2005.02.26.12.43.15;	author tg;	state Exp;
branches;
next	1.16;

1.16
date	2005.01.05.15.23.52;	author tg;	state Exp;
branches;
next	1.15;

1.15
date	2004.12.16.19.42.30;	author tg;	state Exp;
branches;
next	1.14;

1.14
date	2004.10.27.18.27.43;	author tg;	state Exp;
branches;
next	1.13;

1.13
date	2004.10.27.18.19.16;	author tg;	state Exp;
branches;
next	1.12;

1.12
date	2004.10.27.08.12.56;	author tg;	state Exp;
branches;
next	1.11;

1.11
date	2004.10.12.15.24.26;	author tg;	state Exp;
branches;
next	1.10;

1.10
date	2004.10.10.21.16.46;	author tg;	state Exp;
branches;
next	1.9;

1.9
date	2004.10.10.16.55.38;	author tg;	state Exp;
branches;
next	1.8;

1.8
date	2004.10.07.17.49.26;	author tg;	state Exp;
branches;
next	1.7;

1.7
date	2004.09.11.18.01.15;	author tg;	state Exp;
branches;
next	1.6;

1.6
date	2004.08.24.17.22.33;	author wbx;	state Stab;
branches;
next	1.5;

1.5
date	2004.05.23.21.34.22;	author tg;	state Exp;
branches;
next	1.4;

1.4
date	2004.05.16.20.27.18;	author tg;	state Exp;
branches;
next	1.3;

1.3
date	2004.01.14.19.35.17;	author tg;	state Exp;
branches;
next	1.2;

1.2
date	2003.06.25.20.32.35;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2003.03.22.19.48.58;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2003.03.22.19.48.58;	author tg;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2003.05.06.12.33.08;	author tg;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	2003.05.06.14.22.02;	author tg;	state Exp;
branches;
next	1.1.1.4;

1.1.1.4
date	2003.05.21.18.16.43;	author tg;	state Exp;
branches;
next	1.1.1.5;

1.1.1.5
date	2003.06.05.16.36.55;	author tg;	state Exp;
branches;
next	1.1.1.6;

1.1.1.6
date	2003.06.08.22.48.30;	author tg;	state Exp;
branches;
next	1.1.1.7;

1.1.1.7
date	2004.01.14.15.25.20;	author tg;	state Exp;
branches;
next	1.1.1.8;

1.1.1.8
date	2004.05.28.16.10.18;	author bsiegert;	state Exp;
branches;
next	;


desc
@@


1.20
log
@specify ${SHELL} explicitly, just in case; update comments
@
text
@# $MirBSD: ports/Makefile,v 1.19 2005/02/27 12:25:57 tg Exp $
# $OpenBSD: Makefile,v 1.43 2003/12/15 17:56:40 espie Exp $
# $FreeBSD: Makefile,v 1.36 1997/10/04 15:54:31 jkh Exp $
#-
# Copyright (c) 2004, 2005
#	The MirOS Project <miros-discuss@@66h.42h.de>
#	and its contributors
#
# Licensee is hereby permitted to deal in this work without restric-
# tion, including unlimited rights to use, publicly perform, modify,
# merge, distribute, sell, give away or sublicence, provided all co-
# pyright notices above, these terms and the disclaimer are retained
# in all redistributions or reproduced in accompanying documentation
# or other materials provided with binary redistributions.
#
# Licensor hereby provides this work "AS IS" and WITHOUT WARRANTY of
# any kind, expressed or implied, to the maximum extent permitted by
# applicable law, but with the warranty of being written without ma-
# licious intent or gross negligence; in no event shall licensor, an
# author or contributor be held liable for any damage, direct, indi-
# rect or other, however caused, arising in any way out of the usage
# of this work, even if advised of the possibility of such damage.
#
# For a complete list of people who contributed to MirPorts read the
# CVS ChangeLog, and the OpenBSD CVS ChangeLogs.
# For a list of MirOS Project members please read the documentation,
# it comes with a standard MirOS installation and is available via a
# CVSweb mirror (src/share/doc/legal/1stREAD) as well.
# All patches except forward ed(1) diffs are also covered by the li-
# cence of the file to be patched. Some of the files in the MirPorts
# Framework are covered by different terms of use. Ports are not co-
# vered by specific terms since they're too small to be worth it.


PKGPATH=
.if defined(key) || defined(name) || defined(category) || defined(author)

# set up subdirs from the index, assume it's up-to-date
_CMD=perl ${.CURDIR}/infrastructure/build/index-retrieve index='${.CURDIR}/INDEX'
.  if defined(key)
_CMD+=key='${key}'
.  endif
.  if defined(name)
_CMD+=maintainer='${name}'
.  endif
.  if defined(category)
_CMD+=category='${category}'
.  endif
.  if defined(maintainer)
_CMD+=maintainer='${maintainer}'
.  endif
SUBDIR != ${_CMD}
_MANUAL_SUBDIR=	yes
.elif defined(SUBDIRLIST)
SUBDIR != sed -e 's,[ 	]*\#.*,,' -e '/^[ 	]*$$/d' ${SUBDIRLIST}
_MANUAL_SUBDIR=	yes
.endif

PORTSTOP?=	yes

.if !make(setup)
.  include <bsd.port.subdir.mk>
.endif
.ifndef BSD_OWN_MK
.  include <bsd.own.mk>
.endif

index:
	@@rm -f ${.CURDIR}/INDEX
	@@${MAKE} ${.CURDIR}/INDEX

${.CURDIR}/INDEX:
	@@echo "Generating INDEX..."
	@@${MAKE} describe ECHO_MSG="echo 1>&2" > ${.CURDIR}/INDEX
	@@echo "Done."

print-index:	${.CURDIR}/INDEX
	@@awk -F\| '{ printf("Port:\t%s\nPath:\t%s\nInfo:\t%s\nMaint:\t%s\nIndex:\t%s\nL-deps:\t%s\nB-deps:\t%s\nR-deps:\t%s\n\n", $$1, $$2, $$4, $$6, $$7, $$8, $$9, $$10); }' < ${.CURDIR}/INDEX

print-licenses: ${.CURDIR}/INDEX
	@@printf "Port                                    PC PF DC DF Maint\n"
	@@awk -F\| '{printf("%-40.39s%-3.2s%-3.2s%-3.2s%-3.2s%-25.25s\n",$$2,$$12,$$13,$$14,$$15,$$6);}' < ${.CURDIR}/INDEX

search:	${.CURDIR}/INDEX
.if !defined(key) && !defined(name)
	@@echo "The search target requires a keyword or name parameter,"
	@@echo "e.g.: \"make search key=somekeyword\" \"make search name=somename\""
.else
. if defined(key)
	@@egrep -i -- "${key}" ${.CURDIR}/INDEX | awk -F\| '{ printf("Port:\t%s\nPath:\t%s\nInfo:\t%s\nMaint:\t%s\nIndex:\t%s\nL-deps:\t%s\nB-deps:\t%s\nR-deps:\t%s\nArchs:\t%s\n\n", $$1, $$2, $$4, $$6, $$7, $$8, $$9, $$10, $$11); }'
. else
	@@awk -F\| '$$1 ~ /${name}/ { printf("Port:\t%s\nPath:\t%s\nInfo:\t%s\nMaint:\t%s\nIndex:\t%s\nL-deps:\t%s\nB-deps:\t%s\nR-deps:\t%s\nArchs:\t%s\n\n", $$1, $$2, $$4, $$6, $$7, $$8, $$9, $$10, $$11); }' ${.CURDIR}/INDEX
. endif
.endif


MIRROR_MK?= ${.CURDIR}/distfiles/Makefile

mirror-maker:
	@@mkdir -p ${MIRROR_MK:H}
# Indirection needed for broken OSes that don't grok this exec
	@@echo "EXEC=exec" >${MIRROR_MK}
	@@echo "default:: ftp cdrom" >>${MIRROR_MK}
	@@echo ".PHONY: default all ftp cdrom" >>${MIRROR_MK}
	@@_DONE_FILES=`mktemp /tmp/depends.XXXXXXXXX|| exit 1`; \
	export _DONE_FILES; \
	trap "rm -f $${_DONE_FILES}" 0 1 2 3 13 15; \
	${MAKE} fetch-makefile \
		ECHO_MSG='echo >&2' \
		>>${MIRROR_MK}

homepages.html:
	@@echo '<html><ul>' >$@@
	@@${MAKE} homepage-links ECHO_MSG='echo >&2' >>$@@
	@@echo '</ul></html>' >>$@@

DISTFILES_DB?=${.CURDIR}/infrastructure/db/locate.database

distfiles-update-locatedb:
	@@PORTSDIR=${.CURDIR} ${SHELL} \
	    ${.CURDIR}/infrastructure/fetch/distfiles-update-locatedb \
	    ${DISTFILES_DB}

portupgrade: index
	@@PORTSDIR=${.CURDIR} ${SHELL} \
	    ${.CURDIR}/infrastructure/build/out-of-date

setup: infrastructure/stools/Setup.sh
	env ourCC='${CC}' MAKE='${MAKE}' SHELL='${SHELL}' ${SUDO} \
	    ${SHELL} ${.CURDIR}/infrastructure/stools/Setup.sh

CVSROOT?=/ocvs
cvsup:
	cd ${.CURDIR} && cvs -Rqz3 -d ${CVSROOT} up -PAd

.PHONY: mirror-maker index search distfiles-update-locatedb \
	print-licenses print-index portupgrade setup cvsup
@


1.19
log
@add a 'make cvsup' target like in src/
@
text
@d1 1
a1 1
# $MirBSD: ports/Makefile,v 1.18 2005/02/26 12:52:41 tg Exp $
d26 3
a28 2
# For a list of MirOS Project members please use the MirOS CVSweb to
# read the file src/share/man/man0/COPYRIGHT.
d31 2
a32 1
# Framework or single ports are covered by different terms of use.
d129 1
a129 1
	env ourCC='${CC}' MAKE='${MAKE}' ${SUDO} \
@


1.18
log
@use $MAKE
@
text
@d1 1
a1 1
# $MirBSD: ports/Makefile,v 1.17 2005/02/26 12:43:15 tg Exp $
d130 4
d135 1
a135 1
	print-licenses print-index portupgrade setup
@


1.17
log
@switch Makefiles using <bsd.port.subdir.mk> to be auto-generated
woooooah bsiegert@@
@
text
@d1 1
a1 1
# $MirBSD: ports/Makefile,v 1.16 2005/01/05 15:23:52 tg Exp $
d118 3
a120 1
	@@PORTSDIR=${.CURDIR} /bin/sh ${.CURDIR}/infrastructure/fetch/distfiles-update-locatedb ${DISTFILES_DB}
d123 2
a124 1
	@@PORTSDIR=${.CURDIR} /bin/sh ${.CURDIR}/infrastructure/build/out-of-date
d127 1
a127 1
	env ourCC='${CC}' ${SUDO} \
@


1.16
log
@move Setup.sh out of the way
requested by bsiegert@@ fairly some time ago
@
text
@d1 1
a1 1
# $MirBSD: ports/Makefile,v 1.15 2004/12/16 19:42:30 tg Exp $
d5 1
a5 1
# Copyright (c) 2004
d10 5
a14 5
# tion, including unlimited rights to use, publically perform, modi-
# fy, merge, distribute, sell, give away or sublicence, provided the
# above copyright notices, these terms and the disclaimer are retai-
# ned in all redistributions, or reproduced in accompanying documen-
# tation or other materials provided with binary redistributions.
d22 1
a22 1
# of covered work, even if advised of the possibility of such damage.
d51 1
d54 1
a54 39
.else
SUBDIR += archivers
SUBDIR += astro
SUBDIR += audio
SUBDIR += benchmarks
SUBDIR += biology
SUBDIR += books
SUBDIR += cad
SUBDIR += chemistry
SUBDIR += chinese
SUBDIR += comms
SUBDIR += converters
SUBDIR += databases
SUBDIR += devel
SUBDIR += editors
SUBDIR += education
SUBDIR += emulators
SUBDIR += games
SUBDIR += graphics
SUBDIR += japanese
SUBDIR += korean
SUBDIR += lang
SUBDIR += mailnews
SUBDIR += math
SUBDIR += mbone
SUBDIR += misc
SUBDIR += multimedia
SUBDIR += net
SUBDIR += palm
SUBDIR += plan9
SUBDIR += print
SUBDIR += productivity
SUBDIR += russian
SUBDIR += security
SUBDIR += shells
SUBDIR += sysutils
SUBDIR += textproc
SUBDIR += www
SUBDIR += x11
@


1.15
log
@* document that people must use 'make setup' in order
  to install the infrastructure - even #7-stable users
  - agreed bsiegert@@ after quite some discussion
* create a point in time which checks for that. manual
  installation will not work any more, because a new
  variable set in /etc/mk.conf will be checked by the
  <*.mk> files now.
* the new variable is ${_CC_IS_GCC} which contains
  either "no" or the GCC version if ${CC} is a gcc
  at the time of 'make setup' execution - this means
  #7 users might have to type 'make setup MKC_EGCC=yes'
  if they are going to use that.
  - prodded by sap@@ for GNU emacs
  and no, I don't know if you can use ${...} >= "3.4"
* who volunteers to update /?ports in www?
@
text
@d1 1
a1 1
# $MirBSD: ports/Makefile,v 1.13 2004/10/27 18:19:16 tg Exp $
d160 3
a162 2
setup: Setup.sh
	env ourCC='${CC}' ${SUDO} ${SHELL} ${.CURDIR}/Setup.sh
@


1.14
log
@* rename setup.sh to Setup.sh for easier tab-completing
* nuke spaces and what's after them from uname -s output
@
text
@d161 1
a161 1
	${SUDO} ${SHELL} ${.CURDIR}/Setup.sh
@


1.13
log
@for SUDO and others, ensure <bsd.own.mk> (and mk.conf) are always pulled
@
text
@d1 1
a1 1
# $MirBSD: ports/Makefile,v 1.12 2004/10/27 08:12:56 tg Exp $
d160 2
a161 2
setup: setup.sh
	${SUDO} ${SHELL} ${.CURDIR}/setup.sh
@


1.12
log
@Makefile: allow to 'make setup' before <bsd.port.subdir.mk> exists
	  (hen-and-egg problem)
	  Reported by Benny "zirk" Adams
setup.sh: allow PORTSDIR!=/usr/ports even on MirOS
@
text
@d1 1
a1 1
# $MirBSD: ports/Makefile,v 1.11 2004/10/12 15:24:26 tg Exp $
d98 3
@


1.11
log
@Makefile:
- sudo automatically for 'make setup' where needed
setup.sh:
- fix: cannot use 'break' to break out of case stmt
- fix display of informative msg at end of exec
- use mode 664 for stuff in infrastructure/
@
text
@d1 1
a1 1
# $MirBSD: ports/Makefile,v 1.10 2004/10/10 21:16:46 tg Exp $
d96 3
a98 1
.include <bsd.port.subdir.mk>
@


1.10
log
@add 'make setup' target ;)
@
text
@d1 1
a1 1
# $MirBSD: ports/Makefile,v 1.9 2004/10/10 16:55:38 tg Exp $
d156 1
a156 1
	${SHELL} ${.CURDIR}/setup.sh
@


1.9
log
@* move licencing information from ports/README to ports/Makefile
* remove ports/README: it's mostly outdated; the information has
  been moved into manual pages and stuff in ports/infrastructure
  and the OpenBSD ppl have removed the file as well
* There is no "MirPorts Framework team" since ekkoBSD decided to
  use NetBSD(TM) pkgsrc and not contribute to MirPorts, and thus
  only members of or contributors to the MirOS Project take care
  of the framework. (The MirPorts Framework, both infrastructure
  and ports, are considered part of MirOS.)
@
text
@d1 1
a1 1
# $MirBSD: ports/Makefile,v 1.8 2004/10/07 17:49:26 tg Exp $
d155 3
d159 1
a159 1
	print-licenses print-index portupgrade
@


1.8
log
@move ports/mail/* and ports/news/* to ports/mailnews/*
@
text
@d1 1
a1 1
# $MirBSD: ports/Makefile,v 1.7 2004/09/11 18:01:15 tg Exp $
d5 27
a31 1
# MirPorts is licenced material, please refer to the README file!
@


1.7
log
@post-chkdirs-recursive cleanup... these weren't connected at all!
@
text
@d1 1
a1 1
# $MirBSD: ports/Makefile,v 1.6 2004/08/24 17:22:33 wbx Stab $
a46 1
SUBDIR += java
d49 1
a49 1
SUBDIR += mail
a54 1
SUBDIR += news
@


1.6
log
@add multimedia section, tg@@ ok
@
text
@d1 1
a1 1
# $MirBSD: Makefile,v 1.5 2004/05/23 21:34:22 tg Exp $
d32 1
@


1.5
log
@simplify (c) and move it to ports/README from all the single
files it was spread before
@
text
@d1 1
a1 1
# $MirBSD: ports/Makefile,v 1.4 2004/05/16 20:27:18 tg Exp $
d53 1
@


1.4
log
@+chemistry
@
text
@d1 1
a1 1
# $MirBSD: ports/Makefile,v 1.3 2004/01/14 19:35:17 tg Exp $
d4 2
a5 3

# MirPorts is under the MirOS licence.
# Read ./infrastructure/mk/bsd.port.mk to find out more!
@


1.3
log
@fearless and careful (at least in infrastructure/) attempt to merge [a-n]
of ports and take care of the changes.
expect _major_ breakage. porters, check your ports. I might have been tired.

The following things have not been updated:
* databases/db
* databases/openldap
* mail/mutt
* mail/p5-Mail-SpamAssassin
* net/irssi

Maintainers, to merge the conflicts, use
$ cd databases/openldap; cvs -d $CVSROOT up -PAd -jcvs-200312021610 -jcvs-200301141450
then find and fix conflicts.

Note: some files might have been added or "marked for deletion".
No need to restate that CVS sucks, this is already consensus.
So please check the "cvs up" output carefully (not only rcsmerge,
but also cvs and U ones - and M, you shouldn't include local mods).
@
text
@d1 1
a1 1
# $MirBSD$
d35 1
a44 1
#SUBDIR += german
a64 1
#SUBDIR += vietnamese
@


1.2
log
@add a portupgrade target, like that of ViehBSE

requested by thuglife (Róbert Nagy) in IRC,
and many other lusers and DAUs
@
text
@d1 2
a2 1
# $OpenBSD: Makefile,v 1.42 2003/06/06 15:52:50 pvalchev Exp $
d4 3
a6 1
#
d111 4
a114 1
	@@${MAKE} fetch-makefile \
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2002/08/26 22:33:22 brad Exp $
d6 1
a6 1
.if defined(key) || defined(category) || defined(author)
d13 3
d30 1
a64 3
.  if exists(mystuff) && !make(describe) && !make(fetch-makefile)
SUBDIR += mystuff
.  endif
d88 3
a90 3
.if !defined(key)
	@@echo "The search target requires a keyword parameter,"
	@@echo "e.g.: \"make search key=somekeyword\""
d92 5
a96 1
	@@egrep -i "${key}" ${.CURDIR}/INDEX | awk -F\| '{ printf("Port:\t%s\nPath:\t%s\nInfo:\t%s\nMaint:\t%s\nIndex:\t%s\nL-deps:\t%s\nB-deps:\t%s\nR-deps:\t%s\nArchs:\t%s\n\n", $$1, $$2, $$4, $$6, $$7, $$8, $$9, $$10, $$11); }'
d122 3
d126 1
a126 1
	print-licenses print-index
@


1.1.1.1
log
@Import OpenBSD 3.3 ports repository from CTM 3132 the first time
This continues opening an OpenBSD-mirabile (aka MirBSD) repository.

### MirBSD is:
# Copyright (c) 1982-2003 by Thorsten "mirabile" Glaser <x86@@ePost.de>
# Copyright © 1968-2003  The authors of And contributors to UNIX®, the
#       C Language, BSD/Berkeley Unix; 386BSD, NetBSD 1.1 and OpenBSD.
#
# Anyone who obtained a copy of this work is hereby permitted to freely use,
# distribute, modify, merge, sublicence, give away or sell it as long as the
# authors are given due credit and the following notice is retained:
#
# This work is provided "as is", with no explicit or implicit warranty what-
# soever. Use it only at your own risk. In no event may an author or contri-
# butor be held liable for any damage, directly or indirectly, that origina-
# ted through or is caused by creation or modification of this work.

MirBSD is my private tree. MirBSD does not differ very much from OpenBSD
and intentionally tracks OpenBSD. That's why it _is_ OpenBSD, just not the
official one. It's like with DarrenBSD.

At time of this writing, no advertising for MirBSD must be done,
because the advertising clause has not yet been sorted out.

http://templeofhate.com/tglaser/MirBSD/index.php
@
text
@@


1.1.1.2
log
@Sync egcs against OpenBSD-current, since I have to rebuild all ports anyways
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.3 2000/06/28 00:14:44 espie Exp $
d5 62
a66 3
SUBDIR += dejagnu
SUBDIR += stable
SUBDIR += snapshot
d69 50
@


1.1.1.3
log
@Import OpenBSD ports CVS as of roughly 12:00-14:00 UTC today,
which should be equivalent to CTM delta 3258.
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.38 2002/08/26 22:33:22 brad Exp $
# $FreeBSD: Makefile,v 1.36 1997/10/04 15:54:31 jkh Exp $
#
d3 3
a5 62
PKGPATH=
.if defined(key) || defined(category) || defined(author)

# set up subdirs from the index, assume it's up-to-date
_CMD=perl ${.CURDIR}/infrastructure/build/index-retrieve index='${.CURDIR}/INDEX'
.  if defined(key)
_CMD+=key='${key}'
.  endif
.  if defined(category)
_CMD+=category='${category}'
.  endif
.  if defined(maintainer)
_CMD+=maintainer='${maintainer}'
.  endif
SUBDIR != ${_CMD}
.elif defined(SUBDIRLIST)
SUBDIR != sed -e 's,[ 	]*\#.*,,' -e '/^[ 	]*$$/d' ${SUBDIRLIST}
.else
SUBDIR += archivers
SUBDIR += astro
SUBDIR += audio
SUBDIR += benchmarks
SUBDIR += cad
SUBDIR += chinese
SUBDIR += comms
SUBDIR += converters
SUBDIR += databases
SUBDIR += devel
SUBDIR += editors
SUBDIR += education
SUBDIR += emulators
SUBDIR += games
#SUBDIR += german
SUBDIR += graphics
SUBDIR += japanese
SUBDIR += java
SUBDIR += korean
SUBDIR += lang
SUBDIR += mail
SUBDIR += math
SUBDIR += mbone
SUBDIR += misc
SUBDIR += net
SUBDIR += news
SUBDIR += palm
SUBDIR += plan9
SUBDIR += print
SUBDIR += productivity
SUBDIR += russian
SUBDIR += security
SUBDIR += shells
SUBDIR += sysutils
SUBDIR += textproc
#SUBDIR += vietnamese
SUBDIR += www
SUBDIR += x11
.  if exists(mystuff) && !make(describe) && !make(fetch-makefile)
SUBDIR += mystuff
.  endif
.endif

PORTSTOP?=	yes
a7 50

index:
	@@rm -f ${.CURDIR}/INDEX
	@@${MAKE} ${.CURDIR}/INDEX

${.CURDIR}/INDEX:
	@@echo "Generating INDEX..."
	@@${MAKE} describe ECHO_MSG="echo 1>&2" > ${.CURDIR}/INDEX
	@@echo "Done."

print-index:	${.CURDIR}/INDEX
	@@awk -F\| '{ printf("Port:\t%s\nPath:\t%s\nInfo:\t%s\nMaint:\t%s\nIndex:\t%s\nL-deps:\t%s\nB-deps:\t%s\nR-deps:\t%s\n\n", $$1, $$2, $$4, $$6, $$7, $$8, $$9, $$10); }' < ${.CURDIR}/INDEX

print-licenses: ${.CURDIR}/INDEX
	@@printf "Port                                    PC PF DC DF Maint\n"
	@@awk -F\| '{printf("%-40.39s%-3.2s%-3.2s%-3.2s%-3.2s%-25.25s\n",$$2,$$12,$$13,$$14,$$15,$$6);}' < ${.CURDIR}/INDEX

search:	${.CURDIR}/INDEX
.if !defined(key)
	@@echo "The search target requires a keyword parameter,"
	@@echo "e.g.: \"make search key=somekeyword\""
.else
	@@egrep -i "${key}" ${.CURDIR}/INDEX | awk -F\| '{ printf("Port:\t%s\nPath:\t%s\nInfo:\t%s\nMaint:\t%s\nIndex:\t%s\nL-deps:\t%s\nB-deps:\t%s\nR-deps:\t%s\nArchs:\t%s\n\n", $$1, $$2, $$4, $$6, $$7, $$8, $$9, $$10, $$11); }'
.endif


MIRROR_MK?= ${.CURDIR}/distfiles/Makefile

mirror-maker:
	@@mkdir -p ${MIRROR_MK:H}
# Indirection needed for broken OSes that don't grok this exec
	@@echo "EXEC=exec" >${MIRROR_MK}
	@@echo "default:: ftp cdrom" >>${MIRROR_MK}
	@@echo ".PHONY: default all ftp cdrom" >>${MIRROR_MK}
	@@${MAKE} fetch-makefile \
		ECHO_MSG='echo >&2' \
		>>${MIRROR_MK}

homepages.html:
	@@echo '<html><ul>' >$@@
	@@${MAKE} homepage-links ECHO_MSG='echo >&2' >>$@@
	@@echo '</ul></html>' >>$@@

DISTFILES_DB?=${.CURDIR}/infrastructure/db/locate.database

distfiles-update-locatedb:
	@@PORTSDIR=${.CURDIR} /bin/sh ${.CURDIR}/infrastructure/fetch/distfiles-update-locatedb ${DISTFILES_DB}

.PHONY: mirror-maker index search distfiles-update-locatedb \
	print-licenses print-index
@


1.1.1.4
log
@Import OpenBSD-current ports tree
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2003/05/12 22:15:53 pb Exp $
d6 1
a6 1
.if defined(key) || defined(name) || defined(category) || defined(author)
a12 3
.  if defined(name)
_CMD+=maintainer='${name}'
.  endif
d87 3
a89 3
.if !defined(key) && !defined(name)
	@@echo "The search target requires a keyword or name parameter,"
	@@echo "e.g.: \"make search key=somekeyword\" \"make search name=somename\""
d91 1
a91 5
. if defined(key)
	@@egrep -i -- "${key}" ${.CURDIR}/INDEX | awk -F\| '{ printf("Port:\t%s\nPath:\t%s\nInfo:\t%s\nMaint:\t%s\nIndex:\t%s\nL-deps:\t%s\nB-deps:\t%s\nR-deps:\t%s\nArchs:\t%s\n\n", $$1, $$2, $$4, $$6, $$7, $$8, $$9, $$10, $$11); }'
. else
	@@awk -F\| '$$1 ~ /${name}/ { printf("Port:\t%s\nPath:\t%s\nInfo:\t%s\nMaint:\t%s\nIndex:\t%s\nL-deps:\t%s\nB-deps:\t%s\nR-deps:\t%s\nArchs:\t%s\n\n", $$1, $$2, $$4, $$6, $$7, $$8, $$9, $$10, $$11); }' ${.CURDIR}/INDEX
. endif
@


1.1.1.5
log
@Import latest OpenBSD CVS tree by CTM in order
to sync the base system and ports tree with Them.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2003/05/28 13:47:04 avsm Exp $
a29 1
SUBDIR += books
@


1.1.1.6
log
@Import OpenBSD CVS of roughly 2000-2200 UTC. Last import before release.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2003/06/06 15:52:50 pvalchev Exp $
d65 3
@


1.1.1.7
log
@Now we can update MirPorts from OpenBSD ports tree again,
that we have fixed pkg_install tools accordingly in both
stable and current, and that these tools are compatible.

Consider MirPorts locked until next commit of ports/INDEX,v
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2003/12/15 17:56:40 espie Exp $
d108 1
a108 4
	@@_DONE_FILES=`mktemp /tmp/depends.XXXXXXXXX|| exit 1`; \
	export _DONE_FILES; \
	trap "rm -f $${_DONE_FILES}" 0 1 2 3 13 15; \
	${MAKE} fetch-makefile \
@


1.1.1.8
log
@Import OpenBSD ports tree checked out from anoncvs.ca.openbsd.org at
2004-05-28 15:30 UTC.

Lots of SECURITY fixes, at least:

 * databases/mysql: tmpfile issue
 * www/squid: acl bypass
 * games/xonix: privilege escalation
 * archivers/lha: buffer overflow
 * mail/exim: buffer overflows
 * net/rsync: path checking issue
 * net/icecast: buffer overflow
 * www/opera
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2004/05/07 09:04:21 xsa Exp $
a29 1
SUBDIR += biology
@


